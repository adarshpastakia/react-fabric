"use strict";(self.webpackChunkreact_fabric=self.webpackChunkreact_fabric||[]).push([[5401],{"./packages/form/stories/Playground.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Playground:()=>Playground,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Playground_stories});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),esm=__webpack_require__("./packages/core/dist/esm/index.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),dist=__webpack_require__("./node_modules/@monaco-editor/react/dist/index.mjs"),dist_esm=__webpack_require__("./packages/utilities/dist/esm/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__("./node_modules/react/index.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),CodeEditor_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./packages/monaco/dist/esm/components/CodeEditor.module.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(CodeEditor_module.A,options);const components_CodeEditor_module=CodeEditor_module.A&&CodeEditor_module.A.locals?CodeEditor_module.A.locals:void 0;var CodeEditor=function CodeEditor(_ref){var ref=_ref.ref,value=_ref.value,readOnly=_ref.readOnly,onChange=_ref.onChange,_ref$language=_ref.language,language=void 0===_ref$language?"json":_ref$language,_useState=(0,react.useState)(),_useState2=(0,slicedToArray.A)(_useState,2),editorRef=_useState2[0],setEditorRef=_useState2[1],_useState3=(0,react.useState)(),_useState4=(0,slicedToArray.A)(_useState3,2),monacoRef=_useState4[0],setMonacoRef=_useState4[1],isDark=(0,esm.Yf)(),_useState5=(0,react.useState)(""),_useState6=(0,slicedToArray.A)(_useState5,2),theme=_useState6[0],setTheme=_useState6[1];(0,react.useLayoutEffect)((function(){editorRef&&setTheme(isDark?"vs-dark":"light")}),[isDark,editorRef]);var resizeHandler=(0,react.useCallback)((function(size){return null==editorRef?void 0:editorRef.layout(size)}),[editorRef]),containerRef=(0,esm.wY)(resizeHandler),deferredValue=(0,react.useDeferredValue)(value),codeValue=(0,react.useMemo)((function(){return(0,dist_esm.Kg)(deferredValue)?deferredValue:JSON.stringify(deferredValue,null,4)}),[deferredValue]),handleChange=(0,esm.d7)(onChange,[onChange]);return(0,react.useImperativeHandle)(ref,(function(){return{getValue:function getValue(){return null==editorRef?void 0:editorRef.getValue()},validate:function validate(){var model=null==editorRef?void 0:editorRef.getModel();if(model){var markers=null==monacoRef?void 0:monacoRef.editor.getModelMarkers({owner:model.getLanguageId()});return 0===(null==markers?void 0:markers.length)}return!0}}}),[]),(0,jsx_runtime.jsx)(esm.wn,{children:(0,jsx_runtime.jsx)("div",{ref:containerRef,className:classnames_default()(components_CodeEditor_module.codeEditor,"area-content"),children:(0,jsx_runtime.jsx)(dist.Ay,{onMount:function onMount(e,m){return[!!e&&setEditorRef(e),!!m&&setMonacoRef(m)]},value:codeValue,language,onChange:handleChange,theme,className:components_CodeEditor_module.editor,options:{readOnly,wordWrap:"on",fontFamily:'Menlo, Monaco, "Courier New", monospace'}})})})},src=__webpack_require__("./packages/form/src/index.ts");const Playground_stories={component:src.lV,title:"@form/Playground",parameters:{layout:"fullscreen",controls:{exclude:"children"}}},defaultSchema=[{id:"name",label:"Name",datatype:"string",required:!0},{id:"age",label:"Age",datatype:"number",required:!0,min:16,max:65},{id:"skills",label:"skills",datatype:"string",required:!0,multiple:!0},{id:"range",label:"range",datatype:"range",required:!0,min:1,max:10,step:.5},{id:"notes",label:"notes",datatype:"text"},{id:"option",label:"Option",datatype:"string",options:["One","Two","Three"]},{id:"avatar",label:"avatar",datatype:"file"},{id:"agree",label:"agreement?",datatype:"boolean"}],Playground={render:args=>{const[schema,setSchema]=(0,react.useState)(defaultSchema),{formDef,schemaDef}=(0,src.Pv)(schema),schemaValue=(0,react.useMemo)((()=>JSON.stringify(schema,null,4)),[schema]),changeSchema=(0,react.useCallback)((val=>{try{setSchema(JSON.parse(val??"[]"))}catch{}}),[]);return(0,jsx_runtime.jsx)("div",{className:"min-h-[600px]",children:(0,jsx_runtime.jsxs)(esm.LM,{children:[(0,jsx_runtime.jsx)(esm.Y9,{className:"px-2 py-1 bg-base",children:(0,jsx_runtime.jsx)(esm.hE,{children:"Form Builder"})}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 overflow-hidden area-content p-2 gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"grid rounded-capped outline overflow-hidden bg-base",style:{gridTemplate:'"content" 1fr / 1fr'},children:(0,jsx_runtime.jsx)(CodeEditor,{value:schemaValue,onChange:changeSchema})}),(0,jsx_runtime.jsx)("div",{className:"overflow-auto p-6 bg-base outline rounded-capped",children:(0,jsx_runtime.jsx)(src.lV,{schema:schemaDef,children:formDef})})]})]})})},args:{}},__namedExportsOrder=["Playground"];Playground.parameters={...Playground.parameters,docs:{...Playground.parameters?.docs,source:{originalSource:'{\n  render: args => {\n    const [schema, setSchema] = useState<AnyObject[]>(defaultSchema);\n    const {\n      formDef,\n      schemaDef\n    } = useFormBuilder(schema);\n    const schemaValue = useMemo(() => JSON.stringify(schema, null, 4), [schema]);\n    const changeSchema = useCallback((val?: string) => {\n      try {\n        setSchema(JSON.parse(val ?? "[]"));\n      } catch {\n        //\n      }\n    }, []);\n    return <div className="min-h-[600px]">\n        <Viewport>\n          <Header className="px-2 py-1 bg-base">\n            <Title>Form Builder</Title>\n          </Header>\n          <div className="grid grid-cols-2 overflow-hidden area-content p-2 gap-2">\n            <div className="grid rounded-capped outline overflow-hidden bg-base" style={{\n            gridTemplate: `"content" 1fr / 1fr`\n          }}>\n              <CodeEditor value={schemaValue} onChange={changeSchema} />\n            </div>\n            <div className="overflow-auto p-6 bg-base outline rounded-capped">\n              <Form schema={schemaDef}>{formDef}</Form>\n            </div>\n          </div>\n        </Viewport>\n      </div>;\n  },\n  args: {}\n}',...Playground.parameters?.docs?.source}}}},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./packages/monaco/dist/esm/components/CodeEditor.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"@layer util{.bL3zkOOukzVicBejJjmE{direction:ltr;overflow:hidden;}.bL3zkOOukzVicBejJjmE .u6sLbLS6bARCfiZpgHQS>.monaco-editor{--vscode-menu-background:color-mix(in lab, color(from var(--tint) srgb r g b / 1) 10%,  color(from var(--fabric-bg) srgb r g b / 1))!important;--vscode-menu-border:color-mix(in lab, color(from var(--fabric-bg) srgb r g b / 1) 65%,  color(from var(--tint) srgb r g b / 1))!important;--vscode-menu-selectionBackground:color(from var(--primary) srgb r g b/80%)!important;--vscode-editor-background:var(--fabric-bg)!important;--vscode-editor-foreground:var(--fabric-text)!important;--vscode-breadcrumb-background:var(--fabric-bg)!important;--vscode-editorGutter-background:var(--fabric-bg)!important;--vscode-minimapSlider-background:color(from var(--tint) srgb r g b/10%)!important;--vscode-minimapSlider-hoverBackground:color(from var(--tint) srgb r g b/15%)!important;--vscode-minimapSlider-activeBackground:color(from var(--tint) srgb r g b/20%)!important;--vscode-input-border:var(--primary)!important;--vscode-editorStickyScroll-background:var(--fabric-bg)!important;--vscode-editorMarkerNavigation-background:var(--fabric-bg)!important;--vscode-editor-wordHighlightTextBackground:color(from color-mix(in lab, color(from var(--accent) srgb r g b / 1) 62%,  color(from var(--fabric-text) srgb r g b / 1)) srgb r g b/20%)!important}.bL3zkOOukzVicBejJjmE .u6sLbLS6bARCfiZpgHQS .minimap-decorations-layer{background-color:color(from var(--fabric-bg) srgb r g b/50%)}.bL3zkOOukzVicBejJjmE .u6sLbLS6bARCfiZpgHQS .folded-background{opacity:.5}.bL3zkOOukzVicBejJjmE .u6sLbLS6bARCfiZpgHQS .monaco-findInput textarea{min-height:unset;resize:none}.bL3zkOOukzVicBejJjmE .u6sLbLS6bARCfiZpgHQS span{padding:0}.tX0oDkKeWkO5MiEOfVQZ{--tw-bg-opacity:1;background-color:color-mix(in lab, color(from var(--fabric-bg) srgb r g b / var(--tw-bg-opacity)) 99%,  color(from var(--tint) srgb r g b / var(--tw-bg-opacity)));}}","",{version:3,sources:["webpack://./packages/monaco/dist/esm/components/CodeEditor.module.css"],names:[],mappings:"AAAA,YAAY,sBAAY,aAAa,CAAC,eAAe,CAAmtC,CAA1sC,2DAA0B,8IAAwD,CAAC,0IAAsD,CAAC,qFAAqF,CAAC,qDAAqD,CAAC,uDAAuD,CAAC,yDAAyD,CAAC,2DAA2D,CAAC,kFAAkF,CAAC,uFAAuF,CAAC,wFAAwF,CAAC,8CAA8C,CAAC,iEAAiE,CAAC,qEAAqE,CAAC,gMAAyG,CAAC,uEAAsC,4DAA4D,CAAC,+DAA8B,UAAU,CAAC,uEAAsC,gBAAgB,CAAC,WAAW,CAAC,iDAAO,SAAS,CAAgB,sBAAA,iBAAa,CAAb,mKAAa,CAAE",sourcesContent:["@layer util{.codeEditor{direction:ltr;overflow:hidden;.editor{&>:global(.monaco-editor){--vscode-menu-background:theme(colors.tint.50)!important;--vscode-menu-border:theme(borderColor.base)!important;--vscode-menu-selectionBackground:color(from var(--primary) srgb r g b/80%)!important;--vscode-editor-background:var(--fabric-bg)!important;--vscode-editor-foreground:var(--fabric-text)!important;--vscode-breadcrumb-background:var(--fabric-bg)!important;--vscode-editorGutter-background:var(--fabric-bg)!important;--vscode-minimapSlider-background:color(from var(--tint) srgb r g b/10%)!important;--vscode-minimapSlider-hoverBackground:color(from var(--tint) srgb r g b/15%)!important;--vscode-minimapSlider-activeBackground:color(from var(--tint) srgb r g b/20%)!important;--vscode-input-border:var(--primary)!important;--vscode-editorStickyScroll-background:var(--fabric-bg)!important;--vscode-editorMarkerNavigation-background:var(--fabric-bg)!important;--vscode-editor-wordHighlightTextBackground:color(from theme(colors.accent.700) srgb r g b/20%)!important}& :global(.minimap-decorations-layer){background-color:color(from var(--fabric-bg) srgb r g b/50%)}& :global(.folded-background){opacity:.5}& :global(.monaco-findInput) textarea{min-height:unset;resize:none}& span{padding:0}}}.editorTools{@apply bg-base}}"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={codeEditor:"bL3zkOOukzVicBejJjmE",editor:"u6sLbLS6bARCfiZpgHQS",editorTools:"tX0oDkKeWkO5MiEOfVQZ"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);