"use strict";(self.webpackChunkreact_fabric=self.webpackChunkreact_fabric||[]).push([[2958],{"./packages/form/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ag:()=>ArrayInput,j9:()=>AutoComplete,Sc:()=>Checkbox,AN:()=>ColorInput,xI:()=>Controller,J3:()=>DateInput,JR:()=>DualList,D0:()=>Field,zp:()=>FileInput,lV:()=>Form,t$:()=>HiddenInput,pd:()=>Input,B8:()=>List,wN:()=>Number_Number,_2:()=>Password,sx:()=>Radio,z6:()=>RadioGroup,F1:()=>RangeSlider,BV:()=>SchemaEditor,vj:()=>Search,l6:()=>Select,Ap:()=>Slider,dO:()=>Switch,TM:()=>Textarea,Mv:()=>useFileUploader,Pv:()=>useFormBuilder});var esm=__webpack_require__("./packages/core/dist/esm/index.js");const ar_namespaceObject=JSON.parse('{"addArray":"اضافة عنصر","password":{"show":"عرض كلمة المرور","hide":"اخفاء كلمة المرور"},"select":{"emptyList":"لا توجد خيارات متاحة","notFound":"لم يتم العثور على خيارات ل ","createOption":"إنشاء خيار جديد ل "},"yup":{"arrayMax":"{{label}} حدد ما يصل {{max}} غرض","arrayMin":"{{label}} اختر على الأقل {{min}} غرض","invalid":"{{label}} نوع بيانات غير صالح","invalidType":"{{label}} غير صالح","numberMax":"{{label}} الحد الأقصى {{max}}","numberMin":"{{label}} الحد الأدنى {{min}}","required":"{{label}} مطلوب","stringMax":"{{label}} أقصى {{max}} الحروف مسموحة","stringMin":"{{label}} يتطلب الحد الأدنى {{min}} الشخصيات"}}'),en_namespaceObject=JSON.parse('{"addArray":"Add Item","password":{"show":"Show password","hide":"Hide password"},"select":{"emptyList":"No options available","notFound":"No options found for <0>{{query}}</0>","createOption":"Create new option for <0>{{query}}</0>"},"yup":{"arrayMax":"{{label}} must contain upto {{max}} item","arrayMin":"{{label}} must contain atleast {{min}} item","invalid":"{{label}} invalid","empty":"{{label}} must not be empty","invalidType":"{{label}} invalid datatype","numberMax":"{{label}} maximum {{max}}","numberMin":"{{label}} minimum {{min}}","required":"{{label}} required","stringMax":"{{label}} maximum {{max}} characters allowed","stringMin":"{{label}} requires minimum {{min}} characters"}}');(0,esm.Rp)("form",{en:en_namespaceObject,ar:ar_namespaceObject});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs");const Controller=({name,children,...rest})=>{if(!name)throw Error("Form Controller missing `name` prop");return(0,jsx_runtime.jsx)(index_esm.xI,{name,render:({field:{ref,onChange,...field},fieldState:{error},formState:{isSubmitting}})=>(0,react.isValidElement)(children)?(0,react.cloneElement)(react.Children.only(children),{...field,...rest,ref:el=>{el&&ref(el);try{children.props.ref&&"current"in children.props.ref&&(children.props.ref.current=el),children.props.ref?.prototype&&children.props.ref(el)}catch(_){}},checked:!!field.value,readOnly:isSubmitting||children.props.readOnly,invalid:!!error?.message||children.props.invalid,error:error?.message??children.props.error,onChange:v=>{onChange(v),children.props.onChange?.(v)}}):children({...field,...rest,ref:el=>{el&&ref(el)},readOnly:isSubmitting,invalid:!!error?.message,checked:!!field.value,error:error?.message,onChange:v=>{onChange(v)}})})};try{Controller.displayName="Controller",Controller.__docgenInfo={description:"",displayName:"Controller",props:{name:{defaultValue:null,description:"field name",name:"name",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/form/Controller.tsx#Controller"]={docgenInfo:Controller.__docgenInfo,name:"Controller",path:"packages/form/src/form/Controller.tsx#Controller"})}catch(__react_docgen_typescript_loader_error){}var yup=__webpack_require__("./node_modules/@hookform/resolvers/yup/dist/yup.mjs"),dist_esm=__webpack_require__("./packages/utilities/dist/esm/index.js");const DEFAULT_SUBMIT=()=>{},Form=({formRef,schema,children,defaultValues=dist_esm.t0,onSubmit=DEFAULT_SUBMIT,onChange,...rest})=>{const ref=(0,react.useRef)(null),form=(0,index_esm.mN)({shouldFocusError:!0,resolver:schema&&(0,yup.t)(schema),defaultValues}),[,startTransition]=(0,react.useTransition)(),changeHandler=(0,esm.d7)(onChange,[onChange],300);(0,react.useEffect)((()=>{const subscription=form.watch((value=>{startTransition((()=>changeHandler?.(value)))}));return()=>subscription.unsubscribe()}),[form.watch,changeHandler]);const handleReset=(0,react.useCallback)(((reset={})=>{form.reset(reset),form.clearErrors(),ref.current?.querySelector("[auto-focus], input, textarea")?.focus()}),[defaultValues]);(0,react.useImperativeHandle)(formRef,(()=>({state:form.formState,reset:()=>handleReset(defaultValues),clear:()=>handleReset(),submit:()=>form.handleSubmit(onSubmit),validate:async()=>await form.trigger(),getValues:()=>form.getValues(),setValues:v=>setTimeout((()=>form.reset(v)),50),setValue:(k,v)=>setTimeout((()=>form.setValue(k,v,{shouldDirty:!1,shouldTouch:!1})),50)})),[onSubmit,form,form.formState,defaultValues]);const onInvalid=(0,react.useCallback)(((_,e)=>{const el=e.target;setTimeout((()=>el.querySelector("input[aria-invalid='true'],textarea[aria-invalid='true']")?.focus()),10)}),[]);return(0,jsx_runtime.jsx)(index_esm.Op,{...form,children:(0,jsx_runtime.jsxs)("form",{ref,onReset:()=>handleReset(defaultValues),onSubmit:e=>{e.stopPropagation(),form.handleSubmit(onSubmit,onInvalid)(e)},"data-loading":form.formState.isSubmitting,className:"contents",autoComplete:"off",...rest,children:[children,(0,jsx_runtime.jsx)("input",{type:"submit",className:"absolute invisible"})]})})};try{Form.displayName="Form",Form.__docgenInfo={description:"",displayName:"Form",props:{formRef:{defaultValue:null,description:"",name:"formRef",required:!1,type:{name:"Ref<FormRef<K>>"}},schema:{defaultValue:null,description:"form data schema",name:"schema",required:!1,type:{name:'ObjectSchema<K, AnyObject, any, "">'}},defaultValues:{defaultValue:{value:"EMPTY_OBJECT as K"},description:"default data values",name:"defaultValues",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"change callback",name:"onChange",required:!1,type:{name:"((values: K) => void)"}},onSubmit:{defaultValue:{value:"() => undefined"},description:"submit callback after successful validation",name:"onSubmit",required:!1,type:{name:"((values: K) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/form/Form.tsx#Form"]={docgenInfo:Form.__docgenInfo,name:"Form",path:"packages/form/src/form/Form.tsx#Form"})}catch(__react_docgen_typescript_loader_error){}var types_schema=__webpack_require__("./packages/form/src/types/schema.ts"),core_esm=__webpack_require__("./node_modules/@dnd-kit/core/dist/core.esm.js"),modifiers_esm=__webpack_require__("./node_modules/@dnd-kit/modifiers/dist/modifiers.esm.js"),sortable_esm=__webpack_require__("./node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");const ErrorIcon=({error="",invalid})=>{const{t}=(0,es.Bd)();return invalid&&(0,jsx_runtime.jsx)(esm.m_,{content:(0,dist_esm.Kg)(error)?`${error}`:t(error?.key,error.values?{...error?.values,label:t(error.values?.label??"form:badkey",error.values?.path)}:{}),placement:"bottom",color:"danger-200",children:(0,jsx_runtime.jsx)(esm.In,{className:"flex-content first:ms-2 self-center",color:"danger",icon:esm.OO.alert})})};try{ErrorIcon.displayName="ErrorIcon",ErrorIcon.__docgenInfo={description:"",displayName:"ErrorIcon",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/internal/ErrorIcon.tsx#ErrorIcon"]={docgenInfo:ErrorIcon.__docgenInfo,name:"ErrorIcon",path:"packages/form/src/internal/ErrorIcon.tsx#ErrorIcon"})}catch(__react_docgen_typescript_loader_error){}const FieldWrapper=({label,appendLabel,width,labelWidth=192,inline,info,disabled,required,children,listing,className,invalid,error,"data-inner":isInner})=>(0,jsx_runtime.jsxs)("div",{className:classnames_default()("fabric-fieldWrapper",className,inline?"flex flex-nowrap gap-1":"block"),"data-ref":"fieldWrapper",style:{width,flexBasis:width},children:[!isInner&&label&&(0,jsx_runtime.jsxs)("div",{className:"flex flex-nowrap flex-content items-end gap-1 py-0.5 px-2",style:{width:inline?labelWidth:void 0},children:[(0,jsx_runtime.jsx)("label",{role:"none",className:classnames_default()("flex-initial truncate text-sm",disabled&&"text-muted"),onClick:e=>e.currentTarget.closest('[data-ref="fieldWrapper"]')?.querySelector("input,textarea")?.focus(),children:label}),required&&(0,jsx_runtime.jsx)("span",{className:"text-danger-500 select-none flex-content text-[10px]",children:"✽"}),(0,jsx_runtime.jsx)(ErrorIcon,{invalid,error}),(0,jsx_runtime.jsx)("div",{className:"flex-1"}),appendLabel&&(0,jsx_runtime.jsx)("span",{className:"flex-content",children:appendLabel})]}),children,listing,info&&(0,jsx_runtime.jsx)("div",{className:"text-sm text-muted flex-content",children:info})]});try{FieldWrapper.displayName="FieldWrapper",FieldWrapper.__docgenInfo={description:"",displayName:"FieldWrapper",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/internal/FieldWrapper.tsx#FieldWrapper"]={docgenInfo:FieldWrapper.__docgenInfo,name:"FieldWrapper",path:"packages/form/src/internal/FieldWrapper.tsx#FieldWrapper"})}catch(__react_docgen_typescript_loader_error){}var utilities_esm=__webpack_require__("./node_modules/@dnd-kit/utilities/dist/utilities.esm.js");const ArrayInput=({name,children,addLabel,fixedList,focusName="",buttonPosition="bottom",onAdd,onRemove,onBeforeRemove,canRemove,arrayRef,enableSorting,disabled=!1,readOnly=!1,minItems=0,maxItems=Number.MAX_SAFE_INTEGER,...rest})=>{const{t}=(0,es.Bd)("form"),form=(0,index_esm.xW)();if(!form?.control)throw new Error("ArrayInput must be contained within a Form element");const{fields,append,remove,move}=(0,index_esm.jz)({name,keyName:"__ID__",control:form.control}),error=(0,react.useMemo)((()=>form.formState.errors[name]?.message??form.formState.errors[name]?.root?.message),[form.formState.errors]),handleAdd=(0,react.useCallback)((item=>{append(item),setTimeout((()=>{form.setFocus(`${name}.${fields.length}${focusName?"."+focusName:""}`)}),100)}),[name,fields,focusName]),handleRemove=(0,react.useCallback)(((item,index)=>{const ret=onBeforeRemove?.(item,index);Promise.resolve(ret).then((b=>{(0,dist_esm.Wu)(b)||(remove(index),onRemove?.(item,index))}))}),[remove,onRemove,onBeforeRemove]);(0,react.useImperativeHandle)(arrayRef,(()=>({addItem:handleAdd,removeItem:remove})));const Wrapper=(0,react.useCallback)((({children})=>{if(enableSorting){const idMap=fields.map((item=>item.__ID__)),handleDragEnd=e=>{if(e.over&&e.active.id!==e.over.id){const active=idMap.indexOf(`${e.active.id}`),end=idMap.indexOf(`${e.over.id}`);move(active,end)}};return(0,jsx_runtime.jsx)(core_esm.Mp,{onDragEnd:handleDragEnd,modifiers:[modifiers_esm.FN],children:(0,jsx_runtime.jsx)(sortable_esm.gB,{items:idMap,children})})}return children}),[enableSorting,fields]);Wrapper.displayName="SortableWrapper";const SortableItem=(0,react.useCallback)((({id,children,className})=>{if(enableSorting){const{attributes,listeners,setNodeRef,transform,transition,isDragging}=(0,sortable_esm.gl)({id});return(0,jsx_runtime.jsxs)("div",{className,ref:setNodeRef,style:{transform:utilities_esm.Ks.Transform.toString(transform),transition},children:[(0,jsx_runtime.jsx)(esm.In,{className:isDragging?"cursor-grabbing":"cursor-grab",icon:esm.OO.dragHandle,...attributes,...listeners}),children]})}return(0,jsx_runtime.jsx)("div",{className,children})}),[enableSorting]);SortableItem.displayName="SortableItem";const addButton=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)("div",{className:"flex justify-end",children:(0,jsx_runtime.jsx)(esm.m_,{color:"danger-200",content:(0,dist_esm.Kg)(error)?`${error}`:t(error?.key,error?.values?{...error?.values,label:t(error.values?.label??"form:badkey",error.values?.path)}:{}),children:(0,jsx_runtime.jsx)(esm.$n,{size:"sm","aria-label":"Add item",icon:esm.OO.insert,onClick:()=>handleAdd(onAdd?.()),"data-invalid":!!error,disabled:!!disabled||readOnly||fields.length>maxItems,className:classnames_default()("fabric-addButton","me-10"),children:addLabel??t("addArray")})})})),[error,fields,handleAdd,disabled,readOnly,addLabel,maxItems]);return(0,jsx_runtime.jsxs)("div",{className:"fabric-arrayInput",children:[(0,jsx_runtime.jsx)(FieldWrapper,{...rest,appendLabel:(0,jsx_runtime.jsx)("div",{className:"-me-2",children:!fixedList&&onAdd&&"bottom"!==buttonPosition&&addButton}),children:(0,jsx_runtime.jsx)(Wrapper,{children:fields.map(((item,index)=>(0,jsx_runtime.jsxs)(SortableItem,{id:item.__ID__,className:"flex items-center flex-nowrap gap-2 mb-1",children:["function"==typeof children?children({index,name:`${name}.${index}`}):(0,esm.t_)(children,(child=>(0,react.cloneElement)(child,Object.assign({disabled,readOnly,"data-inner":!0,name:`${name}.${index}${child.props.name?"."+child.props.name:""}`},index>0&&{label:void 0,required:void 0,appendLabel:void 0})))),!fixedList&&(0,jsx_runtime.jsx)(esm.$n,{"aria-label":"Remove item",icon:esm.OO.remove,color:"danger",variant:"link",className:"self-end",disabled:disabled||readOnly||fields.length<=minItems||!1!==canRemove?.({item,index,lastItem:index+1===fields.length}),onClick:()=>handleRemove(item,index)})]},item.__ID__)))})}),!fixedList&&onAdd&&"top"!==buttonPosition&&addButton]})};try{ArrayInput.displayName="ArrayInput",ArrayInput.__docgenInfo={description:"",displayName:"ArrayInput",props:{label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"field name",name:"name",required:!0,type:{name:"string"}},minItems:{defaultValue:{value:"0"},description:"minimum required length",name:"minItems",required:!1,type:{name:"number"}},maxItems:{defaultValue:{value:"Number.MAX_SAFE_INTEGER"},description:"maximum length",name:"maxItems",required:!1,type:{name:"number"}},focusName:{defaultValue:{value:""},description:"field name to focus on add",name:"focusName",required:!1,type:{name:"string"}},enableSorting:{defaultValue:null,description:"enable drag-n-drop sorting",name:"enableSorting",required:!1,type:{name:"boolean"}},addLabel:{defaultValue:null,description:"add item button label",name:"addLabel",required:!1,type:{name:"string"}},buttonPosition:{defaultValue:{value:"bottom"},description:"",name:"buttonPosition",required:!1,type:{name:"enum",value:[{value:'"both"'},{value:'"top"'},{value:'"bottom"'}]}},fixedList:{defaultValue:null,description:"fixed length list",name:"fixedList",required:!1,type:{name:"boolean"}},arrayRef:{defaultValue:null,description:"",name:"arrayRef",required:!1,type:{name:"Ref<{ addItem: (item: T) => void; removeItem: (idx: number) => void; }>"}},onAdd:{defaultValue:null,description:"add new item",name:"onAdd",required:!1,type:{name:"(() => AnyObject)"}},onRemove:{defaultValue:null,description:"on item remove",name:"onRemove",required:!1,type:{name:"((item: T, idx: number) => void)"}},onBeforeRemove:{defaultValue:null,description:"before item remove",name:"onBeforeRemove",required:!1,type:{name:"((item: T, idx: number) => boolean | Promise<boolean>)"}},canRemove:{defaultValue:null,description:"can remove item",name:"canRemove",required:!1,type:{name:"((props: { item: T; index: number; lastItem: boolean; }) => boolean)"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/ArrayInput.tsx#ArrayInput"]={docgenInfo:ArrayInput.__docgenInfo,name:"ArrayInput",path:"packages/form/src/input/ArrayInput.tsx#ArrayInput"})}catch(__react_docgen_typescript_loader_error){}const InputWrapper=({invalid,error,allowClear,showClear,decorateStart,decorateEnd,decorateEndShowWhenEmpty,decorateEndHideWhenEmpty,children,onClear,noOutline,noBorder,actionButton,textarea=!1,textareaExpandable=!1,"data-inner":isInner,"data-open":isOpen,floatingExpand,wrapperRef,width,...rest})=>{const elRef=(0,react.useRef)(null),[isExpanded,setExpanded]=(0,react.useState)(!1),Wrapper=(0,react.useMemo)((()=>isInner||!rest.label?jsx_runtime.Fragment:FieldWrapper),[isInner,rest.label]),wrapperProps=(0,react.useMemo)((()=>isInner||!rest.label?{}:{...rest,width}),[isInner,rest,width]),handleClear=(0,react.useCallback)((e=>{e.currentTarget.parentElement?.querySelector("input,textarea,button")?.focus(),onClear?.()}),[onClear]),doFocus=(0,react.useCallback)((e=>{e.currentTarget.parentElement?.querySelector("input,textarea,button")?.focus()}),[onClear]);(0,react.useEffect)((()=>{isExpanded&&setTimeout((()=>wrapperRef?.current?.querySelector("textarea")?.focus()),50)}),[isExpanded]);const el=(0,jsx_runtime.jsxs)("div",{role:"none",ref:wrapperRef,className:classnames_default()("fabric-inputWrapper",invalid&&"fabric-invalidWrapper",!noOutline&&!noBorder&&"bg-(--fabric-input) outline overflow-hidden","flex flex-nowrap items-center flex-1",textarea?"rounded-capped group":"rounded",isExpanded?"fixed inset-4 z-[99]":floatingExpand?"absolute inset-x-0":"relative",!noOutline&&"after:absolute after:bottom-0 after:h-px after:bg-primary-500 after:mx-auto"),onKeyDown:e=>"Escape"===e.key&&isExpanded&&(setExpanded(!1),e.stopPropagation()),children:[decorateStart&&(0,jsx_runtime.jsx)("div",{onClickCapture:doFocus,className:classnames_default()("fabric-decorate","text-muted leading-none flex-content",(0,dist_esm.Kg)(decorateStart)&&"px-1"),children:decorateStart}),(0,jsx_runtime.jsx)(ErrorIcon,{invalid,error}),children,allowClear&&showClear&&(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.close,onClick:handleClear,className:classnames_default()("text-tint-500 hover:text-tint-700 p-1 z-1 flex-content","fabric-inputClear",textarea&&"self-start mt-1 me-1")}),decorateEnd&&(0,jsx_runtime.jsx)("div",{onClickCapture:doFocus,className:classnames_default()("fabric-decorate","text-muted leading-none flex-content",(0,dist_esm.Kg)(decorateEnd)&&"px-1",decorateEndHideWhenEmpty&&"peer-placeholder-shown:hidden",decorateEndShowWhenEmpty&&"hidden peer-placeholder-shown:inline-block"),children:decorateEnd}),actionButton&&(0,jsx_runtime.jsx)("div",{onClickCapture:doFocus,className:classnames_default()("fabric-decorate","text-muted leading-none flex-content"),children:actionButton}),textareaExpandable&&(0,jsx_runtime.jsx)(esm.In,{onClick:()=>setExpanded(!isExpanded),icon:isExpanded?esm.OO.arrowCollapse:esm.OO.arrowExpand,className:"hidden group-hover:block absolute top-0 end-0 bg-base hover:bg-tint-200 p-1 opacity-65 rounded-capped"})]});return(0,jsx_runtime.jsx)(Wrapper,{...wrapperProps,children:(0,jsx_runtime.jsx)("div",{ref:elRef,className:classnames_default()("relative min-h-8 flex flex-col flex-nowrap",width?"flex-auto":"flex-1"),style:{width,flexBasis:width},children:el})})};try{InputWrapper.displayName="InputWrapper",InputWrapper.__docgenInfo={description:"",displayName:"InputWrapper",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/internal/InputWrapper.tsx#InputWrapper"]={docgenInfo:InputWrapper.__docgenInfo,name:"InputWrapper",path:"packages/form/src/internal/InputWrapper.tsx#InputWrapper"})}catch(__react_docgen_typescript_loader_error){}var floating_ui_react=__webpack_require__("./node_modules/@floating-ui/react/dist/floating-ui.react.mjs");const useHandleEnter=(callback,{stopPropagation=!1,preventDefault=!1}={})=>{const cbHandle=(0,esm.d7)(callback??(()=>{}),[callback],100),tree=(0,floating_ui_react.cq)();return e=>{if(tree&&"Escape"!==e.key&&e?.stopPropagation(),!e.shiftKey&&!e.altKey&&!e.metaKey&&"Enter"===e.key&&callback&&(stopPropagation&&e?.stopPropagation(),cbHandle(e),preventDefault))return e.preventDefault(),!1}},getColor=color=>{if(color&&(0,dist_esm._o)(color))return color},getBgClass=bg=>{if(bg&&!(0,dist_esm._o)(bg))return`bg-${bg}`},getColorClass=color=>{if(color&&!(0,dist_esm._o)(color))return`text-${color}`},Input=({ref,name,value,invalid,readOnly,disabled,required,placeholder,autoFocus,error,monospace,type="text",onBlur,onFocus,onChange,onEnterPressed,...rest})=>{const[actualValue,setActualValue]=(0,react.useState)(""),deferred=(0,react.useDeferredValue)(value),handleEnterPressed=useHandleEnter(onEnterPressed);(0,react.useEffect)((()=>{setActualValue(deferred??"")}),[deferred]);const handleChange=(0,react.useCallback)((e=>{const value=e?.target.value;setActualValue(value??""),onChange?.(value??null)}),[onchange]);return(0,jsx_runtime.jsx)(InputWrapper,{showClear:!!actualValue&&!disabled&&!readOnly,onClear:handleChange,invalid,readOnly,disabled,required,error,...rest,children:(0,jsx_runtime.jsx)("input",{className:classnames_default()("appearance-none bg-transparent py-1 px-2 flex-1 border-none outline-none ring-0 peer",monospace&&"font-mono text-sm"),"aria-invalid":invalid,"aria-disabled":disabled,"aria-readonly":readOnly,"aria-errormessage":error,placeholder,disabled,readOnly,"data-testid":name,name,size:1,type,ref,autoComplete:"off",autoFocus,value:actualValue,onBlur,onFocus,onChange:handleChange,onKeyDown:handleEnterPressed})})};try{Input.displayName="Input",Input.__docgenInfo={description:"",displayName:"Input",props:{type:{defaultValue:{value:"text"},description:"input type",name:"type",required:!1,type:{name:"enum",value:[{value:'"search"'},{value:'"text"'},{value:'"tel"'},{value:'"url"'},{value:'"email"'},{value:'"file"'}]}},value:{defaultValue:null,description:"value",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value: string | null) => void)"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"input placeholder",name:"placeholder",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:null,description:"show clear button",name:"allowClear",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/Input.tsx#Input"]={docgenInfo:Input.__docgenInfo,name:"Input",path:"packages/form/src/input/Input.tsx#Input"})}catch(__react_docgen_typescript_loader_error){}const fieldSchema=dist_esm.hg.object({fields:dist_esm.hg.array(dist_esm.hg.string().trim().required()).required().min(1)}),AddSchemaFields=props=>{const handleSubmit=(0,react.useCallback)((model=>{props.onClose(model.fields.map((f=>f.split(",").map((ff=>ff.trim())))).flat(2))}),[]);return(0,jsx_runtime.jsx)(esm.aF,{...props,children:(0,jsx_runtime.jsxs)(Form,{schema:fieldSchema,defaultValues:{fields:[" "]},onSubmit:handleSubmit,children:[(0,jsx_runtime.jsxs)(esm.UC,{children:[(0,jsx_runtime.jsx)(ArrayInput,{minItems:1,name:"fields",onAdd:()=>String(""),children:(0,jsx_runtime.jsx)(Controller,{children:(0,jsx_runtime.jsx)(Input,{autoFocus:!0})})}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted",children:"Provide list of fields or comma-separated value"})]}),(0,jsx_runtime.jsx)(esm.wi,{flex:!0,justify:"end",className:"px-2 py-1",children:(0,jsx_runtime.jsx)(esm.$n,{type:"submit",children:"Add"})})]})})};try{AddSchemaFields.displayName="AddSchemaFields",AddSchemaFields.__docgenInfo={description:"",displayName:"AddSchemaFields",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: AnyObject) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/builder/components/AddSchemaFields.tsx#AddSchemaFields"]={docgenInfo:AddSchemaFields.__docgenInfo,name:"AddSchemaFields",path:"packages/form/src/builder/components/AddSchemaFields.tsx#AddSchemaFields"})}catch(__react_docgen_typescript_loader_error){}const Checkbox=({ref,label,value,name,checked,invalid,disabled,error,width,icon,iconChecked,required,onChange,...rest})=>{const[actualValue,setActualValue]=(0,react.useState)(!1),deferred=(0,react.useDeferredValue)(!!checked),iconOn=(0,react.useMemo)((()=>iconChecked??icon??esm.OO.checkboxOn),[icon,iconChecked]),iconOff=(0,react.useMemo)((()=>icon??esm.OO.checkboxOff),[icon]);(0,react.useEffect)((()=>{setActualValue(deferred)}),[deferred]);const handleChange=(0,react.useCallback)((e=>{setActualValue(e?.target.checked??!1),onChange?.(e?.target.checked??!1)}),[onChange,value]);return(0,jsx_runtime.jsxs)("label",{className:classnames_default()(invalid?"ring-danger-500":"ring-primary-500",disabled?"opacity-50 cursor-not-allowed":" opacity-85 hover:opacity-100 cursor-pointer","inline-flex gap-1 py-1 items-center relative rounded ring-offset-2 has-[:focus-visible]:ring-1"),style:{width},children:[(0,jsx_runtime.jsx)("input",{className:classnames_default()("appearance-none absolute opacity-0 inset-0 bg-transparent border-none outline-none ring-0"),"aria-invalid":invalid,"aria-disabled":disabled,disabled,"aria-errormessage":error,type:"checkbox",ref,size:1,tabIndex:0,name,autoComplete:"off",checked:actualValue,onChange:handleChange,...rest}),(0,jsx_runtime.jsx)(esm.In,{className:classnames_default()("p-0.5",actualValue&&icon&&!iconChecked&&"bg-primary-500 text-white!"),size:"1.25em",color:invalid?"danger":"primary",icon:actualValue?iconOn:iconOff}),(0,jsx_runtime.jsx)(ErrorIcon,{invalid,error}),label&&(0,jsx_runtime.jsx)("span",{className:"flex-initial leading-tight truncate",children:label})]})};try{Checkbox.displayName="Checkbox",Checkbox.__docgenInfo={description:"",displayName:"Checkbox",props:{label:{defaultValue:null,description:"checkbox label",name:"label",required:!1,type:{name:"string | Element"}},checked:{defaultValue:null,description:"checked",name:"checked",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"value",name:"value",required:!1,type:{name:"string | number"}},onChange:{defaultValue:null,description:"on checked change",name:"onChange",required:!1,type:{name:"((checked: boolean) => void)"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},icon:{defaultValue:null,description:"cutom checkbox icon",name:"icon",required:!1,type:{name:"string"}},iconChecked:{defaultValue:null,description:"cutom checkbox checked icon",name:"iconChecked",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/Checkbox.tsx#Checkbox"]={docgenInfo:Checkbox.__docgenInfo,name:"Checkbox",path:"packages/form/src/input/Checkbox.tsx#Checkbox"})}catch(__react_docgen_typescript_loader_error){}var floating_ui_dom=__webpack_require__("./node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs"),floating_ui_react_dom=__webpack_require__("./node_modules/@floating-ui/react/node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs"),date_dist_esm=__webpack_require__("./packages/date/dist/esm/index.js");const DateInput=({ref,name,value,invalid,readOnly,disabled,required,placeholder,autoFocus,error,type="date",onBlur,onFocus,onChange,onEnterPressed,format="dd/MM/yyyy",min,max,...rest})=>{const[actualValue,setActualValue]=(0,react.useState)(""),[inputValue,setInputValue]=(0,react.useState)(""),deferred=(0,react.useDeferredValue)(value),inputFormat=(0,react.useMemo)((()=>"datetime"===type?"yyyy-MM-dd HH:mm":"yyyy-MM-dd"),[type]);(0,react.useEffect)((()=>{setActualValue(deferred??""),setInputValue(deferred?date_dist_esm.rL.format(deferred,inputFormat):"")}),[deferred,inputFormat]);const handleEnterPressed=useHandleEnter(onEnterPressed),handleChange=(0,react.useCallback)((e=>{const value=e?.currentTarget.value;if(value){const parsed=date_dist_esm.rL.parseDate(value);setActualValue(parsed?.toISOString?.()),setInputValue(date_dist_esm.rL.format(parsed,inputFormat)),null!=onChange&&(0,react.startTransition)((()=>onChange(parsed?.toISOString?.())))}else setActualValue(""),setInputValue(""),null!=onChange&&(0,react.startTransition)((()=>onChange(null)))}),[onChange,inputFormat]),handleDateChange=(0,react.useCallback)((value=>{if(value){const parsed=date_dist_esm.rL.parseDate(value);setActualValue(parsed?.toISOString?.()),setInputValue(date_dist_esm.rL.format(parsed,inputFormat)),null!=onChange&&(0,react.startTransition)((()=>onChange(parsed?.toISOString?.())))}else setActualValue(""),setInputValue(""),null!=onChange&&(0,react.startTransition)((()=>onChange(null)))}),[onChange,inputFormat]),arrowRef=(0,react.useRef)(null),[isOpen,setIsOpen]=(0,react.useState)(!1),{refs,floatingStyles,context}=(0,floating_ui_react.we)({open:isOpen,onOpenChange:(open,_,reason)=>{console.log(reason),"reference-press"!==reason&&setIsOpen(open)},strategy:"fixed",placement:"bottom-start",whileElementsMounted:floating_ui_dom.ll,middleware:[(0,floating_ui_react_dom.BN)({padding:8}),(0,floating_ui_react_dom.UU)(),(0,floating_ui_react_dom.cY)(9),(0,floating_ui_react_dom.UE)({element:arrowRef})]}),focus=(0,floating_ui_react.iQ)(context,{enabled:!disabled}),click=(0,floating_ui_react.kp)(context,{enabled:!disabled,toggle:!1}),dismiss=(0,floating_ui_react.s9)(context,{referencePress:!0}),{getReferenceProps,getFloatingProps}=(0,floating_ui_react.bv)([dismiss,click,focus]);return(0,jsx_runtime.jsxs)(InputWrapper,{showClear:!!actualValue&&!disabled&&!readOnly,onClear:handleChange,invalid,readOnly,disabled,required,error,...rest,children:[(0,jsx_runtime.jsx)("input",{className:classnames_default()("appearance-none bg-transparent py-1 px-2 flex-1 border-none outline-none ring-0 peer",!value&&"empty"),"aria-invalid":invalid,"aria-disabled":disabled,"aria-readonly":readOnly,"aria-errormessage":error,placeholder,disabled,readOnly,"data-testid":name,name,size:1,type:"datetime"===type?"datetime-local":"date",autoComplete:"off",autoFocus,value:inputValue,ref:(0,dist_esm.Px)(ref,refs.setReference),...getReferenceProps({onBlur,onFocus}),onChange:handleChange,onKeyDown:handleEnterPressed}),isOpen&&(0,jsx_runtime.jsxs)("div",{ref:refs.setFloating,style:{zIndex:"var(--z-popover)",...floatingStyles},className:"shadow-lg bg-base ring-1 ring-tint-100","data-ref":"dropdownBody",...getFloatingProps(),children:[(0,jsx_runtime.jsx)(date_dist_esm.rx,{withTime:"datetime"===type,value:actualValue,max,min,onChange:handleDateChange}),(0,jsx_runtime.jsx)(floating_ui_react.ie,{ref:arrowRef,context,strokeWidth:.5,className:"fill-base stroke-muted"})]})]})};try{DateInput.displayName="DateInput",DateInput.__docgenInfo={description:"",displayName:"DateInput",props:{type:{defaultValue:{value:"date"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"date"'},{value:'"datetime"'}]}},format:{defaultValue:{value:"dd/MM/yyyy"},description:"date format",name:"format",required:!1,type:{name:"string"}},min:{defaultValue:null,description:"minimum value",name:"min",required:!1,type:{name:"DateLike"}},max:{defaultValue:null,description:"maximum value",name:"max",required:!1,type:{name:"DateLike"}},value:{defaultValue:null,description:"value",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value: string | null) => void)"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"input placeholder",name:"placeholder",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:null,description:"show clear button",name:"allowClear",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/DateInput.tsx#DateInput"]={docgenInfo:DateInput.__docgenInfo,name:"DateInput",path:"packages/form/src/input/DateInput.tsx#DateInput"})}catch(__react_docgen_typescript_loader_error){}const Field=({children,vertical,noOutline,plain,...rest})=>(0,jsx_runtime.jsx)(FieldWrapper,{...rest,children:(0,jsx_runtime.jsx)("div",{className:classnames_default()("fabric-fieldGroup",!plain&&!noOutline&&"outline",!plain&&"bg-base",plain&&"flex-wrap","flex-1 rounded",!vertical&&"flex"),"data-vertical":!!vertical,children:(0,esm.t_)(children,(child=>(0,react.cloneElement)(child,{"data-inner":!0})))})});try{Field.displayName="Field",Field.__docgenInfo={description:"",displayName:"Field",props:{label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},noOutline:{defaultValue:null,description:"hide outline",name:"noOutline",required:!1,type:{name:"boolean"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},plain:{defaultValue:null,description:"dont apply bg and outline",name:"plain",required:!1,type:{name:"boolean"}},vertical:{defaultValue:null,description:"",name:"vertical",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"css classname(s)",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/Field.tsx#Field"]={docgenInfo:Field.__docgenInfo,name:"Field",path:"packages/form/src/input/Field.tsx#Field"})}catch(__react_docgen_typescript_loader_error){}const HiddenInput=({hiddenValue,onChange,invalid,error,value="",name})=>((0,react.useEffect)((()=>{hiddenValue&&setTimeout((()=>{onChange?.(hiddenValue)}),50)}),[hiddenValue]),(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("input",{type:"hidden",onChange,value,name}),(0,jsx_runtime.jsx)(ErrorIcon,{invalid,error})]}));try{HiddenInput.displayName="HiddenInput",HiddenInput.__docgenInfo={description:"",displayName:"HiddenInput",props:{name:{defaultValue:null,description:"field name",name:"name",required:!1,type:{name:"string"}},hiddenValue:{defaultValue:null,description:"hidden value will fire change for form update",name:"hiddenValue",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"form onChange handler",name:"onChange",required:!1,type:{name:"((value: AnyObject) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/Hidden.tsx#HiddenInput"]={docgenInfo:HiddenInput.__docgenInfo,name:"HiddenInput",path:"packages/form/src/input/Hidden.tsx#HiddenInput"})}catch(__react_docgen_typescript_loader_error){}const Number_Number=({ref,value,invalid,readOnly,disabled,required,placeholder,autoFocus,name,min,max,step,onBlur,onFocus,onChange,onEnterPressed,...rest})=>{const[actualValue,setActualValue]=(0,react.useState)(""),deferred=(0,react.useDeferredValue)(value),handleEnterPressed=useHandleEnter(onEnterPressed);(0,react.useEffect)((()=>{setActualValue(deferred??"")}),[deferred]);const handleChange=(0,react.useCallback)((e=>{const number=e?.target.valueAsNumber;setActualValue(number??""),onChange?.(number??null)}),[onChange]);return(0,jsx_runtime.jsx)(InputWrapper,{showClear:!!actualValue&&!disabled&&!readOnly,onClear:handleChange,invalid,readOnly,disabled,required,...rest,children:(0,jsx_runtime.jsx)("input",{className:"appearance-none bg-transparent py-1 px-2 flex-1 border-none outline-none ring-0 peer","aria-invalid":invalid,"aria-disabled":disabled,"aria-readonly":readOnly,placeholder,disabled,readOnly,"data-testid":name,name,type:"number",size:1,min,max,step,ref,autoComplete:"off",autoFocus,value:actualValue,onBlur,onFocus,onChange:handleChange,onKeyDown:handleEnterPressed})})};try{Number_Number.displayName="Number",Number_Number.__docgenInfo={description:"",displayName:"Number",props:{min:{defaultValue:null,description:"minimum value",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:null,description:"maximum value",name:"max",required:!1,type:{name:"number"}},step:{defaultValue:null,description:"increment step",name:"step",required:!1,type:{name:"number"}},value:{defaultValue:null,description:"value",name:"value",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value: number | null) => void)"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"input placeholder",name:"placeholder",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:null,description:"show clear button",name:"allowClear",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/Number.tsx#Number"]={docgenInfo:Number_Number.__docgenInfo,name:"Number",path:"packages/form/src/input/Number.tsx#Number"})}catch(__react_docgen_typescript_loader_error){}const Options=({ref,style,items,active,className,itemRef,empty,valueProperty="id",labelProperty="label",itemProps,children,...rest})=>(0,jsx_runtime.jsxs)("div",{ref,className:classnames_default()("bg-base select-none overflow-x-hidden overflow-y-auto",className),style,...rest,children:[0===items.length&&(empty??(0,jsx_runtime.jsx)(esm.HY,{message:(0,jsx_runtime.jsx)(es.x6,{i18nKey:"form:select.emptyList"})})),items.map(((item,index)=>item.___group___?(0,jsx_runtime.jsx)("p",{className:"px-2 py-1 text-muted text-xs sticky -top-px z-2 bg-base border-t",children:item.label},index):item.___create___?(0,jsx_runtime.jsx)("div",{role:"none",tabIndex:active===index?0:-1,ref:el=>itemRef(index,el),"data-active":active===index||void 0,className:classnames_default()("block text-start truncate px-2 py-1 leading-normal cursor-pointer select-none","data-[active]:bg-primary-200 data-[selected]:bg-primary-600 data-[selected]:text-white data-[active]:data-[selected]:underline"),...itemProps(item),children:(0,jsx_runtime.jsx)(es.x6,{i18nKey:"form:select.createOption",values:{query:item.value??item},components:[(0,jsx_runtime.jsx)("strong",{children:"query"},"t0")]})},index):(0,jsx_runtime.jsx)("div",{role:"none",tabIndex:active===index?0:-1,ref:el=>itemRef(index,el),"data-active":active===index||void 0,className:classnames_default()("block text-start truncate px-2 py-1 leading-normal cursor-pointer","data-[active]:bg-primary-200 data-[selected]:bg-primary-600 data-[selected]:text-white data-[active]:data-[selected]:underline"),...itemProps(item),children:children(item,item[labelProperty]??item)},index)))]});try{Options.displayName="Options",Options.__docgenInfo={description:"",displayName:"Options",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/select/Options.tsx#Options"]={docgenInfo:Options.__docgenInfo,name:"Options",path:"packages/form/src/select/Options.tsx#Options"})}catch(__react_docgen_typescript_loader_error){}const makeOption=query=>query,useSelect=({options=dist_esm.Ml,value,defaultOpen=!1,autoComplete,multiple=!1,allowCreate=!1,groupProperty="",valueProperty="id",labelProperty="label",sortProperty,createOption=makeOption,matcher,onQuery,onChange,onSelect})=>{const emptyValue=(0,react.useMemo)((()=>multiple?[]:""),[multiple]),deferred=(0,react.useDeferredValue)(value??emptyValue),listRef=(0,react.useRef)([]),focusableRef=(0,react.useRef)(null),listContentRef=(0,react.useRef)([]),optionsRef=(0,react.useRef)([]),macthOption=(0,react.useCallback)(((item,query)=>matcher?.(item,query)??(0,dist_esm.FX)(item[labelProperty]??item,query)),[matcher]),fireChange=(0,react.useCallback)((value=>{setTimeout((()=>{onSelect?.(value??emptyValue),onChange?.(((value,emptyValue,valueProperty="")=>(0,dist_esm.cy)(value)?value.map((val=>val[valueProperty]??val)):value?.[valueProperty]??value??emptyValue)(value,emptyValue,valueProperty))}),50)}),[emptyValue,onSelect,onChange]),[state,dispatch]=(0,react.useReducer)(((state,action)=>{if("open"===action.type){const index=state.items.indexOf(state.multiple?state.value[0]:state.value);return{...state,open:!0,activeIndex:index>-1?index:null}}if("close"===action.type)return{...state,activeIndex:null,open:!1};if("active"===action.type&&state.open)return autoComplete&&null!==action.index&&(state.query=state.items[action.index]),{...state,activeIndex:action.index};if("setValue"===action.type)return{...state,value:action.value,selectedIndex:state.items.indexOf(state.multiple?action.value[0]:action.value)};if("changeValue"===action.type){const newState={...state,value:state.emptyValue,activeIndex:null,selectedIndex:autoComplete?state.multiple?action.value?.length:0:state.items.indexOf(action.value)};if(void 0!==action.value)if(multiple){const values=[];(0,dist_esm.Kg)(action.value)?values.push(...action.value.split(/,\s?/)):values.push(action.value),newState.value=[...state.value],values.forEach((value=>{newState.value=newState.value.includes?.(value)?newState.value.filter((item=>item!==value)):[...newState.value,value]}))}else newState.value=action.value;return state.multiple||(newState.open=!1),fireChange(newState.value),newState}if("removeItem"===action.type){let newValue=state.value;return state.multiple?(newValue=[...newValue],newValue.splice(action.index??-1,1)):newValue="",fireChange(newValue),{...state,value:newValue}}if("startQuery"===action.type)return{...state,loading:!0,query:action.query};if("options"===action.type){const newState={...state,loading:!1,query:action.query};let optionList=[...action.options];autoComplete&&void 0!==action.query&&(optionList=(0,dist_esm.Qq)([action.query,...optionList])),sortProperty&&(optionList=optionList.sort((0,dist_esm.ck)("asc",sortProperty)));const grouped=(0,dist_esm.$z)(optionList,groupProperty,"");if(action.open&&(newState.open=!0),newState.items=[],allowCreate&&action.query&&newState.items.push({___create___:!0,value:action.query}),Object.entries(grouped).forEach((([key,list])=>{key&&newState.items.push({___group___:!0,label:key}),newState.items.push(...list)})),action.setActive){const index=newState.items.findIndex((opt=>!opt.___group___));newState.activeIndex=index>=0?index:null}else newState.activeIndex=null;return listContentRef.current=newState.items,newState}return state}),{multiple,emptyValue,open:defaultOpen,loading:!1,activeIndex:null,selectedIndex:null,value:emptyValue,query:void 0,items:[]});(0,react.useEffect)((()=>{if(!multiple){const newOption=(allowCreate||autoComplete)&&deferred?createOption(deferred):void 0,hasValue=options.find((opt=>(opt[valueProperty]??opt)===deferred));optionsRef.current=options,!hasValue&&newOption&&(optionsRef.current=[newOption,...options??[]]),dispatch({type:"options",options:optionsRef.current}),dispatch({type:"setValue",value:hasValue??newOption??deferred})}if(multiple){optionsRef.current=[];const value=((0,dist_esm.cy)(deferred)?deferred:[]).map((item=>{const newOption=(allowCreate||autoComplete)&&item?createOption(item):void 0,hasValue=options.find((opt=>(opt[valueProperty]??opt)===item));return!hasValue&&newOption&&optionsRef.current.push(newOption),hasValue??newOption??item}));optionsRef.current=[...optionsRef.current,...options??[]],dispatch({type:"options",options:optionsRef.current}),dispatch({type:"setValue",value})}}),[deferred,options,multiple,allowCreate,autoComplete,createOption]);const fireQuery=(0,esm.d7)((query=>{Promise.resolve(onQuery?.(query)).then((options=>{const newOptions=[...options];autoComplete&&newOptions.push(...optionsRef.current.filter((opt=>macthOption?.(opt,query)))),dispatch({type:"options",query,options:newOptions,open:!0,setActive:!0})}))}),[onQuery],300),handleQuery=(0,react.useCallback)((query=>{if(query){if(onQuery)return dispatch({type:"startQuery",query}),fireQuery(query);dispatch({type:"options",query,open:!0,setActive:!0,options:optionsRef.current.filter((opt=>macthOption?.(opt,query)))})}else dispatch({type:"options",query:"",options:optionsRef.current})}),[macthOption,onQuery]),handleChange=(0,react.useCallback)((value=>{let values=value;if(autoComplete&&multiple&&value&&(values=value.split(/,\s?/)),dispatch({type:"changeValue",value:value?.___create___?value.value:value}),value?.___create___){let val=[value.value];multiple&&(val=value.value.split(/,\s?/)),optionsRef.current=[...optionsRef.current,...val.map(createOption)]}autoComplete&&(optionsRef.current=(0,dist_esm.Qq)([...(0,dist_esm.cy)(values)?values:[values],...optionsRef.current])),dispatch({type:"options",options:optionsRef.current})}),[]),handleRemove=(0,react.useCallback)((index=>{dispatch({type:"removeItem",index})}),[]),setOpen=(0,react.useCallback)((open=>{dispatch({type:open?"open":"close"}),dispatch({type:"options",query:void 0,options:optionsRef.current})}),[]),setActiveIndex=(0,react.useCallback)((index=>{dispatch({type:"active",index})}),[]);return{state,listRef,focusableRef,listContentRef,handleChange,handleRemove,handleQuery,macthOption,setActiveIndex,setOpen,setItemRef:(index,node)=>{listRef.current[index]=node}}};try{useSelect.displayName="useSelect",useSelect.__docgenInfo={description:"",displayName:"useSelect",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"AnyObject[]"}},multiple:{defaultValue:{value:"false"},description:"",name:"multiple",required:!1,type:{name:"boolean"}},defaultOpen:{defaultValue:{value:"false"},description:"",name:"defaultOpen",required:!1,type:{name:"boolean"}},allowCreate:{defaultValue:{value:"false"},description:"",name:"allowCreate",required:!1,type:{name:"boolean"}},groupProperty:{defaultValue:{value:""},description:"",name:"groupProperty",required:!1,type:{name:"any"}},valueProperty:{defaultValue:{value:"id"},description:"",name:"valueProperty",required:!1,type:{name:"any"}},labelProperty:{defaultValue:{value:"label"},description:"",name:"labelProperty",required:!1,type:{name:"any"}},sortProperty:{defaultValue:null,description:"",name:"sortProperty",required:!1,type:{name:"any"}},autoComplete:{defaultValue:null,description:"",name:"autoComplete",required:!1,type:{name:"boolean"}},matcher:{defaultValue:null,description:"",name:"matcher",required:!1,type:{name:"((item: AnyObject, query: string) => boolean)"}},createOption:{defaultValue:{value:"(query: string) => query"},description:"",name:"createOption",required:!1,type:{name:"((query: string) => AnyObject)"}},onQuery:{defaultValue:null,description:"",name:"onQuery",required:!1,type:{name:"((query: string) => AnyObject)"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"((item: AnyObject) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: AnyObject) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/select/useSelect.tsx#useSelect"]={docgenInfo:useSelect.__docgenInfo,name:"useSelect",path:"packages/form/src/select/useSelect.tsx#useSelect"})}catch(__react_docgen_typescript_loader_error){}const Select=({ref,name,value,invalid,readOnly,disabled,required,placeholder,autoFocus,error,options,defaultOpen,hideHandle,groupProperty,labelProperty="label",valueProperty="id",sortProperty,multiple,searchable,allowCreate,emptyDisplay,createOption,matcher,renderer,onQuery,onChange,onSelect,onEnterPressed,...rest})=>{const{state,listRef,listContentRef,setOpen,macthOption,handleChange,handleRemove,handleQuery,setItemRef,setActiveIndex}=useSelect({value,options,multiple,defaultOpen,groupProperty,labelProperty,valueProperty,sortProperty,allowCreate,createOption,matcher,onChange,onSelect,onQuery}),dropdownKey=(0,react.useId)(),{context,floatingStyles,refs}=(0,floating_ui_react.we)({open:state.open,onOpenChange:(open,evt,reason)=>{!open&&(listRef.current=[]),setOpen(open)},strategy:"fixed",placement:"bottom",whileElementsMounted:floating_ui_dom.ll,middleware:[(0,floating_ui_react_dom.BN)({padding:8}),(0,floating_ui_react_dom.UU)(),(0,floating_ui_react_dom.cY)(2)]}),click=(0,floating_ui_react.kp)(context,{}),dismiss=(0,floating_ui_react.s9)(context,{}),navigation=(0,floating_ui_react.C1)(context,{listRef,activeIndex:state.activeIndex,selectedIndex:state.selectedIndex,loop:!0,virtual:!0,focusItemOnOpen:!1,onNavigate:setActiveIndex}),typeahead=(0,floating_ui_react.lY)(context,{listRef:listContentRef,activeIndex:state.activeIndex,selectedIndex:state.selectedIndex,findMatch:(list,typedString)=>list.find((item=>macthOption(item,typedString))),onMatch(index){state.open&&setActiveIndex(index),!searchable&&!multiple&&!state.open&&handleChange(listContentRef.current[index])}}),{getReferenceProps,getFloatingProps,getItemProps}=(0,floating_ui_react.bv)([dismiss,searchable?void 0:click,navigation,typeahead]),referenceProps=(0,react.useMemo)((()=>{const props=getReferenceProps();return{...props,onBlur(evt){evt.relatedTarget?.closest(`[data-select-dropdown="${dropdownKey}"]`)?refs.domReference.current?.querySelector("input")?.focus():(handleQuery(""),setOpen(!1))},onKeyDown(evt){if("Enter"===evt.key){if(null!==state.activeIndex)return handleChange(listContentRef.current[state.activeIndex]),evt.preventDefault(),evt.stopPropagation(),!1;if(state.query)return handleQuery(""),evt.preventDefault(),evt.stopPropagation(),!1;onEnterPressed?.(evt)}else"Tab"===evt.key&&null!==state.activeIndex?handleChange(listContentRef.current[state.activeIndex]):"Backspace"===evt.key?!state.query&&handleRemove():searchable&&!["ArrowUp","ArrowDown"].includes(evt.key)||(["ArrowUp","ArrowDown"].includes(evt.key)&&null===state.activeIndex&&setActiveIndex(state.selectedIndex),setTimeout((()=>{props.onKeyDown?.(evt)}),50))}}}),[getReferenceProps,onEnterPressed,handleQuery,refs,state.query,state.activeIndex]),floatingProps=(0,react.useMemo)((()=>getFloatingProps({"data-select-dropdown":dropdownKey})),[getFloatingProps]),makeItemProps=(0,react.useCallback)((item=>{const selected=(0,dist_esm.cy)(state.value)?state.value?.includes?.(item):state.value===item;return getItemProps({"data-selected":!!selected||void 0,onClick(){handleChange(item)}})}),[getItemProps,handleChange,state.value]),displayValue=(0,react.useMemo)((()=>(0,dist_esm.cy)(state.value)?state.value.map(((item,index)=>(0,jsx_runtime.jsx)(esm.vu,{onRemove:()=>handleRemove(index),children:renderer?.(item)??item[labelProperty]??item},index))):(0,dist_esm.Im)(state.value)||state.query?void 0:(0,jsx_runtime.jsx)("span",{className:"self-center pointer-events-none select-none",children:renderer?.(state.value)??state.value[labelProperty]??state.value})),[state.value,state.query,placeholder,renderer]),openDropdown=(0,react.useCallback)((()=>{setOpen(!0),refs.domReference.current?.querySelector("input")?.focus()}),[]);return(0,react.useLayoutEffect)((()=>{state.open&&setTimeout((()=>{state.selectedIndex&&listRef.current[state.selectedIndex]?.scrollIntoView({block:"center"})}),100)}),[state.open]),(0,jsx_runtime.jsxs)(InputWrapper,{showClear:!(0,dist_esm.Im)(state.value),onClear:handleChange,invalid,readOnly,disabled,required,error,wrapperRef:refs.setReference,className:state.open?"!z-[99]":"",...rest,children:[(0,jsx_runtime.jsxs)("div",{role:"none","data-select-display":"true",className:classnames_default()("group flex-1 py-1 px-2 truncate text-start flex gap-1 relative min-h-5 justify-start",multiple?"flex-wrap":"flex-nowrap overflow-hidden"),...referenceProps,onMouseUp:e=>e.currentTarget.querySelector("input")?.focus(),children:[displayValue,(0,jsx_runtime.jsx)("input",{readOnly:!searchable||readOnly,disabled,value:state.query??"","aria-invalid":invalid,"data-testid":name,name,size:1,ref,autoFocus,className:classnames_default()("appearance-none bg-transparent outline-none border-none ring-0 flex-1 peer",disabled&&"cursor-not-allowed pointer-events-none",multiple&&"min-w-24"),placeholder:(0,dist_esm.Im)(state.value)?placeholder:"",onChange:evt=>handleQuery(evt.target.value)})]}),!state.loading&&!hideHandle&&(0,jsx_runtime.jsx)(esm.In,{className:classnames_default()("flex-content p-2 z-0 order-9 text-muted cursor-pointer self-stretch flex items-center h-auto",state.open&&"-scale-y-100 pointer-events-none",disabled&&"pointer-events-none"),onClick:()=>!disabled&&openDropdown(),icon:esm.OO.chevronDown}),state.loading&&(0,jsx_runtime.jsx)(esm.In,{animate:"spin",className:classnames_default()("flex-content p-2 z-0 order-9 text-muted pointer-events-none"),icon:esm.OO.spinner}),state.open&&!state.loading&&(0,jsx_runtime.jsx)(floating_ui_react.XF,{children:(0,jsx_runtime.jsx)(floating_ui_react.s3,{context,initialFocus:-1,visuallyHiddenDismiss:!0,children:(0,jsx_runtime.jsx)(Options,{ref:refs.setFloating,className:"outline shadow-lg max-h-[40vh] z-(--z-popover)",style:{width:refs.reference.current?.getBoundingClientRect().width,...floatingStyles},...floatingProps,items:state.items,active:state.activeIndex,valueProperty,labelProperty,itemRef:setItemRef,itemProps:makeItemProps,empty:emptyDisplay,children:(item,label)=>renderer?.(item)??label})})})]})};try{Select.displayName="Select",Select.__docgenInfo={description:"",displayName:"Select",props:{defaultOpen:{defaultValue:null,description:"open dropdown by default",name:"defaultOpen",required:!1,type:{name:"boolean"}},hideHandle:{defaultValue:null,description:"hide dropdown handle",name:"hideHandle",required:!1,type:{name:"boolean"}},options:{defaultValue:null,description:"list options",name:"options",required:!1,type:{name:"T[]"}},groupProperty:{defaultValue:null,description:"group by property name",name:"groupProperty",required:!1,type:{name:"string | number | symbol"}},labelProperty:{defaultValue:{value:'"label" as AnyObject'},description:"label property name",name:"labelProperty",required:!1,type:{name:"string | number | symbol"}},valueProperty:{defaultValue:{value:'"id" as AnyObject'},description:"value property name",name:"valueProperty",required:!1,type:{name:"string | number | symbol"}},sortProperty:{defaultValue:null,description:"value property name",name:"sortProperty",required:!1,type:{name:"string | number | true | symbol"}},searchable:{defaultValue:null,description:"searchable list",name:"searchable",required:!1,type:{name:"boolean"}},allowCreate:{defaultValue:null,description:"allow create item",name:"allowCreate",required:!1,type:{name:"boolean"}},emptyDisplay:{defaultValue:null,description:"empty list display",name:"emptyDisplay",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},createOption:{defaultValue:null,description:"create new item object",name:"createOption",required:!1,type:{name:"((query: string) => T)"}},onQuery:{defaultValue:null,description:"query handler",name:"onQuery",required:!1,type:{name:"((query: string) => T[] | Promise<T[]>)"}},renderer:{defaultValue:null,description:"item renderer",name:"renderer",required:!1,type:{name:"((option: T) => ReactNode)"}},matcher:{defaultValue:null,description:"item matcher",name:"matcher",required:!1,type:{name:"((option: T, query: string) => boolean)"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"input placeholder",name:"placeholder",required:!1,type:{name:"string"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},allowClear:{defaultValue:null,description:"show clear button",name:"allowClear",required:!1,type:{name:"boolean"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},multiple:{defaultValue:null,description:"is multiple selection",name:"multiple",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"selected value",name:"value",required:!1,type:{name:"string | string[]"}},onSelect:{defaultValue:null,description:"select handler",name:"onSelect",required:!1,type:{name:"((option: T) => void) | ((option: T[]) => void)"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value?: string) => void) | ((value?: string[]) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/select/Select.tsx#Select"]={docgenInfo:Select.__docgenInfo,name:"Select",path:"packages/form/src/select/Select.tsx#Select"})}catch(__react_docgen_typescript_loader_error){}const SchemaField=({id,field,fieldId,getModel,onRemove,defaultOpen=!0,optionLists=dist_esm.Ml,dynamic,onTypeChange,acceptableTypes})=>{const[type,setType]=(0,react.useState)(),[multiple,setMultiple]=(0,react.useState)(!1),[hasOptions,setHasOptions]=(0,react.useState)(!1),[customOptions,setCustomOptions]=(0,react.useState)(!1),SortableItem=(0,react.useCallback)((({id,children,className})=>{if(dynamic){const{attributes,listeners,setNodeRef,transform,transition,isDragging}=(0,sortable_esm.gl)({id});return(0,jsx_runtime.jsxs)("div",{className,ref:setNodeRef,style:{transform:utilities_esm.Ks.Transform.toString(transform),transition},children:[(0,jsx_runtime.jsx)("div",{className:classnames_default()("invisible group-hover/field:visible my-2 w-4",isDragging?"cursor-grabbing":"cursor-grab"),...attributes,...listeners,style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='4' width='4'%3E%3Ccircle cx='2' cy='2' r='1' fill='%238888' /%3E%3C/svg%3E \")"}}),children]})}return(0,jsx_runtime.jsx)("div",{className,children})}),[dynamic]);SortableItem.displayName="SortableItem";const[OptionModal,openOptionModal]=(0,esm.J$)((props=>(0,jsx_runtime.jsxs)(esm.aF,{...props,children:[(0,jsx_runtime.jsx)(esm.UC,{children:(0,jsx_runtime.jsx)(ArrayInput,{name:`${field}.options`,onAdd:()=>String(""),children:(0,jsx_runtime.jsx)(Controller,{children:(0,jsx_runtime.jsx)(Input,{})})})}),(0,jsx_runtime.jsx)(esm.wi,{flex:!0,justify:"end",className:"sticky bottom-0 border-t bg-base px-6 py-2",children:(0,jsx_runtime.jsx)(esm.$n,{variant:"link",onClick:props.onClose,children:"Close"})})]})));(0,react.useEffect)((()=>{setTimeout((()=>{const model=getModel();setType(model.datatype),setMultiple(model.multiple),setHasOptions(!!model.optionList),setCustomOptions(model.optionList===types_schema.H)}),10)}),[]);const handleTypeChange=(0,react.useCallback)((type=>{if(type){const modelRef=getModel();let reset={datatype:type,id,label:modelRef.label,defaultValue:modelRef.defaultValue,required:modelRef.required,multiple:type!==types_schema.h.AVATAR&&modelRef.multiple,minItems:modelRef.minItems,maxItems:modelRef.maxItems};type===types_schema.h.STRING?reset=Object.assign(reset,{optionList:modelRef.optionList,options:modelRef.options,regex:modelRef.regex}):type===types_schema.h.DATE?reset=Object.assign(reset,{min:modelRef.min,max:modelRef.max}):type!==types_schema.h.NUMBER&&type!==types_schema.h.RANGE||(reset=Object.assign(reset,{min:modelRef.min,max:modelRef.max,step:modelRef.step})),type===types_schema.h.AVATAR&&setMultiple(!1),onTypeChange(reset),setType(type)}}),[id]);return(0,jsx_runtime.jsx)(SortableItem,{id:fieldId,className:"flex flex-nowrap gap-1 group/field",children:(0,jsx_runtime.jsxs)(esm.pJ,{open:defaultOpen,className:"flex-1",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-nowrap items-center",children:[(0,jsx_runtime.jsx)("span",{className:"flex-1 truncate",children:id}),dynamic&&(0,jsx_runtime.jsx)(esm.$n,{size:"sm",color:"danger",variant:"link","aria-label":"Delete",stopPropagation:!0,icon:esm.OO.trash,onClick:onRemove,className:"invisible group-hover/field:visible"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-1 pb-4",children:[(0,jsx_runtime.jsx)(Controller,{name:`${field}.id`,children:(0,jsx_runtime.jsx)(HiddenInput,{hiddenValue:id})}),(0,jsx_runtime.jsx)(Controller,{name:`${field}.datatype`,children:(0,jsx_runtime.jsx)(Select,{inline:!0,label:"Type",placeholder:"Data type",options:acceptableTypes,onChange:val=>handleTypeChange(val)})}),(0,jsx_runtime.jsx)(Controller,{name:`${field}.label`,children:(0,jsx_runtime.jsx)(Input,{inline:!0,label:"Label",allowClear:!0,placeholder:"Label...",decorateEndShowWhenEmpty:!0,decorateEnd:(0,jsx_runtime.jsx)("span",{className:"text-sm text-tint-300 px-1",children:"OPTIONAL"})})}),type===types_schema.h.STRING&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(Controller,{name:`${field}.regex`,children:(0,jsx_runtime.jsx)(Input,{inline:!0,label:"Regex validation",allowClear:!0,placeholder:"Regex value...",decorateEndShowWhenEmpty:!0,decorateEnd:(0,jsx_runtime.jsx)("span",{className:"text-sm text-tint-300 px-1",children:"OPTIONAL"})})}),(0,jsx_runtime.jsxs)(Field,{inline:!0,label:"Option list",children:[(0,jsx_runtime.jsx)(Controller,{name:`${field}.optionList`,children:(0,jsx_runtime.jsx)(Select,{allowClear:!0,options:[types_schema.H,...optionLists],onChange:v=>setCustomOptions(v===types_schema.H)})}),customOptions&&(0,jsx_runtime.jsx)(esm.$n,{icon:esm.OO.list,"aria-label":"Custom options",onClick:()=>{openOptionModal({title:`${id} Options`})}})]}),OptionModal]}),type===types_schema.h.FILE&&(0,jsx_runtime.jsx)(react.Fragment,{children:(0,jsx_runtime.jsx)(Controller,{name:`${field}.accept`,children:(0,jsx_runtime.jsx)(Input,{inline:!0,label:"Accept types",allowClear:!0,placeholder:"Accept value...",decorateEndShowWhenEmpty:!0,decorateEnd:(0,jsx_runtime.jsx)("span",{className:"text-sm text-tint-300 px-1",children:"OPTIONAL"})})})}),[types_schema.h.NUMBER,types_schema.h.RANGE].includes(type)&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(Controller,{name:`${field}.min`,children:(0,jsx_runtime.jsx)(Number_Number,{inline:!0,label:"Min value",allowClear:!0,placeholder:"Minimum value...",decorateEndShowWhenEmpty:!0,decorateEnd:(0,jsx_runtime.jsx)("span",{className:"text-sm text-tint-300 px-1",children:"OPTIONAL"})})}),(0,jsx_runtime.jsx)(Controller,{name:`${field}.max`,children:(0,jsx_runtime.jsx)(Number_Number,{inline:!0,label:"Max value",allowClear:!0,placeholder:"Maximum value...",decorateEndShowWhenEmpty:!0,decorateEnd:(0,jsx_runtime.jsx)("span",{className:"text-sm text-tint-300 px-1",children:"OPTIONAL"})})}),(0,jsx_runtime.jsx)(Controller,{name:`${field}.step`,children:(0,jsx_runtime.jsx)(Number_Number,{inline:!0,label:"Step value",allowClear:!0,placeholder:"Step value...",decorateEndShowWhenEmpty:!0,decorateEnd:(0,jsx_runtime.jsx)("span",{className:"text-sm text-tint-300 px-1",children:"OPTIONAL"})})})]}),type===types_schema.h.DATE&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(Field,{inline:!0,label:"Type",plain:!0,children:(0,jsx_runtime.jsx)(Controller,{name:`${field}.type`,children:(0,jsx_runtime.jsxs)(esm.WK,{value:"",fullWidth:!0,className:"flex-1",children:[(0,jsx_runtime.jsx)(esm.$n,{className:"flex-1",value:"date",children:"Date"}),(0,jsx_runtime.jsx)(esm.$n,{className:"flex-1",value:"datetime",children:"Date Time"})]})})}),(0,jsx_runtime.jsx)(Controller,{name:`${field}.min`,children:(0,jsx_runtime.jsx)(DateInput,{inline:!0,label:"Min value",allowClear:!0,placeholder:"Minimum value...",decorateEndShowWhenEmpty:!0,decorateEnd:(0,jsx_runtime.jsx)("span",{className:"text-sm text-tint-300 px-1",children:"OPTIONAL"})})}),(0,jsx_runtime.jsx)(Controller,{name:`${field}.max`,children:(0,jsx_runtime.jsx)(DateInput,{inline:!0,label:"Max value",allowClear:!0,placeholder:"Maximum value...",decorateEndShowWhenEmpty:!0,decorateEnd:(0,jsx_runtime.jsx)("span",{className:"text-sm text-tint-300 px-1",children:"OPTIONAL"})})})]}),(0,jsx_runtime.jsxs)(Field,{label:" ",inline:!0,plain:!0,children:[(0,jsx_runtime.jsx)(Controller,{name:`${field}.required`,children:(0,jsx_runtime.jsx)(Checkbox,{label:"Required"})}),type!==types_schema.h.AVATAR&&(0,jsx_runtime.jsx)(Controller,{name:`${field}.multiple`,children:(0,jsx_runtime.jsx)(Checkbox,{label:"Multiple",onChange:setMultiple})}),hasOptions&&(0,jsx_runtime.jsx)(Controller,{name:`${field}.allowCustom`,children:(0,jsx_runtime.jsx)(Checkbox,{label:"Allow custom value"})})]}),multiple&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(Controller,{name:`${field}.minItems`,children:(0,jsx_runtime.jsx)(Number_Number,{inline:!0,label:"Min items",allowClear:!0,placeholder:"Minimum items...",decorateEndShowWhenEmpty:!0,decorateEnd:(0,jsx_runtime.jsx)("span",{className:"text-sm text-tint-300 px-1",children:"OPTIONAL"})})}),(0,jsx_runtime.jsx)(Controller,{name:`${field}.maxItems`,children:(0,jsx_runtime.jsx)(Number_Number,{inline:!0,label:"Max items",allowClear:!0,placeholder:"Maximum items...",decorateEndShowWhenEmpty:!0,decorateEnd:(0,jsx_runtime.jsx)("span",{className:"text-sm text-tint-300 px-1",children:"OPTIONAL"})})})]})]})]},fieldId)})};try{SchemaField.displayName="SchemaField",SchemaField.__docgenInfo={description:"",displayName:"SchemaField",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},fieldId:{defaultValue:null,description:"",name:"fieldId",required:!0,type:{name:"string"}},defaultOpen:{defaultValue:{value:"true"},description:"",name:"defaultOpen",required:!1,type:{name:"boolean"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"() => void"}},getModel:{defaultValue:null,description:"",name:"getModel",required:!0,type:{name:"() => KeyValue"}},onTypeChange:{defaultValue:null,description:"",name:"onTypeChange",required:!0,type:{name:"(val: KeyValue) => void"}},children:{defaultValue:null,description:"footer actions",name:"children",required:!1,type:{name:"Elements<Element> | Elements<Element>[]"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"((schema: FormSchema) => void)"}},dynamic:{defaultValue:null,description:"is dynamic schema (allow add/remove)",name:"dynamic",required:!1,type:{name:"boolean"}},acceptableTypes:{defaultValue:null,description:"acceptable list of data types",name:"acceptableTypes",required:!1,type:{name:"DATA_TYPES[]"}},optionLists:{defaultValue:null,description:"available option lists in application",name:"optionLists",required:!1,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/builder/components/SchemaField.tsx#SchemaField"]={docgenInfo:SchemaField.__docgenInfo,name:"SchemaField",path:"packages/form/src/builder/components/SchemaField.tsx#SchemaField"})}catch(__react_docgen_typescript_loader_error){}const SchemaArrayForm=({dynamic,acceptableTypes,optionLists})=>{const form=(0,index_esm.xW)(),[defaultOpen,setDefaultOpen]=(0,react.useState)(!0),{fields,append,remove,move}=(0,index_esm.jz)({name:"schema",control:form.control}),handleTypeChange=(0,react.useCallback)(((index,val)=>{form.setValue(`schema.${index}`,val)}),[]),handleRemove=(0,react.useCallback)((index=>{remove(index)}),[]),[AddModal,openAddfields]=(0,esm.J$)(AddSchemaFields),handleAdd=(0,react.useCallback)((()=>{openAddfields().then((fields=>{if((0,dist_esm.cy)(fields)){const existing=form.getValues().schema.map((field=>field.id));fields.forEach((field=>{existing.includes(field)||append({id:field,datatype:types_schema.h.STRING,label:""})}))}}))}),[]),Wrapper=(0,react.useCallback)((({children})=>{if(dynamic){const idMap=fields.map((item=>item.id)),handleDragEnd=e=>{if(e.over&&e.active.id!==e.over.id){const active=idMap.indexOf(`${e.active.id}`),end=idMap.indexOf(`${e.over.id}`);move(active,end)}};return(0,jsx_runtime.jsx)(core_esm.Mp,{onDragEnd:handleDragEnd,modifiers:[modifiers_esm.FN],children:(0,jsx_runtime.jsx)(sortable_esm.gB,{items:idMap,children})})}return children}),[dynamic,fields]);return Wrapper.displayName="SortableWrapper",(0,jsx_runtime.jsxs)(Wrapper,{children:[(0,jsx_runtime.jsxs)(esm.Y9,{flex:!0,justify:"end",className:"gap-1 px-2",children:[dynamic&&(0,jsx_runtime.jsx)(esm.$n,{size:"sm",variant:"link",icon:esm.OO.insert,"aria-label":"add field",onClick:handleAdd}),(0,jsx_runtime.jsx)(esm.$n,{size:"sm",variant:"link",icon:esm.OO.colapseAllVar,"aria-label":"collapse all",onClick:()=>setDefaultOpen(!1)}),(0,jsx_runtime.jsx)(esm.$n,{size:"sm",variant:"link",icon:esm.OO.expandAllVar,"aria-label":"expand all",onClick:()=>setDefaultOpen(!0)})]}),(0,jsx_runtime.jsx)(esm.UC,{className:"divide-y",children:fields.map(((field,index)=>(0,jsx_runtime.jsx)(SchemaField,{defaultOpen,id:form.getValues().schema[index].id,fieldId:field.id,field:`schema.${index}`,dynamic,optionLists,onRemove:()=>handleRemove(index),getModel:()=>form.getValues().schema[index],onTypeChange:val=>handleTypeChange(index,val),acceptableTypes:acceptableTypes??Object.values(types_schema.h)},index)))}),AddModal]})};try{SchemaArrayForm.displayName="SchemaArrayForm",SchemaArrayForm.__docgenInfo={description:"",displayName:"SchemaArrayForm",props:{schemaDef:{defaultValue:null,description:"default form schema",name:"schemaDef",required:!1,type:{name:"FormSchema"}},dynamic:{defaultValue:null,description:"is dynamic schema (allow add/remove)",name:"dynamic",required:!1,type:{name:"boolean"}},acceptableTypes:{defaultValue:null,description:"acceptable list of data types",name:"acceptableTypes",required:!1,type:{name:"DATA_TYPES[]"}},optionLists:{defaultValue:null,description:"available option lists in application",name:"optionLists",required:!1,type:{name:"string[]"}},children:{defaultValue:null,description:"footer actions",name:"children",required:!1,type:{name:"Elements<Element> | Elements<Element>[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((schema: FormSchema) => void)"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"((schema: FormSchema) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/builder/components/SchemaArrayForm.tsx#SchemaArrayForm"]={docgenInfo:SchemaArrayForm.__docgenInfo,name:"SchemaArrayForm",path:"packages/form/src/builder/components/SchemaArrayForm.tsx#SchemaArrayForm"})}catch(__react_docgen_typescript_loader_error){}const SchemaEditor=({schemaDef,dynamic,acceptableTypes,optionLists=dist_esm.Ml,children,onSubmit,onChange})=>{const formRef=(0,react.useRef)(null),handleChange=(0,react.useCallback)((model=>{onChange?.(model.schema)}),[]),handleSubmit=(0,react.useCallback)((model=>{onSubmit?.(model.schema)}),[]);return(0,react.useEffect)((()=>{formRef.current?.setValues({schema:schemaDef})}),[schemaDef]),(0,jsx_runtime.jsxs)(Form,{formRef,onChange:handleChange,onSubmit:handleSubmit,children:[(0,jsx_runtime.jsx)(SchemaArrayForm,{dynamic,optionLists,acceptableTypes:acceptableTypes??Object.values(types_schema.h)}),children&&(0,jsx_runtime.jsx)(esm.wi,{flex:!0,className:"border-t bg-base px-6 py-2",children})]})};try{SchemaEditor.displayName="SchemaEditor",SchemaEditor.__docgenInfo={description:"",displayName:"SchemaEditor",props:{schemaDef:{defaultValue:null,description:"default form schema",name:"schemaDef",required:!0,type:{name:"FormSchema"}},dynamic:{defaultValue:null,description:"is dynamic schema (allow add/remove)",name:"dynamic",required:!1,type:{name:"boolean"}},acceptableTypes:{defaultValue:null,description:"acceptable list of data types",name:"acceptableTypes",required:!1,type:{name:"DATA_TYPES[]"}},optionLists:{defaultValue:null,description:"available option lists in application",name:"optionLists",required:!1,type:{name:"string[]"}},children:{defaultValue:null,description:"footer actions",name:"children",required:!1,type:{name:"Elements<Element> | Elements<Element>[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((schema: FormSchema) => void)"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"((schema: FormSchema) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/builder/SchemaEditor.tsx#SchemaEditor"]={docgenInfo:SchemaEditor.__docgenInfo,name:"SchemaEditor",path:"packages/form/src/builder/SchemaEditor.tsx#SchemaEditor"})}catch(__react_docgen_typescript_loader_error){}const useFileUploader=(uploader,initialList,multiple=!0)=>{const[state,dispatch]=(0,react.useReducer)(((state,action)=>{if("start"===action.type&&(multiple||state.files.clear(),state.files.set(action.key,action.file),state.count++),"stop"===action.type){const fileObject=state.files.get(action.key);if(fileObject){const{progress,abort,...rest}=fileObject;state.files.set(action.key,{...rest,path:action.path,uploaded:!0})}state.count--}if("error"===action.type){const fileObject=state.files.get(action.key);if(fileObject){const{file,progress,abort,...rest}=fileObject;state.files.set(action.key,{...rest,error:action.error})}state.count--}if("progress"===action.type){const fileObject=state.files.get(action.key);fileObject&&(fileObject.progress=action.progress,state.files.set(action.key,fileObject)),state.count--}return"abort"===action.type&&state.files.delete(action.key),"remove"===action.type&&state.files.delete(action.key),state.list=Array.from(state.files.values()).map((file=>!file.progress&&!file.error&&{key:file.key,path:file.path,mime:file.mime,size:file.size,uploaded:file.uploaded,filename:file.filename})).filter(Boolean),{...state}}),{files:new Map,count:0},(state=>{if(initialList){if((0,dist_esm.Kg)(initialList)){const key=(0,dist_esm.uR)();state.files.set(key,{key,path:initialList,filename:"",size:0,mime:""})}if((0,dist_esm.Gv)(initialList)){const key=(0,dist_esm.uR)();state.files.set(key,{...initialList,key})}(0,dist_esm.cy)(initialList)&&initialList.forEach((file=>{const key=(0,dist_esm.uR)();state.files.set(key,{...file,key})}))}return state.list=Array.from(state.files.values()),state})),doUpload=(0,react.useCallback)((async(key,file)=>{const data=new FormData;data.append("file",file);const abort=new AbortController;dispatch({type:"start",key,file:{key,file,progress:.001,mime:file.type,filename:file.name,size:file.size,abort:()=>abort.abort()}}),await uploader(data,{signal:abort.signal,onUploadProgress(progressEvent){dispatch({type:"progress",key,progress:progressEvent.progress??0})}}).then((path=>{dispatch({type:"stop",key,path})})).catch((error=>{if("ERR_CANCELED"===error.code||"AbortError"===error.name)return dispatch({type:"abort",key});dispatch({type:"error",key,error:error?.message??"form:fileUploadFailed"})}))}),[]),upload=(0,react.useCallback)((files=>{multiple||Array.from(state.files.values())[0]?.abort?.(),Array.from(files??[]).slice(0,multiple?void 0:1).forEach((file=>{doUpload((0,dist_esm.uR)(),file)}))}),[multiple]),retry=(0,react.useCallback)((key=>{const fileObject=state.files.get(key);fileObject?.file&&doUpload(key,fileObject.file)}),[state]);return{upload,remove:(0,react.useCallback)((key=>{dispatch({type:"remove",key})}),[state]),retry,pending:state.count,list:state.list,files:Array.from(state.files.values())}},AvatarInput=({size="6rem",avatarName,value,fileUrl,uploadHandler,...rest})=>{const{files,list,upload,remove}=useFileUploader((async(data,config)=>await(uploadHandler?.(data,config))),value,!1),[base64,setBase64]=(0,react.useState)("");return(0,react.useEffect)((()=>{if(list?.length){const file=files?.[0]?.file;file&&new Response(file).blob().then((blob=>{const reader=new FileReader;reader.onload=()=>{setBase64(reader.result)},reader.onerror=e=>{console.error("ERROR",e)},reader.readAsDataURL(blob)}))}else setBase64("")}),[files,list]),(0,react.useEffect)((()=>{value&&setBase64(fileUrl?.(value)??value)}),[value]),(0,jsx_runtime.jsxs)("div",{className:"flex flex-nowrap items-end",children:[(0,jsx_runtime.jsxs)("div",{className:"inline-block leading-none rounded-full relative outline overflow-hidden",children:[(0,jsx_runtime.jsx)(esm.eu,{name:avatarName??"temp",size,avatar:base64}),(0,jsx_runtime.jsxs)("div",{className:"absolute inset-x-0 bottom-0 cursor-pointer bg-black/20 hover:bg-black/50 text-white text-xs text-center py-1",children:[(0,jsx_runtime.jsx)("span",{children:"Edit"}),(0,jsx_runtime.jsx)("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 z-5 cursor-pointer",onChange:e=>[upload(e.target.files),e.target.value=""]})]})]}),(0,jsx_runtime.jsx)(HiddenInput,{hiddenValue:list?.[0]?.path,...rest}),files.map(((file,idx)=>(0,jsx_runtime.jsxs)("div",{className:"px-2 py-1 flex-1",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-nowrap gap-1 items-center",children:[(0,jsx_runtime.jsx)("div",{className:"flex-initial truncate pe-2",children:file.filename}),file.error&&(0,jsx_runtime.jsx)("div",{className:"flex-1 truncate px-2",children:(0,jsx_runtime.jsx)("span",{className:"text-danger-600",children:file.error})}),file.progress&&(0,jsx_runtime.jsx)(esm.In,{icon:"mdi mdi-stop-circle",bg:"danger",color:"white",size:"sm",className:"p-[2px]","aria-label":"abort",onClick:()=>file.abort?.()}),!file.progress&&(0,jsx_runtime.jsx)(esm.In,{icon:"mdi mdi-trash-can",color:"danger",size:"sm","aria-label":"remove",onClick:()=>remove(file.key)})]}),file.progress&&(0,jsx_runtime.jsx)(esm.z2,{animate:!0,value:100*file.progress,size:"xxs"})]},idx)))]})};try{AvatarInput.displayName="AvatarInput",AvatarInput.__docgenInfo={description:"",displayName:"AvatarInput",props:{name:{defaultValue:null,description:"field name",name:"name",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"actual avatar storage path",name:"value",required:!1,type:{name:"string"}},avatarName:{defaultValue:null,description:"avatar name",name:"avatarName",required:!1,type:{name:"string"}},size:{defaultValue:{value:"6rem"},description:"",name:"size",required:!1,type:{name:"string | number"}},uploadHandler:{defaultValue:null,description:"upload handler to store file in temp storage",name:"uploadHandler",required:!0,type:{name:"UploadHandler"}},fileUrl:{defaultValue:null,description:"file stream path",name:"fileUrl",required:!1,type:{name:"((path: string) => string)"}},onChange:{defaultValue:null,description:"change handler\n@param file\n@param base64\n@returns storage path",name:"onChange",required:!1,type:{name:"((path: string) => void)"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/AvatarInput.tsx#AvatarInput"]={docgenInfo:AvatarInput.__docgenInfo,name:"AvatarInput",path:"packages/form/src/input/AvatarInput.tsx#AvatarInput"})}catch(__react_docgen_typescript_loader_error){}var color=__webpack_require__("./node_modules/color/index.js"),color_default=__webpack_require__.n(color),react_color_es=__webpack_require__("./node_modules/react-color/es/index.js");const DEFAULT_SWATCHES=[color_default()("#d7323a").mix(color_default()("#171a1c"),.5).hex(),color_default()("#ff781c").mix(color_default()("#171a1c"),.5).hex(),color_default()("#f7b731").mix(color_default()("#171a1c"),.5).hex(),color_default()("#88ab1b").mix(color_default()("#171a1c"),.5).hex(),color_default()("#22aa85").mix(color_default()("#171a1c"),.5).hex(),color_default()("#399bec").mix(color_default()("#171a1c"),.5).hex(),color_default()("#4862c8").mix(color_default()("#171a1c"),.5).hex(),color_default()("#aa66cf").mix(color_default()("#171a1c"),.5).hex(),color_default()("#f43f7b").mix(color_default()("#171a1c"),.5).hex(),color_default()("#a37f4f").mix(color_default()("#171a1c"),.5).hex(),"#d7323a","#ff781c","#f7b731","#88ab1b","#22aa85","#399bec","#4862c8","#aa66cf","#f43f7b","#a37f4f",color_default()("#d7323a").mix(color_default()("#f1f3f4"),.5).hex(),color_default()("#ff781c").mix(color_default()("#f1f3f4"),.5).hex(),color_default()("#f7b731").mix(color_default()("#f1f3f4"),.5).hex(),color_default()("#88ab1b").mix(color_default()("#f1f3f4"),.5).hex(),color_default()("#22aa85").mix(color_default()("#f1f3f4"),.5).hex(),color_default()("#399bec").mix(color_default()("#f1f3f4"),.5).hex(),color_default()("#4862c8").mix(color_default()("#f1f3f4"),.5).hex(),color_default()("#aa66cf").mix(color_default()("#f1f3f4"),.5).hex(),color_default()("#f43f7b").mix(color_default()("#f1f3f4"),.5).hex(),color_default()("#a37f4f").mix(color_default()("#f1f3f4"),.5).hex(),"#171a1c","#2d3439","#444e55","#5b6971","#71838e","#86959e","#9ca8b0","#b8c1c6","#d5dadd","#f1f3f4"],ColorPicker=(0,react.memo)((({value,onChange,hideAlpha,defaultColor="#fff",swatches=DEFAULT_SWATCHES})=>{const[actualValue,setActualValue]=(0,react.useState)(""),deferred=(0,react.useDeferredValue)(value??defaultColor);(0,react.useEffect)((()=>{setActualValue(deferred??"")}),[deferred]);const handleChange=(0,react.useCallback)((e=>{setActualValue(e??defaultColor),null!=onChange&&(0,react.startTransition)((()=>onChange(e)))}),[onChange]);return(0,jsx_runtime.jsx)(react_color_es.Xq,{width:"16rem",className:"fabric-colorPicker",styles:{default:{hue:{boxShadow:"0 0 1px 1px var(--color-shadow)"},alpha:{backgroundColor:"var(--fabric-bg)",boxShadow:"0 0 1px 1px var(--color-shadow)"},color:{boxShadow:"0 0 1px 1px var(--color-shadow)"},saturation:{boxShadow:"0 0 1px 1px var(--color-shadow)"},activeColor:{boxShadow:"0 0 1px 1px var(--color-shadow)"},picker:{backgroundColor:"var(--fabric-bg)",boxShadow:"0 0 0 1px var(--color-shadow), 0 0 8px var(--fabric-shadow)"},checkboard:{white:"transparent",black:"red"}}},color:actualValue,presetColors:swatches,disableAlpha:hideAlpha,onChange:({rgb:{a=1,...rgb}})=>setActualValue(color_default()(rgb).alpha(a)[a<1?"hexa":"hex"]()),onChangeComplete:({rgb:{a=1,...rgb}})=>handleChange(color_default()(rgb).alpha(a)[a<1?"hexa":"hex"]())})}));try{ColorPicker.displayName="ColorPicker",ColorPicker.__docgenInfo={description:"",displayName:"ColorPicker",props:{swatches:{defaultValue:null,description:"color swatches",name:"swatches",required:!1,type:{name:"string[]"}},defaultColor:{defaultValue:null,description:"default color",name:"defaultColor",required:!1,type:{name:"string"}},hideAlpha:{defaultValue:null,description:"hide alpha value",name:"hideAlpha",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"color value",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((color?: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/ColorPicker.tsx#ColorPicker"]={docgenInfo:ColorPicker.__docgenInfo,name:"ColorPicker",path:"packages/form/src/input/ColorPicker.tsx#ColorPicker"})}catch(__react_docgen_typescript_loader_error){}const ColorInput=({ref,required,disabled,readOnly,invalid,error,value,showPicker,defaultColor="",onBlur,onFocus,onChange,noOutline,...rest})=>{const[actualValue,setActualValue]=(0,react.useState)(""),deferred=(0,react.useDeferredValue)(value??defaultColor);(0,react.useEffect)((()=>{setActualValue(deferred??"")}),[deferred]);const handleChange=(0,react.useCallback)((e=>{setActualValue(e??defaultColor),null!=onChange&&(0,react.startTransition)((()=>onChange(e??null)))}),[onChange]),arrowRef=(0,react.useRef)(null),[isOpen,setIsOpen]=(0,react.useState)(!1),{refs,floatingStyles,context}=(0,floating_ui_react.we)({open:isOpen,onOpenChange:(open,_,reason)=>{"reference-press"!==reason&&setIsOpen(open)},strategy:"fixed",placement:"bottom",whileElementsMounted:floating_ui_dom.ll,middleware:[(0,floating_ui_react_dom.BN)({padding:8}),(0,floating_ui_react_dom.UU)(),(0,floating_ui_react_dom.cY)(9),(0,floating_ui_react_dom.UE)({element:arrowRef})]}),click=(0,floating_ui_react.kp)(context,{enabled:!disabled&&!readOnly}),dismiss=(0,floating_ui_react.s9)(context,{referencePress:!0}),{getReferenceProps,getFloatingProps}=(0,floating_ui_react.bv)([dismiss,click]);return(0,jsx_runtime.jsxs)(InputWrapper,{showClear:actualValue!==defaultColor&&!disabled&&!readOnly,onClear:handleChange,invalid,readOnly,disabled,required,error,...rest,children:[(0,jsx_runtime.jsx)("button",{"data-ref":"button",className:"flex-1 flex items-center",ref:refs.setReference,...getReferenceProps({onBlur,onFocus}),"data-inner-clickable":"true","data-dropdown-open":!!isOpen||void 0,children:(0,jsx_runtime.jsx)("div",{role:"none",className:"h-[1.5em] min-w-[1.5em] flex-1 flex items-center justify-center self-stretch cursor-pointer m-[0.25em] rounded outline outline-tint-100",style:{backgroundColor:actualValue,opacity:disabled?.65:1,pointerEvents:disabled?"none":void 0},children:!actualValue&&(0,jsx_runtime.jsx)(esm.In,{size:"md",className:"text-muted",icon:esm.OO.colorSwatch})})}),isOpen&&(0,jsx_runtime.jsxs)("div",{ref:refs.setFloating,style:{zIndex:"var(--z-popover)",...floatingStyles},"data-ref":"dropdownBody",...getFloatingProps(),children:[(0,jsx_runtime.jsx)(ColorPicker,{...rest,onChange:handleChange,defaultColor,value:actualValue}),(0,jsx_runtime.jsx)(floating_ui_react.ie,{ref:arrowRef,context,strokeWidth:.5,className:"fill-base stroke-muted"})]}),!disabled&&showPicker&&(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.colorPicker,onClick:()=>window.EyeDropper&&(new window.EyeDropper).open().then((resp=>handleChange(resp.sRGBHex)))})]})};try{ColorInput.displayName="ColorInput",ColorInput.__docgenInfo={description:"",displayName:"ColorInput",props:{showPicker:{defaultValue:null,description:"show eydrop picker",name:"showPicker",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"value",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value: string | null) => void)"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"input placeholder",name:"placeholder",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:null,description:"show clear button",name:"allowClear",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},defaultColor:{defaultValue:{value:""},description:"default color",name:"defaultColor",required:!1,type:{name:"string"}},swatches:{defaultValue:null,description:"color swatches",name:"swatches",required:!1,type:{name:"string[]"}},hideAlpha:{defaultValue:null,description:"hide alpha value",name:"hideAlpha",required:!1,type:{name:"boolean"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/ColorInput.tsx#ColorInput"]={docgenInfo:ColorInput.__docgenInfo,name:"ColorInput",path:"packages/form/src/input/ColorInput.tsx#ColorInput"})}catch(__react_docgen_typescript_loader_error){}const getBoundingClientRect=element=>{const rect=element.getBoundingClientRect();return{top:Math.ceil(rect.top),left:Math.ceil(rect.left),right:Math.ceil(rect.right),width:Math.ceil(rect.width),bottom:Math.ceil(rect.bottom),height:Math.ceil(rect.height)}},sortNumList=arr=>[...arr].map(Number).sort(((a,b)=>a-b)),linearInterpolator_getPercentageForValue=(val,min,max)=>Math.max(0,Math.min(100,(val-min)/(max-min)*100)),linearInterpolator_getValueForClientX=(clientX,trackDims,min,max,isRtl)=>{const{left,right,width}=trackDims;return(max-min)*((isRtl?right-clientX:clientX-left)/width)+min},linearInterpolator_getValueForClientY=(clientY,trackDims,min,max)=>{const{height,bottom}=trackDims;return(max-min)*((bottom-clientY)/height)+min},useRanger=opts=>{const tickSize=opts.tickSize??10,values=opts.values,min=opts.min,max=opts.max,isVertical=opts.vertical,controlledTicks=opts.ticks,steps="steps"in opts?opts.steps:void 0,onChange=opts.onChange,onDrag=opts.onDrag,onDragStart=opts.onDragStart,onDragEnd=opts.onDragEnd,stepSize="stepSize"in opts?opts.stepSize:1,[activeHandleIndex,setActiveHandleIndex]=(0,react.useState)(),[segmentStart,setSegmentStart]=(0,react.useState)(),[tempValues,setTempValues]=(0,react.useState)(),isRtl=(0,esm.OL)(),positionProp=(0,react.useMemo)((()=>isVertical?"bottom":isRtl?"right":"left"),[isVertical,isRtl]),marginProp=(0,react.useMemo)((()=>isVertical?"marginBottom":isRtl?"marginRight":"marginLeft"),[isVertical,isRtl]),getLatest=(val=>{const ref=(0,react.useRef)(val);return ref.current=val,(0,react.useCallback)((()=>ref.current),[])})({activeHandleIndex,segmentStart,onChange,onDrag,onDragStart,onDragEnd,values,tempValues}),trackElRef=(0,react.useRef)(null),segmentElRef=(0,react.useRef)(null),getValueForClientX=(0,react.useCallback)((clientX=>{const trackDims=getBoundingClientRect(trackElRef.current);return linearInterpolator_getValueForClientX(clientX,trackDims,min,max,isRtl)}),[max,min,isRtl]),getValueForClientY=(0,react.useCallback)((clientY=>{const trackDims=getBoundingClientRect(trackElRef.current);return linearInterpolator_getValueForClientY(clientY,trackDims,min,max)}),[max,min]),getNextStep=(0,react.useCallback)(((val,direction)=>{if(steps){const nextIndex=steps.indexOf(val)+direction;return nextIndex>=0&&nextIndex<steps.length?steps[nextIndex]:val}{0;const nextVal=val+stepSize*direction;return nextVal>=min&&nextVal<=max?nextVal:val}}),[max,min,stepSize,steps]),roundToStep=(0,react.useCallback)((val=>{let left=min,right=max;if(steps)steps.forEach((step=>{step<=val&&step>left&&(left=step),step>=val&&step<right&&(right=step)}));else{for(0;left<val&&left+stepSize<val;)left+=stepSize;right=Math.min(left+stepSize,max)}return val-left<right-val?+left.toFixed(3):+right.toFixed(3)}),[max,min,stepSize,steps]),handleDrag=(0,react.useCallback)((e=>{const{activeHandleIndex,onDrag}=getLatest(),clientX="touchmove"===e.type?e.changedTouches[0].clientX:e.clientX,clientY="touchmove"===e.type?e.changedTouches[0].clientY:e.clientY,newValue=isVertical?getValueForClientY(clientY):getValueForClientX(clientX),newRoundedValue=roundToStep(newValue),newValues=[...values.slice(0,activeHandleIndex),newRoundedValue,...values.slice(+activeHandleIndex+1)];onDrag?.(newValues),setTempValues(newValues)}),[getLatest,getValueForClientX,getValueForClientY,roundToStep,values,isVertical]),handleSegmentDrag=(0,react.useCallback)((e=>{const{segmentStart:[segX,segY],tempValues,onDrag}=getLatest(),{left,bottom}=getBoundingClientRect(segmentElRef.current),clientX="touchmove"===e.type?e.changedTouches[0].clientX:e.clientX,clientY="touchmove"===e.type?e.changedTouches[0].clientY:e.clientY,start=getValueForClientX(isVertical?bottom+(clientY-segY):left+(clientX-segX));let diff=roundToStep(start)-tempValues[0];+tempValues[1]+diff>max&&(diff=0);const newValues=[+tempValues[0]+diff,+tempValues[1]+diff];tempValues[0]===newValues[0]&&tempValues[1]===newValues[1]||(onDrag?.(newValues),setTempValues(newValues),setSegmentStart([clientX,clientY]))}),[getLatest,getValueForClientX,getValueForClientY,roundToStep,values,isVertical,max]),handleKeyDown=(0,react.useCallback)(((e,i)=>{const{values,onChange}=getLatest();if(["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(e.key)){setActiveHandleIndex(i);const direction=["ArrowLeft","ArrowDown"].includes(e.key)?-1:1,newValue=+getNextStep(values[i],direction).toFixed(3),newValues=[...values.slice(0,i),newValue,...values.slice(i+1)],sortedValues=sortNumList(newValues);onChange?.(sortedValues),e.stopPropagation(),e.preventDefault()}}),[getLatest,getNextStep]),handlePress=(0,react.useCallback)(((e,i)=>{const{onDragStart,values}=getLatest();if(-1===i){const clientX="touchmove"===e.type?e.nativeEvent.changedTouches[0].clientX:e.nativeEvent.clientX,clientY="touchmove"===e.type?e.nativeEvent.changedTouches[0].clientY:e.nativeEvent.clientY;setTempValues(values),setSegmentStart([clientX,clientY])}else setActiveHandleIndex(i);const handleRelease=e=>{const{tempValues,onChange,onDragEnd}=getLatest();document.removeEventListener("mousemove",-1===i?handleSegmentDrag:handleDrag),document.removeEventListener("touchmove",-1===i?handleSegmentDrag:handleDrag),document.removeEventListener("mouseup",handleRelease,{capture:!0}),document.removeEventListener("touchend",handleRelease,{capture:!0});const sortedValues=sortNumList(tempValues||values);onDragEnd?.(),onChange?.(sortedValues),setActiveHandleIndex(void 0),setSegmentStart(void 0),setTempValues(void 0)};onDragStart?.(),document.addEventListener("mousemove",-1===i?handleSegmentDrag:handleDrag),document.addEventListener("touchmove",-1===i?handleSegmentDrag:handleDrag),document.addEventListener("mouseup",handleRelease,{capture:!0}),document.addEventListener("touchend",handleRelease,{capture:!0})}),[getLatest,handleDrag]),getPercentageForValue=(0,react.useCallback)((val=>linearInterpolator_getPercentageForValue(val,min,max)),[max,min]),trackClicked=(0,react.useCallback)((e=>{const{onChange,values}=getLatest(),clientX="touchmove"===e.type?e.changedTouches[0].clientX:e.clientX,clientY="touchmove"===e.type?e.changedTouches[0].clientY:e.clientY,newValue=isVertical?getValueForClientY(clientY):getValueForClientX(clientX),newRoundedValue=roundToStep(newValue);let newValues=[newRoundedValue];if(2===values.length)if(values[0]>newRoundedValue)newValues=[newRoundedValue,values[1]];else if(values[1]<newRoundedValue)newValues=[values[0],newRoundedValue];else{const diff=(values[1]-values[0])/2;values[0]+diff>=newRoundedValue&&(newValues=[newRoundedValue,values[1]]),values[1]-diff<=newRoundedValue&&(newValues=[values[0],newRoundedValue])}onChange(newValues)}),[getLatest,getValueForClientX,getValueForClientY,isVertical]);(0,react.useEffect)((()=>{trackElRef.current?.addEventListener("mousedown",trackClicked)}),[trackClicked]);const ticks=(0,react.useMemo)((()=>{let ticks=controlledTicks??steps;if(!ticks){ticks=[min];const count=tickSize-tickSize%stepSize;for(;ticks[ticks.length-1]<max-count;)ticks.push(ticks[ticks.length-1]+count);ticks.push(max)}return ticks.map(((value,i)=>({key:i,value,percentage:getPercentageForValue(value),styles:{[positionProp]:`${getPercentageForValue(value)}%`,[marginProp]:"-0.125rem"}})))}),[controlledTicks,getPercentageForValue,max,min,steps,tickSize,positionProp,marginProp]),segments=(0,react.useMemo)((()=>{const sortedValues=sortNumList(tempValues??values);return[...sortedValues,max].map(((value,i)=>{const active=i===sortedValues.length-1;return{key:i,value,active,props:active?{ref:segmentElRef,onMouseDownCapture:e=>{e.stopPropagation(),e.persist(),handlePress(e,-1)},onTouchStartCapture:e=>{e.stopPropagation(),e.persist(),handlePress(e,-1)}}:{},styles:(()=>{const left=getPercentageForValue(sortedValues[i-1]?sortedValues[i-1]:min),width=getPercentageForValue(value)-left;return{[positionProp]:`${left}%`,[isVertical?"height":"width"]:`${width}%`}})()}}))}),[getPercentageForValue,max,min,tempValues,values,positionProp,marginProp]),handles=(0,react.useMemo)((()=>(tempValues??values).map(((value,i)=>({key:i,value,percentage:getPercentageForValue(value),active:i===activeHandleIndex,props:{role:"slider","aria-valuemin":min,"aria-valuemax":max,"aria-valuenow":value,onKeyDown:e=>{e.stopPropagation(),e.persist(),handleKeyDown(e,i)},onMouseDownCapture:e=>{e.stopPropagation(),e.persist(),handlePress(e,i)},onTouchStartCapture:e=>{e.stopPropagation(),e.persist(),handlePress(e,i)}},styles:{[positionProp]:`${getPercentageForValue(value)}%`,[marginProp]:"-0.375rem"},valueStyles:{[positionProp]:`${getPercentageForValue(value)}%`}})))),[activeHandleIndex,getPercentageForValue,handleKeyDown,handlePress,min,max,tempValues,values,positionProp,marginProp]);return{trackElRef,activeHandleIndex,ticks,segments,handles}};try{useRanger.displayName="useRanger",useRanger.__docgenInfo={description:"",displayName:"useRanger",props:{values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"readonly number[]"}},min:{defaultValue:null,description:"",name:"min",required:!0,type:{name:"number"}},max:{defaultValue:null,description:"",name:"max",required:!0,type:{name:"number"}},tickSize:{defaultValue:null,description:"",name:"tickSize",required:!0,type:{name:"number"}},ticks:{defaultValue:null,description:"",name:"ticks",required:!1,type:{name:"number[]"}},vertical:{defaultValue:null,description:"",name:"vertical",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"RangerChangeEvent"}},onDrag:{defaultValue:null,description:"",name:"onDrag",required:!1,type:{name:"RangerChangeEvent"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"(() => void)"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"(() => void)"}},debug:{defaultValue:null,description:"",name:"debug",required:!1,type:{name:"boolean"}},stepSize:{defaultValue:null,description:"",name:"stepSize",required:!0,type:{name:"number"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"number[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/ranger/index.tsx#useRanger"]={docgenInfo:useRanger.__docgenInfo,name:"useRanger",path:"packages/form/src/ranger/index.tsx#useRanger"})}catch(__react_docgen_typescript_loader_error){}const RangeSlider=({error,name,value,step=1,min=0,max=100,height=192,color,vertical,showLabels,showValue,minLabel,maxLabel,ranges,format,autoFocus,disabled,readOnly,onBlur,onChange,onEnterPressed,onFocus,onSlide,invalid,...rest})=>{const[actualValue,setActualValue]=(0,react.useState)([0,0]),[displayValue,setDisplayValue]=(0,react.useState)(!1),deferred=(0,react.useDeferredValue)(value),minValue=(0,react.useMemo)((()=>ranges?.[0]??min),[min,ranges]),maxValue=(0,react.useMemo)((()=>ranges?.slice(-1)[0]??max),[max,ranges]);(0,react.useEffect)((()=>{setActualValue(deferred??[min,max])}),[deferred,min,max]),(0,react.useEffect)((()=>{setDisplayValue(!!showValue)}),[showValue]);const handleChange=(0,react.useCallback)((val=>{setActualValue(val??[min,max]),onChange?.(val??null)}),[onChange,min,max]),minDisplay=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)("span",{className:"text-sm text-dimmed px-2.5 py-px whitespace-nowrap overflow-hidden text-center",children:minLabel??dist_esm.yL.number(min,format)})),[minLabel,min,format]),maxDisplay=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)("span",{className:"text-sm text-dimmed px-2.5 py-px whitespace-nowrap overflow-hidden text-center",children:maxLabel??dist_esm.yL.number(max,format)})),[maxLabel,max,format]),rangerInstance=useRanger({values:actualValue,min:minValue,max:maxValue,stepSize:step,steps:ranges,vertical,tickSize:Math.max((max-min)/10,step),onDrag:val=>onSlide?.(val[0]),onDragStart:()=>setDisplayValue(!0),onDragEnd:()=>setDisplayValue(!!showValue),onChange:values=>handleChange([values[0],values[1]])});return(0,jsx_runtime.jsx)(InputWrapper,{...rest,noOutline:!0,error,invalid,isDisabled:disabled,isReadOnly:readOnly,canClear:!!actualValue,children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()("flex-1 order-3 flex items-center select-none z-0",vertical&&"flex-col w-8",invalid?"text-danger-500":"text-primary-600"),"data-vertical":!!vertical,style:invalid?void 0:{color},children:[showLabels&&(vertical?maxDisplay:minDisplay),(0,jsx_runtime.jsxs)("div",{ref:rangerInstance.trackElRef,className:classnames_default()("flex-1 relative flex items-center",vertical?"my-2 w-8":"mx-2 h-8"),style:{height:vertical?height:void 0},children:[rangerInstance.ticks.map((({value,key,styles})=>(0,jsx_runtime.jsx)("div",{className:classnames_default()("absolute inline-block h-1 w-1 rounded-sm bg-invert opacity-30 leading-[0] z-1",vertical&&"left-1/2 -ml-0.5"),style:styles},key))),rangerInstance.segments.map((({key,styles,active})=>(0,jsx_runtime.jsx)("div",{className:classnames_default()("absolute",active?"bg-current z-1 opacity-90":"bg-invert opacity-5 z-0",vertical?"-bottom-1 left-1/2 -translate-x-1/2":"top-1/2 -translate-y-1/2",!vertical&&(active?"h-1":"h-0.5"),vertical&&(active?"w-1":"w-0.5")),style:styles},key))),rangerInstance.handles.map((({key,value,props,styles,valueStyles})=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("button",{type:"button",className:classnames_default()("bg-current cursor-pointer appearance-none h-3 w-3 rounded-full z-1 absolute","focus:ring-2 focus:ring-offset-2",vertical&&"left-1/2 -ml-1.5"),...props,style:styles}),displayValue&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("bg-invert text-invert py-px px-2 text-xs absolute rounded z-1 whitespace-nowrap","before:absolute before:h-1.5 before:w-1.5 before:z-[-1] before:bg-invert before:top-1/2 before:-translate-y-1/2 before:rotate-45",vertical?"end-0 ltr:translate-x-full rtl:-translate-x-full translate-y-2":"top-1/2 -translate-y-1/2",!vertical&&(0===key?"-ms-3 ltr:-translate-x-full rtl:translate-x-full ltr:before:translate-x-[0.125rem] rtl:before:-translate-x-[0.125rem] before:end-0":"ms-3 ltr:before:-translate-x-[0.125rem] rtl:before:translate-x-[0.125rem] before:start-0")),"data-align":0===key?"start":"end",style:valueStyles,children:dist_esm.yL.number(value,format)})]},key)))]}),showLabels&&(vertical?minDisplay:maxDisplay)]})})};try{RangeSlider.displayName="RangeSlider",RangeSlider.__docgenInfo={description:"Number Range input",displayName:"RangeSlider",props:{min:{defaultValue:{value:"0"},description:"min value",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:{value:"100"},description:"max value",name:"max",required:!1,type:{name:"number"}},step:{defaultValue:{value:"1"},description:"increment step",name:"step",required:!1,type:{name:"number"}},color:{defaultValue:null,description:"Range color",name:"color",required:!1,type:{name:"string"}},height:{defaultValue:{value:"192"},description:"Range height (only vertical)",name:"height",required:!1,type:{name:"number"}},vertical:{defaultValue:null,description:"vertical orientation",name:"vertical",required:!1,type:{name:"boolean"}},showValue:{defaultValue:null,description:"display value tooltip",name:"showValue",required:!1,type:{name:"boolean"}},showLabels:{defaultValue:null,description:"display min/max labels",name:"showLabels",required:!1,type:{name:"boolean"}},minLabel:{defaultValue:null,description:"custom min label",name:"minLabel",required:!1,type:{name:"string"}},maxLabel:{defaultValue:null,description:"custom max label",name:"maxLabel",required:!1,type:{name:"string"}},ranges:{defaultValue:null,description:"step ranges",name:"ranges",required:!1,type:{name:"number[]"}},format:{defaultValue:null,description:"format value",name:"format",required:!1,type:{name:"string"}},onSlide:{defaultValue:null,description:"slide event handler",name:"onSlide",required:!1,type:{name:"((val: number) => void)"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value: [number, number] | null) => void)"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"value",name:"value",required:!1,type:{name:"[number, number]"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/RangeSlider.tsx#RangeSlider"]={docgenInfo:RangeSlider.__docgenInfo,name:"RangeSlider",path:"packages/form/src/input/RangeSlider.tsx#RangeSlider"})}catch(__react_docgen_typescript_loader_error){}const Switch=({ref,label,checked,invalid,disabled,error,width,color,name,onLabel,offLabel,onLabelColor,offLabelColor,defaultColor,required,onChange,...rest})=>{const[actualValue,setActualValue]=(0,react.useState)(!1),deferred=(0,react.useDeferredValue)(!!checked);(0,react.useEffect)((()=>{setActualValue(deferred)}),[deferred]);const handleChange=(0,react.useCallback)((e=>{setActualValue(e?.target.checked??!1),onChange?.(e?.target.checked??!1)}),[onChange]);return(0,jsx_runtime.jsxs)("label",{className:classnames_default()(invalid?"ring-danger-500":"ring-primary-500",disabled?"opacity-50 cursor-not-allowed":"hover:opacity-100 cursor-pointer","inline-flex gap-1 py-1 items-center relative cursor-pointer opacity-85 rounded ring-offset-2 has-[:focus-visible]:ring-1"),style:{width},children:[(0,jsx_runtime.jsxs)("div",{className:classnames_default()(actualValue&&getBgClass(color?`${color}-500`:"primary-500"),!actualValue&&(defaultColor?getBgClass(`${defaultColor}-500`):"bg-tint-200"),"relative grid grid-cols-2 items-center h-6 min-w-10 cursor-pointer rounded-full p-1 transition-colors duration-200 ease-in-out"),style:{backgroundColor:getColor(actualValue?color:defaultColor)},children:[(0,jsx_runtime.jsx)("input",{className:classnames_default()("appearance-none absolute opacity-0 inset-0 bg-transparent border-none outline-none ring-0"),"aria-invalid":invalid,"aria-disabled":disabled,disabled,"aria-errormessage":error,type:"checkbox",ref,size:1,tabIndex:0,autoComplete:"off",checked:actualValue,onChange:handleChange,...rest}),(0,jsx_runtime.jsx)("span",{"aria-hidden":"true",className:classnames_default()(!disabled&&"shadow-sm",actualValue?"translate-x-[100%]":"translate-x-0","pointer-events-none inline-block h-4 start-1 absolute rounded-full bg-white ring-0 transition duration-200 ease-in-out"),style:{width:"calc(50% - 0.25rem)"}}),(!!onLabel||!!offLabel)&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:`whitespace-nowrap text-xs px-1 ${getColorClass(onLabelColor??"white")}`,style:{color:getColor(onLabelColor)},children:onLabel??" "}),(0,jsx_runtime.jsx)("span",{className:`whitespace-nowrap text-xs px-1 ${getColorClass(offLabelColor??"base")}`,style:{color:getColor(offLabelColor)},children:offLabel??" "})]})]}),(0,jsx_runtime.jsx)(ErrorIcon,{invalid,error}),label&&(0,jsx_runtime.jsx)("span",{className:"flex-initial leading-tight truncate",children:label})]})};try{Switch.displayName="Switch",Switch.__docgenInfo={description:"",displayName:"Switch",props:{label:{defaultValue:null,description:"Switch label",name:"label",required:!1,type:{name:"string | Element"}},checked:{defaultValue:null,description:"checked",name:"checked",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"on checked change",name:"onChange",required:!1,type:{name:"((checked: boolean) => void)"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},color:{defaultValue:null,description:"cutom Switch icon",name:"color",required:!1,type:{name:"string"}},defaultColor:{defaultValue:null,description:"cutom Switch icon",name:"defaultColor",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},onLabel:{defaultValue:null,description:"",name:"onLabel",required:!1,type:{name:"string"}},onLabelColor:{defaultValue:null,description:"",name:"onLabelColor",required:!1,type:{name:"string"}},offLabel:{defaultValue:null,description:"",name:"offLabel",required:!1,type:{name:"string"}},offLabelColor:{defaultValue:null,description:"",name:"offLabelColor",required:!1,type:{name:"string"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/Switch.tsx#Switch"]={docgenInfo:Switch.__docgenInfo,name:"Switch",path:"packages/form/src/input/Switch.tsx#Switch"})}catch(__react_docgen_typescript_loader_error){}const Textarea=({ref,value,name,invalid,readOnly,disabled,required,placeholder,autoFocus,rows=5,maxRows=12,variableRows,expandable,onBlur,onFocus,onChange,onEnterPressed,...rest})=>{const[actualValue,setActualValue]=(0,react.useState)(""),[fixedRows,setFixedRows]=(0,react.useState)(rows),deferred=(0,react.useDeferredValue)(value),wrapperRef=(0,react.useRef)(null);(0,react.useEffect)((()=>{setActualValue(deferred??"")}),[deferred]);const handleChange=(0,react.useCallback)((e=>{const value=e?.target.value;setActualValue(value??""),onChange?.(value??null)}),[onChange]);(0,react.useEffect)((()=>{if(variableRows){const lines=actualValue?.split("\n").length??1;setFixedRows(Math.max(rows,Math.min(maxRows,lines)))}else setFixedRows(rows)}),[actualValue,variableRows,rows,maxRows]);const handleEnterPressed=useHandleEnter(onEnterPressed,{preventDefault:!!onEnterPressed});return(0,jsx_runtime.jsx)(InputWrapper,{showClear:!!actualValue&&!disabled&&!readOnly,onClear:handleChange,invalid,readOnly,disabled,required,wrapperRef,textareaExpandable:expandable,textarea:!0,...rest,children:(0,jsx_runtime.jsx)("textarea",{className:"appearance-none self-stretch bg-transparent py-1 px-2 flex-1 border-none outline-none ring-0 min-h-20 resize-none","aria-invalid":invalid,"aria-disabled":disabled,"aria-readonly":readOnly,placeholder,disabled,readOnly,rows:fixedRows,"data-testid":name,name,ref,autoComplete:"off",autoFocus,value:actualValue,onBlur,onFocus,onChange:handleChange,onKeyDown:handleEnterPressed})})};try{Textarea.displayName="Textarea",Textarea.__docgenInfo={description:"",displayName:"Textarea",props:{rows:{defaultValue:{value:"5"},description:"textarae rows",name:"rows",required:!1,type:{name:"number"}},maxRows:{defaultValue:{value:"12"},description:"maximum rows",name:"maxRows",required:!1,type:{name:"number"}},variableRows:{defaultValue:null,description:"increment rows on value change",name:"variableRows",required:!1,type:{name:"boolean"}},expandable:{defaultValue:null,description:"expandable textarea",name:"expandable",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"value",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value: string | null) => void)"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"input placeholder",name:"placeholder",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:null,description:"show clear button",name:"allowClear",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLTextAreaElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/Textarea.tsx#Textarea"]={docgenInfo:Textarea.__docgenInfo,name:"Textarea",path:"packages/form/src/input/Textarea.tsx#Textarea"})}catch(__react_docgen_typescript_loader_error){}const FileField=({uploadHandler,inline,label,accept,value,fileUrl,multiple,invalid,error,...rest})=>{const{t}=(0,es.Bd)(),{pending,files,list,upload,remove}=useFileUploader((async(data,config)=>await(uploadHandler?.(data,config))),value,multiple);return(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(Field,{plain:!0,inline,label,children:(0,jsx_runtime.jsx)(HiddenInput,{hiddenValue:multiple?list:list?.[0],...rest})}),(0,jsx_runtime.jsx)(esm.m_,{color:"danger-200",content:(0,dist_esm.Kg)(error)?`${error}`:error&&t(error?.key,error.values?{...error?.values,label:t(error.values?.label??"form:badkey",error.values?.path)}:{}),disabled:!error,children:(0,jsx_runtime.jsx)(esm.$n,{badge:pending>0?`${pending}`:void 0,color:error?"danger":void 0,variant:error?"soft":void 0,"data-ref":"filebtn",children:(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("span",{children:"Add file"}),(0,jsx_runtime.jsx)("input",{type:"file",accept,multiple,className:"absolute inset-0 opacity-0 z-5",onChange:e=>[upload(e.target.files),e.target.value=""]})]})})}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)("div",{className:"bg-alternate",children:files.map(((file,idx)=>(0,jsx_runtime.jsxs)("div",{className:"px-2 py-1",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-nowrap gap-1 items-start",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1 truncate pe-2",children:[file.filename,(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)("span",{className:"text-xs",children:dist_esm.fO.mime(file.mime)}),(0,jsx_runtime.jsx)("span",{className:"text-xs px-1",children:dist_esm.yL.bytes(file.size)})]}),(0,jsx_runtime.jsx)("div",{className:"flex-initial truncate px-2",children:file.error&&(0,jsx_runtime.jsx)("span",{className:"text-danger-600",children:file.error})}),file.progress&&(0,jsx_runtime.jsx)(esm.In,{icon:"mdi mdi-stop-circle",bg:"danger",color:"white",size:"sm",className:"p-[2px]","aria-label":"abort",onClick:()=>file.abort?.()}),!file.progress&&(0,jsx_runtime.jsx)(esm.In,{icon:"mdi mdi-trash-can",color:"danger",size:"sm","aria-label":"remove",onClick:()=>remove(file.key)})]}),file.progress&&(0,jsx_runtime.jsx)(esm.z2,{animate:!0,value:100*file.progress,size:"xxs"})]},idx)))})]})};try{FileField.displayName="FileField",FileField.__docgenInfo={description:"",displayName:"FileField",props:{datatype:{defaultValue:null,description:"",name:"datatype",required:!1,type:{name:"enum",value:[{value:'"file"'}]}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},multiple:{defaultValue:null,description:"",name:"multiple",required:!1,type:{name:"boolean"}},minItems:{defaultValue:null,description:"",name:"minItems",required:!1,type:{name:"number"}},maxItems:{defaultValue:null,description:"",name:"maxItems",required:!1,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"any"}},fileUrl:{defaultValue:null,description:"",name:"fileUrl",required:!1,type:{name:"((path: string) => string)"}},uploadHandler:{defaultValue:null,description:"",name:"uploadHandler",required:!0,type:{name:"UploadHandler"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/builder/FileField.tsx#FileField"]={docgenInfo:FileField.__docgenInfo,name:"FileField",path:"packages/form/src/builder/FileField.tsx#FileField"})}catch(__react_docgen_typescript_loader_error){}const FormField=({id,label,required,inline,prefix,autoFocus,optionLists,fileUrl,uploadHandler,...rest})=>{const{t}=(0,es.Bd)(),fieldName=(0,react.useMemo)((()=>[prefix,id].filter(Boolean).join(".")),[id,prefix]),hasOptions=(0,react.useMemo)((()=>rest.datatype===types_schema.h.STRING&&("--CUSTOM--"===rest.optionList&&!(0,dist_esm.Im)(rest.options)||!(0,dist_esm.Im)(optionLists?.[rest.optionList??""]))),[rest]),E=(0,react.useMemo)((()=>rest.datatype===types_schema.h.NUMBER?Number_Number:rest.datatype===types_schema.h.RANGE?RangeSlider:rest.datatype===types_schema.h.BOOL?Switch:rest.datatype===types_schema.h.TEXT?Textarea:rest.datatype===types_schema.h.DATE||rest.datatype===types_schema.h.DATETIME?DateInput:rest.datatype===types_schema.h.COLOR?ColorInput:hasOptions?Select:Input),[rest.datatype,hasOptions]),props=(0,react.useMemo)((()=>rest.datatype===types_schema.h.NUMBER?{min:rest.min,max:rest.max,step:rest.step??1}:rest.datatype===types_schema.h.RANGE?{min:rest.min??1,max:rest.max??99,step:rest.step??1,showValue:!0,showLabels:!0}:rest.datatype===types_schema.h.DATE?{min:rest.min,max:rest.max,type:"date"}:rest.datatype===types_schema.h.DATETIME?{min:rest.min,max:rest.max,type:"datetime"}:rest.datatype===types_schema.h.TEXT?{rows:3}:rest.datatype===types_schema.h.COLOR?{showPicker:!0}:rest.datatype===types_schema.h.STRING&&hasOptions?{multiple:rest.multiple,allowCreate:rest.allowCustom,searchable:!0,...optionLists?.[rest.optionList??""]??{options:rest.options}}:{}),[rest,hasOptions,optionLists]);return rest.datatype===types_schema.h.AVATAR?uploadHandler&&(0,jsx_runtime.jsx)(Controller,{name:fieldName,children:(0,jsx_runtime.jsx)(AvatarInput,{uploadHandler,fileUrl,name:fieldName})}):rest.datatype===types_schema.h.FILE?uploadHandler&&(0,jsx_runtime.jsx)(Controller,{name:fieldName,children:(0,jsx_runtime.jsx)(FileField,{uploadHandler,inline,label,id,...rest})}):rest.multiple&&!hasOptions?(0,jsx_runtime.jsx)(ArrayInput,{name:fieldName,label:t(`fb.${id}`,label||id),required,onAdd:()=>String(""),children:(0,jsx_runtime.jsx)(Controller,{children:(0,jsx_runtime.jsx)(E,{...props})})}):(0,jsx_runtime.jsx)(Controller,{name:fieldName,children:(0,jsx_runtime.jsx)(E,{...props,autoFocus,label:t(`fb.${id}`,label||id),placeholder:t(`fb.${id}`,label||id),required,inline})})};try{FormField.displayName="FormField",FormField.__docgenInfo={description:"",displayName:"FormField",props:{datatype:{defaultValue:null,description:"",name:"datatype",required:!0,type:{name:"enum",value:[{value:'"text"'},{value:'"color"'},{value:'"bool"'},{value:'"date"'},{value:'"datetime"'},{value:'"string"'},{value:'"number"'},{value:'"range"'},{value:'"file"'},{value:'"avatar"'}]}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},multiple:{defaultValue:null,description:"",name:"multiple",required:!1,type:{name:"boolean"}},minItems:{defaultValue:null,description:"",name:"minItems",required:!1,type:{name:"number"}},maxItems:{defaultValue:null,description:"",name:"maxItems",required:!1,type:{name:"number"}},inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}},prefix:{defaultValue:null,description:"",name:"prefix",required:!1,type:{name:"string"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},optionLists:{defaultValue:null,description:"",name:"optionLists",required:!1,type:{name:"any"}},fileUrl:{defaultValue:null,description:"",name:"fileUrl",required:!1,type:{name:"((path: string) => string)"}},uploadHandler:{defaultValue:null,description:"",name:"uploadHandler",required:!1,type:{name:"UploadHandler"}},regex:{defaultValue:null,description:"",name:"regex",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"string[]"}},optionList:{defaultValue:null,description:"",name:"optionList",required:!1,type:{name:"string"}},allowCustom:{defaultValue:null,description:"",name:"allowCustom",required:!1,type:{name:"boolean"}},min:{defaultValue:null,description:"",name:"min",required:!1,type:{name:"DateLike"}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"DateLike"}},step:{defaultValue:null,description:"",name:"step",required:!1,type:{name:"number"}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/builder/FormField.tsx#FormField"]={docgenInfo:FormField.__docgenInfo,name:"FormField",path:"packages/form/src/builder/FormField.tsx#FormField"})}catch(__react_docgen_typescript_loader_error){}const makeYupField=field=>{let yupField=dist_esm.hg.string().trim();if(field.datatype===types_schema.h.SCHEMA){const child=Object.fromEntries(field.schema.map((field=>[field.id,makeYupField(field)])));yupField=dist_esm.hg.object(child)}return field.datatype===types_schema.h.BOOL&&(yupField=dist_esm.hg.boolean(),field.required&&(yupField=yupField.test({test:value=>!!value}))),field.datatype!==types_schema.h.NUMBER&&field.datatype!==types_schema.h.RANGE||(yupField=dist_esm.hg.number(),!(0,dist_esm.gD)(field.min)&&(yupField=yupField.min(field.min)),!(0,dist_esm.gD)(field.max)&&(yupField=yupField.max(field.max)),field.datatype===types_schema.h.RANGE&&(yupField=dist_esm.hg.array(yupField))),field.datatype===types_schema.h.STRING&&(field.options&&!field.allowCustom&&(yupField=yupField.oneOf(field.options)),field.regex&&(yupField=yupField.matches(new RegExp(field.regex)))),field.datatype===types_schema.h.FILE&&(yupField=dist_esm.hg.object({filename:dist_esm.hg.string().required(),path:dist_esm.hg.string().required()}).unknown(!0),field.required&&(yupField=yupField.test("is-empty",{key:"form:yup.empty",values:{path:field.id,label:field.label}},(value=>!(0,dist_esm.Im)(value))))),field.required&&(yupField=yupField.required()),field.multiple&&(yupField=dist_esm.hg.array(yupField),field.required&&(yupField=yupField.required().min(1))),yupField.label(field.label)},useFormBuilder=(schema,options={})=>{const filteredSchema=(0,react.useMemo)((()=>schema.filter?.((schm=>!!schm.id))??[]),[schema]),schemaDef=dist_esm.hg.object(Object.fromEntries(filteredSchema.map((field=>[field.id,makeYupField(field)]))));return{formDef:(0,jsx_runtime.jsxs)(react.Fragment,{children:[filteredSchema.map(((field,idx)=>(0,jsx_runtime.jsx)("div",{className:"mb-4",children:field.datatype===types_schema.h.SCHEMA?null:(0,jsx_runtime.jsx)(FormField,{...field,autoFocus:0===idx,fileUrl:options.fileUrl,optionLists:options.optionLists,uploadHandler:options.uploadHandler,inline:options.inline,prefix:options.prefix})},field.id))),0===filteredSchema.length&&(0,jsx_runtime.jsx)(esm.HY,{message:"No schema defined"})]}),schemaDef}},FileExists=prop=>{const[kill,setKill]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{setTimeout((()=>{setKill(!0)}),2e3)})),kill?null:(0,jsx_runtime.jsxs)("div",{className:"bg-danger-500 text-white px-2 rounded text-xs",children:["File [",prop.name,"] already added to list"]})},FileInput=({ref,value,invalid,readOnly,disabled,required,placeholder,autoFocus,error,name,accept,showList=!0,multiple,onChange,onEnterPressed,...rest})=>{const listRef=(0,react.useRef)([]),inputRef=(0,react.useRef)(null),[exists,setExists]=(0,react.useState)([]),[actualValue,setActualValue]=(0,react.useState)(),deferred=(0,react.useDeferredValue)(value),handleEnterPressed=useHandleEnter(onEnterPressed);(0,react.useEffect)((()=>{setActualValue(deferred)}),[deferred]);const handleChange=(0,react.useCallback)((e=>{if(setExists([]),multiple)if(e?.target.files){if(showList){const exists=[];Array.from(e.target.files).forEach((file=>{listRef.current.find((ef=>ef.name===file.name))?exists.push(file.name):listRef.current.push(file)})),setActualValue(listRef.current.slice()),setExists(exists)}e.target.value="",onChange?.(listRef.current)}else listRef.current=[],setActualValue(listRef.current),onChange?.(listRef.current);else setActualValue(e?.target.files?.item(0)),onChange?.(e?.target.files?.item(0)??null),!e&&inputRef.current&&(inputRef.current.value="")}),[onChange,multiple,showList]),removeFile=(0,react.useCallback)((idx=>{listRef.current.splice(idx,1),setActualValue(listRef.current),onChange?.(listRef.current)}),[onChange]);return(0,jsx_runtime.jsx)(InputWrapper,{showClear:!(0,dist_esm.Im)(actualValue)&&!disabled&&!readOnly,onClear:handleChange,invalid,readOnly,disabled,required,error,listing:showList&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,dist_esm.cy)(actualValue)&&actualValue?.map?.(((file,idx)=>(0,jsx_runtime.jsxs)("div",{className:"flex gap-1 items-center text-sm text-dimmed py-1 px-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1 truncate",children:[(0,jsx_runtime.jsx)("div",{className:"font-medium",children:file.name}),(0,jsx_runtime.jsx)("span",{className:"text-xs",children:dist_esm.fO.mime(file.type)})]}),(0,jsx_runtime.jsx)("span",{className:"flex-content text-end w-24",children:dist_esm.yL.bytes(file.size)}),(0,jsx_runtime.jsx)(esm.In,{className:"cursor-pointer opacity-30 hover:opacity-80",icon:esm.OO.close,onClick:()=>{removeFile(idx)}})]},idx))),exists.map((name=>(0,jsx_runtime.jsx)(FileExists,{name},(new Date).getTime())))]}),...rest,children:(0,jsx_runtime.jsx)("input",{className:classnames_default()("appearance-none bg-transparent py-1 px-2 flex-1 border-none outline-none ring-0 peer","fabric-fileInput",(0,dist_esm.cy)(actualValue)&&actualValue?.length&&"text-(--fabric-bg)"),"aria-invalid":invalid,"aria-disabled":disabled,"aria-readonly":readOnly,"aria-errormessage":error,placeholder,disabled,readOnly,size:1,type:"file",multiple,"data-testid":name,name,accept,ref:(0,dist_esm.Px)(ref,inputRef),autoComplete:"off",autoFocus,onChange:handleChange,onKeyDown:handleEnterPressed})})};try{FileInput.displayName="FileInput",FileInput.__docgenInfo={description:"",displayName:"FileInput",props:{multiple:{defaultValue:null,description:"allow selecting mutiple files",name:"multiple",required:!1,type:{name:"boolean"}},showList:{defaultValue:{value:"true"},description:"show selected file list",name:"showList",required:!1,type:{name:"boolean"}},accept:{defaultValue:null,description:"acceptable file types",name:"accept",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"value",name:"value",required:!1,type:{name:"any"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value: any) => void)"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"input placeholder",name:"placeholder",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:null,description:"show clear button",name:"allowClear",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/File.tsx#FileInput"]={docgenInfo:FileInput.__docgenInfo,name:"FileInput",path:"packages/form/src/input/File.tsx#FileInput"})}catch(__react_docgen_typescript_loader_error){}const Password=({ref,value,name,strength,invalid,readOnly,disabled,required,placeholder,autoFocus,showToggle,onBlur,onFocus,onChange,onEnterPressed,...rest})=>{const{t}=(0,es.Bd)("form"),[show,setShow]=(0,react.useState)(!1),[actualValue,setActualValue]=(0,react.useState)(""),deferred=(0,react.useDeferredValue)(value),handleEnterPressed=useHandleEnter(onEnterPressed);(0,react.useEffect)((()=>{setActualValue(deferred??"")}),[deferred]);const handleChange=(0,react.useCallback)((e=>{const value=e?.target.value;setActualValue(value??""),onChange?.(value??null)}),[onChange]);return(0,jsx_runtime.jsxs)(InputWrapper,{showClear:!!actualValue&&!disabled&&!readOnly,onClear:handleChange,invalid,readOnly,disabled,required,...rest,actionButton:showToggle&&actualValue&&(0,jsx_runtime.jsx)(esm.m_,{color:"warning",content:t(show?"password.hide":"password.show"),children:(0,jsx_runtime.jsx)(esm.$n,{tabIndex:-1,color:"warning",variant:"link","aria-label":t(show?"password.hide":"password.show"),icon:show?esm.OO.eyeOff:esm.OO.eye,onClick:()=>setShow(!show)})}),children:[(0,jsx_runtime.jsx)("input",{className:"appearance-none bg-transparent py-1 px-2 flex-1 border-none outline-none ring-0 peer","aria-invalid":invalid,"aria-disabled":disabled,"aria-readonly":readOnly,placeholder,disabled,readOnly,"data-testid":name,name,size:1,type:show?"text":"password",ref,autoComplete:"off",autoFocus,value:actualValue,onBlur,onFocus,onChange:handleChange,onKeyDown:handleEnterPressed}),!!strength&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("absolute bottom-px h-[3px] inset-x-0 after:block after:h-full after:bg-dimmed","ltr:bg-gradient-to-r rtl:bg-gradient-to-l from-danger-500 via-marigold-500 to-jade-500"),style:{paddingInlineStart:(strength>1?100:100*strength)+"%"}})]})};try{Password.displayName="Password",Password.__docgenInfo={description:"",displayName:"Password",props:{showToggle:{defaultValue:null,description:"show password toggle",name:"showToggle",required:!1,type:{name:"boolean"}},strength:{defaultValue:null,description:"password strength meter (0-1)",name:"strength",required:!1,type:{name:"number"}},value:{defaultValue:null,description:"value",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value: string | null) => void)"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"input placeholder",name:"placeholder",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:null,description:"show clear button",name:"allowClear",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/Password.tsx#Password"]={docgenInfo:Password.__docgenInfo,name:"Password",path:"packages/form/src/input/Password.tsx#Password"})}catch(__react_docgen_typescript_loader_error){}const Radio=({ref,name,label,value,invalid,disabled,error,width,icon,iconChecked,onChange,...rest})=>{const iconOn=(0,react.useMemo)((()=>iconChecked??icon??esm.OO.radioOn),[icon,iconChecked]),iconOff=(0,react.useMemo)((()=>icon??esm.OO.radioOff),[icon]),handleChange=(0,react.useCallback)((e=>{e?.target.checked&&value&&onChange?.(value)}),[onChange,value]);return(0,jsx_runtime.jsxs)("label",{className:classnames_default()(invalid?"ring-danger-500":"ring-primary-500",disabled?"opacity-50 cursor-not-allowed":"hover:opacity-100 cursor-pointer","inline-flex gap-1 py-1 items-center relative cursor-pointer opacity-85 rounded ring-offset-2 has-[:focus-visible]:ring-1"),style:{width},children:[(0,jsx_runtime.jsx)("input",{className:classnames_default()("appearance-none absolute peer opacity-0 inset-0 bg-transparent border-none outline-none ring-0"),"aria-disabled":disabled,disabled,type:"radio",ref,size:1,name,value,autoComplete:"off",onChange:handleChange,...rest}),(0,jsx_runtime.jsx)(esm.In,{className:classnames_default()("p-0.5 hidden peer-checked:inline-block",icon&&!iconChecked&&"bg-primary-500 text-white!"),color:invalid?"danger":"primary",size:"1.25em",icon:iconOn}),(0,jsx_runtime.jsx)(esm.In,{className:classnames_default()("p-0.5 peer-checked:hidden"),color:invalid?"danger":"primary",size:"1.25em",icon:iconOff}),label&&(0,jsx_runtime.jsx)("span",{className:"flex-initial leading-tight truncate",children:label})]})};try{Radio.displayName="Radio",Radio.__docgenInfo={description:"",displayName:"Radio",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"radio label",name:"label",required:!1,type:{name:"string | Element"}},value:{defaultValue:null,description:"value",name:"value",required:!0,type:{name:"string | number"}},onChange:{defaultValue:null,description:"on checked change",name:"onChange",required:!1,type:{name:"((value: string) => void) | ((value: number) => void)"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},icon:{defaultValue:null,description:"cutom checkbox icon",name:"icon",required:!1,type:{name:"string"}},iconChecked:{defaultValue:null,description:"cutom checkbox checked icon",name:"iconChecked",required:!1,type:{name:"string"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/Radio.tsx#Radio"]={docgenInfo:Radio.__docgenInfo,name:"Radio",path:"packages/form/src/input/Radio.tsx#Radio"})}catch(__react_docgen_typescript_loader_error){}const RadioGroup=({children,name,className,optionWidth,onChange,...rest})=>(0,jsx_runtime.jsx)(FieldWrapper,{...rest,children:(0,jsx_runtime.jsx)("div",{className,children:(0,esm.t_)(children,(child=>(0,react.cloneElement)(child,{name,onChange,width:optionWidth})))})});try{RadioGroup.displayName="RadioGroup",RadioGroup.__docgenInfo={description:"",displayName:"RadioGroup",props:{label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},info:{defaultValue:null,description:"field info",name:"info",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},optionWidth:{defaultValue:null,description:"label width for inline",name:"optionWidth",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"field name",name:"name",required:!1,type:{name:"string"}},vertical:{defaultValue:null,description:"vertical orientation",name:"vertical",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value: AnyObject) => void)"}},className:{defaultValue:null,description:"css classname(s)",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/RadioGroup.tsx#RadioGroup"]={docgenInfo:RadioGroup.__docgenInfo,name:"RadioGroup",path:"packages/form/src/input/RadioGroup.tsx#RadioGroup"})}catch(__react_docgen_typescript_loader_error){}const Search=({ref,value,name,invalid,readOnly,disabled,required,searching,placeholder,autoFocus,hideHandle,allowClear=!0,searchOnChange=!1,onBlur,onFocus,onSearch,onChange,onEnterPressed,...rest})=>{const[actualValue,setActualValue]=(0,react.useState)(""),deferred=(0,react.useDeferredValue)(value),refValue=(0,react.useRef)(""),handleSearch=(0,esm.d7)((()=>onSearch?.(refValue.current)),[onSearch],250),handleEnterPressed=useHandleEnter(handleSearch);(0,react.useEffect)((()=>{setActualValue(deferred??"")}),[deferred]);const handleChange=(0,react.useCallback)((e=>{const value=e?.target.value;refValue.current=value??"",setActualValue(value??""),onChange?.(value??null),e&&!searchOnChange||handleSearch()}),[onChange,searchOnChange,handleSearch]);return(0,jsx_runtime.jsx)(InputWrapper,{showClear:!!actualValue&&!disabled&&!readOnly,onClear:handleChange,allowClear,invalid,readOnly,disabled,required,actionButton:(0,jsx_runtime.jsxs)(react.Fragment,{children:[searching&&(0,jsx_runtime.jsx)(esm.In,{className:"p-2",icon:esm.OO.spinner,animate:"spin"}),!searching&&!hideHandle&&(0,jsx_runtime.jsx)(esm.$n,{tabIndex:-1,variant:"link","aria-label":"search",disabled:!actualValue,icon:esm.OO.search,onClick:handleSearch})]}),...rest,children:(0,jsx_runtime.jsx)("input",{className:"appearance-none bg-transparent py-1 px-2 flex-1 border-none outline-none ring-0 peer","aria-invalid":invalid,"aria-disabled":disabled,"aria-readonly":readOnly,placeholder,disabled,readOnly,size:1,"data-testid":name,name,type:"search",ref,autoComplete:"off",autoFocus,value:actualValue,onBlur,onFocus,onChange:handleChange,onKeyDown:handleEnterPressed})})};try{Search.displayName="Search",Search.__docgenInfo={description:"",displayName:"Search",props:{searching:{defaultValue:null,description:"is searching",name:"searching",required:!1,type:{name:"boolean"}},searchOnChange:{defaultValue:{value:"false"},description:"search on value change",name:"searchOnChange",required:!1,type:{name:"boolean"}},hideHandle:{defaultValue:null,description:"hide search action handle",name:"hideHandle",required:!1,type:{name:"boolean"}},onSearch:{defaultValue:null,description:"search handler",name:"onSearch",required:!1,type:{name:"((query?: string) => void)"}},value:{defaultValue:null,description:"value",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value: string | null) => void)"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"input placeholder",name:"placeholder",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},allowClear:{defaultValue:{value:"true"},description:"show clear button",name:"allowClear",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/Search.tsx#Search"]={docgenInfo:Search.__docgenInfo,name:"Search",path:"packages/form/src/input/Search.tsx#Search"})}catch(__react_docgen_typescript_loader_error){}const Slider=({error,name,value,step=1,min=0,max=100,height=192,color,vertical,showLabels,showValue,minLabel,maxLabel,ranges,useInfinity,format,invalid,autoFocus,disabled,readOnly,onBlur,onChange,onEnterPressed,onFocus,onSlide,...rest})=>{const[actualValue,setActualValue]=(0,react.useState)(0),[displayValue,setDisplayValue]=(0,react.useState)(!1),deferred=(0,react.useDeferredValue)(value),minValue=(0,react.useMemo)((()=>ranges?.[0]??min),[min,ranges]),maxValue=(0,react.useMemo)((()=>ranges?.slice(-1)[0]??max),[max,ranges]);(0,react.useEffect)((()=>{setActualValue(useInfinity&&deferred===1/0?max:deferred??min)}),[deferred,min,max,useInfinity]),(0,react.useEffect)((()=>{setDisplayValue(!!showValue)}),[showValue]);const handleChange=(0,react.useCallback)((value=>{const val=useInfinity&&value===max?1/0:value;setActualValue(val??0),onChange?.(val??null)}),[onChange,max,useInfinity]),minDisplay=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)("span",{className:"text-sm text-dimmed px-2.5 py-px whitespace-nowrap overflow-hidden text-center",children:minLabel??dist_esm.yL.number(min,format)})),[minLabel,min,format]),maxDisplay=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)("span",{className:"text-sm text-dimmed px-2.5 py-px whitespace-nowrap overflow-hidden text-center",children:maxLabel??(useInfinity?"∞":dist_esm.yL.number(max,format))})),[maxLabel,max,format,useInfinity]),rangerInstance=useRanger({values:[actualValue],min:minValue,max:maxValue,stepSize:step,steps:ranges,vertical,tickSize:Math.max((max-min)/10,step),onDrag:val=>onSlide?.(val[0]),onDragStart:()=>setDisplayValue(!0),onDragEnd:()=>setDisplayValue(!!showValue),onChange:values=>handleChange(values[0])});return(0,jsx_runtime.jsx)(InputWrapper,{...rest,noOutline:!0,error,invalid,isDisabled:disabled,isReadOnly:readOnly,canClear:!!actualValue,children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()("flex-1 order-3 flex items-center select-none relative z-0",vertical&&"flex-col w-8",invalid?"text-danger-500":"text-primary-600"),"data-vertical":!!vertical,style:invalid?void 0:{color},children:[showLabels&&(vertical?maxDisplay:minDisplay),(0,jsx_runtime.jsxs)("div",{ref:rangerInstance.trackElRef,className:classnames_default()("flex-1 relative flex items-center",vertical?"my-2 w-8":"mx-2 h-8"),style:{height:vertical?height:void 0},children:[rangerInstance.ticks.map((({value,key,styles})=>(0,jsx_runtime.jsx)("div",{className:classnames_default()("absolute inline-block h-1 w-1 rounded-sm bg-invert opacity-30 leading-[0] z-1",vertical&&"left-1/2 -ml-0.5"),style:styles},key))),rangerInstance.segments.map((({key,styles,active})=>(0,jsx_runtime.jsx)("div",{className:classnames_default()("absolute",active?"bg-current z-1 opacity-90":"bg-invert opacity-5 z-0",vertical?"-bottom-1 left-1/2 -translate-x-1/2":"top-1/2 -translate-y-1/2",!vertical&&(active?"h-1":"h-0.5"),vertical&&(active?"w-1":"w-0.5")),style:styles},key))),rangerInstance.handles.map((({key,value,props,styles,percentage,valueStyles})=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("button",{type:"button",className:classnames_default()("bg-current cursor-pointer appearance-none h-3 w-3 rounded-full z-3 absolute","focus:ring-2 focus:ring-offset-2",vertical&&"left-1/2 -ml-1.5"),...props,style:styles}),displayValue&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("bg-invert text-invert py-px px-2 text-xs absolute rounded z-[5] whitespace-nowrap","before:absolute before:h-1.5 before:w-1.5 before:z-[-1] before:bg-invert before:top-1/2 before:-translate-y-1/2 before:rotate-45",vertical?"end-0 ltr:translate-x-full rtl:-translate-x-full translate-y-2":"top-1/2 -translate-y-1/2",!vertical&&(percentage>50?"-ms-3 ltr:-translate-x-full rtl:translate-x-full ltr:before:translate-x-[0.125rem] rtl:before:-translate-x-[0.125rem] before:end-0":"ms-3 ltr:before:-translate-x-[0.125rem] rtl:before:translate-x-[0.125rem] before:start-0")),"data-align":percentage>50?"start":"end",style:valueStyles,children:value===1/0||useInfinity&&value===max?maxLabel??"∞":dist_esm.yL.number(value,format)})]},key)))]}),showLabels&&(vertical?minDisplay:maxDisplay)]})})};try{Slider.displayName="Slider",Slider.__docgenInfo={description:"Number slider input",displayName:"Slider",props:{min:{defaultValue:{value:"0"},description:"min value",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:{value:"100"},description:"max value",name:"max",required:!1,type:{name:"number"}},step:{defaultValue:{value:"1"},description:"increment step",name:"step",required:!1,type:{name:"number"}},color:{defaultValue:null,description:"slider color",name:"color",required:!1,type:{name:"string"}},height:{defaultValue:{value:"192"},description:"slider height (only vertical)",name:"height",required:!1,type:{name:"number"}},vertical:{defaultValue:null,description:"vertical orientation",name:"vertical",required:!1,type:{name:"boolean"}},showValue:{defaultValue:null,description:"display value tooltip",name:"showValue",required:!1,type:{name:"boolean"}},showLabels:{defaultValue:null,description:"display min/max labels",name:"showLabels",required:!1,type:{name:"boolean"}},minLabel:{defaultValue:null,description:"custom min label",name:"minLabel",required:!1,type:{name:"string"}},maxLabel:{defaultValue:null,description:"custom max label",name:"maxLabel",required:!1,type:{name:"string"}},ranges:{defaultValue:null,description:"step ranges",name:"ranges",required:!1,type:{name:"number[]"}},useInfinity:{defaultValue:null,description:"infinity max value",name:"useInfinity",required:!1,type:{name:"true"}},format:{defaultValue:null,description:"format value",name:"format",required:!1,type:{name:"string"}},onSlide:{defaultValue:null,description:"slide event handler",name:"onSlide",required:!1,type:{name:"((val: number) => void)"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value: number | null) => void)"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"value",name:"value",required:!1,type:{name:"number"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/input/Slider.tsx#Slider"]={docgenInfo:Slider.__docgenInfo,name:"Slider",path:"packages/form/src/input/Slider.tsx#Slider"})}catch(__react_docgen_typescript_loader_error){}const AutoComplete=({ref,name,value,invalid,readOnly,disabled,required,placeholder,autoFocus,expandOnEdit,error,history,multiple,onChange,onSelect,onInput,onFocus,onBlur,onQuery,onEnterPressed,...rest})=>{const options=(0,react.useRef)(history),submitRef=(0,react.useRef)(null),{state,listRef,listContentRef,setOpen,macthOption,handleChange,handleRemove,handleQuery,setItemRef,setActiveIndex}=useSelect({value,autoComplete:!0,options:options.current,multiple,onChange,onSelect,onQuery}),dropdownKey=(0,react.useId)(),{context,floatingStyles,refs}=(0,floating_ui_react.we)({open:state.open,onOpenChange:(open,evt,reason)=>{!open&&(listRef.current=[]),setOpen(open)},strategy:"fixed",placement:"bottom",whileElementsMounted:floating_ui_dom.ll,middleware:[(0,floating_ui_react_dom.BN)({padding:8}),(0,floating_ui_react_dom.UU)(),(0,floating_ui_react_dom.cY)(2)]}),dismiss=(0,floating_ui_react.s9)(context,{}),navigation=(0,floating_ui_react.C1)(context,{listRef,activeIndex:state.activeIndex,selectedIndex:state.selectedIndex,loop:!0,virtual:!0,focusItemOnOpen:!1,onNavigate:setActiveIndex}),typeahead=(0,floating_ui_react.lY)(context,{listRef:listContentRef,activeIndex:state.activeIndex,selectedIndex:state.selectedIndex,findMatch:(list,typedString)=>list.find((item=>macthOption(item,typedString))),onMatch(index){state.open&&setActiveIndex(index)}}),{getReferenceProps,getFloatingProps,getItemProps}=(0,floating_ui_react.bv)([dismiss,navigation,typeahead]),referenceProps=(0,react.useMemo)((()=>{const props=getReferenceProps();return{...props,onFocus,onBlur(evt){evt.relatedTarget?.closest(`[data-select-dropdown="${dropdownKey}"]`)?refs.domReference.current?.querySelector("input")?.focus():(state.open&&handleChange(state.query),handleQuery(""),setOpen(!1),onBlur?.(evt))},onKeyDown(evt){if("Enter"===evt.key){if(evt.preventDefault(),null!==state.activeIndex)return handleChange(listContentRef.current[state.activeIndex]),evt.stopPropagation(),!1;if(void 0!==state.query)return handleChange(""),!1;onEnterPressed?.(evt),submitRef.current?.click()}else"Backspace"===evt.key?!state.query&&multiple&&handleRemove():["ArrowUp","ArrowDown"].includes(evt.key)&&(["ArrowUp","ArrowDown"].includes(evt.key)&&null===state.activeIndex&&setActiveIndex(state.selectedIndex),setTimeout((()=>{props.onKeyDown?.(evt)}),50))}}}),[getReferenceProps,onEnterPressed,handleQuery,onFocus,onBlur,multiple,refs,state.query,state.activeIndex]),floatingProps=(0,react.useMemo)((()=>getFloatingProps({"data-select-dropdown":dropdownKey})),[getFloatingProps]),makeItemProps=(0,react.useCallback)((item=>{const selected=(0,dist_esm.cy)(state.value)?state.value?.includes?.(item):state.value===item;return getItemProps({"data-selected":!!selected||void 0,onClick(){handleChange(item)}})}),[getItemProps,handleChange,state.value]),displayValue=(0,react.useMemo)((()=>{if((0,dist_esm.cy)(state.value))return state.value.map(((item,index)=>(0,jsx_runtime.jsx)(esm.vu,{onRemove:()=>handleRemove(index),children:item},index)))}),[state.value,state.query,placeholder]);(0,react.useLayoutEffect)((()=>{state.open&&setTimeout((()=>{state.selectedIndex&&listRef.current[state.selectedIndex]?.scrollIntoView({block:"center"})}),100)}),[state.open]);const inputValue=(0,react.useMemo)((()=>multiple?state.query??"":state.query??state.value??""),[multiple,state.query,state.value]);return(0,jsx_runtime.jsxs)(InputWrapper,{showClear:!(0,dist_esm.Im)(state.value),onClear:handleChange,invalid,readOnly,disabled,required,error,wrapperRef:refs.setReference,className:!multiple&&expandOnEdit&&state.open?"!z-[99]":"",floatingExpand:!multiple&&expandOnEdit&&state.open,...rest,children:[(0,jsx_runtime.jsxs)("div",{role:"none","data-select-display":"true",className:classnames_default()("group flex-1 py-1 px-2 truncate text-start flex gap-1 relative min-h-5 justify-start",multiple?"flex-wrap":"flex-nowrap overflow-hidden"),onMouseUp:e=>e.currentTarget.querySelector("input")?.focus(),children:[displayValue,(0,jsx_runtime.jsx)("textarea",{readOnly,disabled,value:inputValue,"aria-invalid":invalid,"data-testid":name,name,size:1,ref,onInput,autoFocus,rows:!multiple&&expandOnEdit&&state.open?5:1,className:classnames_default()("appearance-none bg-transparent outline-none border-none ring-0 flex-1 resize-none",disabled&&"cursor-not-allowed pointer-events-none",multiple&&"min-w-24 overflow-hidden",!state.open&&"overflow-hidden whitespace-nowrap"),placeholder:(0,dist_esm.Im)(state.value)?placeholder:"",...referenceProps,onChange:evt=>handleQuery(evt.target.value)}),(0,jsx_runtime.jsx)("button",{type:"submit",ref:submitRef,tabIndex:-1,className:"opacity-0 absolute"})]}),state.loading&&(0,jsx_runtime.jsx)(esm.In,{animate:"spin",className:classnames_default()("flex-content p-2 z-0 order-9 text-muted pointer-events-none"),icon:esm.OO.spinner}),state.open&&!state.loading&&(0,jsx_runtime.jsx)(floating_ui_react.XF,{children:(0,jsx_runtime.jsx)(floating_ui_react.s3,{context,initialFocus:-1,visuallyHiddenDismiss:!0,children:(0,jsx_runtime.jsx)(Options,{ref:refs.setFloating,className:"outline shadow-lg max-h-[40vh] z-(--z-popover)",style:{width:refs.reference.current?.getBoundingClientRect().width,...floatingStyles},...floatingProps,items:state.items,active:state.activeIndex,itemRef:setItemRef,itemProps:makeItemProps,empty:(0,jsx_runtime.jsx)("div",{className:"text-muted text-sm px-2 py-1",children:"No history available"}),children:item=>item})})})]})};try{AutoComplete.displayName="AutoComplete",AutoComplete.__docgenInfo={description:"",displayName:"AutoComplete",props:{label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},renderer:{defaultValue:null,description:"item renderer",name:"renderer",required:!1,type:{name:"((option: string) => ReactNode)"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value?: string) => void) | ((value?: string[]) => void) | undefined"}},onSelect:{defaultValue:null,description:"select handler",name:"onSelect",required:!1,type:{name:"((option: string) => void) | ((option: string[]) => void)"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"selected value",name:"value",required:!1,type:{name:"string | string[]"}},multiple:{defaultValue:null,description:"is multiple selection",name:"multiple",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"input placeholder",name:"placeholder",required:!1,type:{name:"string"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},allowClear:{defaultValue:null,description:"show clear button",name:"allowClear",required:!1,type:{name:"boolean"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},defaultOpen:{defaultValue:null,description:"open dropdown by default",name:"defaultOpen",required:!1,type:{name:"boolean"}},hideHandle:{defaultValue:null,description:"hide dropdown handle",name:"hideHandle",required:!1,type:{name:"boolean"}},groupProperty:{defaultValue:null,description:"group by property name",name:"groupProperty",required:!1,type:{name:'number | unique symbol | "big" | "link" | "search" | "small" | "sub" | "sup" | "charAt" | "charCodeAt" | "concat" | "indexOf" | "lastIndexOf" | "localeCompare" | "match" | "replace" | ... 37 more ...'}},labelProperty:{defaultValue:null,description:"label property name",name:"labelProperty",required:!1,type:{name:'number | unique symbol | "big" | "link" | "search" | "small" | "sub" | "sup" | "charAt" | "charCodeAt" | "concat" | "indexOf" | "lastIndexOf" | "localeCompare" | "match" | "replace" | ... 37 more ...'}},valueProperty:{defaultValue:null,description:"value property name",name:"valueProperty",required:!1,type:{name:'number | unique symbol | "big" | "link" | "search" | "small" | "sub" | "sup" | "charAt" | "charCodeAt" | "concat" | "indexOf" | "lastIndexOf" | "localeCompare" | "match" | "replace" | ... 37 more ...'}},sortProperty:{defaultValue:null,description:"value property name",name:"sortProperty",required:!1,type:{name:'number | true | unique symbol | "big" | "link" | "search" | "small" | "sub" | "sup" | "charAt" | "charCodeAt" | "concat" | "indexOf" | "lastIndexOf" | "localeCompare" | "match" | ... 38 more ...'}},searchable:{defaultValue:null,description:"searchable list",name:"searchable",required:!1,type:{name:"boolean"}},emptyDisplay:{defaultValue:null,description:"empty list display",name:"emptyDisplay",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},matcher:{defaultValue:null,description:"item matcher",name:"matcher",required:!1,type:{name:"((option: string, query: string) => boolean)"}},onQuery:{defaultValue:null,description:"query handler",name:"onQuery",required:!1,type:{name:"((query: string) => string[] | Promise<string[]>)"}},history:{defaultValue:null,description:"auto-complete history",name:"history",required:!1,type:{name:"string[]"}},expandOnEdit:{defaultValue:null,description:"expand input on edit",name:"expandOnEdit",required:!1,type:{name:"boolean"}},onInput:{defaultValue:null,description:"input change handler",name:"onInput",required:!1,type:{name:"((query: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/select/AutoComplete.tsx#AutoComplete"]={docgenInfo:AutoComplete.__docgenInfo,name:"AutoComplete",path:"packages/form/src/select/AutoComplete.tsx#AutoComplete"})}catch(__react_docgen_typescript_loader_error){}const List=({ref,name,value,readOnly,disabled,required,placeholder,autoFocus,options,height,groupProperty,labelProperty,valueProperty,sortProperty,multiple,allowCreate,searchable,createOption,matcher,renderer,onQuery,onChange,onSelect,onEnterPressed,emptyDisplay,invalid,error,allowClear,decorateStart,decorateEnd,"data-inner":isInner,"data-hide-selected":hideSelected,...rest})=>{const Wrapper=(0,react.useMemo)((()=>isInner?react.Fragment:FieldWrapper),[isInner]),wrapperProps=(0,react.useMemo)((()=>isInner?{}:{...rest}),[isInner,rest]),{state,listRef,listContentRef,macthOption,handleChange,handleRemove,handleQuery,setItemRef,setActiveIndex}=useSelect({value,options,multiple,groupProperty,labelProperty,valueProperty,sortProperty,allowCreate,createOption,matcher,onChange,onSelect,onQuery}),dropdownKey=(0,react.useId)(),{context,refs}=(0,floating_ui_react.we)({open:!0,placement:"bottom",whileElementsMounted:floating_ui_dom.ll,middleware:[]}),navigation=(0,floating_ui_react.C1)(context,{listRef,activeIndex:state.activeIndex,selectedIndex:state.selectedIndex,loop:!0,virtual:!0,focusItemOnOpen:!1,onNavigate:setActiveIndex}),typeahead=(0,floating_ui_react.lY)(context,{listRef:listContentRef,activeIndex:state.activeIndex,selectedIndex:state.selectedIndex,findMatch:(list,typedString)=>list.find((item=>macthOption(item,typedString))),onMatch(index){state.open&&setActiveIndex(index)}}),{getReferenceProps,getFloatingProps,getItemProps}=(0,floating_ui_react.bv)([navigation,typeahead]),referenceProps=(0,react.useMemo)((()=>{const props=getReferenceProps();return{...props,onBlur(evt){evt.relatedTarget?.closest(`[data-select-dropdown="${dropdownKey}"]`)?refs.domReference.current?.querySelector("input")?.focus():handleQuery("")},onKeyDown(evt){if("Enter"===evt.key){if(null!==state.activeIndex)return handleChange(listContentRef.current[state.activeIndex]),evt.preventDefault(),evt.stopPropagation(),!1;state.query||onEnterPressed?.(evt)}else"Backspace"===evt.key?!state.query&&handleRemove():searchable&&!["ArrowUp","ArrowDown"].includes(evt.key)||(["ArrowUp","ArrowDown"].includes(evt.key)&&null===state.activeIndex&&setActiveIndex(state.selectedIndex??0),setTimeout((()=>{props.onKeyDown?.(evt)}),50))}}}),[getReferenceProps,onEnterPressed,handleQuery,refs,state.query,state.activeIndex]),floatingProps=(0,react.useMemo)((()=>getFloatingProps({"data-select-dropdown":dropdownKey})),[getFloatingProps]),makeItemProps=(0,react.useCallback)((item=>{const selected=(0,dist_esm.cy)(state.value)?state.value?.includes?.(item):state.value===item;return{...getItemProps({"data-selected":!!selected||void 0,onClick(){handleChange(item)}}),"aria-hidden":void 0}}),[getItemProps,handleChange,state.value]),displayValue=(0,react.useMemo)((()=>(0,dist_esm.cy)(state.value)?state.value.map(((item,index)=>(0,jsx_runtime.jsx)(esm.vu,{onRemove:()=>handleRemove(index),children:renderer?.(item)??item[labelProperty]??item},index))):(0,dist_esm.Im)(state.value)||state.query?void 0:(0,jsx_runtime.jsx)("span",{children:renderer?.(state.value)??state.value[labelProperty]??state.value})),[state.value,state.query,placeholder,renderer]);return(0,react.useLayoutEffect)((()=>{setTimeout((()=>{state.selectedIndex&&listRef.current[state.selectedIndex]?.scrollIntoView({block:"center"})}),100)}),[state.selectedIndex]),(0,jsx_runtime.jsxs)(Wrapper,{...wrapperProps,children:[(0,jsx_runtime.jsx)(InputWrapper,{showClear:!(0,dist_esm.Im)(state.value),onClear:handleChange,invalid,readOnly,disabled,required,error,className:"z-1 rounded-b-none","data-inner":!0,wrapperRef:refs.setReference,children:(0,jsx_runtime.jsxs)("div",{role:"none","data-select-display":"true",className:classnames_default()("group flex-1 py-1 px-2 truncate text-start flex gap-1 relative min-h-5 justify-start",multiple?"flex-wrap":"flex-nowrap overflow-hidden"),...referenceProps,onMouseUp:e=>e.currentTarget.querySelector("input")?.focus(),children:[!hideSelected&&displayValue,(0,jsx_runtime.jsx)("input",{readOnly:!searchable||readOnly,disabled,value:state.query??"","aria-invalid":invalid,"data-testid":name,name,size:1,ref,autoFocus,className:classnames_default()("appearance-none bg-transparent outline-none border-none ring-0 flex-1 min-w-24",disabled&&"cursor-not-allowed pointer-events-none",multiple&&"min-w-24"),placeholder:(0,dist_esm.Im)(state.value)?placeholder:"",onChange:evt=>handleQuery(evt.target.value)})]})}),(0,jsx_runtime.jsx)(floating_ui_react.s3,{context,initialFocus:-1,visuallyHiddenDismiss:!0,children:(0,jsx_runtime.jsx)(Options,{ref:refs.setFloating,className:classnames_default()("max-h-96 z-0 rounded-capped rounded-t-none outline",disabled&&"pointer-events-none opacity-65"),style:{height},...floatingProps,items:state.items,active:state.activeIndex,valueProperty,labelProperty,itemRef:setItemRef,itemProps:makeItemProps,empty:emptyDisplay,children:(item,label)=>renderer?.(item)??label})})]})};try{List.displayName="List",List.__docgenInfo={description:"",displayName:"List",props:{label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"input name",name:"name",required:!1,type:{name:"string"}},renderer:{defaultValue:null,description:"item renderer",name:"renderer",required:!1,type:{name:"((option: T) => ReactNode)"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},onFocus:{defaultValue:null,description:"on focus event handler",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"on blur event handler",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value?: string) => void) | ((value?: string[]) => void) | undefined"}},onSelect:{defaultValue:null,description:"select handler",name:"onSelect",required:!1,type:{name:"((option: T) => void) | ((option: T[]) => void)"}},autoFocus:{defaultValue:null,description:"auto focus when rendered",name:"autoFocus",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"disabled input",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"selected value",name:"value",required:!1,type:{name:"string | string[]"}},multiple:{defaultValue:null,description:"is multiple selection",name:"multiple",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"input placeholder",name:"placeholder",required:!1,type:{name:"string"}},readOnly:{defaultValue:null,description:"read-only input",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},error:{defaultValue:null,description:"error message",name:"error",required:!1,type:{name:"string"}},allowClear:{defaultValue:null,description:"show clear button",name:"allowClear",required:!1,type:{name:"boolean"}},onEnterPressed:{defaultValue:null,description:"on enter press callback",name:"onEnterPressed",required:!1,type:{name:"KeyboardEventHandler<Element>"}},decorateStart:{defaultValue:null,description:"",name:"decorateStart",required:!1,type:{name:"string | number | boolean | Element"}},decorateEnd:{defaultValue:null,description:"",name:"decorateEnd",required:!1,type:{name:"string | number | boolean | Element"}},decorateEndShowWhenEmpty:{defaultValue:null,description:"",name:"decorateEndShowWhenEmpty",required:!1,type:{name:"boolean"}},decorateEndHideWhenEmpty:{defaultValue:null,description:"",name:"decorateEndHideWhenEmpty",required:!1,type:{name:"boolean"}},monospace:{defaultValue:null,description:"",name:"monospace",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"invalid value input",name:"invalid",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"list options",name:"options",required:!1,type:{name:"T[]"}},groupProperty:{defaultValue:null,description:"group by property name",name:"groupProperty",required:!1,type:{name:"string | number | symbol"}},labelProperty:{defaultValue:null,description:"label property name",name:"labelProperty",required:!1,type:{name:"string | number | symbol"}},valueProperty:{defaultValue:null,description:"value property name",name:"valueProperty",required:!1,type:{name:"string | number | symbol"}},sortProperty:{defaultValue:null,description:"value property name",name:"sortProperty",required:!1,type:{name:"string | number | true | symbol"}},searchable:{defaultValue:null,description:"searchable list",name:"searchable",required:!1,type:{name:"boolean"}},allowCreate:{defaultValue:null,description:"allow create item",name:"allowCreate",required:!1,type:{name:"boolean"}},emptyDisplay:{defaultValue:null,description:"empty list display",name:"emptyDisplay",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},createOption:{defaultValue:null,description:"create new item object",name:"createOption",required:!1,type:{name:"((query: string) => T)"}},matcher:{defaultValue:null,description:"item matcher",name:"matcher",required:!1,type:{name:"((option: T, query: string) => boolean)"}},onQuery:{defaultValue:null,description:"query handler",name:"onQuery",required:!1,type:{name:"((query: string) => T[] | Promise<T[]>)"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string | number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/select/List.tsx#List"]={docgenInfo:List.__docgenInfo,name:"List",path:"packages/form/src/select/List.tsx#List"})}catch(__react_docgen_typescript_loader_error){}const DualList=({ref,value,options,emptyDisplay,groupProperty,height="18rem",labelProperty="label",valueProperty="id",renderer,onChange,name,invalid,readOnly,disabled,placeholder,autoFocus,error,...rest})=>{const[actualValue,setActualValue]=(0,react.useState)([]),[leftSelected,setLeftSelected]=(0,react.useState)([]),[rightSelected,setRightSelected]=(0,react.useState)([]),deferred=(0,react.useDeferredValue)(value);(0,react.useEffect)((()=>{setActualValue(options.filter((opt=>deferred?.includes(opt[valueProperty]??opt))))}),[deferred,options]);const[leftOptions,rightOptions]=(0,react.useMemo)((()=>[options.filter((opt=>!actualValue?.includes(opt))),actualValue]),[options,actualValue]),moveAllLeft=(0,react.useCallback)((()=>{setLeftSelected([]),setRightSelected([]),setActualValue([]),onChange?.([])}),[onChange]),moveAllRight=(0,react.useCallback)((()=>{setLeftSelected([]),setRightSelected([]),setActualValue(options),onChange?.(options.map((opt=>`${opt[valueProperty]??opt}`)))}),[onChange,options,valueProperty]),moveLeftSelected=(0,react.useCallback)((()=>{const selected=[...actualValue,...leftSelected];setActualValue(selected),onChange?.(selected.map((opt=>`${opt[valueProperty]??opt}`))),setLeftSelected([])}),[onChange,leftSelected,actualValue]),moveRightSelected=(0,react.useCallback)((()=>{const selected=actualValue.filter((opt=>!rightSelected.includes(opt)));setActualValue(selected),onChange?.(selected.map((opt=>`${opt[valueProperty]??opt}`))),setRightSelected([])}),[onChange,rightSelected,actualValue]),[dragItems,setDragItems]=(0,react.useState)([]),dragLeft=(0,core_esm.PM)({id:"unselected",disabled:!leftSelected.length,data:{supports:["selected"]},attributes:{role:"none"}}),dragRight=(0,core_esm.PM)({id:"selected",disabled:!rightSelected.length,data:{supports:["unselected"]},attributes:{role:"none"}}),dropLeft=(0,core_esm.zM)({id:"unselected",data:{accepts:["selected"]}}),dropRight=(0,core_esm.zM)({id:"selected",data:{accepts:["unselected"]}});return(0,jsx_runtime.jsx)(Field,{...rest,noOutline:!0,plain:!0,children:(0,jsx_runtime.jsxs)(core_esm.Mp,{modifiers:[modifiers_esm.dU],onDragStart:e=>{setDragItems("selected"===e.active.id?rightSelected:leftSelected)},onDragEnd:e=>{setDragItems([])},children:[(0,jsx_runtime.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden p-px",ref:(0,dist_esm.Px)(dragLeft.setNodeRef,dropLeft.setNodeRef),...dragLeft.attributes,...dragLeft.listeners,children:(0,jsx_runtime.jsx)(List,{ref,multiple:!0,allowClear:!0,name,invalid,readOnly,disabled,placeholder,autoFocus,error,height,options:leftOptions,emptyDisplay,groupProperty,labelProperty,valueProperty,renderer,onSelect:setLeftSelected,"data-inner":!0,"data-hide-selected":!0})}),(0,jsx_runtime.jsx)("div",{className:"self-center mx-2",children:(0,jsx_runtime.jsxs)(esm.e2,{vertical:!0,className:"outline overflow-hidden bg-base",children:[(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll to top",onClick:moveAllLeft,icon:esm.OO.chevronsLeft,disabled:!rightOptions.length}),(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll up",onClick:moveRightSelected,icon:esm.OO.chevronLeft,disabled:!rightSelected.length}),(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll down",onClick:moveLeftSelected,icon:esm.OO.chevronRight,disabled:!leftSelected.length}),(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll to bottom",onClick:moveAllRight,icon:esm.OO.chevronsRight,disabled:!leftOptions.length})]})}),(0,jsx_runtime.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden p-px",ref:(0,dist_esm.Px)(dropRight.setNodeRef,dragRight.setNodeRef),children:(0,jsx_runtime.jsx)(List,{multiple:!0,allowClear:!0,height,options:rightOptions,emptyDisplay,groupProperty,labelProperty,valueProperty,renderer,onSelect:setRightSelected,"data-inner":!0,"data-hide-selected":!0})}),(0,jsx_runtime.jsx)(core_esm.Hd,{children:dragItems.length>0&&(0,jsx_runtime.jsxs)("span",{children:[dragItems.length," Item(s)"]})})]})})};try{DualList.displayName="DualList",DualList.__docgenInfo={description:"",displayName:"DualList",props:{height:{defaultValue:{value:"18rem"},description:"list height",name:"height",required:!1,type:{name:"string | number"}},options:{defaultValue:null,description:"list options",name:"options",required:!0,type:{name:"T[]"}},value:{defaultValue:null,description:"selected value",name:"value",required:!1,type:{name:"string[]"}},groupProperty:{defaultValue:null,description:"group by property name",name:"groupProperty",required:!1,type:{name:"string | number | symbol"}},labelProperty:{defaultValue:{value:'"label" as AnyObject'},description:"label property name",name:"labelProperty",required:!1,type:{name:"string | number | symbol"}},valueProperty:{defaultValue:{value:'"id" as AnyObject'},description:"value property name",name:"valueProperty",required:!1,type:{name:"string | number | symbol"}},emptyDisplay:{defaultValue:null,description:"empty list display",name:"emptyDisplay",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},renderer:{defaultValue:null,description:"item renderer",name:"renderer",required:!1,type:{name:"((option: T) => ReactNode)"}},onChange:{defaultValue:null,description:"change handler",name:"onChange",required:!1,type:{name:"((value?: string[]) => void)"}},label:{defaultValue:null,description:"input label",name:"label",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"css classname(s)",name:"className",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"field width",name:"width",required:!1,type:{name:"string | number"}},required:{defaultValue:null,description:"required",name:"required",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"inline label and input",name:"inline",required:!1,type:{name:"boolean"}},vertical:{defaultValue:null,description:"",name:"vertical",required:!1,type:{name:"boolean"}},info:{defaultValue:null,description:"info label at bottom",name:"info",required:!1,type:{name:"string"}},appendLabel:{defaultValue:null,description:"append to label end",name:"appendLabel",required:!1,type:{name:"string | number | boolean | Element"}},labelWidth:{defaultValue:null,description:"label width for inline",name:"labelWidth",required:!1,type:{name:"string"}},noOutline:{defaultValue:null,description:"hide outline",name:"noOutline",required:!1,type:{name:"boolean"}},plain:{defaultValue:null,description:"dont apply bg and outline",name:"plain",required:!1,type:{name:"boolean"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLInputElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/form/src/select/DualList.tsx#DualList"]={docgenInfo:DualList.__docgenInfo,name:"DualList",path:"packages/form/src/select/DualList.tsx#DualList"})}catch(__react_docgen_typescript_loader_error){}},"./packages/form/src/types/schema.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var DATA_TYPES;__webpack_require__.d(__webpack_exports__,{H:()=>SCHEMA_CUSTOM_LIST,h:()=>DATA_TYPES}),function(DATA_TYPES){DATA_TYPES.TEXT="text",DATA_TYPES.COLOR="color",DATA_TYPES.BOOL="bool",DATA_TYPES.DATE="date",DATA_TYPES.DATETIME="datetime",DATA_TYPES.STRING="string",DATA_TYPES.NUMBER="number",DATA_TYPES.RANGE="range",DATA_TYPES.FILE="file",DATA_TYPES.AVATAR="avatar",DATA_TYPES.SCHEMA="schema"}(DATA_TYPES||(DATA_TYPES={}));const SCHEMA_CUSTOM_LIST="--CUSTOM--"}}]);