"use strict";(self.webpackChunkreact_fabric=self.webpackChunkreact_fabric||[]).push([[1127],{"./packages/data/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{dq:()=>Histogram,p2:()=>JsonViewer,XI:()=>Table,d6:()=>TreePanel,mF:()=>VirtualGallery,wj:()=>VirtualList,RB:()=>useFilteredList});var esm=__webpack_require__("./packages/core/dist/esm/index.js");const ar_namespaceObject=JSON.parse('{"label":{"noRecords":"لا تسجيلات"},"tree":{"noItems":"لا توجد عناصر","error":"خطأ في تحميل العناصر","loading":"تحميل العناصر…"},"datagrid":{"empty":"لا توجد سجلات متاحة"},"json":{"empty":"لا توجد خصائص بيانات","true":"نعم","false":"رقم"},"checkList":{"empty":"لا توجد عناصر قائمة"},"histogram":{"empty":"لا توجد رسوم بيانية"},"action":{"find":"تجد…","copy":"قيمة النسخ","filter":"منقي…","showShortcuts":"اختصارات لوحة المفاتيح…","collapseAll":"انهيار جميع","expandAll":"توسيع الكل","checkAll":"تحقق من الكل","uncheckAll":"الغاءالكل","addFilter":"أضف عامل تصفية","addFilterNot":"إضافة لا تصفية"}}'),en_namespaceObject=JSON.parse('{"label":{"noRecords":"No Records"},"tree":{"noItems":"No items","error":"Error loading items","loading":"Loading items..."},"datagrid":{"empty":"No records available"},"json":{"empty":"No data properties","true":"Yes","false":"No"},"checkList":{"empty":"No list items"},"histogram":{"empty":"No histograms"},"action":{"find":"Find...","copy":"Copy Value","filter":"Filter...","showShortcuts":"Keyboard shortcuts...","collapseAll":"Collapse All","expandAll":"Expand All","checkAll":"Check All","uncheckAll":"Uncheck All","addFilter":"Add Filter","addFilterNot":"Add not Filter"}}');(0,esm.Rp)("data",{en:en_namespaceObject,ar:ar_namespaceObject});var react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),dist_esm=__webpack_require__("./packages/utilities/dist/esm/index.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js");const CheckItem=({id,allowNegative,selected,icon,label,isDisabled,onClick,badge,...aria})=>_jsxs("div",{role:"none",className:"ax-checkList__item","data-disabled":isDisabled,onClick:()=>onClick(id,!1),onContextMenu:e=>[allowNegative&&onClick(id,!0),e.preventDefault()],...aria,children:[!allowNegative&&_jsx(Icon,{"data-type":"checkbox",className:"ax-checkList__checkbox","data-selected":1===selected,icon:selected?CoreIcons.checkboxInt:CoreIcons.checkboxOff}),allowNegative&&_jsxs(Fragment,{children:[_jsx(Icon,{"data-type":"multiple",className:"ax-checkList__checkbox",icon:1===selected?CoreIcons.expand:-1===selected?CoreIcons.collapse:CoreIcons.checkboxOff,"data-selected":selected}),_jsxs("div",{className:"ax-checkList__checkbox",children:[_jsx(Icon,{"data-type":"positive",onClick:e=>[(onClick(id,!1),e.stopPropagation())],icon:1===selected?CoreIcons.expandActive:CoreIcons.expand,"data-selected":1===selected}),_jsx(Icon,{"data-type":"negative",onClick:e=>[(onClick(id,!0),e.stopPropagation())],icon:-1===selected?CoreIcons.collapseActive:CoreIcons.collapse,"data-selected":-1===selected})]})]}),isValidElement(icon)&&icon,isString(icon)&&_jsx(Icon,{icon}),_jsx("label",{children:label}),_jsx(Badge,{...badge})]}),CheckList=({items=[],maxCount=0,allowNegative,emptyMessage,sortItems=!0,selected,nonselected,onChange,onClick,...aria})=>{const{t}=useTranslation("data"),{selection,toggleSelection}=useSelectableList({items,selected,nonselected,onChange,onClick}),[showMore,setShowMore]=useState(!1);useEffect((()=>{setShowMore(!1)}),[items]);const listItems=useMemo((()=>[...items].sort(((a,b)=>{if(sortItems&&selection[a.id]!==selection[b.id]){if(1===selection[a.id])return-1;if(1===selection[b.id])return 1;if(-1===selection[a.id])return-1;if(-1===selection[b.id])return 1}return 0})).slice(0,!showMore&&maxCount>0?maxCount:void 0)),[items,selection,maxCount,showMore,sortItems]);return _jsxs("div",{...aria,children:[listItems.map(((item,index)=>_createElement(CheckItem,{...item,key:index,onClick:toggleSelection,allowNegative,selected:selection[item.id]}))),maxCount>0&&items.length>maxCount&&_jsx("div",{className:"ax-moreLink",children:_jsxs("span",{role:"none",className:"link",onClick:()=>setShowMore(!showMore),children:["...",t("core:action."+(showMore?"less":"more"))]})}),0===listItems.length&&_jsx(EmptyContent,{className:"text-sm",message:emptyMessage??t("checkList.empty")})]})};try{CheckList.displayName="CheckList",CheckList.__docgenInfo={description:"",displayName:"CheckList",props:{items:{defaultValue:{value:"[]"},description:"list items",name:"items",required:!1,type:{name:"CheckListItem[]"}},allowNegative:{defaultValue:null,description:"allow negative selections",name:"allowNegative",required:!1,type:{name:"boolean"}},maxCount:{defaultValue:{value:"0"},description:"max list items",name:"maxCount",required:!1,type:{name:"number"}},emptyMessage:{defaultValue:null,description:"message for empty list",name:"emptyMessage",required:!1,type:{name:"string"}},sortItems:{defaultValue:{value:"true"},description:"",name:"sortItems",required:!1,type:{name:"boolean"}},selected:{defaultValue:null,description:"selected item ids",name:"selected",required:!1,type:{name:"string[]"}},nonselected:{defaultValue:null,description:"selected negative item ids",name:"nonselected",required:!1,type:{name:"string[]"}},onChange:{defaultValue:null,description:"change callback",name:"onChange",required:!1,type:{name:"((ids: string[], nonIds?: string[]) => void)"}},onClick:{defaultValue:null,description:"item click callback",name:"onClick",required:!1,type:{name:"((id: string, isNegative: boolean) => void)"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/checklist/CheckList.tsx#CheckList"]={docgenInfo:CheckList.__docgenInfo,name:"CheckList",path:"packages/data/src/checklist/CheckList.tsx#CheckList"})}catch(__react_docgen_typescript_loader_error){}var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),Histogram_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./packages/data/src/histogram/Histogram.module.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(Histogram_module.A,options);const histogram_Histogram_module=Histogram_module.A&&Histogram_module.A.locals?Histogram_module.A.locals:void 0,Histogram=({items=[],total,color="primary",sortBy="count",emptyTitle,emptyMessage,onClick,...aria})=>{const{t}=(0,es.Bd)("data"),maxTotal=(0,react.useMemo)((()=>total||Math.max(...items.map((item=>item.count)))),[total,items]),sorted=(0,react.useMemo)((()=>items.sort((0,dist_esm.ck)("label"===sortBy?"asc":"desc",sortBy))),[items,sortBy]);return(0,jsx_runtime.jsxs)("div",{className:histogram_Histogram_module.histogram,...aria,style:{"--color":`var(--${color})`},children:[0===sorted.length&&(0,jsx_runtime.jsx)(esm.HY,{icon:(0,jsx_runtime.jsx)(esm.In,{icon:"M20.84 22.73L11.11 13H3V11H9.11L6.11 8H3V6H4.11L1.11 3L2.39 1.73L22.11 21.46L20.84 22.73M15 11H14.2L15 11.8V11M21 8V6H9.2L11.2 8H21M3 18H9V16H3V18Z",size:"2.5rem"}),title:emptyTitle,message:emptyMessage??t("histogram.empty")}),sorted?.map((item=>(0,jsx_runtime.jsxs)("div",{role:"none","data-disabled":0===item.count||item.disabled,className:classnames_default()("relative cursor-pointer flex flex-nowrap items-center select-none overflow-hidden min-h-6 my-px",histogram_Histogram_module.histoLabel,(0===(item.total??item.count)||item.disabled)&&"pointer-events-none"),"data-testid":item.id,onClick:e=>[onClick?.(item.id),e.stopPropagation()],children:[(0,jsx_runtime.jsx)("div",{className:classnames_default()("absolute z-0 inset-0 opacity-50 min-w-2 ltr:bg-gradient-to-r rtl:bg-gradient-to-l from-0% to-100%",histogram_Histogram_module.histoBar),style:{width:100*Math.min(item.count/maxTotal,1)+"%"}}),(0,jsx_runtime.jsx)(esm.L4,{className:"flex-1 truncate z-1 text-sm cursor-pointer font-medium",actions:[(0,jsx_runtime.jsx)(esm.$n,{color:"danger",size:"sm",stopPropagation:!0,icon:esm.OO.funnelMinus,"aria-label":"Filter Negative",onClick:()=>onClick?.(item.id,!0)},"negative"),(0,jsx_runtime.jsx)(esm.$n,{color:"primary",size:"sm",stopPropagation:!0,icon:esm.OO.funnelPlus,"aria-label":"Filter",onClick:()=>onClick?.(item.id)},"positive")],children:item.label}),(0,jsx_runtime.jsx)("span",{className:classnames_default()("z-1 rounded-full text-xs font-medium px-2 py-1 leading-none",histogram_Histogram_module.histoBadge),children:dist_esm.yL.number(item.count)})]},item.id)))]})};try{Histogram.displayName="Histogram",Histogram.__docgenInfo={description:"",displayName:"Histogram",props:{items:{defaultValue:{value:"[]"},description:"histogram items list",name:"items",required:!1,type:{name:"HistogramItem[]"}},total:{defaultValue:null,description:"total count",name:"total",required:!1,type:{name:"number"}},color:{defaultValue:{value:"primary"},description:"histogram bar color",name:"color",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"accent"'},{value:'"info"'},{value:'"danger"'},{value:'"success"'},{value:'"warning"'},{value:'"scarlet"'},{value:'"pumpkin"'},{value:'"marigold"'},{value:'"avacado"'},{value:'"jade"'},{value:'"denim"'},{value:'"iris"'},{value:'"lilac"'},{value:'"coral"'},{value:'"wood"'},{value:'"silver"'},{value:'"steel"'},{value:'"olive"'},{value:'"sand"'}]}},sortBy:{defaultValue:{value:"count"},description:"sorted list",name:"sortBy",required:!1,type:{name:"enum",value:[{value:'"label"'},{value:'"count"'}]}},emptyTitle:{defaultValue:null,description:"title when histo list is empty",name:"emptyTitle",required:!1,type:{name:"string | Element"}},emptyMessage:{defaultValue:null,description:"message when histo list is empty",name:"emptyMessage",required:!1,type:{name:"string | Element"}},onClick:{defaultValue:null,description:"handle histo click",name:"onClick",required:!1,type:{name:"((id: string, negative?: true) => void)"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/histogram/Histogram.tsx#Histogram"]={docgenInfo:Histogram.__docgenInfo,name:"Histogram",path:"packages/data/src/histogram/Histogram.tsx#Histogram"})}catch(__react_docgen_typescript_loader_error){}const reduceObject=(json,keys=[],prefix="")=>{const ret=[];return Object.entries(json).forEach((([key,value])=>{if((0,dist_esm.cy)(value)&&(0,dist_esm.Gv)(value[0]))ret.push(...reduceObject(value,[...keys,key],key));else{const obj={field:prefix?`${prefix}.${key}`:key,value,path:[...keys,key].join(".")};!(0,dist_esm.Gv)(value)||(0,dist_esm.Im)(value)||"_score_"in value||(obj.children=reduceObject(value,[...keys,key])),ret.push(obj)}})),ret.flat(99)},JsonEntry=({value,path,field,children,copy,filters,labeler,formatter,propertyScheme,showPropertyTree,onFilter,inline,labelWidth="30%",level=0})=>{const{t}=(0,es.Bd)("data"),[expanded,setExpanded]=(0,react.useState)(!0),canExpand=(0,react.useMemo)((()=>!!children),[children]),actualValue=(0,react.useMemo)((()=>value?._label_??value??""),[value]),display=(0,react.useMemo)((()=>{if(children)return null;if((0,dist_esm.gD)(value))return(0,jsx_runtime.jsx)("span",{className:"text-muted",children:"null"});if((0,dist_esm.Im)(value))return(0,jsx_runtime.jsx)("span",{className:"text-muted",children:"empty"});let ret=actualValue;if(formatter){const formatted=formatter?.(path,actualValue);(0,dist_esm.gD)(formatted)||(ret=formatted)}return(0,dist_esm.cy)(actualValue)&&(ret=`[${actualValue.join(", ")}]`),propertyScheme?.date?.includes(path),propertyScheme?.time?.includes(path)&&(ret=dist_esm.yL.date(actualValue,"pp")),propertyScheme?.number?.phone(path)&&(ret=dist_esm.yL.phone(actualValue)),propertyScheme?.bytes?.includes(path)&&(ret=dist_esm.yL.bytes(actualValue)),propertyScheme?.percent?.includes(path)&&(ret=dist_esm.yL.percent(actualValue)),propertyScheme?.number?.includes(path)&&(ret=dist_esm.yL.number(actualValue)),(propertyScheme?.boolean?.includes(path)||(0,dist_esm.Lm)(actualValue))&&(ret=t(actualValue?"json.true":"json.false")),ret?.length>128&&(ret=(0,jsx_runtime.jsx)(esm.EY,{clamp:3,children:ret})),(0,jsx_runtime.jsxs)(react.Fragment,{children:[ret,(0,dist_esm.Gv)(value)&&value._score_>0&&(0,jsx_runtime.jsx)(esm.kI,{className:"text-xs",value:value._score_})]})}),[value,path,formatter,propertyScheme,actualValue]),pathWithoutOrdinal=(0,react.useMemo)((()=>path.replace(/\.\d*\./,".")),[path]),canCopy=(0,react.useMemo)((()=>!(0,dist_esm.Im)(value)&&((0,dist_esm.Hn)(copy)||copy?.includes?.(path)||copy?.includes?.(pathWithoutOrdinal))),[copy,value,path,pathWithoutOrdinal]),canFilter=(0,react.useMemo)((()=>(0,dist_esm.Hn)(filters)||filters?.includes?.(path)||filters?.includes?.(pathWithoutOrdinal)),[filters,path,pathWithoutOrdinal]),labelDisplay=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(esm.L4,{className:"text-dimmed text-sm px-2 flex-1 truncate",actions:!canExpand&&canFilter?[(0,jsx_runtime.jsx)(esm.$n,{color:"danger",size:"sm",variant:"link",icon:esm.OO.funnelMinus,"aria-label":"Filter Negative",onClick:()=>onFilter?.(pathWithoutOrdinal,actualValue,!0)},"negative"),(0,jsx_runtime.jsx)(esm.$n,{color:"primary",size:"sm",variant:"link",icon:esm.OO.funnelPlus,"aria-label":"Filter",onClick:()=>onFilter?.(pathWithoutOrdinal,actualValue)},"positive")]:[],children:labeler?.(path)??field})),[field,labeler,pathWithoutOrdinal,actualValue,canExpand,canFilter]);return(0,jsx_runtime.jsxs)(react.Fragment,{children:[showPropertyTree&&(0,jsx_runtime.jsxs)("div",{className:classnames_default()("py-2",inline&&"flex flex-nowrap items-center"),style:{paddingInlineStart:8*level},children:[(0,jsx_runtime.jsxs)("div",{role:"none",className:classnames_default()("flex overflow-hidden items-center",inline&&"flex-content"),style:{flexBasis:labelWidth},onClick:()=>canExpand&&setExpanded(!expanded),children:[canExpand&&(0,jsx_runtime.jsx)(esm.In,{rtlFlip:!0,icon:expanded?esm.OO.chevronDown:esm.OO.chevronRight}),labelDisplay]}),display&&(0,jsx_runtime.jsxs)("div",{className:classnames_default()("px-2",inline&&"flex-1"),children:[canCopy&&(0,jsx_runtime.jsx)(esm.QR,{size:"xs",text:actualValue}),display]})]}),!showPropertyTree&&!children&&(0,jsx_runtime.jsxs)("div",{className:classnames_default()("py-2",inline&&"flex flex-nowrap items-center"),children:[(0,jsx_runtime.jsx)("div",{role:"none",className:classnames_default()("flex overflow-hidden items-center",inline&&"flex-content"),style:{flexBasis:labelWidth},children:labelDisplay}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("px-2",inline&&"flex-1"),children:[canCopy&&(0,jsx_runtime.jsx)(esm.QR,{size:"xs",text:value}),display]})]}),expanded&&children?.map((item=>(0,jsx_runtime.jsx)(JsonEntry,{...item,level:level+1,copy,inline,showPropertyTree,propertyScheme,filters,labelWidth,formatter,labeler,onFilter},item.path)))]})},JsonViewer=({className,json,copy,propertyScheme,filters,inline,labelWidth,formatter,labeler,onFilter,emptyMessage,showPropertyTree=!0,...rest})=>{const{t}=(0,es.Bd)("data"),list=(0,react.useMemo)((()=>reduceObject(json)),[json]);return(0,jsx_runtime.jsx)("div",{...rest,className:classnames_default()(className,"p-4 bg-alternate"),children:(0,dist_esm.Im)(json)?(0,jsx_runtime.jsx)(esm.HY,{size:"sm",message:emptyMessage??t("json.empty")}):list.map((item=>(0,jsx_runtime.jsx)(JsonEntry,{...item,copy,inline,showPropertyTree,propertyScheme,filters,labelWidth,formatter,labeler,onFilter},item.path)))})};try{JsonViewer.displayName="JsonViewer",JsonViewer.__docgenInfo={description:"",displayName:"JsonViewer",props:{json:{defaultValue:null,description:"json value",name:"json",required:!0,type:{name:"KeyValue"}},inline:{defaultValue:null,description:"display inline",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:{value:"30%"},description:"label fixed width when using inline",name:"labelWidth",required:!1,type:{name:"string | number"}},showPropertyTree:{defaultValue:{value:"true"},description:"display object properties as tree",name:"showPropertyTree",required:!1,type:{name:"boolean"}},propertyScheme:{defaultValue:null,description:"properties to format as dates\n(default format applied to property name containing `date` | `time`)",name:"propertyScheme",required:!1,type:{name:"{ boolean?: string[]; date?: string[]; time?: string[] | undefined; number?: string[] | undefined; bytes?: string[] | undefined; percent?: string[] | undefined; phone?: string[] | undefined; } | undefined"}},copy:{defaultValue:null,description:"enable value copy",name:"copy",required:!1,type:{name:"true | string[]"}},filters:{defaultValue:null,description:"enable filter callbacks",name:"filters",required:!1,type:{name:"true | string[]"}},emptyMessage:{defaultValue:null,description:"message for empty json",name:"emptyMessage",required:!1,type:{name:"string"}},onFilter:{defaultValue:null,description:"on filter callback",name:"onFilter",required:!1,type:{name:"((path: string, value: AnyObject, negate: boolean) => void)"}},labeler:{defaultValue:null,description:"render function for custom label display",name:"labeler",required:!1,type:{name:"((path: string) => string)"}},formatter:{defaultValue:null,description:"render function for custom value display",name:"formatter",required:!1,type:{name:"((path?: string, value?: any) => string | Element) | undefined"}},className:{defaultValue:null,description:"css classname(s)",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/json/JsonViewer.tsx#JsonViewer"]={docgenInfo:JsonViewer.__docgenInfo,name:"JsonViewer",path:"packages/data/src/json/JsonViewer.tsx#JsonViewer"})}catch(__react_docgen_typescript_loader_error){}const Pagination=(0,react.memo)((({page,ranges,totalPages,minimal,onPageChange})=>{const[start,mid,last]=ranges,pageBody=(0,react.useMemo)((()=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[start?.map((pg=>(0,jsx_runtime.jsx)("button",{onClick:()=>onPageChange(pg),className:classnames_default()("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",page===pg&&"bg-primary-500 text-white pointer-events-none"),children:pg+1},pg))),mid&&(0,jsx_runtime.jsx)("span",{className:"leading-none inline-block w-8 text-center text-dimmed",children:"..."}),mid?.map((pg=>(0,jsx_runtime.jsx)("button",{onClick:()=>onPageChange(pg),className:classnames_default()("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",page===pg&&"bg-primary-500 text-white pointer-events-none"),children:pg+1},pg))),last&&(0,jsx_runtime.jsx)("span",{className:"leading-none inline-block w-8 text-center text-dimmed",children:"..."}),last?.map((pg=>(0,jsx_runtime.jsx)("button",{onClick:()=>onPageChange(pg),className:classnames_default()("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",page===pg&&"bg-primary-500 text-white pointer-events-none"),children:pg+1},pg)))]})),[start,mid,last,page]);return(0,jsx_runtime.jsxs)("div",{className:"inline-flex items-center",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>onPageChange(0),className:classnames_default()("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",0===page&&"pointer-events-none text-tint-300"),children:(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.chevronsLeft,rtlFlip:!0})}),(0,jsx_runtime.jsx)("button",{onClick:()=>onPageChange(page-1),className:classnames_default()("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",0===page&&"pointer-events-none text-tint-300"),children:(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.chevronLeft,rtlFlip:!0})}),!minimal&&pageBody,minimal&&(0,jsx_runtime.jsxs)("label",{className:"leading-none inline-block px-1 text-center text-sm select-none fixed-numbers",children:[page+1,"/",totalPages]}),(0,jsx_runtime.jsx)("button",{onClick:()=>onPageChange(page+1),className:classnames_default()("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",page+1>=totalPages&&"pointer-events-none text-tint-300"),children:(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.chevronRight,rtlFlip:!0})}),(0,jsx_runtime.jsx)("button",{onClick:()=>onPageChange(totalPages-1),className:classnames_default()("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",page+1>=totalPages&&"pointer-events-none text-tint-300"),children:(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.chevronsRight,rtlFlip:!0})})]})}));Pagination.displayName="Pagination";try{Pagination.displayName="Pagination",Pagination.__docgenInfo={description:"",displayName:"Pagination",props:{page:{defaultValue:null,description:"currrent page number",name:"page",required:!0,type:{name:"number"}},totalPages:{defaultValue:null,description:"total page count",name:"totalPages",required:!0,type:{name:"number"}},ranges:{defaultValue:null,description:"pagination sections [start, mid, end]",name:"ranges",required:!0,type:{name:"number[][]"}},minimal:{defaultValue:null,description:"minimal view",name:"minimal",required:!1,type:{name:"boolean"}},onPageChange:{defaultValue:null,description:"page change handler",name:"onPageChange",required:!0,type:{name:"(page: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/pagination/Pagination.tsx#Pagination"]={docgenInfo:Pagination.__docgenInfo,name:"Pagination",path:"packages/data/src/pagination/Pagination.tsx#Pagination"})}catch(__react_docgen_typescript_loader_error){}const AddColumn=({columns,onClick})=>(0,jsx_runtime.jsx)("div",{className:"group font-medium w-6 flex flex-nowrap text-start items-end",children:(0,jsx_runtime.jsxs)(esm.ms,{placement:"bottom-end",children:[(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.insert,className:"p-1 rounded-t rounded-b-none hover:outline"}),(0,jsx_runtime.jsx)(esm.W1,{className:"text-sm",onClick,children:columns.map((col=>(0,jsx_runtime.jsx)(esm.Dr,{id:String(col.id),"data-dropdown-dismiss":"false",label:`${col.label??String(col.id)}`,icon:col.hidden?"":esm.OO.tick},String(col.id))))})]})});try{AddColumn.displayName="AddColumn",AddColumn.__docgenInfo={description:"",displayName:"AddColumn",props:{columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"TableColumn<KeyValue>[]"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"(id: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/table/AddColumn.tsx#AddColumn"]={docgenInfo:AddColumn.__docgenInfo,name:"AddColumn",path:"packages/data/src/table/AddColumn.tsx#AddColumn"})}catch(__react_docgen_typescript_loader_error){}var date_dist_esm=__webpack_require__("./packages/date/dist/esm/index.js");const TableContext=(0,react.createContext)({}),TableProvider=({children})=>{const ghostRef=(0,react.useRef)(null),[widths,setWidths]=(0,react.useState)(new Map),startResize=(0,react.useCallback)((col=>{col&&null!=ghostRef.current&&((colEl,ghostEl,callback)=>{const placeholder=ghostEl.firstElementChild,isRtl="rtl"===getComputedStyle(colEl).direction,onResize=evt=>{const box=colEl.getBoundingClientRect(),x=isRtl?box.left-evt.clientX:evt.clientX-box.right;placeholder.style.width=`${colEl.offsetWidth+x}px`},onResizeEnd=()=>{callback(placeholder.offsetWidth),ghostEl.style.display="none",document.removeEventListener("mousemove",onResize),document.removeEventListener("mouseup",onResizeEnd)},box=colEl.getBoundingClientRect();if(null!=colEl.parentElement){const parentBox=colEl.closest("[data-ref='tableScroller']")?.getBoundingClientRect();isRtl?(placeholder.style.left="unset",placeholder.style.right=parentBox.width-box.right+"px"):(placeholder.style.right="unset",placeholder.style.left=`${box.left}px`)}placeholder.style.width=`${colEl.offsetWidth}px`,placeholder.style.minWidth=colEl.style.minWidth||"48px",placeholder.style.maxWidth=colEl.style.maxWidth||"75vw",ghostEl.style.display="block",document.addEventListener("mousemove",onResize),document.addEventListener("mouseup",onResizeEnd)})(col,ghostRef.current,(width=>{setWidths(new Map(widths.set(col.dataset.id??"",width)))}))}),[widths]);return(0,jsx_runtime.jsxs)(TableContext.Provider,{value:{startResize,widths},children:[children,(0,jsx_runtime.jsx)("div",{className:"absolute inset-0 hidden z-20 cursor-col-resize",ref:ghostRef,children:(0,jsx_runtime.jsx)("div",{className:"absolute inset-y-0 bg-muted opacity-50 border-primary border-e-2"})})]})},useTableContext=()=>(0,react.useContext)(TableContext);try{TableProvider.displayName="TableProvider",TableProvider.__docgenInfo={description:"",displayName:"TableProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/table/Context.tsx#TableProvider"]={docgenInfo:TableProvider.__docgenInfo,name:"TableProvider",path:"packages/data/src/table/Context.tsx#TableProvider"})}catch(__react_docgen_typescript_loader_error){}const BodyCell=({column,item,index})=>{const{widths}=useTableContext(),width=(0,react.useMemo)((()=>widths.get(column.id.toString())??column.width),[widths,column]),content=(0,react.useMemo)((()=>{const value=(0,dist_esm.Dz)(item,column.id.toString());if(null!=column.renderer)return column.renderer(item[column.id],item,index);if("boolean"===column.dataType){return(column.valueMap??{true:"Yes",false:"no"})[""+((0,dist_esm.Hn)(value)?"true":"false")]}return null!=column.valueMap&&"string"===column.dataType&&value in column.valueMap?column.valueMap[value]:["date","time","datetime"].includes(column.dataType??"")?(0,jsx_runtime.jsx)(date_dist_esm.Hl,{date:value,format:column.format}):"number"===column.dataType?dist_esm.yL.number(value,column.format):value??""}),[item,column]);return(0,jsx_runtime.jsx)("div",{className:"overflow-hidden bg-inherit start-0 border-e",style:{width:width??"12rem",minWidth:column.minWidth??"3rem",maxWidth:column.maxWidth??"64rem"},children:(0,jsx_runtime.jsx)("div",{className:classnames_default()("px-2 py-1",column.className,column.truncate&&"truncate","center"===column.align&&"text-center","end"===column.align&&"text-end"),children:content})})};try{BodyCell.displayName="BodyCell",BodyCell.__docgenInfo={description:"",displayName:"BodyCell",props:{column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"TableColumn<KeyValue>"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"KeyValue"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/table/BodyCell.tsx#BodyCell"]={docgenInfo:BodyCell.__docgenInfo,name:"BodyCell",path:"packages/data/src/table/BodyCell.tsx#BodyCell"})}catch(__react_docgen_typescript_loader_error){}const CheckboxCell=({state,onClick})=>(0,jsx_runtime.jsx)("div",{className:"group font-medium border-e w-6 flex flex-nowrap text-start py-1",children:(0,jsx_runtime.jsx)(esm.In,{icon:2===state?esm.OO.checkboxInt:1===state?esm.OO.checkboxOn:esm.OO.checkboxOff,className:"p-1 text-tint-700 hover:text-primary-600",onClick:e=>[onClick?.(),e.stopPropagation()]})});try{CheckboxCell.displayName="CheckboxCell",CheckboxCell.__docgenInfo={description:"",displayName:"CheckboxCell",props:{state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"}]}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/table/CheckboxCell.tsx#CheckboxCell"]={docgenInfo:CheckboxCell.__docgenInfo,name:"CheckboxCell",path:"packages/data/src/table/CheckboxCell.tsx#CheckboxCell"})}catch(__react_docgen_typescript_loader_error){}const BodyRow=({rowKey,index,data,keyProperty,measureElement,state,hideableColumns,wrapperStart,wrapperEnd,onRowClick,checkableRows,checked,toggleChecked,canExpand,expanded,toggleExpand,expandRow})=>(0,jsx_runtime.jsxs)("div",{ref:measureElement,"data-index":index,className:index%2?"bg-even":"bg-odd",children:[(0,jsx_runtime.jsxs)("div",{role:"none","data-row":index,className:classnames_default()("flex flex-nowrap datatable-row data-[hilight]:outline-1 -outline-offset-1 outline-primary-500",onRowClick&&"hover:bg-primary-50 active:bg-primary-100",index%2?"bg-even":"bg-odd"),onClick:()=>checkableRows&&keyProperty&&!onRowClick?toggleChecked(data[keyProperty]):onRowClick?.(data),children:[(0,jsx_runtime.jsxs)("div",{className:wrapperStart,children:[!!canExpand&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("group font-medium w-6 flex flex-nowrap text-start py-1",!canExpand(data)&&"pointer-events-none opacity-35"),children:(0,jsx_runtime.jsx)(esm.In,{className:"p-1 text-tint-700 hover:text-primary-600",icon:expanded?esm.OO.collapse:esm.OO.expand,onClick:e=>[keyProperty&&toggleExpand(data[keyProperty]),e.stopPropagation()]})}),checkableRows&&keyProperty&&(0,jsx_runtime.jsx)(CheckboxCell,{onClick:()=>toggleChecked(data[keyProperty]),state:checked}),state.start?.map(((col,ids)=>(0,jsx_runtime.jsx)(BodyCell,{column:col,item:data,index:ids},`${String(rowKey)}:${ids}`)))]}),state.cols?.map(((col,idc)=>(0,jsx_runtime.jsx)(BodyCell,{column:col,item:data,index:idc},`${String(rowKey)}:${idc}`))),(0,jsx_runtime.jsxs)("div",{className:wrapperEnd,children:[state.end?.map(((col,ide)=>(0,jsx_runtime.jsx)(BodyCell,{column:col,item:data,index:ide},`${String(rowKey)}:${ide}`))),hideableColumns&&(0,jsx_runtime.jsx)("div",{className:"w-6"})]})]}),expanded&&expandRow(data)]});try{BodyRow.displayName="BodyRow",BodyRow.__docgenInfo={description:"",displayName:"BodyRow",props:{rowKey:{defaultValue:null,description:"",name:"rowKey",required:!0,type:{name:"Key"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"KeyValue"}},keyProperty:{defaultValue:null,description:"",name:"keyProperty",required:!1,type:{name:"any"}},measureElement:{defaultValue:null,description:"",name:"measureElement",required:!0,type:{name:"AnyObject"}},state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"KeyValue<TableColumn<KeyValue>[]>"}},hideableColumns:{defaultValue:null,description:"",name:"hideableColumns",required:!1,type:{name:"boolean"}},wrapperStart:{defaultValue:null,description:"",name:"wrapperStart",required:!0,type:{name:"string"}},wrapperEnd:{defaultValue:null,description:"",name:"wrapperEnd",required:!0,type:{name:"string"}},checkableRows:{defaultValue:null,description:"",name:"checkableRows",required:!1,type:{name:"boolean"}},checked:{defaultValue:null,description:"",name:"checked",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"}]}},onRowClick:{defaultValue:null,description:"",name:"onRowClick",required:!1,type:{name:"any"}},canExpand:{defaultValue:null,description:"",name:"canExpand",required:!1,type:{name:"any"}},expandRow:{defaultValue:null,description:"",name:"expandRow",required:!1,type:{name:"any"}},expanded:{defaultValue:null,description:"",name:"expanded",required:!0,type:{name:"boolean"}},toggleExpand:{defaultValue:null,description:"",name:"toggleExpand",required:!0,type:{name:"(key: Key) => void"}},toggleChecked:{defaultValue:null,description:"",name:"toggleChecked",required:!0,type:{name:"(key: Key) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/table/BodyRow.tsx#BodyRow"]={docgenInfo:BodyRow.__docgenInfo,name:"BodyRow",path:"packages/data/src/table/BodyRow.tsx#BodyRow"})}catch(__react_docgen_typescript_loader_error){}const EmptyCell=({id,width:_width,maxWidth,minWidth})=>{const{widths}=useTableContext(),width=(0,react.useMemo)((()=>widths.get(id.toString())??_width),[widths,id,_width]);return(0,jsx_runtime.jsx)("div",{className:"overflow-hidden border-e",style:{width:width??"12rem",minWidth:minWidth??"3rem",maxWidth:maxWidth??"64rem"}},`blank:${id.toString()}`)};try{EmptyCell.displayName="EmptyCell",EmptyCell.__docgenInfo={description:"",displayName:"EmptyCell",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string | number | symbol"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"string"}},actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>[]"}},align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"end"'},{value:'"start"'}]}},locked:{defaultValue:null,description:"",name:"locked",required:!1,type:{name:"enum",value:[{value:'"end"'},{value:'"start"'}]}},hidden:{defaultValue:null,description:"",name:"hidden",required:!1,type:{name:"boolean"}},truncate:{defaultValue:null,description:"",name:"truncate",required:!1,type:{name:"boolean"}},hideable:{defaultValue:null,description:"",name:"hideable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean"}},filterable:{defaultValue:null,description:"",name:"filterable",required:!1,type:{name:"boolean"}},filterList:{defaultValue:null,description:"",name:"filterList",required:!1,type:{name:"AnyObject[]"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string | number"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"string | number"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string | number"}},dataType:{defaultValue:null,description:"",name:"dataType",required:!1,type:{name:"enum",value:[{value:'"string"'},{value:'"number"'},{value:'"boolean"'},{value:'"time"'},{value:'"date"'},{value:'"datetime"'},{value:'"unknown"'}]}},format:{defaultValue:null,description:"",name:"format",required:!1,type:{name:"string"}},valueMap:{defaultValue:null,description:"",name:"valueMap",required:!1,type:{name:"any"}},renderer:{defaultValue:null,description:"",name:"renderer",required:!1,type:{name:"((value: AnyObject, data: KeyValue, index: number) => Elements<AnyObject>)"}},className:{defaultValue:null,description:"css classname(s)",name:"className",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"svg path / image url",name:"icon",required:!1,type:{name:"string"}},rtlFlip:{defaultValue:null,description:"flip icon in rtl",name:"rtlFlip",required:!1,type:{name:"boolean"}},iconBg:{defaultValue:null,description:"icon background color",name:"iconBg",required:!1,type:{name:"string"}},iconColor:{defaultValue:null,description:"icon color",name:"iconColor",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/table/EmptyCell.tsx#EmptyCell"]={docgenInfo:EmptyCell.__docgenInfo,name:"EmptyCell",path:"packages/data/src/table/EmptyCell.tsx#EmptyCell"})}catch(__react_docgen_typescript_loader_error){}const HeaderCell=({id,label,icon,iconBg,iconColor,rtlFlip,actions,locked,tooltip,sortable,resizable,width:_width,maxWidth,minWidth,sort,onSort})=>{const{startResize,widths}=useTableContext(),width=(0,react.useMemo)((()=>widths.get(id.toString())??_width),[widths,_width,id]),handleSort=(0,react.useCallback)((order=>{sortable&&onSort?.({id:id.toString(),order:order??(sort?.id===id&&"asc"===sort.order?"desc":"asc")})}),[onSort,sort,sortable]),menus=(0,react.useMemo)((()=>{const ret=[];return sortable&&ret.push((0,jsx_runtime.jsx)(esm.Dr,{label:"Sort ascending",icon:esm.OO.sortAsc,onClick:()=>handleSort("asc")},"sort-asc"),(0,jsx_runtime.jsx)(esm.Dr,{label:"Sort descending",icon:esm.OO.sortDesc,onClick:()=>handleSort("desc")},"sort-desc")),sortable&&actions&&ret.push((0,jsx_runtime.jsx)(esm.cG,{})),actions&&ret.push(...actions),ret}),[sortable,actions]);return(0,jsx_runtime.jsxs)("div",{role:"none","data-id":id,onClick:()=>handleSort(),className:"group/tool font-medium border-e flex flex-nowrap text-start items-center table-header-cell",style:{width:width??"12rem",minWidth:minWidth??"3rem",maxWidth:maxWidth??"64rem"},children:[(0,jsx_runtime.jsx)(esm.m_,{content:tooltip??label,disabled:!(tooltip??label),children:(0,jsx_runtime.jsxs)("div",{className:"flex-initial px-2 py-1 text-sm truncate sticky start-0",children:[icon&&(0,jsx_runtime.jsx)(esm.In,{icon,bg:iconBg,color:iconColor,rtlFlip}),(0,jsx_runtime.jsx)("span",{children:label??" "})]})}),sortable&&(0,jsx_runtime.jsxs)("div",{className:"text-sm text-tint-300",children:[sort?.id===id&&"desc"===sort?.order&&(0,jsx_runtime.jsx)("span",{children:"▼"}),sort?.id===id&&"asc"===sort?.order&&(0,jsx_runtime.jsx)("span",{children:"▲"})]}),(0,jsx_runtime.jsx)("div",{className:"flex-1"}),menus.length>0&&(0,jsx_runtime.jsx)(esm.Mi,{groupHover:!0,placement:"bottom-end",children:(0,jsx_runtime.jsx)(esm.W1,{className:"text-sm",children:menus})}),resizable&&(0,jsx_runtime.jsx)("div",{role:"none",className:"cursor-col-resize border-e bg-transparent border-tint-200 w-[5px] self-stretch",onMouseDown:e=>e.currentTarget.parentElement&&startResize(e.currentTarget.parentElement)})]})};try{HeaderCell.displayName="HeaderCell",HeaderCell.__docgenInfo={description:"",displayName:"HeaderCell",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string | number | symbol"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"string"}},actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>[]"}},align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"end"'},{value:'"start"'}]}},locked:{defaultValue:null,description:"",name:"locked",required:!1,type:{name:"enum",value:[{value:'"end"'},{value:'"start"'}]}},hidden:{defaultValue:null,description:"",name:"hidden",required:!1,type:{name:"boolean"}},truncate:{defaultValue:null,description:"",name:"truncate",required:!1,type:{name:"boolean"}},hideable:{defaultValue:null,description:"",name:"hideable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},sortable:{defaultValue:null,description:"",name:"sortable",required:!1,type:{name:"boolean"}},filterable:{defaultValue:null,description:"",name:"filterable",required:!1,type:{name:"boolean"}},filterList:{defaultValue:null,description:"",name:"filterList",required:!1,type:{name:"AnyObject[]"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string | number"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"string | number"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string | number"}},dataType:{defaultValue:null,description:"",name:"dataType",required:!1,type:{name:"enum",value:[{value:'"string"'},{value:'"number"'},{value:'"boolean"'},{value:'"time"'},{value:'"date"'},{value:'"datetime"'},{value:'"unknown"'}]}},format:{defaultValue:null,description:"",name:"format",required:!1,type:{name:"string"}},valueMap:{defaultValue:null,description:"",name:"valueMap",required:!1,type:{name:"any"}},renderer:{defaultValue:null,description:"",name:"renderer",required:!1,type:{name:"((value: AnyObject, data: KeyValue, index: number) => Elements<AnyObject>)"}},className:{defaultValue:null,description:"css classname(s)",name:"className",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"svg path / image url",name:"icon",required:!1,type:{name:"string"}},rtlFlip:{defaultValue:null,description:"flip icon in rtl",name:"rtlFlip",required:!1,type:{name:"boolean"}},iconBg:{defaultValue:null,description:"icon background color",name:"iconBg",required:!1,type:{name:"string"}},iconColor:{defaultValue:null,description:"icon color",name:"iconColor",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},sort:{defaultValue:null,description:"sorting",name:"sort",required:!1,type:{name:'{ id: string; order: "desc" | "asc"; }'}},onSort:{defaultValue:null,description:"",name:"onSort",required:!1,type:{name:'((sort: { id: string; order: "desc" | "asc"; }) => void)'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/table/HeaderCell.tsx#HeaderCell"]={docgenInfo:HeaderCell.__docgenInfo,name:"HeaderCell",path:"packages/data/src/table/HeaderCell.tsx#HeaderCell"})}catch(__react_docgen_typescript_loader_error){}var react_virtual_dist_esm=__webpack_require__("./node_modules/@tanstack/react-virtual/dist/esm/index.js"),virtual_core_dist_esm=__webpack_require__("./node_modules/@tanstack/virtual-core/dist/esm/index.js");const Table=({ref,data,columns,keyProperty="id",groupProperty,checkableRows,initialScroll,hideableColumns,sort,loading,checked,emptyDisplay,groupRenderer,canExpand,children,onSort,onScroll,onRowClick,onCheckedChanged})=>{const{t}=(0,es.Bd)("data"),fireCheckChanged=(0,esm.d7)((checkedIds=>onCheckedChanged?.(checkedIds)),[]),{state,onHide}=(columns=>{const[state,dispatch]=(0,react.useReducer)(((state,action)=>{if("columns"===action.type&&(state.columns=action.columns),"hide"===action.type){const col=state.columns.find((col=>col.id===action.id));col&&state.columns.splice(state.columns.indexOf(col),1,{...col,hidden:!0!==col.hidden})}const{start=[],end=[],cols=[]}=(0,dist_esm.$z)(state.columns.filter((col=>!0!==col.hidden)),"locked","cols");return{...state,start,end,cols}}),{columns:[],start:[],end:[],cols:[]});return(0,react.useEffect)((()=>{dispatch({type:"columns",columns})}),[columns]),{state,onHide:id=>dispatch({type:"hide",id})}})(columns),{scrollerRef,items,top,checkState,virtualizer,hasActiveSticky,toggleExpand,toggleChecked,toggleAllChecked,toggleGroupExpand,getData,totalSize,isActiveSticky,measureElement}=((data,options)=>{const[state,dispatch]=(0,react.useReducer)(((state,action)=>{"updateState"===action.type&&(state.checked=action.checked),"expand"===action.type&&(state.expanded.includes(action.key)?state.expanded.splice(state.expanded.indexOf(action.key),1):state.expanded.push(action.key)),"check"===action.type&&(state.checked.includes(action.key)?state.checked.splice(state.checked.indexOf(action.key),1):state.checked.push(action.key),options.onCheckChanged?.(state.checked)),"checkall"===action.type&&(0!==state.allChecked?state.checked=[]:options.keyProperty&&(state.checked=data.map((item=>item[options.keyProperty]))),options.onCheckChanged?.(state.checked));const checkList=data.filter((hit=>state.checked.includes(hit[options.keyProperty])));if("groupExpand"===action.type){const group=state.groups.find((group=>group.key===action.key));group&&(group.open=!group.open,state.groups=state.groups.slice(),state.items=state.groups.map((group=>[group,group.open?state.grouped[group.key]:void 0])).flat(2).filter(Boolean))}return"grouped"===action.type&&(action.key?(state.grouped=(0,dist_esm.$z)(data,action.key),state.groups=Object.keys(state.grouped).sort((0,dist_esm.ck)("asc")).map((group=>({__GROUP__:!0,open:!0,key:group,items:state.grouped[group],itemCount:state.grouped[group].length}))),state.items=state.groups.map((group=>[group,...state.grouped[group.key]])).flat()):state.items=data),{...state,allChecked:checkList.length===data.length?1:state.checked.length?2:0}}),{items:data,grouped:{},groups:[],checked:[],expanded:[],allChecked:0}),activeStickyIndexRef=(0,react.useRef)(0),stickyIndexes=(0,react.useMemo)((()=>state.items.map(((hit,idx)=>"__GROUP__"in hit?idx:void 0)).filter(Boolean)),[state.items]),[hasActiveSticky,setHasActiveSticky]=(0,react.useState)(!1),scrollerRef=(0,react.useRef)(null),virtualizer=(0,react_virtual_dist_esm.Te)({count:state.items.length,getScrollElement:()=>scrollerRef.current,estimateSize:()=>32,rangeExtractor:(0,react.useCallback)((range=>(activeStickyIndexRef.current=[...stickyIndexes].reverse().find((index=>range.startIndex>index))??0,setHasActiveSticky(range.startIndex!==activeStickyIndexRef.current),[...new Set([activeStickyIndexRef.current,...(0,virtual_core_dist_esm.vp)(range)])])),[stickyIndexes])}),virtualItems=virtualizer.getVirtualItems(),getData=(0,react.useCallback)((index=>state.items[index]),[state.items]);return(0,react.useEffect)((()=>{dispatch({type:"grouped",key:options.groupProperty})}),[options.groupProperty]),(0,react.useEffect)((()=>{dispatch({type:"updateState",checked:options.checked??[]})}),[options.checked]),{scrollerRef,items:virtualItems,checkState:state,getData,virtualizer,hasActiveSticky,isActiveSticky:index=>activeStickyIndexRef.current===index,top:virtualizer.range?.startIndex,totalSize:virtualizer.getTotalSize,measureElement:virtualizer.measureElement,toggleGroupExpand:key=>dispatch({type:"groupExpand",key}),toggleExpand:key=>dispatch({type:"expand",key}),toggleChecked:key=>dispatch({type:"check",key}),toggleAllChecked:()=>dispatch({type:"checkall"})}})(data,{checked,keyProperty,groupProperty,onCheckChanged:fireCheckChanged}),refBody=(0,react.useRef)(null),wrapperStart=(0,react.useMemo)((()=>"bg-inherit sticky start-0 flex flex-nowrap z-1"),[]),wrapperEnd=(0,react.useMemo)((()=>"bg-inherit sticky end-0 flex flex-nowrap z-1 border-s -ms-px"),[]);return(0,react.useLayoutEffect)((()=>{setTimeout((()=>{initialScroll&&virtualizer.scrollToIndex(initialScroll,{align:"start"})}),100)}),[]),(0,react.useImperativeHandle)(ref,(()=>({scrollTo:row=>{virtualizer.scrollToIndex(row,{align:"start"})},hilight(row){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight","ring-1"),virtualizer.scrollToIndex(Math.floor(row),{align:"start"}),setTimeout((()=>{scrollerRef.current?.querySelector(`[data-index="${row}"]`)?.classList.add("hilight","ring-1")}),100)},unhilight(){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight","ring-1")}})),[]),(0,react.useEffect)((()=>{const handle=(0,dist_esm.sg)((top=>{onScroll?.(top??0)}));return handle(top),()=>{handle.cancel()}}),[top]),(0,jsx_runtime.jsx)(TableProvider,{children:(0,jsx_runtime.jsxs)("div",{className:"grid area-content overflow-auto relative",style:{gridTemplate:'"head" auto "loader" auto "content" 1fr "foot" auto/1fr'},"data-ref":"tableScroller",ref:scrollerRef,children:[(0,jsx_runtime.jsxs)("div",{"data-ref":"tableHeader",className:"bg-base font-medium sticky top-0 area-head border-b select-none flex flex-nowrap z-2",children:[(0,jsx_runtime.jsxs)("div",{className:wrapperStart,children:[canExpand&&(0,jsx_runtime.jsx)("div",{className:"w-6"}),checkableRows&&(0,jsx_runtime.jsx)(CheckboxCell,{state:checkState.allChecked,onClick:toggleAllChecked}),state.start?.map(((col,idx)=>(0,jsx_runtime.jsx)(HeaderCell,{...col,sort,onSort},idx)))]}),state.cols?.map(((col,idx)=>(0,jsx_runtime.jsx)(HeaderCell,{...col,sort,onSort},idx))),(0,jsx_runtime.jsxs)("div",{className:wrapperEnd,children:[state.end?.map(((col,idx)=>(0,jsx_runtime.jsx)(HeaderCell,{...col,sort,onSort},idx))),hideableColumns&&(0,jsx_runtime.jsx)(AddColumn,{onClick:onHide,columns:state.columns.filter((col=>!1!==col.hideable))})]})]}),loading&&(0,jsx_runtime.jsx)(esm.Rh,{}),data.length>0&&(0,jsx_runtime.jsxs)("div",{className:"area-content flex flex-col flex-nowrap",style:{height:totalSize()},ref:refBody,children:[(0,jsx_runtime.jsx)("div",{style:{height:items[hasActiveSticky?1:0]?.start}}),items.map((({index,key})=>{const data=getData(index);return"__GROUP__"in data?(0,jsx_runtime.jsxs)("div",{ref:measureElement,"data-index":index,className:classnames_default()("px-2 py-1 text-md bg-base border-y border-tint-100 cursor-pointer flex items-center gap-1",isActiveSticky(index)&&"sticky top-8 z-30"),role:"none",onClick:()=>toggleGroupExpand(data.key),children:[(0,jsx_runtime.jsx)(esm.In,{rtlFlip:!0,icon:data.open?esm.OO.chevronDown:esm.OO.chevronRight}),groupRenderer?.(data)??(0,jsx_runtime.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,jsx_runtime.jsx)("span",{children:data.key}),(0,jsx_runtime.jsxs)("span",{className:"text-sm",children:["(",data.itemCount,")"]})]})]},key):(0,jsx_runtime.jsx)(BodyRow,{rowKey:key,index,checkableRows,checked:keyProperty&&checkState.checked.includes(data[keyProperty])?1:0,expanded:!!keyProperty&&checkState.expanded.includes(data[keyProperty]),data,hideableColumns,keyProperty,measureElement,onRowClick,state,canExpand,toggleExpand,expandRow:children,toggleChecked,wrapperEnd,wrapperStart},key)})),(0,jsx_runtime.jsxs)("div",{className:"flex-1 flex flex-nowrap",children:[(0,jsx_runtime.jsxs)("div",{className:wrapperStart,children:[canExpand&&(0,jsx_runtime.jsx)("div",{className:"w-6"}),checkableRows&&(0,jsx_runtime.jsx)("div",{className:"w-6"}),state.start?.map((col=>(0,jsx_runtime.jsx)(EmptyCell,{...col},String(col.id))))]}),state.cols?.map((col=>(0,jsx_runtime.jsx)(EmptyCell,{...col},String(col.id)))),(0,jsx_runtime.jsxs)("div",{className:wrapperEnd,children:[state.end?.map((col=>(0,jsx_runtime.jsx)(EmptyCell,{...col},String(col.id)))),hideableColumns&&(0,jsx_runtime.jsx)("div",{className:"w-6"})]})]})]}),!loading&&0===data.length&&(emptyDisplay??(0,jsx_runtime.jsx)(esm.HY,{size:"sm",className:"bg-dimmed",message:t("datagrid.empty")}))]})})};try{Table.displayName="Table",Table.__docgenInfo={description:"",displayName:"Table",props:{columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"TableColumn<T>[]"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"T[]"}},keyProperty:{defaultValue:{value:"id"},description:"",name:"keyProperty",required:!1,type:{name:"string | number | symbol"}},groupProperty:{defaultValue:null,description:"",name:"groupProperty",required:!1,type:{name:"string | number | symbol"}},groupRenderer:{defaultValue:null,description:"",name:"groupRenderer",required:!1,type:{name:"((key: AnyObject) => ReactElement<any, string | JSXElementConstructor<any>>)"}},emptyDisplay:{defaultValue:null,description:"",name:"emptyDisplay",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},checked:{defaultValue:null,description:"checkable rows",name:"checked",required:!1,type:{name:"AnyObject[]"}},checkableRows:{defaultValue:null,description:"",name:"checkableRows",required:!1,type:{name:"boolean"}},onCheckedChanged:{defaultValue:null,description:"",name:"onCheckedChanged",required:!1,type:{name:"((rows: AnyObject[]) => void)"}},sort:{defaultValue:null,description:"sorting",name:"sort",required:!1,type:{name:'{ id: string; order: "desc" | "asc"; }'}},onSort:{defaultValue:null,description:"",name:"onSort",required:!1,type:{name:'((sort: { id: string; order: "desc" | "asc"; }) => void)'}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},hideableColumns:{defaultValue:null,description:"",name:"hideableColumns",required:!1,type:{name:"boolean"}},onRowClick:{defaultValue:null,description:"",name:"onRowClick",required:!1,type:{name:"((data: T) => void)"}},initialScroll:{defaultValue:null,description:"",name:"initialScroll",required:!1,type:{name:"number"}},onScroll:{defaultValue:null,description:"",name:"onScroll",required:!1,type:{name:"((firstItem: number) => void)"}},canExpand:{defaultValue:null,description:"",name:"canExpand",required:!1,type:{name:"((record: T) => boolean)"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<TableRef>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/table/Table.tsx#Table"]={docgenInfo:Table.__docgenInfo,name:"Table",path:"packages/data/src/table/Table.tsx#Table"})}catch(__react_docgen_typescript_loader_error){}var form_dist_esm=__webpack_require__("./packages/form/dist/esm/index.js");const TreeNode=({node,noLines,expanders,checkable,selectable,defaultLeafIcon,defaultNodeIcon,onToggle,onClick,onSelect,onChecked,children,leafClassName,nodeClassName})=>{const{t}=(0,es.Bd)("data"),badgeProps=(0,react.useMemo)((()=>(0,esm.EH)(node.badge)),[node.badge]),filler=(0,react.useMemo)((()=>node.lines.slice(1).map(((line,idx)=>(0,jsx_runtime.jsx)("div",{className:classnames_default()("flex-initial self-stretch flex items-center w-6 relative",!noLines&&line>0&&"before:absolute before:top-0 before:start-[7px] before:bg-tint-200 before:min-h-[50%] before:w-[2px] before:scale-x-[.625]",!noLines&&2!==line&&"before:h-full"),children:(0,jsx_runtime.jsxs)("svg",{viewBox:"0 0 24 24",className:"fill-tint-200 rtl:-scale-x-100",children:[0===line&&(0,jsx_runtime.jsx)("path",{d:""}),!noLines&&1===line&&(0,jsx_runtime.jsx)("path",{d:"M7.45 26.1v-28.2h1.1v28.2h-1.1z"}),!noLines&&2===line&&(0,jsx_runtime.jsx)("path",{d:"M14.989 12.389l0.161-0.389-0.161-0.389-0.389-0.161h-6.050v-13.55h-1.1v14.1l0.161 0.389 0.389 0.161h6.6z"}),!noLines&&3===line&&(0,jsx_runtime.jsx)("path",{d:"M8.55 12.55h6.050l0.389-0.161 0.161-0.389-0.161-0.389-0.389-0.161h-6.050v-13.55h-1.1v28.2h1.1z"})]})},idx)))),[noLines,node.lines]),nodeIcon=(0,react.useMemo)((()=>node.icon?node.icon:node.leaf?defaultLeafIcon:defaultNodeIcon),[defaultLeafIcon,defaultNodeIcon,node.icon]),canCheck=(0,react.useMemo)((()=>!0===checkable||"leafOnly"===checkable&&node.leaf),[node.leaf,checkable]),canSelect=(0,react.useMemo)((()=>!node.disabled&&(!0===selectable||"leafOnly"===selectable&&node.leaf)),[node.leaf,node.disabled,selectable]);return(0,jsx_runtime.jsxs)("div",{role:"treeitem","aria-selected":node.selected,className:classnames_default()("flex flex-nowrap items-center",node.leaf?leafClassName:nodeClassName),"data-testid":node["data-testid"],"data-test-value":node["data-test-value"],children:[filler,node.loading&&(0,jsx_runtime.jsx)("div",{className:"flex-initial w-6",children:(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.spinner,className:"animate-spin text-muted"})}),!node.leaf&&!node.childFiltered&&!node.loading&&(0,jsx_runtime.jsx)("div",{className:"flex-initial w-6",children:(0,jsx_runtime.jsx)(esm.In,{rtlFlip:!0,onClick:()=>!node.leaf&&onToggle(node.id),icon:node.open?expanders[1]:expanders[0],className:"text-tint-600 hover:text-primary-600"})}),canCheck&&(0,jsx_runtime.jsx)("div",{className:"flex-initial w-6",children:(0,jsx_runtime.jsx)(esm.In,{onClick:()=>!node.disabled&&onChecked(node.id),icon:2===node.checked?esm.OO.checkboxInt:1===node.checked?esm.OO.checkboxOn:esm.OO.checkboxOff,className:classnames_default()(node.disabled?"text-muted":"text-primary-500 hover:text-primary-600")})}),!node.empty&&(0,jsx_runtime.jsxs)("div",{role:"none",className:classnames_default()("group/tool data-[selected]:bg-primary-100 flex flex-nowrap flex-1 overflow-hidden select-none",node.childSelected&&"font-medium",(canSelect||onClick)&&"hover:bg-primary-50 cursor-pointer"),"data-selected":node.selected,onClick:()=>{onClick?.(node.id,node.data),canSelect?onSelect(node.id):canCheck?onChecked(node.id):onToggle(node.id)},children:[nodeIcon&&(0,jsx_runtime.jsxs)("div",{className:"flex-content w-6 self-center leading-none",children:[(0,react.isValidElement)(nodeIcon)&&nodeIcon,(0,dist_esm.Kg)(nodeIcon)&&(0,jsx_runtime.jsx)(esm.In,{icon:nodeIcon,bg:node.iconBg,color:node.iconColor,rtlFlip:node.rtlFlip})]}),node.childSelected&&!node.open&&(0,jsx_runtime.jsx)("span",{className:" flex-content text-primary-500",children:"•"}),(0,jsx_runtime.jsx)("div",{role:"none",className:"flex-1 truncate",children}),!(0,dist_esm.Im)(node.badge)&&(0,jsx_runtime.jsx)(esm.Ex,{...badgeProps,className:classnames_default()("me-1 self-center flex-content bg-opacity-50",badgeProps.className)})]}),node.empty&&(0,jsx_runtime.jsx)("div",{className:"text-muted text-sm select-none",children:t("tree.noItems")})]})};try{TreeNode.displayName="TreeNode",TreeNode.__docgenInfo={description:"",displayName:"TreeNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"InternalNode"}},expanders:{defaultValue:null,description:"",name:"expanders",required:!0,type:{name:"[string, string]"}},defaultNodeIcon:{defaultValue:null,description:"",name:"defaultNodeIcon",required:!1,type:{name:"string"}},defaultLeafIcon:{defaultValue:null,description:"",name:"defaultLeafIcon",required:!1,type:{name:"string"}},noLines:{defaultValue:null,description:"",name:"noLines",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:'true | "leafOnly"'}},checkable:{defaultValue:null,description:"",name:"checkable",required:!1,type:{name:'true | "leafOnly"'}},leafClassName:{defaultValue:null,description:"",name:"leafClassName",required:!1,type:{name:"string"}},nodeClassName:{defaultValue:null,description:"",name:"nodeClassName",required:!1,type:{name:"string"}},onToggle:{defaultValue:null,description:"",name:"onToggle",required:!0,type:{name:"(id: string) => void"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(id: string) => void"}},onChecked:{defaultValue:null,description:"",name:"onChecked",required:!0,type:{name:"(id: string) => void"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((id: string, node: any) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/tree/TreeNode.tsx#TreeNode"]={docgenInfo:TreeNode.__docgenInfo,name:"TreeNode",path:"packages/data/src/tree/TreeNode.tsx#TreeNode"})}catch(__react_docgen_typescript_loader_error){}var memoize_one_esm=__webpack_require__("./node_modules/memoize-one/dist/memoize-one.esm.js");const defaultSorter=(a,b)=>!!a.leaf!=!!b.leaf?a.leaf?1:-1:(0,dist_esm.ck)()(a.label,b.label),getChildren=(list=[])=>list.map((item=>[item,...getChildren(item.children)])).flat(99).filter(Boolean),getIntermediate=(list=[])=>{const checks=list.map((item=>item.checked)),someOff=checks.includes(0),someInt=checks.includes(2),someOn=checks.includes(1);return someOff&&someOn||someInt?2:someOn?1:0},refactorTree=(nodes,{sorter=defaultSorter,defaultExpanded=[]},options={level:0,parent:void 0})=>{const list=[];return!1!==sorter&&(nodes=nodes.sort(sorter)),nodes.forEach((node=>{list.push({open:defaultExpanded.includes(node.id)&&!!node.children?.length,level:options.level,parent:options.parent,checked:0,loaded:!1,loading:!1,filtered:!1,lines:[],...node,leaf:!!node.leaf,children:node.children&&refactorTree(node.children,{sorter,defaultExpanded},{level:options.level+1,parent:node.id})})})),list},makeTreeMap=(nodes,map=new Map)=>(nodes.forEach((node=>{if(map.has(node.id))throw new Error(`Node with id [${node.id}] already exists, please make sure all ids are unique`);map.set(node.id,node),node.children&&makeTreeMap(node.children,map)})),map),flattenTree=(nodes,lines=[])=>{const list=[],filtered=nodes.filter((node=>!node.filtered));return filtered.forEach(((node,idx)=>{node.lines=[...lines,idx===filtered.length-1?2:3],list.push(node),(node.open||node.childFiltered)&&node.children&&list.push(...flattenTree(node.children.filter((child=>!child.filtered)),[...lines,idx===filtered.length-1?0:1])),node.open&&0===node.children?.length&&list.push({empty:!0,leaf:!0,lines:[...lines,idx===filtered.length-1?0:1,2]})})),list},updateSelection=(nodes,id,selected)=>{const node=nodes.get(id);if(node){node.selected=selected;let parent=node.parent;for(;parent;){const parentNode=nodes.get(parent);parentNode&&(parentNode.childSelected=selected),selected&&parentNode&&(parentNode.open=!0),parent=parentNode?.parent}}},updateChecked=(list,id)=>{const node=list.get(id);if(node){node.checked=1===node.checked?0:1,node.children&&getChildren(node.children).forEach((child=>child.checked=node.checked));let parent=node.parent;for(;parent;){const parentNode=list.get(parent);parentNode&&(parentNode.checked=getIntermediate(parentNode.children)),parent=parentNode?.parent}}},createItemList=(0,memoize_one_esm.A)((items=>items)),useTree=({items=dist_esm.Ml,checked=dist_esm.Ml,selected,sorter,matcher,onLoad,onQuery,onSelect,onChecked,defaultExpanded,onExpandToggle})=>{const componentEvents=(0,react.useRef)({onSelect,onChecked}),intialExpand=(0,react.useRef)(defaultExpanded??dist_esm.Ml),itemList=createItemList(items),fireExpandToggle=(0,react.useCallback)((itemMap=>{const expandedList=itemMap.filter((node=>node.open)).map((node=>node.id));setTimeout((()=>onExpandToggle?.(expandedList)),100)}),[onExpandToggle]),loadChildren=(0,react.useCallback)((node=>{!node.open||node.leaf||node.children?.length?(dispatch({type:"loaded"}),intialExpand.current?.length>0&&dispatch({type:"expand",id:intialExpand.current.shift()})):(node.loading=!0,Promise.resolve(onLoad?.(node.id)).then(((resp=dist_esm.Ml)=>{node.children=refactorTree(resp,{sorter,defaultExpanded},{level:node.level+1,parent:node.id})})).finally((()=>{node.loading=!1,dispatch({type:"loaded"}),intialExpand.current?.length>0&&dispatch({type:"expand",id:intialExpand.current.shift()})})))}),[onLoad]),[state,dispatch]=(0,react.useReducer)(((state,action)=>{if("load"===action.type)return state.items=refactorTree(action.items,{sorter,defaultExpanded}),state.itemMap=makeTreeMap(state.items),state.tree=flattenTree(state.items),{...state};if("toggleExpand"===action.type){const node=state.itemMap.get(action.id);if(node&&!node.leaf)return node&&(node.open=!node.open),loadChildren(node),{...state}}if("loaded"===action.type)return state.itemMap=makeTreeMap(state.items),fireExpandToggle(Array.from(state.itemMap.values())),state.tree=flattenTree(state.items),state.selected&&updateSelection(state.itemMap,state.selected,!0),{...state};if("expand"===action.type){const node=state.itemMap.get(action.id);if(node&&!node.leaf){node.open=!0;let parentId=node.parent;for(;parentId;){const node=state.itemMap.get(parentId);node&&(node.open=!0),parentId=node?.parent}return loadChildren(node),{...state}}}if("expandAll"===action.type)return state.itemMap.forEach((node=>{!node.leaf&&node.children?.length&&(node.open=!0)})),fireExpandToggle(Array.from(state.itemMap.values())),state.tree=flattenTree(state.items),{...state};if("collapseAll"===action.type)return state.itemMap.forEach((node=>{!node.leaf&&(node.open=!1)})),fireExpandToggle([]),state.tree=flattenTree(state.items),{...state};if("filter"===action.type){if(!onQuery)return((nodes,query,matcher)=>{nodes.forEach((node=>{if(query){if(node.parentFiltered)return;if(node.filtered=!(matcher?matcher(node.data,query):(0,dist_esm.Kg)(node.queryable)?(0,dist_esm.FX)(node.queryable,query):(0,dist_esm.Kg)(node.label)&&(0,dist_esm.FX)(node.label,query)),!node.filtered){let parent=node.parent;for(;parent;){const parentNode=nodes.get(parent);parentNode&&(parentNode.filtered=!1),parentNode&&(parentNode.childFiltered=!0),parent=parentNode?.parent}node.children&&getChildren(node.children).forEach((child=>{child.parentFiltered=!0,child.filtered=!1}))}}else node.filtered=!1,node.childFiltered=void 0,node.parentFiltered=void 0}))})(state.itemMap,action.query,matcher),state.tree=flattenTree(state.items),{...state};onQuery(action.query??"")}if("select"===action.type)return state.selected&&updateSelection(state.itemMap,state.selected),updateSelection(state.itemMap,action.id,!0),state.tree=flattenTree(state.items),componentEvents.current.onSelect?.(action.id,state.itemMap.get(action.id)?.data),{...state,selected:action.id};if("toggleCheck"===action.type){updateChecked(state.itemMap,action.id);const checkList=[[],[]];return Array.from(state.itemMap.values()).filter((node=>1===node.checked)).forEach((node=>checkList[node.leaf?0:1].push(node.id))),componentEvents.current.onChecked?.(checkList[0],checkList[1]),{...state}}return"checked"===action.type?(action.id.forEach((id=>updateChecked(state.itemMap,id))),{...state,checked:action.id}):state}),{itemMap:new Map,items:[],tree:[],checked:[]});(0,react.useEffect)((()=>{componentEvents.current={onSelect,onChecked}}),[onSelect,onChecked]),(0,react.useEffect)((()=>{dispatch({type:"load",items:itemList}),itemList.length&&intialExpand.current?.length>0&&dispatch({type:"expand",id:intialExpand.current.shift()})}),[itemList]),(0,react.useEffect)((()=>{selected&&dispatch({type:"select",id:selected})}),[selected]),(0,react.useEffect)((()=>{checked&&dispatch({type:"checked",id:checked})}),[checked]);const toggleExpand=(0,react.useCallback)((id=>{dispatch({type:"toggleExpand",id})}),[]),toggleCheck=(0,react.useCallback)((id=>{dispatch({type:"toggleCheck",id})}),[]),select=(0,react.useCallback)((id=>{dispatch({type:"select",id})}),[]),expand=(0,react.useCallback)((id=>{dispatch({type:"expand",id})}),[]),expandAll=(0,react.useCallback)((()=>{dispatch({type:"expandAll"})}),[]),collapseAll=(0,react.useCallback)((()=>{dispatch({type:"collapseAll"})}),[]),onFilter=(0,esm.d7)((query=>{dispatch({type:"filter",query})}),[]);return{tree:state.tree,toggleExpand,expandAll,collapseAll,toggleCheck,select,expand,onFilter}},TreePanel=({ref,items,selected,checked,checkable,noLines,renderer,searchable,selectable,matcher,filterPlaceholder,defaultLeafIcon,defaultNodeIcon,expander="box",onChecked,onLoad,onQuery,onSelect,onClick,sorter,makeLabel,makeIcon,defaultExpanded,onExpandToggle,leafClassName,nodeClassName,...aria})=>{const{tree,toggleExpand,toggleCheck,expandAll,collapseAll,select,expand,onFilter}=useTree({items,checked,selected,matcher,sorter,onLoad,onQuery,onSelect,onChecked,defaultExpanded,onExpandToggle}),scrollerRef=(0,react.useRef)(null),virtualizer=(0,react_virtual_dist_esm.Te)({count:tree.length,getScrollElement:()=>scrollerRef.current,estimateSize:()=>24}),virtualItems=virtualizer.getVirtualItems(),expanders=(0,react.useMemo)((()=>"caret"===expander?[esm.OO.caretRight,esm.OO.caretDown]:"chevron"===expander?[esm.OO.chevronRight,esm.OO.chevronDown]:"folder"===expander?[esm.OO.folderClosed,esm.OO.folderOpen]:[esm.OO.expand,esm.OO.collapse]),[expander]);return(0,react.useImperativeHandle)(ref,(()=>({open:id=>expand(id),select:id=>select(id)})),[]),(0,jsx_runtime.jsxs)(esm.wn,{children:[(0,jsx_runtime.jsxs)(esm.Y9,{flex:!0,className:"items-center p-px justify-end overflow-hidden border-b",children:[searchable&&(0,jsx_runtime.jsx)(form_dist_esm.vj,{onSearch:onFilter,allowClear:!0,placeholder:filterPlaceholder,noBorder:!0,decorateStart:(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.filter,className:"p-1"})}),(0,jsx_runtime.jsxs)(esm.e2,{variant:"link",className:"m-0",children:[(0,jsx_runtime.jsx)(esm.$n,{size:"sm","aria-label":"expand all",icon:"M12.984 9v6h3l-3.984 3.984-3.984-3.984h3v-6h-3l3.984-3.984 3.984 3.984h-3zM3.984 2.016h16.031v1.969h-16.031v-1.969zM3.984 20.016h16.031v1.969h-16.031v-1.969z",onClick:expandAll}),(0,jsx_runtime.jsx)(esm.$n,{size:"sm","aria-label":"collapse all",icon:"M3.984 11.016h16.031v1.969h-16.031v-1.969zM15.984 5.016l-3.984 3.984-3.984-3.984h3v-4.031h1.969v4.031h3zM8.016 18.984l3.984-3.984 3.984 3.984h-3v4.031h-1.969v-4.031h-3z",onClick:collapseAll})]})]}),(0,jsx_runtime.jsx)("div",{ref:scrollerRef,role:"tree",className:"area-content overflow-auto p-1",...aria,children:(0,jsx_runtime.jsxs)("div",{style:{height:virtualizer.getTotalSize()},children:[(0,jsx_runtime.jsx)("div",{style:{height:virtualItems[0]?.start}}),virtualItems.map((({index,key})=>(0,jsx_runtime.jsx)("div",{"data-index":index,ref:virtualizer.measureElement,children:(0,jsx_runtime.jsx)(TreeNode,{node:tree[index],noLines,expanders,checkable,selectable,defaultLeafIcon,defaultNodeIcon:makeIcon?.(tree[index].data)??defaultNodeIcon,onToggle:toggleExpand,onChecked:toggleCheck,onSelect:select,onClick,leafClassName,nodeClassName,children:(tree[index].data&&renderer?.(tree[index].data))??makeLabel?.(tree[index].data)??tree[index].label})},key)))]})})]})};try{TreePanel.displayName="TreePanel",TreePanel.__docgenInfo={description:"",displayName:"TreePanel",props:{items:{defaultValue:null,description:"",name:"items",required:!1,type:{name:"TreeNodeType<T>[]"}},searchable:{defaultValue:null,description:"make tree searchable",name:"searchable",required:!1,type:{name:"boolean"}},filterPlaceholder:{defaultValue:null,description:"filter input placeholder",name:"filterPlaceholder",required:!1,type:{name:"string"}},selectable:{defaultValue:null,description:"enable select",name:"selectable",required:!1,type:{name:'true | "leafOnly"'}},checkable:{defaultValue:null,description:"enable checkable",name:"checkable",required:!1,type:{name:'true | "leafOnly"'}},selected:{defaultValue:null,description:"selected item id",name:"selected",required:!1,type:{name:"string"}},checked:{defaultValue:null,description:"checked items",name:"checked",required:!1,type:{name:"string[]"}},defaultNodeIcon:{defaultValue:null,description:"default node icon",name:"defaultNodeIcon",required:!1,type:{name:"string"}},defaultLeafIcon:{defaultValue:null,description:"default leaf icon",name:"defaultLeafIcon",required:!1,type:{name:"string"}},noLines:{defaultValue:null,description:"hide level indicator lines",name:"noLines",required:!1,type:{name:"boolean"}},expander:{defaultValue:{value:"box"},description:"expander icons",name:"expander",required:!1,type:{name:"enum",value:[{value:'"box"'},{value:'"caret"'},{value:'"chevron"'},{value:'"folder"'}]}},onLoad:{defaultValue:null,description:"callback for lazy loading tree items",name:"onLoad",required:!1,type:{name:"((id: string) => TreeNodeType<T>[] | Promise<TreeNodeType<T>[]>) | undefined"}},onQuery:{defaultValue:null,description:"callback to load tree using search query",name:"onQuery",required:!1,type:{name:"((query: string) => void)"}},onClick:{defaultValue:null,description:"callback on click of tree node",name:"onClick",required:!1,type:{name:"((id: string, data: T) => void)"}},onSelect:{defaultValue:null,description:"callback on selection of tree node",name:"onSelect",required:!1,type:{name:"((id: string, data: T) => void)"}},onChecked:{defaultValue:null,description:"callback on change of checked list",name:"onChecked",required:!1,type:{name:"((leafs: string[], nodes: string[]) => void)"}},renderer:{defaultValue:null,description:"item label renderer",name:"renderer",required:!1,type:{name:"((data: T) => Element)"}},matcher:{defaultValue:null,description:"item filter matcher",name:"matcher",required:!1,type:{name:"((data: T, query: string) => boolean)"}},sorter:{defaultValue:null,description:"",name:"sorter",required:!1,type:{name:"false | ((a: T, b: T) => number)"}},makeLabel:{defaultValue:null,description:"",name:"makeLabel",required:!1,type:{name:"((node: T) => string)"}},makeIcon:{defaultValue:null,description:"",name:"makeIcon",required:!1,type:{name:"((node: T) => string)"}},defaultExpanded:{defaultValue:null,description:"",name:"defaultExpanded",required:!1,type:{name:"string[]"}},onExpandToggle:{defaultValue:null,description:"",name:"onExpandToggle",required:!1,type:{name:"((id: string[]) => void)"}},leafClassName:{defaultValue:null,description:"",name:"leafClassName",required:!1,type:{name:"string"}},nodeClassName:{defaultValue:null,description:"",name:"nodeClassName",required:!1,type:{name:"string"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<TreeRef>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/tree/TreePanel.tsx#TreePanel"]={docgenInfo:TreePanel.__docgenInfo,name:"TreePanel",path:"packages/data/src/tree/TreePanel.tsx#TreePanel"})}catch(__react_docgen_typescript_loader_error){}const Scroller=({vertical=!0,scrollActive,onStart,onEnd,onPrevious,onNext})=>(0,jsx_runtime.jsxs)(esm.e2,{vertical,variant:"link",className:"outline",children:[(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll to top",icon:vertical?esm.OO.chevronsUp:esm.OO.chevronsLeft,disabled:!(2&scrollActive),onClick:onStart}),(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll up",icon:vertical?esm.OO.chevronUp:esm.OO.chevronLeft,disabled:!(2&scrollActive),onClick:onPrevious}),(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll down",icon:vertical?esm.OO.chevronDown:esm.OO.chevronRight,disabled:scrollActive%2==0,onClick:onNext}),(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll to bottom",icon:vertical?esm.OO.chevronsDown:esm.OO.chevronsRight,disabled:scrollActive%2==0,onClick:onEnd})]});try{Scroller.displayName="Scroller",Scroller.__docgenInfo={description:"",displayName:"Scroller",props:{scrollActive:{defaultValue:null,description:"",name:"scrollActive",required:!0,type:{name:"number"}},vertical:{defaultValue:{value:"true"},description:"",name:"vertical",required:!1,type:{name:"boolean"}},onStart:{defaultValue:null,description:"",name:"onStart",required:!0,type:{name:"() => void"}},onEnd:{defaultValue:null,description:"",name:"onEnd",required:!0,type:{name:"() => void"}},onPrevious:{defaultValue:null,description:"",name:"onPrevious",required:!0,type:{name:"() => void"}},onNext:{defaultValue:null,description:"",name:"onNext",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/virtual/Scroller.tsx#Scroller"]={docgenInfo:Scroller.__docgenInfo,name:"Scroller",path:"packages/data/src/virtual/Scroller.tsx#Scroller"})}catch(__react_docgen_typescript_loader_error){}const Gallery_createItemList=(0,memoize_one_esm.A)((items=>items)),_VirtualGallery=({items,children,columns,fullWidth,maxWidth,minWidth,total=0,padding="md",defaultHeight:height=48,defaultWidth:width=48,hideScroller,initialScroll,loading,onLoadMore,onScroll,galleryRef,...aria})=>{const count=(0,react.useDeferredValue)(items.length),extraSize=(0,react.useMemo)((()=>onLoadMore?8:0),[onLoadMore]),itemList=Gallery_createItemList(items.map(((item,index)=>({index,item,isLast:index+1===items.length})))),scrollerRef=(0,react.useRef)(null),[columnCount,setColumnCount]=(0,react.useState)(1),columnMap=(0,react.useMemo)((()=>new Array(columnCount).fill(0).map(((_,idx)=>idx))),[columnCount]);(0,esm.al)((()=>{if(scrollerRef.current){const el=scrollerRef.current,handler=()=>{setColumnCount(columns??Math.max(1,Math.floor(((el?.offsetWidth??800)-32)/width)))},ob=new ResizeObserver(handler);return handler(),ob.observe(el),()=>{ob.unobserve(el),ob.disconnect()}}}),[scrollerRef.current,columns,width],"virtualGallery recalculate view count");const virtualizer=(0,react_virtual_dist_esm.Te)({count:Math.ceil(count/columnCount),getScrollElement:()=>scrollerRef.current,estimateSize:()=>height}),virtualItems=virtualizer.getVirtualItems(),currentIndex=(0,react.useRef)(0);(0,react.useEffect)((()=>{currentIndex.current=virtualItems[1]?.index??0,scrollerRef.current&&virtualItems[0]&&scrollerRef.current.scrollTop<virtualItems[0].size&&(currentIndex.current=0)}),[virtualItems]);const calculateActiveScroll=(0,react.useCallback)((()=>{const{scrollTop=0,scrollHeight=0,offsetHeight=0}=scrollerRef.current??{};return scrollHeight===offsetHeight?0:0===scrollTop?1:scrollTop>=scrollHeight-offsetHeight-2*extraSize?2:3}),[]),[scrollActive,setScrollActive]=(0,react.useState)(0),fireScrollEvent=(0,esm.d7)((idx=>onScroll?.(currentIndex.current*idx)),[onScroll]),handleScroll=(0,react.useCallback)((()=>{setScrollActive(calculateActiveScroll()),fireScrollEvent(columnCount)}),[columnCount,onLoadMore]);return(0,react.useEffect)((()=>{setScrollActive(calculateActiveScroll())}),[count,calculateActiveScroll]),(0,react.useEffect)((()=>{if(onLoadMore){const firstItem=virtualItems[0]?.index,lastItem=virtualItems?.slice(-1).pop()?.index,lastIndex=(lastItem??0)*columnCount+columnCount,canLoadPrevPage=void 0!==firstItem&&null===items[firstItem*columnCount],canLoadNextPage=void 0!==lastItem&&lastIndex>=count-1&&count<total,db=(0,dist_esm.sg)(onLoadMore);return canLoadPrevPage?db(firstItem):!loading&&canLoadNextPage&&db(lastItem+1),()=>db.cancel()}}),[onLoadMore,virtualItems]),(0,react.useLayoutEffect)((()=>{setTimeout((()=>{initialScroll&&virtualizer.scrollToIndex(Math.floor(initialScroll/columnCount),{align:"start"})}),100)}),[columnCount]),(0,react.useImperativeHandle)(galleryRef,(()=>({scrollToItem(index){virtualizer.scrollToIndex(Math.floor(index/columnCount),{align:"start"})},hilight(index){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight","ring-1"),virtualizer.scrollToIndex(Math.floor(index/columnCount),{align:"start"}),setTimeout((()=>{scrollerRef.current?.querySelector(`[data-index="${index}"]`)?.classList.add("hilight","ring-1")}),100)},unhilight(){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight","ring-1")}})),[virtualizer,columnCount]),(0,jsx_runtime.jsx)("div",{ref:scrollerRef,onScroll:handleScroll,className:classnames_default()("area-content bg-base overflow-auto contain-strict"),...aria,children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()("inline-flex flex-nowrap gap-2 justify-center min-h-full min-w-full"),children:[(0,jsx_runtime.jsx)("div",{className:classnames_default()("box-content",fullWidth&&"flex-1","sm"===padding&&"p-1","md"===padding&&"p-2","lg"===padding&&"p-4"),style:{minWidth,maxWidth},children:(0,jsx_runtime.jsxs)("div",{style:{height:virtualizer.getTotalSize()+extraSize},children:[(0,jsx_runtime.jsx)("div",{style:{height:virtualItems[0]?.start}}),virtualItems.map((({key,index,measureElement})=>(0,jsx_runtime.jsx)("div",{className:"flex justify-start","data-index":index,ref:measureElement,children:columnMap.map((col=>(0,jsx_runtime.jsx)("div",{"data-index":index*columnCount+col,className:classnames_default()("grid rounded-capped"),children:itemList[index*columnCount+col]&&children(itemList[index*columnCount+col])},`${key}:${col}`)))},key))),onLoadMore&&(0,jsx_runtime.jsx)("div",{className:"h-16",children:loading&&(0,jsx_runtime.jsx)(esm.EA,{})})]})}),!hideScroller&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("self-end sticky bottom-2"),children:(0,jsx_runtime.jsx)(Scroller,{vertical:!0,scrollActive,onStart:()=>virtualizer.scrollToIndex(0),onPrevious:()=>scrollerRef.current&&virtualizer.scrollBy(-scrollerRef.current.offsetHeight),onNext:()=>scrollerRef.current&&virtualizer.scrollBy(scrollerRef.current.offsetHeight),onEnd:()=>virtualizer.scrollToIndex(count-1)})})]})})};_VirtualGallery.displayName="VirtualGallery";const VirtualGallery=(0,react.memo)(_VirtualGallery);try{VirtualGallery.displayName="VirtualGallery",VirtualGallery.__docgenInfo={description:"",displayName:"VirtualGallery",props:{galleryRef:{defaultValue:null,description:"",name:"galleryRef",required:!1,type:{name:"Ref<VirtualGalleryRef>"}},columns:{defaultValue:null,description:"fixed columns",name:"columns",required:!1,type:{name:"number"}},defaultHeight:{defaultValue:null,description:"default item height",name:"defaultHeight",required:!1,type:{name:"number"}},defaultWidth:{defaultValue:null,description:"default item width",name:"defaultWidth",required:!1,type:{name:"number"}},fullWidth:{defaultValue:null,description:"full width list",name:"fullWidth",required:!1,type:{name:"boolean"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string | number"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"string | number"}},padding:{defaultValue:{value:"md"},description:"padding",name:"padding",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'}]}},items:{defaultValue:null,description:"data list",name:"items",required:!0,type:{name:"T[]"}},total:{defaultValue:{value:"0"},description:"",name:"total",required:!1,type:{name:"number"}},loading:{defaultValue:null,description:"loading state",name:"loading",required:!1,type:{name:"boolean"}},initialScroll:{defaultValue:null,description:"",name:"initialScroll",required:!1,type:{name:"number"}},hideScroller:{defaultValue:null,description:"hide scroll buttons",name:"hideScroller",required:!1,type:{name:"boolean"}},onLoadMore:{defaultValue:null,description:"load more callback",name:"onLoadMore",required:!1,type:{name:"(() => void)"}},onScroll:{defaultValue:null,description:"scroll handler",name:"onScroll",required:!1,type:{name:"((top: number) => void)"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/virtual/Gallery.tsx#VirtualGallery"]={docgenInfo:VirtualGallery.__docgenInfo,name:"VirtualGallery",path:"packages/data/src/virtual/Gallery.tsx#VirtualGallery"})}catch(__react_docgen_typescript_loader_error){}const List_createItemList=(0,memoize_one_esm.A)((items=>items)),_VirtualList=({items,total=0,children,fullWidth,maxWidth,minWidth,padding="md",orientation="vertical",defaultHeight:height=48,defaultWidth:width=48,hideScroller,initialScroll,loading,onLoadMore,onScroll,listRef,...aria})=>{const count=(0,react.useDeferredValue)(items.length),extraSize=(0,react.useMemo)((()=>onLoadMore?8:0),[onLoadMore]),itemList=List_createItemList(items.map(((item,index)=>({index,item,isLast:index+1===items.length})))),scrollerRef=(0,react.useRef)(null),virtualizer=(0,react_virtual_dist_esm.Te)({count,horizontal:"horizontal"===orientation,getScrollElement:()=>scrollerRef.current,estimateSize:()=>"horizontal"===orientation?width:height}),virtualItems=virtualizer.getVirtualItems(),currentIndex=(0,react.useRef)(0);(0,react.useEffect)((()=>{currentIndex.current=virtualItems[1]?.index??0,scrollerRef.current&&virtualItems[0]&&scrollerRef.current.scrollTop<virtualItems[0].size&&(currentIndex.current=0)}),[virtualItems]);const calculateActiveScroll=(0,react.useCallback)((()=>{const{scrollTop=0,scrollLeft=0,scrollWidth=0,scrollHeight=0,offsetWidth=0,offsetHeight=0}=scrollerRef.current??{};if("vertical"===orientation){if(scrollHeight===offsetHeight)return 0;if(0===scrollTop)return 1;if(scrollTop>=scrollHeight-offsetHeight-2*extraSize)return 2}if("horizontal"===orientation){if(scrollWidth===offsetWidth)return 0;if(0===Math.abs(scrollLeft))return 1;if(Math.abs(scrollLeft)>=scrollWidth-offsetWidth-2*extraSize)return 2}return 3}),[orientation]),[scrollActive,setScrollActive]=(0,react.useState)(0),fireScrollEvent=(0,esm.d7)((()=>onScroll?.(currentIndex.current)),[onScroll]),handleScroll=(0,react.useCallback)((()=>{setScrollActive(calculateActiveScroll()),fireScrollEvent()}),[orientation,onLoadMore]);return(0,react.useEffect)((()=>{setScrollActive(calculateActiveScroll())}),[itemList,calculateActiveScroll]),(0,react.useEffect)((()=>{if(onLoadMore){const firstItem=virtualItems[0]?.index,lastItem=virtualItems?.slice(-1).pop()?.index,canLoadPrevPage=void 0!==firstItem&&null===items[firstItem],canLoadNextPage=void 0!==lastItem&&lastItem===count-1&&count<total,db=(0,dist_esm.sg)(onLoadMore);return canLoadPrevPage?db(firstItem):!loading&&canLoadNextPage&&db(lastItem+1),()=>db.cancel()}}),[onLoadMore,virtualItems]),(0,react.useLayoutEffect)((()=>{setTimeout((()=>{initialScroll&&virtualizer.scrollToIndex(initialScroll,{align:"start"})}),100)}),[]),(0,react.useImperativeHandle)(listRef,(()=>({scrollToItem(index){virtualizer.scrollToIndex(index,{align:"start"})},hilight(index){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight","ring-1"),virtualizer.scrollToIndex(Math.floor(index),{align:"start"}),setTimeout((()=>{scrollerRef.current?.querySelector(`[data-index="${index}"]`)?.classList.add("hilight","ring-1")}),100)},unhilight(){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight","ring-1")}})),[virtualizer]),(0,jsx_runtime.jsx)("div",{ref:scrollerRef,onScroll:handleScroll,className:classnames_default()("area-content bg-base overflow-auto contain-strict"),...aria,children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()("inline-flex flex-nowrap gap-2 justify-center min-h-full min-w-full","horizontal"===orientation&&"flex-col"),children:[(0,jsx_runtime.jsxs)("div",{className:classnames_default()("box-content inline-flex flex-nowrap","vertical"===orientation&&"flex-col","horizontal"===orientation&&"flex-row",fullWidth&&"flex-1","sm"===padding&&"p-1","md"===padding&&"p-2","lg"===padding&&"p-4"),style:{minWidth,maxWidth},children:[(0,jsx_runtime.jsxs)("div",{style:"vertical"===orientation?{height:virtualizer.getTotalSize()+extraSize}:{width:virtualizer.getTotalSize()+extraSize},children:[(0,jsx_runtime.jsx)("div",{style:"vertical"===orientation?{height:virtualItems[0]?.start}:{width:virtualItems[0]?.start,display:"inline-block"}}),virtualItems.map((({key,index})=>(0,jsx_runtime.jsx)("div",{"data-index":index,ref:virtualizer.measureElement,className:classnames_default()("rounded-capped","horizontal"===orientation?"inline-grid":"grid"),children:children(itemList[index])},key)))]}),loading&&(0,jsx_runtime.jsx)("div",{className:"horizontal"===orientation?"min-w-16":"",children:(0,jsx_runtime.jsx)(esm.EA,{})})]}),!hideScroller&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("vertical"===orientation&&"self-end sticky bottom-2","horizontal"===orientation&&"self-end sticky end-2"),children:(0,jsx_runtime.jsx)(Scroller,{vertical:"vertical"===orientation,scrollActive,onStart:()=>virtualizer.scrollToIndex(0),onPrevious:()=>scrollerRef.current&&virtualizer.scrollBy(-("vertical"===orientation?scrollerRef.current.offsetHeight:scrollerRef.current.offsetWidth)),onNext:()=>scrollerRef.current&&virtualizer.scrollBy("vertical"===orientation?scrollerRef.current.offsetHeight:scrollerRef.current.offsetWidth),onEnd:()=>virtualizer.scrollToIndex(count-1)})})]})})};_VirtualList.displayName="VirtualList";const VirtualList=(0,react.memo)(_VirtualList);try{VirtualList.displayName="VirtualList",VirtualList.__docgenInfo={description:"",displayName:"VirtualList",props:{listRef:{defaultValue:null,description:"",name:"listRef",required:!1,type:{name:"Ref<VirtualListRef>"}},defaultHeight:{defaultValue:null,description:"default item height",name:"defaultHeight",required:!1,type:{name:"number"}},defaultWidth:{defaultValue:null,description:"default item width",name:"defaultWidth",required:!1,type:{name:"number"}},fullWidth:{defaultValue:null,description:"full width list",name:"fullWidth",required:!1,type:{name:"boolean"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string | number"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"string | number"}},padding:{defaultValue:{value:"md"},description:"padding",name:"padding",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'}]}},orientation:{defaultValue:{value:"vertical"},description:"list orientation",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},items:{defaultValue:null,description:"data list",name:"items",required:!0,type:{name:"T[]"}},total:{defaultValue:{value:"0"},description:"",name:"total",required:!1,type:{name:"number"}},initialScroll:{defaultValue:null,description:"",name:"initialScroll",required:!1,type:{name:"number"}},loading:{defaultValue:null,description:"loading state",name:"loading",required:!1,type:{name:"boolean"}},hideScroller:{defaultValue:null,description:"hide scroll buttons",name:"hideScroller",required:!1,type:{name:"boolean"}},onLoadMore:{defaultValue:null,description:"load more callback",name:"onLoadMore",required:!1,type:{name:"((page?: number) => void)"}},onScroll:{defaultValue:null,description:"scroll handler",name:"onScroll",required:!1,type:{name:"((top: number) => void)"}},"data-testid":{defaultValue:null,description:"data attribute for test id",name:"data-testid",required:!1,type:{name:"string"}},"data-test-value":{defaultValue:null,description:"data attribute for test value",name:"data-test-value",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/virtual/List.tsx#VirtualList"]={docgenInfo:VirtualList.__docgenInfo,name:"VirtualList",path:"packages/data/src/virtual/List.tsx#VirtualList"})}catch(__react_docgen_typescript_loader_error){}const useFilteredList=(items,matcher)=>{const[query,setQuery]=(0,react.useState)(),_items=(0,react.useDeferredValue)(items??[]),[filteredList,setFilteredList]=(0,react.useState)([]),[isSearching,startTransition]=(0,react.useTransition)(),filterItems=(0,react.useCallback)(((items,query)=>startTransition((()=>setFilteredList(((items,query="",matcher)=>{const newList=[];return items.forEach((item=>matcher?matcher?.(item,query)&&newList.push(item):query&&(0,dist_esm.Kg)(query)?(0,dist_esm.FX)(item.label??item.toString(),query)?newList.push(item):void 0:newList.push(item))),newList})(items,query,matcher))))),[]);return(0,react.useEffect)((()=>{query?filterItems(_items,query):setFilteredList(items)}),[query,_items]),{onSearch:setQuery,query,filteredList,isSearching}},makeRange=(start,end)=>{const length=end-start;return Array.from({length},((_,idx)=>idx+start))},usePagination=({totalRecords,currentPage=0,perPage=25,onChange})=>{const[page,setPage]=useState(0),[,startTransition]=useTransition(),totalPages=useMemo((()=>Math.max(1,Math.ceil(totalRecords/perPage))),[totalRecords,perPage]),ranges=useMemo((()=>{if(totalPages<=12)return[makeRange(0,totalPages)];const leftSiblingIndex=Math.max(page-3,0),rightSiblingIndex=Math.min(page+3,totalPages-1),shouldShowLeftDots=leftSiblingIndex>=2,shouldShowRightDots=rightSiblingIndex<totalPages-2;return!shouldShowLeftDots&&shouldShowRightDots?[makeRange(0,6),makeRange(totalPages-2,totalPages)]:shouldShowLeftDots&&!shouldShowRightDots?[makeRange(0,2),makeRange(totalPages-6,totalPages)]:shouldShowLeftDots&&shouldShowRightDots?[makeRange(0,2),makeRange(leftSiblingIndex+1,rightSiblingIndex),makeRange(totalPages-2,totalPages)]:[]}),[page,totalPages]);useEffect((()=>{if(totalRecords>-1){const actual=Math.min(currentPage,totalPages-1);setPage(actual),actual!==currentPage&&onChange?.(actual)}}),[currentPage,totalRecords,totalPages]);const headLabel=useMemo((()=>_jsxs("span",{className:"text-muted",children:[page*perPage+1," - ",Math.min(page*perPage+perPage,totalRecords)]})),[page,perPage,totalRecords]),onPageChange=useCallback((page=>{setPage(page),startTransition((()=>onChange?.(page)))}),[onChange]);return{page,totalPages,headLabel,ranges,onPageChange}};try{usePagination.displayName="usePagination",usePagination.__docgenInfo={description:"",displayName:"usePagination",props:{totalRecords:{defaultValue:null,description:"total record count",name:"totalRecords",required:!0,type:{name:"number"}},currentPage:{defaultValue:{value:"0"},description:"current page (default 0)",name:"currentPage",required:!1,type:{name:"number"}},perPage:{defaultValue:{value:"25"},description:"records per page",name:"perPage",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"pagination change handler",name:"onChange",required:!1,type:{name:"((page: number) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/hooks/usePagination.tsx#usePagination"]={docgenInfo:usePagination.__docgenInfo,name:"usePagination",path:"packages/data/src/hooks/usePagination.tsx#usePagination"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./packages/data/src/histogram/Histogram.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,'/*\n * React Fabric\n * @version: 1.0.0\n *\n *\n * The MIT License (MIT)\n * Copyright (c) 2024 Adarsh Pastakia\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software\n * and associated documentation files (the "Software"), to deal in the Software without restriction,\n * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial\n * portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\n * TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n@layer comp {\n    .Du5Jy_rvhTN9Hk8NOyzQ .wis4FTkzv6aWMszRywJ7 {\n      --tw-gradient-from: var(--color) var(--tw-gradient-from-position);\n      --tw-gradient-to: color-mix(in lab, var(--color) 20%, var(--fabric-bg))\n        var(--tw-gradient-to-position);\n      --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n\n      background-color: color(from var(--color) srgb r g b / 5%);\n    }\n\n      .Du5Jy_rvhTN9Hk8NOyzQ .wis4FTkzv6aWMszRywJ7:hover {\n        background-color: color(from var(--color) srgb r g b / 15%);\n      }\n\n      .Du5Jy_rvhTN9Hk8NOyzQ .wis4FTkzv6aWMszRywJ7[data-disabled="true"] {\n        --color: color-mix(in lab, color(from var(--tint) srgb r g b / 1) 62%,  color(from var(--fabric-bg) srgb r g b / 1));\n\n        color: color-mix(in lab, color(from var(--tint) srgb r g b / 1) 80%,  color(from var(--fabric-text) srgb r g b / 1));\n      }\n\n    .Du5Jy_rvhTN9Hk8NOyzQ .w73f57B0E7CRYUVHN2t6 {\n      box-shadow: -2px 0 0 var(--color) inset;\n    }\n\n      [dir="rtl"] :is(.Du5Jy_rvhTN9Hk8NOyzQ .w73f57B0E7CRYUVHN2t6) {\n        box-shadow: 2px 0 0 var(--color) inset;\n      }\n\n    .Du5Jy_rvhTN9Hk8NOyzQ .LBVbzE0hu2q5WFg3xmBC {\n      background-color: color(from var(--color) srgb r g b / 15%);\n    }\n}\n',"",{version:3,sources:["webpack://./packages/data/src/histogram/Histogram.module.css"],names:[],mappings:"AAAA;;;;;;;;;;;;;;;;;;;;;EAqBE;;AAEF;IAEI;MACE,iEAAiE;MACjE;sCACgC;MAChC,mEAAmE;;MAEnE,0DAA0D;IAW5D;;MATE;QACE,2DAA2D;MAC7D;;MAEA;QACE,oHAA+B;;QAE/B,oHAA6B;MAC/B;;IAGF;MACE,uCAAuC;IAKzC;;MAHE;QACE,sCAAsC;MACxC;;IAGF;MACE,2DAA2D;IAC7D;AAEJ",sourcesContent:['/*\n * React Fabric\n * @version: 1.0.0\n *\n *\n * The MIT License (MIT)\n * Copyright (c) 2024 Adarsh Pastakia\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software\n * and associated documentation files (the "Software"), to deal in the Software without restriction,\n * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial\n * portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\n * TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n@layer comp {\n  .histogram {\n    .histoLabel {\n      --tw-gradient-from: var(--color) var(--tw-gradient-from-position);\n      --tw-gradient-to: color-mix(in lab, var(--color) 20%, var(--fabric-bg))\n        var(--tw-gradient-to-position);\n      --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n\n      background-color: color(from var(--color) srgb r g b / 5%);\n\n      &:hover {\n        background-color: color(from var(--color) srgb r g b / 15%);\n      }\n\n      &[data-disabled="true"] {\n        --color: theme(colors.tint.300);\n\n        color: theme(colors.tint.600);\n      }\n    }\n\n    .histoBar {\n      box-shadow: -2px 0 0 var(--color) inset;\n\n      :global([dir="rtl"]) & {\n        box-shadow: 2px 0 0 var(--color) inset;\n      }\n    }\n\n    .histoBadge {\n      background-color: color(from var(--color) srgb r g b / 15%);\n    }\n  }\n}\n'],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={histogram:"Du5Jy_rvhTN9Hk8NOyzQ",histoLabel:"wis4FTkzv6aWMszRywJ7",histoBar:"w73f57B0E7CRYUVHN2t6",histoBadge:"LBVbzE0hu2q5WFg3xmBC"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);