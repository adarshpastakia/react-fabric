"use strict";(self.webpackChunkreact_fabric=self.webpackChunkreact_fabric||[]).push([[8735],{"./packages/form/stories/form/Form.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{_Form:()=>_Form,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@faker-js/faker/dist/esm/index.mjs"),_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/core/dist/esm/index.js"),_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/utilities/dist/esm/index.js"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_src__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/form/src/index.ts");const __WEBPACK_DEFAULT_EXPORT__={component:_src__WEBPACK_IMPORTED_MODULE_6__.lV,subcomponents:{Controller:_src__WEBPACK_IMPORTED_MODULE_6__.xI,ArrayInput:_src__WEBPACK_IMPORTED_MODULE_6__.Ag},title:"@form/Form",parameters:{layout:"fullscreen",controls:{exclude:"schema"},jest:["form/tests/Form.test.tsx"]}};(0,_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.Rp)("form",{en:{firstName:"First Name",lastName:"Last Name",age:"Age",notes:"Notes",username:"Username",passwd:"Password",notStrong:"Password not strong enough, must have\n2 uppercase, 2 lowercase, 2 numerals and 2 special character"}});const _Form={render:args=>{const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.Bd)("form"),[files,setFiles]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),[ModalEl,openModal]=(0,_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.J$)(ModalForm),schema=(0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.object({firstName:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.string().required().label("form:firstName"),lastName:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.string().required().label("form:lastName"),age:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.number().min(18).max(65).required().label("form:age"),username:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.string().required().min(6).label("form:username"),password:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.string().required().min(6).label("form:passwd").test("isStrong",((value,context)=>!(Array.from(value.matchAll(/[A-Z]/g)).length<2||Array.from(value.matchAll(/[a-z]/g)).length<2||Array.from(value.matchAll(/\d/g)).length<2||Array.from(value.matchAll(/\W/g)).length<2)||context.createError({message:t("notStrong")})))})),[strength,setStrength]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(0),calculateStrength=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(((value="")=>{value||setStrength(0);const upper=Array.from(value.matchAll(/[A-Z]/g)).length,lower=Array.from(value.matchAll(/[a-z]/g)).length,digit=Array.from(value.matchAll(/\d/g)).length,special=Array.from(value.matchAll(/\W/g)).length,delta=Math.max(value.length/4,1);setStrength((Math.min(upper/delta,1)+Math.min(lower/delta,1)+Math.min(digit/delta,1)+Math.min(special/delta,1))/4)}),[]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"min-h-[600px]",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.lV,{...args,schema:schema.current,defaultValues:{firstName:"",lastName:"",age:void 0},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mx-auto w-96",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"files",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.t$,{hiddenValue:files})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"firstName",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.pd,{autoFocus:!0,required:!0,label:t("firstName")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"lastName",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.pd,{required:!0,label:t("lastName")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"age",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.wN,{required:!0,label:t("age"),info:"Must be between 18 and 65 years"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"notes",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.TM,{required:!0,label:t("notes")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.cG,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"username",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.pd,{required:!0,label:t("username")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"password",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__._2,{showToggle:!0,required:!0,label:t("passwd"),onChange:v=>calculateStrength(v??""),strength})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-1 mt-4",children:files.map(((file,idx)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2 flex-nowrap text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-1 truncate",children:file.name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.yL.bytes(file.size)})]},idx)))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex justify-end gap-2 mt-8",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.$n,{onClick:openModal,children:"Open Modal"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.$n,{onClick:()=>setFiles([...files,{name:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.Jb.system.fileName(),size:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.Jb.number.int({min:500,max:5e5})}]),children:"Add File"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"reset",variant:"outline",onClick:()=>setStrength(0),children:"Reset"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"submit",variant:"solid",children:"Submit"})]})]})}),ModalEl]})},args:{}},ModalForm=props=>{const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.Bd)("form"),[files,setFiles]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),schema=(0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.object({firstName:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.string().required().label("form:firstName"),lastName:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.string().required().label("form:lastName"),age:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.number().min(18).max(65).required().label("form:age"),username:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.string().required().min(6).label("form:username"),password:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.hg.string().required().min(6).label("form:passwd").test("isStrong",((value,context)=>!(Array.from(value.matchAll(/[A-Z]/g)).length<2||Array.from(value.matchAll(/[a-z]/g)).length<2||Array.from(value.matchAll(/\d/g)).length<2||Array.from(value.matchAll(/\W/g)).length<2)||context.createError({message:t("notStrong")})))})),[strength,setStrength]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(0),calculateStrength=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(((value="")=>{value||setStrength(0);const upper=Array.from(value.matchAll(/[A-Z]/g)).length,lower=Array.from(value.matchAll(/[a-z]/g)).length,digit=Array.from(value.matchAll(/\d/g)).length,special=Array.from(value.matchAll(/\W/g)).length,delta=Math.max(value.length/4,1);setStrength((Math.min(upper/delta,1)+Math.min(lower/delta,1)+Math.min(digit/delta,1)+Math.min(special/delta,1))/4)}),[]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.aF,{title:"Modal Form",width:"24rem",onClose:props.onClose,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_src__WEBPACK_IMPORTED_MODULE_6__.lV,{schema:schema.current,defaultValues:{firstName:"",lastName:"",age:void 0},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.UC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"files",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.t$,{hiddenValue:files})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"firstName",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.pd,{autoFocus:!0,required:!0,label:t("firstName")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"lastName",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.pd,{required:!0,label:t("lastName")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"age",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.wN,{required:!0,label:t("age"),info:"Must be between 18 and 65 years"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"notes",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.TM,{required:!0,label:t("notes"),expandable:!0})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.cG,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"username",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.pd,{required:!0,label:t("username")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.xI,{name:"password",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__._2,{showToggle:!0,required:!0,label:t("passwd"),onChange:v=>calculateStrength(v??""),strength})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-1 mt-4",children:files.map(((file,idx)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2 flex-nowrap text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-1 truncate",children:file.name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_3__.yL.bytes(file.size)})]},idx)))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.wi,{className:"flex justify-end gap-2 mt-8",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.$n,{onClick:()=>setFiles([...files,{name:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.Jb.system.fileName(),size:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.Jb.number.int({min:500,max:5e5})}]),children:"Add File"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"reset",variant:"outline",onClick:()=>setStrength(0),children:"Reset"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_2__.$n,{type:"submit",variant:"solid",children:"Submit"})]})]})})},__namedExportsOrder=["_Form"];_Form.parameters={..._Form.parameters,docs:{..._Form.parameters?.docs,source:{originalSource:'{\n  render: args => {\n    const {\n      t\n    } = useTranslation("form");\n    const [files, setFiles] = useState<KeyValue[]>([]);\n    const [ModalEl, openModal] = useOverlayService(ModalForm);\n    const schema = useRef(yup.object({\n      firstName: yup.string().required().label("form:firstName"),\n      lastName: yup.string().required().label("form:lastName"),\n      age: yup.number().min(18).max(65).required().label("form:age"),\n      username: yup.string().required().min(6).label("form:username"),\n      password: yup.string().required().min(6).label("form:passwd").test("isStrong", (value, context) => {\n        if (Array.from(value.matchAll(/[A-Z]/g)).length < 2 || Array.from(value.matchAll(/[a-z]/g)).length < 2 || Array.from(value.matchAll(/\\d/g)).length < 2 || Array.from(value.matchAll(/\\W/g)).length < 2) {\n          return context.createError({\n            message: t("notStrong")\n          });\n        }\n        return true;\n      })\n    }));\n    const [strength, setStrength] = useState(0);\n    const calculateStrength = useCallback((value: string = "") => {\n      if (!value) setStrength(0);\n      const upper = Array.from(value.matchAll(/[A-Z]/g)).length;\n      const lower = Array.from(value.matchAll(/[a-z]/g)).length;\n      const digit = Array.from(value.matchAll(/\\d/g)).length;\n      const special = Array.from(value.matchAll(/\\W/g)).length;\n      const delta = Math.max(value.length / 4, 1);\n      setStrength((Math.min(upper / delta, 1) + Math.min(lower / delta, 1) + Math.min(digit / delta, 1) + Math.min(special / delta, 1)) / 4);\n    }, []);\n    return <div className="min-h-[600px]">\n        <Form {...args} schema={schema.current} defaultValues={{\n        firstName: "",\n        lastName: "",\n        age: undefined\n      }}>\n          <div className="mx-auto w-96">\n            <Controller name="files">\n              <HiddenInput hiddenValue={files} />\n            </Controller>\n            <Controller name="firstName">\n              <Input autoFocus required label={t("firstName")} />\n            </Controller>\n            <Controller name="lastName">\n              <Input required label={t("lastName")} />\n            </Controller>\n            <Controller name="age">\n              <Number required label={t("age")} info="Must be between 18 and 65 years" />\n            </Controller>\n            <Controller name="notes">\n              <Textarea required label={t("notes")} />\n            </Controller>\n            <Divider />\n            <Controller name="username">\n              <Input required label={t("username")} />\n            </Controller>\n            <Controller name="password">\n              <Password showToggle required label={t("passwd")} onChange={v => calculateStrength(v ?? "")} strength={strength} />\n            </Controller>\n\n            <div className="p-1 mt-4">\n              {files.map((file, idx) => <div key={idx} className="flex gap-2 flex-nowrap text-sm">\n                  <div className="flex-1 truncate">{file.name}</div>\n                  <div>{Format.bytes(file.size)}</div>\n                </div>)}\n            </div>\n\n            <div className="flex justify-end gap-2 mt-8">\n              <Button onClick={openModal}>Open Modal</Button>\n              <Button onClick={() => setFiles([...files, {\n              name: faker.system.fileName(),\n              size: faker.number.int({\n                min: 500,\n                max: 500000\n              })\n            }])}>\n                Add File\n              </Button>\n              <Button type="reset" variant="outline" onClick={() => setStrength(0)}>\n                Reset\n              </Button>\n              <Button type="submit" variant="solid">\n                Submit\n              </Button>\n            </div>\n          </div>\n        </Form>\n        {ModalEl}\n      </div>;\n  },\n  args: {}\n}',..._Form.parameters?.docs?.source}}}}}]);