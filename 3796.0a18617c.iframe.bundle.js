"use strict";(self.webpackChunkreact_fabric=self.webpackChunkreact_fabric||[]).push([[3796],{"./node_modules/@lexical/react/LexicalNestedComposer.prod.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>c});var react=__webpack_require__("./node_modules/react/index.js");const o=[["Cat","rgb(125, 50, 0)"],["Dog","rgb(100, 0, 0)"],["Rabbit","rgb(150, 0, 0)"],["Frog","rgb(200, 0, 0)"],["Fox","rgb(200, 75, 0)"],["Hedgehog","rgb(0, 75, 0)"],["Pigeon","rgb(0, 125, 0)"],["Squirrel","rgb(75, 100, 0)"],["Bear","rgb(125, 100, 0)"],["Tiger","rgb(0, 0, 150)"],["Leopard","rgb(0, 0, 200)"],["Zebra","rgb(0, 0, 250)"],["Wolf","rgb(0, 100, 150)"],["Owl","rgb(0, 100, 100)"],["Gull","rgb(100, 0, 100)"],["Squid","rgb(150, 0, 150)"]],b=o[Math.floor(Math.random()*o.length)],e=(0,react.createContext)({clientID:0,color:b[1],isCollabActive:!1,name:b[0],yjsDocMap:new Map});var LexicalComposerContext_prod=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.prod.mjs"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function a(e){const t=e.transform();return null!==t?new Set([t]):new Set}function c({initialEditor:c,children:p,initialNodes:f,initialTheme:d,skipCollabChecks:m}){const u=(0,react.useRef)(!1),h=(0,react.useContext)(LexicalComposerContext_prod.Gu);null==h&&function(e,...t){const r=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams;o.append("code",e);for(const e of t)o.append("v",e);throw r.search=o.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(9);const[x,{getTheme:g}]=h,v=(0,react.useMemo)((()=>{const e=d||g()||void 0,t=(0,LexicalComposerContext_prod.Mx)(h,e);if(void 0!==e&&(c._config.theme=e),c._parentEditor=x,f)for(let e of f){let t=null,r=null;if("function"!=typeof e){const o=e;e=o.replace,t=o.with,r=o.withKlass||null}const o=c._nodes.get(e.getType());c._nodes.set(e.getType(),{exportDOM:o?o.exportDOM:void 0,klass:e,replace:t,replaceWithKlass:r,transforms:a(e)})}else{const e=c._nodes=new Map(x._nodes);for(const[t,r]of e)c._nodes.set(t,{exportDOM:r.exportDOM,klass:r.klass,replace:r.replace,replaceWithKlass:r.replaceWithKlass,transforms:a(r.klass)})}return c._config.namespace=x._config.namespace,c._editable=x._editable,[c,t]}),[]),{isCollabActive:_,yjsDocMap:w}=function l(r,o){const b=(0,react.useContext)(e);return null!=r&&(b.name=r),null!=o&&(b.color=o),b}(),b=m||u.current||w.has(c.getKey());return(0,react.useEffect)((()=>{b&&(u.current=!0)}),[b]),(0,react.useEffect)((()=>x.registerEditableListener((e=>{c.setEditable(e)}))),[c,x]),(0,jsx_runtime.jsx)(LexicalComposerContext_prod.Gu.Provider,{value:v,children:!_||b?p:null})}},"./packages/lexical/src/components/StickyComponent.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{StickyComponent:()=>StickyComponent});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_lexical_react_LexicalAutoFocusPlugin__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@lexical/react/LexicalAutoFocusPlugin.prod.mjs"),_lexical_react_LexicalComposerContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.prod.mjs"),_lexical_react_LexicalContentEditable__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@lexical/react/LexicalContentEditable.prod.mjs"),_lexical_react_LexicalErrorBoundary__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@lexical/react/LexicalErrorBoundary.prod.mjs"),_lexical_react_LexicalNestedComposer__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@lexical/react/LexicalNestedComposer.prod.mjs"),_lexical_react_LexicalRichTextPlugin__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@lexical/react/LexicalRichTextPlugin.prod.mjs"),_mdi_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mdi/js/mdi.js"),_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/core/dist/esm/index.js"),lexical__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/lexical/Lexical.prod.mjs"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_nodes_StickyNode__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/lexical/src/nodes/StickyNode.tsx");function positionSticky(stickyElem,positioning){const style=stickyElem.style;style.top=`${positioning.y}px`,style.left=`${positioning.x}px`}const StickyComponent=({x=0,y=0,nodeKey,color,state,user})=>{const[editor]=(0,_lexical_react_LexicalComposerContext__WEBPACK_IMPORTED_MODULE_4__.DF)(),stickyContainerRef=(0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null),positioningRef=(0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)({isDragging:!1,offsetX:0,offsetY:0,rootElementRect:{left:8,top:8},x:8,y:8});(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((()=>{const position=positioningRef.current;position.x=x,position.y=y;const stickyContainer=stickyContainerRef.current;null!==stickyContainer&&(positioningRef.current.rootElementRect={left:x,top:y},positionSticky(stickyContainer,position))}),[x,y]),(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((()=>{const stickyContainer=stickyContainerRef.current;null!==stickyContainer&&setTimeout((()=>{stickyContainer.style.setProperty("transition","top 300ms ease 0s, left 300ms ease 0s")}),500)}),[]);const handlePointerMove=event=>{const stickyContainer=stickyContainerRef.current,positioning=positioningRef.current,rootElementRect=positioning.rootElementRect;null!==stickyContainer&&positioning.isDragging&&null!==rootElementRect&&(positioning.x=rootElementRect.left+(event.pageX-positioning.offsetX),positioning.y=rootElementRect.top+(event.pageY-positioning.offsetY),positioning.x<0&&(positioning.x=0),positioning.x>642&&(positioning.x=642-stickyContainer.offsetWidth),positioning.y<0&&(positioning.y=0),positionSticky(stickyContainer,positioning))},handlePointerUp=event=>{const stickyContainer=stickyContainerRef.current,positioning=positioningRef.current;null!==stickyContainer&&(positioning.isDragging=!1,stickyContainer.classList.remove("dragging"),editor.update((()=>{const node=(0,lexical__WEBPACK_IMPORTED_MODULE_5__.nsf)(nodeKey);(0,_nodes_StickyNode__WEBPACK_IMPORTED_MODULE_3__.oL)(node)&&node.setPosition(positioning.x,positioning.y)}))),document.removeEventListener("pointermove",handlePointerMove),document.removeEventListener("pointerup",handlePointerUp)},innerEditor=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)((()=>{const editor=(0,lexical__WEBPACK_IMPORTED_MODULE_5__.ieJ)({editable:!0});if(state){const editorState=editor.parseEditorState(state);editor.setEditorState(editorState)}return editor}),[]);return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((()=>{if(innerEditor._editable){const dispose=innerEditor.registerUpdateListener((({editorState})=>{editor.update((()=>{const node=(0,lexical__WEBPACK_IMPORTED_MODULE_5__.nsf)(nodeKey);(0,_nodes_StickyNode__WEBPACK_IMPORTED_MODULE_3__.oL)(node)&&node.updateState(innerEditor.getEditorState().toJSON())}))}));return()=>{dispose()}}}),[innerEditor._editable]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{ref:stickyContainerRef,className:"sticky__container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"sticky__handle",onPointerDown:event=>{const stickyContainer=stickyContainerRef.current;if(null==stickyContainer||2===event.button||event.target!==stickyContainer.firstChild)return;const stickContainer=stickyContainer,positioning=positioningRef.current;null!==stickContainer&&(positioning.offsetX=event.clientX,positioning.offsetY=event.clientY,positioning.rootElementRect={left:positioning.x,top:positioning.y},positioning.isDragging=!0,stickContainer.classList.add("dragging"),document.addEventListener("pointermove",handlePointerMove),document.addEventListener("pointerup",handlePointerUp),event.preventDefault())}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:`sticky-note ${color}`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"sticky__tools",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:()=>{editor.update((()=>{const node=(0,lexical__WEBPACK_IMPORTED_MODULE_5__.nsf)(nodeKey);(0,_nodes_StickyNode__WEBPACK_IMPORTED_MODULE_3__.oL)(node)&&node.toggleColor()}))},className:"sticky--color","aria-label":"Change sticky note color",title:"Color",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.In,{icon:_mdi_js__WEBPACK_IMPORTED_MODULE_6__.mDf})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:()=>{editor.update((()=>{const node=(0,lexical__WEBPACK_IMPORTED_MODULE_5__.nsf)(nodeKey);(0,_nodes_StickyNode__WEBPACK_IMPORTED_MODULE_3__.oL)(node)&&node.remove()}))},className:"sticky--delete","aria-label":"Delete sticky note",title:"Delete",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.In,{icon:_mdi_js__WEBPACK_IMPORTED_MODULE_6__.hyP})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-sm font-semibold",children:user}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_lexical_react_LexicalNestedComposer__WEBPACK_IMPORTED_MODULE_7__.s,{initialEditor:innerEditor,initialTheme:{paragraph:"sticky__paragraph",text:{bold:"editor-textBold",code:"editor-textCode",italic:"editor-textItalic",strikethrough:"editor-textStrikethrough",subscript:"editor-textSubscript",superscript:"editor-textSuperscript",underline:"editor-textUnderline",underlineStrikethrough:"editor-textUnderlineStrikethrough"}},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_lexical_react_LexicalRichTextPlugin__WEBPACK_IMPORTED_MODULE_8__.$,{contentEditable:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_lexical_react_LexicalContentEditable__WEBPACK_IMPORTED_MODULE_9__.a,{className:"sticky__editor"}),placeholder:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"sticky-placeholder",children:"Sticky note..."}),ErrorBoundary:_lexical_react_LexicalErrorBoundary__WEBPACK_IMPORTED_MODULE_10__.default}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_lexical_react_LexicalAutoFocusPlugin__WEBPACK_IMPORTED_MODULE_11__.x,{})]})]})]})};try{StickyComponent.displayName="StickyComponent",StickyComponent.__docgenInfo={description:"",displayName:"StickyComponent",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"string"}},state:{defaultValue:null,description:"",name:"state",required:!1,type:{name:"any"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"enum",value:[{value:'"pink"'},{value:'"yellow"'}]}},nodeKey:{defaultValue:null,description:"",name:"nodeKey",required:!0,type:{name:"string"}},x:{defaultValue:{value:"0"},description:"",name:"x",required:!1,type:{name:"number"}},y:{defaultValue:{value:"0"},description:"",name:"y",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/lexical/src/components/StickyComponent.tsx#StickyComponent"]={docgenInfo:StickyComponent.__docgenInfo,name:"StickyComponent",path:"packages/lexical/src/components/StickyComponent.tsx#StickyComponent"})}catch(__react_docgen_typescript_loader_error){}}}]);