"use strict";(self.webpackChunkreact_fabric=self.webpackChunkreact_fabric||[]).push([[9173],{"./packages/form/stories/FormBuilder.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FormBuilder:()=>FormBuilder,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/core/dist/esm/index.js"),_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/utilities/dist/esm/index.js"),axios__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/axios/lib/axios.js"),msw__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/msw/lib/core/http.mjs"),msw__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/msw/lib/core/HttpResponse.mjs"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js"),_src__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/form/src/index.ts"),_src_types_schema__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/form/src/types/schema.ts");const __WEBPACK_DEFAULT_EXPORT__={component:_src__WEBPACK_IMPORTED_MODULE_4__.lV,title:"@form/_Form Builder_",parameters:{layout:"fullscreen",controls:{exclude:"children"},msw:{handlers:[msw__WEBPACK_IMPORTED_MODULE_6__.L.post("/api/upload",(async({request})=>{const file=(await request.formData()).get("file");return msw__WEBPACK_IMPORTED_MODULE_7__.c.json({path:"storage://fullpath/"+file?.name})}))]}}},defaultSchema=[{id:"avatar",label:"Avatar",datatype:_src_types_schema__WEBPACK_IMPORTED_MODULE_5__.h.AVATAR,required:!0},{id:"name",label:"Name",datatype:_src_types_schema__WEBPACK_IMPORTED_MODULE_5__.h.STRING,required:!0},{id:"age",label:"Age",datatype:_src_types_schema__WEBPACK_IMPORTED_MODULE_5__.h.NUMBER,required:!0,min:16,max:65},{id:"dob",label:"DOB",datatype:_src_types_schema__WEBPACK_IMPORTED_MODULE_5__.h.DATE,required:!0,max:new Date},{id:"skills",label:"skills",datatype:_src_types_schema__WEBPACK_IMPORTED_MODULE_5__.h.STRING,required:!0,multiple:!0},{id:"range",label:"range",datatype:_src_types_schema__WEBPACK_IMPORTED_MODULE_5__.h.RANGE,min:1,max:10,step:.5},{id:"notes",label:"Notes",datatype:_src_types_schema__WEBPACK_IMPORTED_MODULE_5__.h.TEXT},{id:"option",label:"Option",datatype:_src_types_schema__WEBPACK_IMPORTED_MODULE_5__.h.STRING,optionList:"--CUSTOM--",options:["One","Two","Three"],allowCustom:!0},{id:"optionList",label:"Defined list",datatype:_src_types_schema__WEBPACK_IMPORTED_MODULE_5__.h.STRING,optionList:"countries"},{id:"files",label:"Files",datatype:_src_types_schema__WEBPACK_IMPORTED_MODULE_5__.h.FILE,required:!0,multiple:!0},{id:"agree",label:"Agreement?",datatype:_src_types_schema__WEBPACK_IMPORTED_MODULE_5__.h.BOOL}],FormBuilder={render:args=>{const http=axios__WEBPACK_IMPORTED_MODULE_8__.A.create({}),[schema,setSchema]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(defaultSchema),[formValues,setFormValues]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)({name:"Person name",age:36,avatar:"storage://fullpath/avatar.png",files:[{path:"storage://fullpath/test.png",filename:"test.png",size:800,mime:"image/png"}]}),{formDef,schemaDef}=(0,_src__WEBPACK_IMPORTED_MODULE_4__.Pv)(schema,{uploadHandler:(data,config)=>http.postForm("/api/upload",data,config).then((resp=>resp.data?.path??"pathfor file")),optionLists:{countries:{options:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_2__.rX.list,valueProperty:"iso2",labelProperty:"name",groupProperty:"continent"}}});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"min-h-[600px]",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.LM,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.Y9,{flex:!0,className:"px-2 py-1 bg-base",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.hE,{children:"Form Builder"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"p-2 bg-tint-100 font-medium rounded",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.In,{icon:"mdi mdi-flask"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"Experimental"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid grid-cols-3 overflow-hidden area-content p-2 gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"grid rounded-capped outline overflow-hidden bg-base",style:{gridTemplate:'"content" 1fr "foot" auto / 1fr'},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_4__.BV,{allowRemove:!0,schemaDef:schema,onChange:setSchema,optionLists:["countries"]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"overflow-auto bg-base outline rounded-capped",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_src__WEBPACK_IMPORTED_MODULE_4__.lV,{schema:schemaDef,defaultValues:formValues,onSubmit:setFormValues,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-6",children:formDef}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.wi,{flex:!0,justify:"end",className:"sticky bottom-0 border-t bg-base px-6 py-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.$n,{type:"reset",variant:"link",children:"Reset"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.$n,{type:"submit",variant:"solid",children:"Submit"})]})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"overflow-auto p-6 bg-base outline rounded-capped",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("pre",{children:JSON.stringify(formValues,null,4)})})]})]})})},args:{}},__namedExportsOrder=["FormBuilder"];FormBuilder.parameters={...FormBuilder.parameters,docs:{...FormBuilder.parameters?.docs,source:{originalSource:'{\n  render: args => {\n    const http = axios.create({});\n    const uploadHandler = (data: FormData, config: AnyObject) => http.postForm("/api/upload", data, config).then(resp => resp.data?.path ?? "pathfor file");\n    const [schema, setSchema] = useState<AnyObject[]>(defaultSchema);\n    const [formValues, setFormValues] = useState<AnyObject>({\n      name: "Person name",\n      age: 36,\n      avatar: "storage://fullpath/avatar.png",\n      files: [{\n        path: "storage://fullpath/test.png",\n        filename: "test.png",\n        size: 800,\n        mime: "image/png"\n      }]\n    });\n    const {\n      formDef,\n      schemaDef\n    } = useFormBuilder(schema, {\n      uploadHandler,\n      optionLists: {\n        countries: {\n          options: Countries.list,\n          valueProperty: "iso2",\n          labelProperty: "name",\n          groupProperty: "continent"\n        }\n      }\n    });\n    return <div className="min-h-[600px]">\n        <Viewport>\n          <Header flex className="px-2 py-1 bg-base">\n            <Title>Form Builder</Title>\n            <div className="p-2 bg-tint-100 font-medium rounded">\n              <Icon icon="mdi mdi-flask" />\n              <span>Experimental</span>\n            </div>\n          </Header>\n          <div className="grid grid-cols-3 overflow-hidden area-content p-2 gap-2">\n            <div className="grid rounded-capped outline overflow-hidden bg-base" style={{\n            gridTemplate: `"content" 1fr "foot" auto / 1fr`\n          }}>\n              <SchemaEditor allowRemove schemaDef={schema} onChange={setSchema} optionLists={["countries"]} />\n            </div>\n            <div className="overflow-auto bg-base outline rounded-capped">\n              <Form schema={schemaDef} defaultValues={formValues} onSubmit={setFormValues}>\n                <div className="p-6">{formDef}</div>\n\n                <Footer flex justify="end" className="sticky bottom-0 border-t bg-base px-6 py-2">\n                  <Button type="reset" variant="link">\n                    Reset\n                  </Button>\n                  <Button type="submit" variant="solid">\n                    Submit\n                  </Button>\n                </Footer>\n              </Form>\n            </div>\n            <div className="overflow-auto p-6 bg-base outline rounded-capped">\n              <pre>{JSON.stringify(formValues, null, 4)}</pre>\n            </div>\n          </div>\n        </Viewport>\n      </div>;\n  },\n  args: {}\n}',...FormBuilder.parameters?.docs?.source}}}}}]);