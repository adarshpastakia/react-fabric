(self.webpackChunkreact_fabric=self.webpackChunkreact_fabric||[]).push([[5776],{"./packages/form/stories/inputs/File.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FileUploader:()=>FileUploader,_FileInput:()=>_FileInput,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/core/dist/esm/index.js"),_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/utilities/dist/esm/index.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),_storybook_test__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@storybook/test/dist/index.mjs"),axios__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/axios/lib/axios.js"),msw__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/msw/lib/core/http.mjs"),msw__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/msw/lib/core/HttpResponse.mjs"),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/index.js"),_src__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/form/src/index.ts");const __WEBPACK_DEFAULT_EXPORT__={component:_src__WEBPACK_IMPORTED_MODULE_6__.zp,title:"@form/Inputs",parameters:{layout:"centered",jest:["form/tests/File.test.tsx"],msw:{handlers:[msw__WEBPACK_IMPORTED_MODULE_7__.L.post("/api/upload",(()=>msw__WEBPACK_IMPORTED_MODULE_8__.c.json({path:"xyz"})))]}},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"max-w-[32rem] w-screen",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})})]},_FileInput={render:args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_6__.zp,{...args}),args:{label:"File input",placeholder:"File input...",allowClear:!0,onChange:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_4__.fn)(),onEnterPressed:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_4__.fn)()}},FileUploader={render:()=>{const http=axios__WEBPACK_IMPORTED_MODULE_9__.A.create({}),{pending,files,list,upload,remove}=(0,_src__WEBPACK_IMPORTED_MODULE_6__.Mv)(((data,config)=>http.postForm("/api/upload",data,config).then((resp=>resp.data?.path??"pathfor file"))));return(0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((()=>{list&&(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_3__.XI)("filesChanged")(list)}),[list]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"inline-block",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.$n,{badge:pending>0?`${pending}`:void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"Add file"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"file",multiple:!0,className:"absolute inset-0 opacity-0 z-5",onChange:e=>[upload(e.target.files),e.target.value=""]})]})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("br",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:files.map(((file,idx)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"w-96 mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-nowrap gap-1 items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex-1 truncate",children:[file.name,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("br",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-xs",children:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_2__.fO.mime(file.mime)})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:_react_fabric_utilities__WEBPACK_IMPORTED_MODULE_2__.yL.bytes(file.size)}),file.progress&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.In,{icon:"mdi mdi-stop-circle",bg:"danger",color:"white",size:"sm",className:"p-[2px]","aria-label":"abort",onClick:()=>file.abort?.()}),!file.progress&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.In,{icon:"mdi mdi-trash-can",color:"danger",size:"sm","aria-label":"remove",onClick:()=>remove(file.key)})]}),file.progress&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_fabric_core__WEBPACK_IMPORTED_MODULE_1__.z2,{animate:!0,value:100*file.progress,size:"xxs"})]},idx)))})]})},args:{}},__namedExportsOrder=["_FileInput","FileUploader"];_FileInput.parameters={..._FileInput.parameters,docs:{..._FileInput.parameters?.docs,source:{originalSource:'{\n  render: args => {\n    return <FileInput {...args} />;\n  },\n  args: {\n    label: "File input",\n    placeholder: "File input...",\n    allowClear: true,\n    onChange: fn(),\n    onEnterPressed: fn()\n  }\n}',..._FileInput.parameters?.docs?.source}}},FileUploader.parameters={...FileUploader.parameters,docs:{...FileUploader.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const http = axios.create({});\n    const {\n      pending,\n      files,\n      list,\n      upload,\n      remove\n    } = useFileUploader((data, config) => http.postForm("/api/upload", data, config).then(resp => resp.data?.path ?? "pathfor file"));\n    useEffect(() => {\n      list && action("filesChanged")(list);\n    }, [list]);\n    return <div>\n        <div className="inline-block">\n          <Button badge={pending > 0 ? `${pending}` : undefined}>\n            <Fragment>\n              <span>Add file</span>\n              <input type="file" multiple className="absolute inset-0 opacity-0 z-5" onChange={e => [upload(e.target.files), e.target.value = ""]} />\n            </Fragment>\n          </Button>\n        </div>\n        <br />\n        <div>\n          {files.map((file, idx) => <div key={idx} className="w-96 mb-4">\n              <div className="flex flex-nowrap gap-1 items-center">\n                <div className="flex-1 truncate">\n                  {file.name}\n                  <br />\n                  <span className="text-xs">{FileUtil.mime(file.mime)}</span>\n                </div>\n                <div>{Format.bytes(file.size)}</div>\n                {file.progress && <Icon icon="mdi mdi-stop-circle" bg="danger" color="white" size="sm" className="p-[2px]" aria-label="abort" onClick={() => file.abort?.()} />}\n                {!file.progress && <Icon icon="mdi mdi-trash-can" color="danger" size="sm" aria-label="remove" onClick={() => remove(file.key)} />}\n              </div>\n              {file.progress && <ProgressBar animate value={file.progress * 100} size="xxs" />}\n            </div>)}\n        </div>\n      </div>;\n  },\n  args: {}\n}',...FileUploader.parameters?.docs?.source}}}},"./node_modules/@storybook/test/dist sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/@storybook/test/dist sync recursive",module.exports=webpackEmptyContext}}]);