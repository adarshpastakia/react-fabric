"use strict";(self.webpackChunkreact_fabric=self.webpackChunkreact_fabric||[]).push([[9227],{"./packages/data/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{dq:()=>Histogram,p2:()=>JsonViewer,mF:()=>VirtualGallery,wj:()=>VirtualList,RB:()=>useFilteredList});var esm=__webpack_require__("./packages/core/dist/esm/index.js");const ar_namespaceObject=JSON.parse('{"label":{"noRecords":"لا تسجيلات"},"tree":{"noItems":"لا توجد عناصر","error":"خطأ في تحميل العناصر","loading":"تحميل العناصر…"},"datagrid":{"empty":"لا توجد سجلات متاحة"},"json":{"empty":"لا توجد خصائص بيانات","true":"نعم","false":"رقم"},"checkList":{"empty":"لا توجد عناصر قائمة"},"histogram":{"empty":"لا توجد رسوم بيانية"},"action":{"find":"تجد…","copy":"قيمة النسخ","filter":"منقي…","showShortcuts":"اختصارات لوحة المفاتيح…","collapseAll":"انهيار جميع","expandAll":"توسيع الكل","checkAll":"تحقق من الكل","uncheckAll":"الغاءالكل","addFilter":"أضف عامل تصفية","addFilterNot":"إضافة لا تصفية"}}'),en_namespaceObject=JSON.parse('{"label":{"noRecords":"No Records"},"tree":{"noItems":"No items","error":"Error loading items","loading":"Loading items..."},"datagrid":{"empty":"No records available"},"json":{"empty":"No data properties","true":"Yes","false":"No"},"checkList":{"empty":"No list items"},"histogram":{"empty":"No histograms"},"action":{"find":"Find...","copy":"Copy Value","filter":"Filter...","showShortcuts":"Keyboard shortcuts...","collapseAll":"Collapse All","expandAll":"Expand All","checkAll":"Check All","uncheckAll":"Uncheck All","addFilter":"Add Filter","addFilterNot":"Add not Filter"}}');(0,esm.Rp)("data",{en:en_namespaceObject,ar:ar_namespaceObject});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),dist_esm=__webpack_require__("./packages/utilities/dist/esm/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),Histogram_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./packages/data/src/histogram/Histogram.module.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(Histogram_module.A,options);const histogram_Histogram_module=Histogram_module.A&&Histogram_module.A.locals?Histogram_module.A.locals:void 0,Histogram=({items=[],total,color="primary",sortBy="count",emptyTitle,emptyMessage,onClick})=>{const{t}=(0,es.Bd)("data"),maxTotal=(0,react.useMemo)((()=>total||Math.max(...items.map((item=>item.count)))),[total,items]),sorted=(0,react.useMemo)((()=>items.sort((0,dist_esm.ck)("label"===sortBy?"asc":"desc",sortBy))),[items,sortBy]);return(0,jsx_runtime.jsxs)("div",{className:histogram_Histogram_module.histogram,style:{"--color":`var(--${color})`},children:[0===sorted.length&&(0,jsx_runtime.jsx)(esm.HY,{icon:(0,jsx_runtime.jsx)(esm.In,{icon:"M20.84 22.73L11.11 13H3V11H9.11L6.11 8H3V6H4.11L1.11 3L2.39 1.73L22.11 21.46L20.84 22.73M15 11H14.2L15 11.8V11M21 8V6H9.2L11.2 8H21M3 18H9V16H3V18Z",size:"2.5rem"}),title:emptyTitle,message:emptyMessage??t("histogram.empty")}),sorted?.map((item=>(0,jsx_runtime.jsxs)("div",{role:"none","data-disabled":item.disabled,className:classnames_default()("relative cursor-pointer flex flex-nowrap items-center select-none overflow-hidden px-2 py-1 my-px",histogram_Histogram_module.histoLabel,item.disabled&&"pointer-events-none"),onClick:e=>[onClick?.(item.id),e.stopPropagation()],children:[(0,jsx_runtime.jsx)("div",{className:classnames_default()("absolute z-0 inset-0 opacity-50 ltr:bg-gradient-to-r rtl:bg-gradient-to-l from-0% to-100% border-e-2",histogram_Histogram_module.histoBar),style:{width:100*Math.min(item.count/maxTotal,1)+"%"}}),(0,jsx_runtime.jsx)("span",{className:"flex-1 truncate z-1 text-sm font-medium",children:item.label}),(0,jsx_runtime.jsx)("span",{className:classnames_default()("z-1 rounded-full text-xs font-medium px-2 py-1 leading-none",histogram_Histogram_module.histoBadge),children:dist_esm.yL.number(item.count)})]},item.id)))]})};try{Histogram.displayName="Histogram",Histogram.__docgenInfo={description:"",displayName:"Histogram",props:{items:{defaultValue:{value:"[]"},description:"histogram items list",name:"items",required:!1,type:{name:"HistogramItem[]"}},total:{defaultValue:null,description:"total count",name:"total",required:!1,type:{name:"number"}},color:{defaultValue:{value:"primary"},description:"histogram bar color",name:"color",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"accent"'},{value:'"info"'},{value:'"danger"'},{value:'"success"'},{value:'"warning"'},{value:'"scarlet"'},{value:'"pumpkin"'},{value:'"marigold"'},{value:'"avacado"'},{value:'"jade"'},{value:'"denim"'},{value:'"iris"'},{value:'"lilac"'},{value:'"coral"'},{value:'"wood"'},{value:'"silver"'},{value:'"steel"'},{value:'"olive"'},{value:'"sand"'}]}},sortBy:{defaultValue:{value:"count"},description:"sorted list",name:"sortBy",required:!1,type:{name:"enum",value:[{value:'"label"'},{value:'"count"'}]}},emptyTitle:{defaultValue:null,description:"title when histo list is empty",name:"emptyTitle",required:!1,type:{name:"string | Element"}},emptyMessage:{defaultValue:null,description:"message when histo list is empty",name:"emptyMessage",required:!1,type:{name:"string | Element"}},onClick:{defaultValue:null,description:"handle histo click\n@param id\n@returns",name:"onClick",required:!1,type:{name:"((id: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/histogram/Histogram.tsx#Histogram"]={docgenInfo:Histogram.__docgenInfo,name:"Histogram",path:"packages/data/src/histogram/Histogram.tsx#Histogram"})}catch(__react_docgen_typescript_loader_error){}const reduceObject=(json,keys=[],prefix="")=>{const ret=[];return Object.entries(json).forEach((([key,value])=>{if((0,dist_esm.cy)(value)&&(0,dist_esm.Gv)(value[0]))ret.push(...reduceObject(value,[...keys,key],key));else{const obj={field:prefix?`${prefix}.${key}`:key,value,path:[...keys,key].join(".")};!(0,dist_esm.Gv)(value)||(0,dist_esm.Im)(value)||"_score_"in value||(obj.children=reduceObject(value,[...keys,key])),ret.push(obj)}})),ret.flat(99)},JsonEntry=({value,path,field,children,copy,filters,labeler,formatter,propertyScheme,showPropertyTree,onFilter,inline,labelWidth="30%",level=0})=>{const{t}=(0,es.Bd)("data"),[expanded,setExpanded]=(0,react.useState)(!0),canExpand=(0,react.useMemo)((()=>!!children),[children]),actualValue=(0,react.useMemo)((()=>value?._label_??value??""),[value]),display=(0,react.useMemo)((()=>{if(children)return null;if((0,dist_esm.gD)(value))return(0,jsx_runtime.jsx)("span",{className:"text-muted",children:"null"});if((0,dist_esm.Im)(value))return(0,jsx_runtime.jsx)("span",{className:"text-muted",children:"empty"});let ret=actualValue;if(formatter){const formatted=formatter?.(path,actualValue);(0,dist_esm.gD)(formatted)||(ret=formatted)}return(0,dist_esm.cy)(actualValue)&&(ret=`[${actualValue.join(", ")}]`),propertyScheme?.date?.includes(path),propertyScheme?.time?.includes(path)&&(ret=dist_esm.yL.date(actualValue,"pp")),propertyScheme?.number?.phone(path)&&(ret=dist_esm.yL.phone(actualValue)),propertyScheme?.bytes?.includes(path)&&(ret=dist_esm.yL.bytes(actualValue)),propertyScheme?.percent?.includes(path)&&(ret=dist_esm.yL.percent(actualValue)),propertyScheme?.number?.includes(path)&&(ret=dist_esm.yL.number(actualValue)),(propertyScheme?.boolean?.includes(path)||(0,dist_esm.Lm)(actualValue))&&(ret=t(actualValue?"json.true":"json.false")),ret?.length>128&&(ret=(0,jsx_runtime.jsx)(esm.EY,{clamp:3,children:ret})),(0,jsx_runtime.jsxs)(react.Fragment,{children:[ret,(0,dist_esm.Gv)(value)&&value._score_>0&&(0,jsx_runtime.jsx)(esm.kI,{className:"text-xs",value:value._score_})]})}),[value,path,formatter,propertyScheme,actualValue]),pathWithoutOrdinal=(0,react.useMemo)((()=>path.replace(/\.\d*\./,".")),[path]),canCopy=(0,react.useMemo)((()=>!(0,dist_esm.Im)(value)&&((0,dist_esm.Hn)(copy)||copy?.includes?.(path)||copy?.includes?.(pathWithoutOrdinal))),[copy,value,path,pathWithoutOrdinal]);(0,react.useMemo)((()=>(0,dist_esm.Hn)(filters)||filters?.includes?.(path)||filters?.includes?.(pathWithoutOrdinal)),[filters,path,pathWithoutOrdinal]);return(0,jsx_runtime.jsxs)(react.Fragment,{children:[showPropertyTree&&(0,jsx_runtime.jsxs)("div",{className:classnames_default()("py-2",inline&&"flex flex-nowrap items-center"),style:{paddingInlineStart:8*level},children:[(0,jsx_runtime.jsxs)("div",{role:"none",className:classnames_default()("flex overflow-hidden items-center",inline&&"flex-content"),style:{flexBasis:labelWidth},onClick:()=>canExpand&&setExpanded(!expanded),children:[canExpand&&(0,jsx_runtime.jsx)(esm.In,{rtlFlip:!0,icon:expanded?esm.OO.chevronDown:esm.OO.chevronRight}),(0,jsx_runtime.jsx)("label",{className:"text-dimmed text-sm px-2 flex-auto truncate",children:labeler?.(path)??field})]}),display&&(0,jsx_runtime.jsxs)("div",{className:classnames_default()("px-2",inline&&"flex-1"),children:[canCopy&&(0,jsx_runtime.jsx)(esm.QR,{size:"xs",text:actualValue}),display]})]}),!showPropertyTree&&!children&&(0,jsx_runtime.jsxs)("div",{className:classnames_default()("py-2",inline&&"flex flex-nowrap items-center"),children:[(0,jsx_runtime.jsx)("div",{role:"none",className:classnames_default()("flex overflow-hidden items-center",inline&&"flex-content"),style:{flexBasis:labelWidth},children:(0,jsx_runtime.jsx)("label",{className:"text-dimmed text-sm px-2 flex-auto truncate",children:labeler?.(path)??path})}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("px-2",inline&&"flex-1"),children:[canCopy&&(0,jsx_runtime.jsx)(esm.QR,{size:"xs",text:value}),display]})]}),expanded&&children?.map((item=>(0,jsx_runtime.jsx)(JsonEntry,{...item,level:level+1,copy,inline,showPropertyTree,propertyScheme,filters,labelWidth,formatter,labeler,onFilter},item.path)))]})},JsonViewer=({className,json,copy,propertyScheme,filters,inline,labelWidth,formatter,labeler,onFilter,emptyMessage,showPropertyTree=!0,...rest})=>{const{t}=(0,es.Bd)("data"),list=(0,react.useMemo)((()=>reduceObject(json)),[json]);return(0,jsx_runtime.jsx)("div",{...rest,className:classnames_default()(className,"p-4 bg-alternate"),children:(0,dist_esm.Im)(json)?(0,jsx_runtime.jsx)(esm.HY,{size:"sm",message:emptyMessage??t("json.empty")}):list.map((item=>(0,jsx_runtime.jsx)(JsonEntry,{...item,copy,inline,showPropertyTree,propertyScheme,filters,labelWidth,formatter,labeler,onFilter},item.path)))})};try{JsonViewer.displayName="JsonViewer",JsonViewer.__docgenInfo={description:"",displayName:"JsonViewer",props:{json:{defaultValue:null,description:"json value",name:"json",required:!0,type:{name:"KeyValue"}},inline:{defaultValue:null,description:"display inline",name:"inline",required:!1,type:{name:"boolean"}},labelWidth:{defaultValue:{value:"30%"},description:"label fixed width when using inline",name:"labelWidth",required:!1,type:{name:"string | number"}},showPropertyTree:{defaultValue:{value:"true"},description:"display object properties as tree",name:"showPropertyTree",required:!1,type:{name:"boolean"}},propertyScheme:{defaultValue:null,description:"properties to format as dates\n(default format applied to property name containing `date` | `time`)",name:"propertyScheme",required:!1,type:{name:"{ boolean?: string[]; date?: string[]; time?: string[] | undefined; number?: string[] | undefined; bytes?: string[] | undefined; percent?: string[] | undefined; phone?: string[] | undefined; } | undefined"}},copy:{defaultValue:null,description:"enable value copy",name:"copy",required:!1,type:{name:"true | string[]"}},filters:{defaultValue:null,description:"enable filter callbacks",name:"filters",required:!1,type:{name:"true | string[]"}},emptyMessage:{defaultValue:null,description:"message for empty json",name:"emptyMessage",required:!1,type:{name:"string"}},onFilter:{defaultValue:null,description:"on filter callback",name:"onFilter",required:!1,type:{name:"((path: string, value: AnyObject, negate: boolean) => void)"}},labeler:{defaultValue:null,description:"render function for custom label display",name:"labeler",required:!1,type:{name:"((path: string) => string)"}},formatter:{defaultValue:null,description:"render function for custom value display",name:"formatter",required:!1,type:{name:"((path?: string, value?: any) => string | Element) | undefined"}},className:{defaultValue:null,description:"css classname(s)",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/json/JsonViewer.tsx#JsonViewer"]={docgenInfo:JsonViewer.__docgenInfo,name:"JsonViewer",path:"packages/data/src/json/JsonViewer.tsx#JsonViewer"})}catch(__react_docgen_typescript_loader_error){}var react_virtual_dist_esm=__webpack_require__("./node_modules/@tanstack/react-virtual/dist/esm/index.js"),memoize_one_esm=__webpack_require__("./node_modules/memoize-one/dist/memoize-one.esm.js");const Scroller=({vertical=!0,scrollActive,onStart,onEnd,onPrevious,onNext})=>(0,jsx_runtime.jsxs)(esm.e2,{vertical,variant:"link",className:"outline",children:[(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll to top",icon:vertical?esm.OO.chevronsUp:esm.OO.chevronsLeft,disabled:!(2&scrollActive),onClick:onStart}),(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll up",icon:vertical?esm.OO.chevronUp:esm.OO.chevronLeft,disabled:!(2&scrollActive),onClick:onPrevious}),(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll down",icon:vertical?esm.OO.chevronDown:esm.OO.chevronRight,disabled:scrollActive%2==0,onClick:onNext}),(0,jsx_runtime.jsx)(esm.$n,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll to bottom",icon:vertical?esm.OO.chevronsDown:esm.OO.chevronsRight,disabled:scrollActive%2==0,onClick:onEnd})]});try{Scroller.displayName="Scroller",Scroller.__docgenInfo={description:"",displayName:"Scroller",props:{scrollActive:{defaultValue:null,description:"",name:"scrollActive",required:!0,type:{name:"number"}},vertical:{defaultValue:{value:"true"},description:"",name:"vertical",required:!1,type:{name:"boolean"}},onStart:{defaultValue:null,description:"",name:"onStart",required:!0,type:{name:"() => void"}},onEnd:{defaultValue:null,description:"",name:"onEnd",required:!0,type:{name:"() => void"}},onPrevious:{defaultValue:null,description:"",name:"onPrevious",required:!0,type:{name:"() => void"}},onNext:{defaultValue:null,description:"",name:"onNext",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/virtual/Scroller.tsx#Scroller"]={docgenInfo:Scroller.__docgenInfo,name:"Scroller",path:"packages/data/src/virtual/Scroller.tsx#Scroller"})}catch(__react_docgen_typescript_loader_error){}const createItemList=(0,memoize_one_esm.A)((items=>items)),_VirtualGallery=({items,children,columns,padding="md",defaultHeight:height=48,defaultWidth:width=48,hideScroller,isLoading,onLoadMore,onScroll,galleryRef})=>{const count=(0,react.useDeferredValue)(items.length),extraSize=(0,react.useMemo)((()=>onLoadMore?64:0),[onLoadMore]),itemList=createItemList(items.map(((item,idx)=>({index:idx,data:item,isLast:idx+1===items.length})))),scrollerRef=(0,react.useRef)(null),[columnCount,setColumnCount]=(0,react.useState)(1),columnMap=(0,react.useMemo)((()=>new Array(columnCount).fill(0).map(((_,idx)=>idx))),[columnCount]);(0,esm.al)((()=>{if(scrollerRef.current){const el=scrollerRef.current,handler=()=>{setColumnCount(columns??Math.max(1,Math.floor(((el?.offsetWidth??800)-32)/width)))},ob=new ResizeObserver(handler);return handler(),ob.observe(el),()=>{ob.unobserve(el),ob.disconnect()}}}),[scrollerRef.current,columns,count,width],"virtualGallery recalculate view count");const virtualizer=(0,react_virtual_dist_esm.Te)({count:Math.ceil(count/columnCount),getScrollElement:()=>scrollerRef.current,estimateSize:()=>height}),virtualItems=virtualizer.getVirtualItems(),currentIndex=(0,react.useRef)(0);(0,react.useEffect)((()=>{currentIndex.current=virtualItems[1]?.index??0}),[virtualItems]);const calculateActiveScroll=(0,react.useCallback)((()=>{const{scrollTop=0,scrollHeight=0,offsetHeight=0}=scrollerRef.current??{};return scrollHeight===offsetHeight?0:0===scrollTop?1:scrollTop>=scrollHeight-offsetHeight-2*extraSize?2:3}),[]),[scrollActive,setScrollActive]=(0,react.useState)(0),fireScrollEvent=(0,esm.d7)((idx=>onScroll?.(currentIndex.current*idx)),[onScroll]),handleScroll=(0,react.useCallback)((evt=>{setScrollActive(calculateActiveScroll()),fireScrollEvent(columnCount);const{scrollTop=0,scrollHeight=0,offsetHeight=0}=scrollerRef.current??{};+scrollTop+offsetHeight>=scrollHeight&&onLoadMore?.()}),[columnCount,onLoadMore]);return(0,react.useEffect)((()=>{setScrollActive(calculateActiveScroll())}),[count,calculateActiveScroll]),(0,react.useImperativeHandle)(galleryRef,(()=>({scrollToItem(index){virtualizer.scrollToIndex(Math.floor(index/columnCount),{align:"start"})},hilight(index){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight","ring-1"),virtualizer.scrollToIndex(Math.floor(index/columnCount),{align:"start"}),setTimeout((()=>{scrollerRef.current?.querySelector(`[data-index="${index}"]`)?.classList.add("hilight","ring-1")}),100)},unhilight(){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight","ring-1")}})),[virtualizer,columnCount]),(0,jsx_runtime.jsx)("div",{ref:scrollerRef,onScroll:handleScroll,className:classnames_default()("area-content bg-base overflow-auto contain-strict"),children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()("inline-flex flex-nowrap gap-2 justify-center min-h-full min-w-full"),children:[(0,jsx_runtime.jsxs)("div",{className:classnames_default()("box-content","sm"===padding&&"p-1","md"===padding&&"p-2","lg"===padding&&"p-4"),children:[(0,jsx_runtime.jsxs)("div",{style:{height:virtualizer.getTotalSize()},children:[(0,jsx_runtime.jsx)("div",{style:{height:virtualItems[0]?.start}}),virtualItems.map((({key,index,measureElement})=>(0,jsx_runtime.jsx)("div",{className:"flex","data-index":index,ref:measureElement,children:columnMap.map((col=>(0,jsx_runtime.jsx)("div",{"data-index":index*columnCount+col,className:classnames_default()("grid rounded-capped"),children:itemList[index*columnCount+col]&&children(itemList[index*columnCount+col])},`${key}:${col}`)))},key)))]}),onLoadMore&&(0,jsx_runtime.jsx)("div",{className:"h-16",children:isLoading&&(0,jsx_runtime.jsx)(esm.EA,{})})]}),!hideScroller&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("self-end sticky bottom-2"),children:(0,jsx_runtime.jsx)(Scroller,{vertical:!0,scrollActive,onStart:()=>virtualizer.scrollToIndex(0),onPrevious:()=>scrollerRef.current&&virtualizer.scrollBy(-scrollerRef.current.offsetHeight),onNext:()=>scrollerRef.current&&virtualizer.scrollBy(scrollerRef.current.offsetHeight),onEnd:()=>virtualizer.scrollToIndex(count-1)})})]})})};_VirtualGallery.displayName="VirtualGallery";const VirtualGallery=(0,react.memo)(_VirtualGallery);try{VirtualGallery.displayName="VirtualGallery",VirtualGallery.__docgenInfo={description:"",displayName:"VirtualGallery",props:{galleryRef:{defaultValue:null,description:"",name:"galleryRef",required:!1,type:{name:"Ref<VirtualGalleryRef>"}},columns:{defaultValue:null,description:"fixed columns",name:"columns",required:!1,type:{name:"number"}},defaultHeight:{defaultValue:null,description:"default item height",name:"defaultHeight",required:!1,type:{name:"number"}},defaultWidth:{defaultValue:null,description:"default item width",name:"defaultWidth",required:!1,type:{name:"number"}},padding:{defaultValue:{value:"md"},description:"padding",name:"padding",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'}]}},items:{defaultValue:null,description:"data list",name:"items",required:!0,type:{name:"T[]"}},isLoading:{defaultValue:null,description:"loading state",name:"isLoading",required:!1,type:{name:"boolean"}},hideScroller:{defaultValue:null,description:"hide scroll buttons",name:"hideScroller",required:!1,type:{name:"boolean"}},onLoadMore:{defaultValue:null,description:"load more callback",name:"onLoadMore",required:!1,type:{name:"(() => void)"}},onScroll:{defaultValue:null,description:"scroll handler",name:"onScroll",required:!1,type:{name:"((top: number) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/virtual/Gallery.tsx#VirtualGallery"]={docgenInfo:VirtualGallery.__docgenInfo,name:"VirtualGallery",path:"packages/data/src/virtual/Gallery.tsx#VirtualGallery"})}catch(__react_docgen_typescript_loader_error){}const List_createItemList=(0,memoize_one_esm.A)((items=>items)),_VirtualList=({items,children,fullWidth,padding="md",orientation="vertical",defaultHeight:height=48,defaultWidth:width=48,hideScroller,isLoading,onLoadMore,onScroll,listRef})=>{const count=(0,react.useDeferredValue)(items.length),extraSize=(0,react.useMemo)((()=>onLoadMore?64:0),[onLoadMore]),itemList=List_createItemList(items.map(((item,idx)=>({index:idx,data:item,isLast:idx+1===items.length})))),scrollerRef=(0,react.useRef)(null),virtualizer=(0,react_virtual_dist_esm.Te)({count,horizontal:"horizontal"===orientation,getScrollElement:()=>scrollerRef.current,estimateSize:()=>"horizontal"===orientation?width:height}),virtualItems=virtualizer.getVirtualItems(),currentIndex=(0,react.useRef)(0);(0,react.useEffect)((()=>{currentIndex.current=virtualItems[1]?.index??0}),[virtualItems]);const calculateActiveScroll=(0,react.useCallback)((()=>{const{scrollTop=0,scrollLeft=0,scrollWidth=0,scrollHeight=0,offsetWidth=0,offsetHeight=0}=scrollerRef.current??{};if("vertical"===orientation){if(scrollHeight===offsetHeight)return 0;if(0===scrollTop)return 1;if(scrollTop>=scrollHeight-offsetHeight-2*extraSize)return 2}if("horizontal"===orientation){if(scrollWidth===offsetWidth)return 0;if(0===Math.abs(scrollLeft))return 1;if(Math.abs(scrollLeft)>=scrollWidth-offsetWidth-2*extraSize)return 2}return 3}),[orientation]),[scrollActive,setScrollActive]=(0,react.useState)(0),fireScrollEvent=(0,esm.d7)((()=>onScroll?.(currentIndex.current)),[onScroll]),handleScroll=(0,react.useCallback)((evt=>{setScrollActive(calculateActiveScroll()),fireScrollEvent();const{scrollTop=0,scrollLeft=0,scrollWidth=0,scrollHeight=0,offsetWidth=0,offsetHeight=0}=scrollerRef.current??{};"vertical"===orientation&&+scrollTop+offsetHeight>=scrollHeight&&onLoadMore?.(),"horizontal"===orientation&&+scrollLeft+offsetWidth>=scrollWidth&&onLoadMore?.()}),[orientation,onLoadMore]);return(0,react.useEffect)((()=>{setScrollActive(calculateActiveScroll())}),[items,calculateActiveScroll]),(0,react.useImperativeHandle)(listRef,(()=>({scrollToItem(index){virtualizer.scrollToIndex(index,{align:"start"})},hilight(index){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight","ring-1"),virtualizer.scrollToIndex(Math.floor(index),{align:"start"}),setTimeout((()=>{scrollerRef.current?.querySelector(`[data-index="${index}"]`)?.classList.add("hilight","ring-1")}),100)},unhilight(){scrollerRef.current?.querySelector(".hilight")?.classList.remove("hilight","ring-1")}})),[virtualizer]),(0,jsx_runtime.jsx)("div",{ref:scrollerRef,onScroll:handleScroll,className:classnames_default()("area-content bg-base overflow-auto contain-strict"),children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()("inline-flex flex-nowrap gap-2 justify-center min-h-full min-w-full","horizontal"===orientation&&"flex-col"),children:[(0,jsx_runtime.jsxs)("div",{className:classnames_default()("box-content inline-flex flex-nowrap","vertical"===orientation&&"flex-col","horizontal"===orientation&&"flex-row",fullWidth&&"flex-1","sm"===padding&&"p-1","md"===padding&&"p-2","lg"===padding&&"p-4"),children:[(0,jsx_runtime.jsxs)("div",{style:"vertical"===orientation?{height:virtualizer.getTotalSize()}:{width:virtualizer.getTotalSize()},children:[(0,jsx_runtime.jsx)("div",{style:"vertical"===orientation?{height:virtualItems[0]?.start}:{width:virtualItems[0]?.start,display:"inline-block"}}),virtualItems.map((({key,index})=>(0,jsx_runtime.jsx)("div",{"data-index":index,ref:virtualizer.measureElement,className:classnames_default()("rounded-capped","horizontal"===orientation?"inline-grid":"grid"),children:children(itemList[index])},key)))]}),onLoadMore&&(0,jsx_runtime.jsx)("div",{className:"horizontal"===orientation?"min-w-16":"h-16",children:isLoading&&(0,jsx_runtime.jsx)(esm.EA,{})})]}),!hideScroller&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("vertical"===orientation&&"self-end sticky bottom-2","horizontal"===orientation&&"self-end sticky end-2"),children:(0,jsx_runtime.jsx)(Scroller,{vertical:"vertical"===orientation,scrollActive,onStart:()=>virtualizer.scrollToIndex(0),onPrevious:()=>scrollerRef.current&&virtualizer.scrollBy(-("vertical"===orientation?scrollerRef.current.offsetHeight:scrollerRef.current.offsetWidth)),onNext:()=>scrollerRef.current&&virtualizer.scrollBy("vertical"===orientation?scrollerRef.current.offsetHeight:scrollerRef.current.offsetWidth),onEnd:()=>virtualizer.scrollToIndex(count-1)})})]})})};_VirtualList.displayName="VirtualList";const VirtualList=(0,react.memo)(_VirtualList);try{VirtualList.displayName="VirtualList",VirtualList.__docgenInfo={description:"",displayName:"VirtualList",props:{listRef:{defaultValue:null,description:"",name:"listRef",required:!1,type:{name:"Ref<VirtualListRef>"}},defaultHeight:{defaultValue:null,description:"default item height",name:"defaultHeight",required:!1,type:{name:"number"}},defaultWidth:{defaultValue:null,description:"default item width",name:"defaultWidth",required:!1,type:{name:"number"}},fullWidth:{defaultValue:null,description:"full width list",name:"fullWidth",required:!1,type:{name:"boolean"}},padding:{defaultValue:{value:"md"},description:"padding",name:"padding",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'}]}},orientation:{defaultValue:{value:"vertical"},description:"list orientation",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},items:{defaultValue:null,description:"data list",name:"items",required:!0,type:{name:"T[]"}},isLoading:{defaultValue:null,description:"loading state",name:"isLoading",required:!1,type:{name:"boolean"}},hideScroller:{defaultValue:null,description:"hide scroll buttons",name:"hideScroller",required:!1,type:{name:"boolean"}},onLoadMore:{defaultValue:null,description:"load more callback",name:"onLoadMore",required:!1,type:{name:"(() => void)"}},onScroll:{defaultValue:null,description:"scroll handler",name:"onScroll",required:!1,type:{name:"((top: number) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/data/src/virtual/List.tsx#VirtualList"]={docgenInfo:VirtualList.__docgenInfo,name:"VirtualList",path:"packages/data/src/virtual/List.tsx#VirtualList"})}catch(__react_docgen_typescript_loader_error){}const useFilteredList=(items,matcher)=>{const[query,setQuery]=(0,react.useState)(),_items=(0,react.useDeferredValue)(items??[]),[filteredList,setFilteredList]=(0,react.useState)([]),[isSearching,startTransition]=(0,react.useTransition)(),filterItems=(0,react.useCallback)(((items,query)=>startTransition((()=>setFilteredList(((items,query="",matcher)=>{const newList=[];return items.forEach((item=>matcher?matcher?.(item,query)&&newList.push(item):query&&(0,dist_esm.Kg)(query)?(0,dist_esm.FX)(item.label??item.toString(),query)?newList.push(item):void 0:newList.push(item))),newList})(items,query,matcher))))),[]);return(0,react.useEffect)((()=>{query?filterItems(_items,query):setFilteredList(items)}),[query,_items]),{onSearch:setQuery,query,filteredList,isSearching}}},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./packages/data/src/histogram/Histogram.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,'/*\n * React UI Framework\n * @version: 1.0.0\n *\n *\n * The MIT License (MIT)\n * Copyright (c) 2024 Adarsh Pastakia\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software\n * and associated documentation files (the "Software"), to deal in the Software without restriction,\n * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial\n * portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\n * TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n@layer comp {\n    .Du5Jy_rvhTN9Hk8NOyzQ .wis4FTkzv6aWMszRywJ7 {\n      --tw-gradient-from: var(--color) var(--tw-gradient-from-position);\n      --tw-gradient-to: color-mix(in lab, var(--color) 20%, var(--fabric-bg))\n        var(--tw-gradient-to-position);\n      --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n\n      background-color: color(from var(--color) srgb r g b / 5%);\n    }\n\n      .Du5Jy_rvhTN9Hk8NOyzQ .wis4FTkzv6aWMszRywJ7:hover {\n        background-color: color(from var(--color) srgb r g b / 15%);\n      }\n\n      .Du5Jy_rvhTN9Hk8NOyzQ .wis4FTkzv6aWMszRywJ7[data-disabled="true"] {\n        --color: color-mix(in lab, color(from var(--tint) srgb r g b / 1) 62%,  color(from var(--fabric-bg) srgb r g b / 1));\n\n        color: color-mix(in lab, color(from var(--tint) srgb r g b / 1) 80%,  color(from var(--fabric-text) srgb r g b / 1));\n      }\n\n    .Du5Jy_rvhTN9Hk8NOyzQ .w73f57B0E7CRYUVHN2t6 {\n      border-inline-end-color: var(--color);\n    }\n\n    .Du5Jy_rvhTN9Hk8NOyzQ .LBVbzE0hu2q5WFg3xmBC {\n      background-color: color(from var(--color) srgb r g b / 15%);\n    }\n}\n',"",{version:3,sources:["webpack://./packages/data/src/histogram/Histogram.module.css"],names:[],mappings:"AAAA;;;;;;;;;;;;;;;;;;;;;EAqBE;;AAEF;IAEI;MACE,iEAAiE;MACjE;sCACgC;MAChC,mEAAmE;;MAEnE,0DAA0D;IAW5D;;MATE;QACE,2DAA2D;MAC7D;;MAEA;QACE,oHAA+B;;QAE/B,oHAA6B;MAC/B;;IAGF;MACE,qCAAqC;IACvC;;IAEA;MACE,2DAA2D;IAC7D;AAEJ",sourcesContent:['/*\n * React UI Framework\n * @version: 1.0.0\n *\n *\n * The MIT License (MIT)\n * Copyright (c) 2024 Adarsh Pastakia\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software\n * and associated documentation files (the "Software"), to deal in the Software without restriction,\n * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial\n * portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\n * TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n@layer comp {\n  .histogram {\n    .histoLabel {\n      --tw-gradient-from: var(--color) var(--tw-gradient-from-position);\n      --tw-gradient-to: color-mix(in lab, var(--color) 20%, var(--fabric-bg))\n        var(--tw-gradient-to-position);\n      --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n\n      background-color: color(from var(--color) srgb r g b / 5%);\n\n      &:hover {\n        background-color: color(from var(--color) srgb r g b / 15%);\n      }\n\n      &[data-disabled="true"] {\n        --color: theme(colors.tint.300);\n\n        color: theme(colors.tint.600);\n      }\n    }\n\n    .histoBar {\n      border-inline-end-color: var(--color);\n    }\n\n    .histoBadge {\n      background-color: color(from var(--color) srgb r g b / 15%);\n    }\n  }\n}\n'],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={histogram:"Du5Jy_rvhTN9Hk8NOyzQ",histoLabel:"wis4FTkzv6aWMszRywJ7",histoBar:"w73f57B0E7CRYUVHN2t6",histoBadge:"LBVbzE0hu2q5WFg3xmBC"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);