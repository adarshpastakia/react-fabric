import{eU as O}from"./ShadowCastClear.glsl.js";import{c as V}from"./PixelBlock.js";import"./iframe-DwvN93Ge.js";import"./index.js";import"./Viewport.js";import"./Section.js";import"./ErrorBoundary.js";import"./createClass.js";import"./Global.js";import"./useIsDark.js";import"./debounce.js";import"./index2.js";import"./pixelRangeUtils.js";function W({distance:a,yaw:i,horizontalFieldOfView:o,pitch:e,verticalFieldOfView:f,origin:n=[0,0,0],positionLength:t=25}){const p=t-1,w=t*t,g=new Float32Array(2*w),u=new Float64Array(3*w),h=new Float32Array(3*w).fill(0),s=new Uint32Array(p**2*6);for(let r=0,l=0;r<w;r++){const A=Math.floor(r/t),b=r%t,d=1-b/p,y=A/p,F=2*r,c=3*r;g[F]=d,g[F+1]=y;const v=e+f/2-y*f,M=O(i-o/2+d*o),D=O(v),L=Math.sin(D),x=Math.cos(D),m=[L*Math.sin(M),Math.cos(M)*L,-x];u[c]=n[0]+a*m[0],u[c+1]=n[1]+a*m[1],u[c+2]=n[2]+a*m[2],h[c]=-m[0],h[c+1]=-m[1],h[c+2]=-m[2],A!==p&&b!==p&&(s[l++]=r,s[l++]=r+t,s[l++]=r+t+1,s[l++]=r,s[l++]=r+t+1,s[l++]=r+1)}return{result:{position:u,uv:g,normal:h,faces:s},transferList:[u.buffer,g.buffer,h.buffer,s==null?void 0:s.buffer]}}function q(a){const i=V.fromJSON(a);i.premultiplyAlpha=!0;const o=i.getAsRGBA(),e=i.width,f=i.height,n=new ImageData(o,e,f);return{result:n,transferList:[n.data.buffer]}}function C({oldDistance:a,newDistance:i,position:o,origin:e=[0,0,0]}){const f=o.length/3;for(let n=0;n<f;n+=3){const t=3*n;o[t]=e[0]+(o[t]-e[0])*(i/a),o[t+1]=e[1]+(o[t+1]-e[1])*(i/a),o[t+2]=e[2]+(o[t+2]-e[2])*(i/a)}return{result:o,transferList:[o.buffer]}}export{q as convertPixelBlockToImageData,W as getFacesWithVertexAttributes,C as recomputePositions};
