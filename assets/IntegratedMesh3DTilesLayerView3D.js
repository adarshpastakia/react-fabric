import{el as Oe,lu as oe,qI as Te,qJ as Pe,bJ as O,fi as be,fW as Ue,qK as je,nt as He,qL as Se,qM as Ee,dF as D,b5 as F,fP as Fe,qN as Re,bj as le,er as Ve,qO as Ae,bl as Ie,b_ as ke,qj as Be,ai as qe,nz as ce,qP as $e,fk as Le,qH as De,hi as Ge,lz as Ne,hn as ze,qQ as We,mR as Je,fL as de,qR as Xe,qS as G,hl as Ke,qT as Ye,qU as Qe,mf as Ze,qV as N,qW as he,qX as et,qY as tt,e_ as st,bE as it,ot as rt,pA as at,pF as nt,pG as ot,mN as z,pI as lt,pJ as ct,l9 as I,qZ as dt,q_ as ht,q$ as ue,r0 as me,l as pe,r1 as ut,i_ as mt,r2 as pt,lG as ft,bK as gt,go as fe,E as T,F as S,V as yt}from"./ShadowCastClear.glsl.js";import{E as bt,i as _t,t as wt,a as vt}from"./Transform.js";import{y as Mt}from"./SceneModification.js";import{u as xt}from"./I3SMeshWorkerHandle.js";import{l as Ct}from"./LayerView3D.js";import{s as Ot,t as Tt}from"./EllipsoidMode.js";import{d as Pt}from"./LayerView.js";import"./iframe-qDaPDssc.js";import"./index.js";import"./Viewport.js";import"./debounce.js";import"./index2.js";import"./Section.js";import"./ErrorBoundary.js";import"./createClass.js";import"./Global.js";import"./useIsDark.js";import"./projectBoundingSphere.js";class Ut extends Oe{constructor(t,a,n,o,h,l,i){super(t,0,0,0,a),this.nodesCached=n,this.vboMB=o,this.textureMB=h,this.vboMBCached=l,this.textureMBCached=i}}const jt={Points:null,Lines:null,LineStrip:null,Triangles:oe.TRIANGLES,TriangleStrip:oe.TRIANGLE_STRIP,NotSet:null},ge={Opaque:1,Mask:2,Blend:0},Ht={Back:2,Front:1,None:0,NotSet:2},St={WrapYBit:{s:33071,t:10497},WrapXBit:{s:10497,t:33071},WrapXy:{s:10497,t:10497},None:{s:33071,t:33071},NotSet:{s:33071,t:33071}},Et={U8:1,I8:1,U16:2,I16:2,U32:4,I32:4,F32:4,F64:8,Utf8String:1,NotSet:1};class Ft{constructor(t){this.layerView=t,this.type=8,this.slicePlaneEnabled=!1,this.isGround=!0,this.layerViewUid=t.uid}intersect(t,a,n,o,h,l){if(t.options.filteredLayerViewUids.includes(this.layerView.uid))return;const{results:i,tolerance:y}=t,g=t.options.store===2,{componentObjectCollection:b}=this.layerView.view.stage.renderView,u=new Te(y,l,t.options.normalRequired),c=Pe(n,o,Rt),s=be(O(),o,n),d=Ue(O(),s),p=(v,m,w)=>{if(m>=0){if(a!=null&&!a(n,o,m))return;const _=x=>{const f=new Se(this.layerView.layer.uid);x.set(this.type,f,m,w)};if(this.isGround&&(i.ground.distance==null||m<i.ground.distance)&&_(i.ground),t.options.isFiltered)return;if((i.min.distance==null||m<i.min.distance)&&_(i.min),(i.max.distance==null||m>i.max.distance)&&_(i.max),g){const x=new He(t.ray);_(x),t.results.all.push(x)}}};this.layerView.forEachVisibleTile(v=>{if(!v.boundingVolumeIntersectsRay(n,d))return;const{componentObjects:m}=v;for(const w of m)je(w.aabbInWorldCoordinates,n,c,0)&&b.intersect(w,n,o,null,u,p)})}}const Rt=O();class Vt{constructor(t,a,n,o,h,l,i){this.handle=t,this.componentObjects=a,this.textures=n,this.cpuMemoryUsage=o,this.vboMemoryUsage=h,this.textureMemoryUsage=l,this.obb=i,this.isVisible=!1,this.usedMemory=this.textureMemoryUsage+this.vboMemoryUsage+this.cpuMemoryUsage;const y=O();i==null||i.getCenter(y),this._obbCenter=y,this._obbRadiusSquared=i?(i==null?void 0:i.radius)**2:0}boundingVolumeIntersectsRay(t,a){if(!this.obb)return!0;const n=be(At,this._obbCenter,t),o=fe(n,a);return fe(n,n)-o*o<=this._obbRadiusSquared&&this.obb.intersectRay(t,a)}}const At=O();function k(e){return Math.round(e/1048.576)/1e3}let C=class extends Ct(Pt){get hasModifications(){return this._modifications&&this._modifications.length>0}constructor(e){super(e),this.type="integrated-mesh-3dtiles",this._compressionTracker=new Ee,this._modifications=new Array,this._visibleGeometryChangedSchedulerHandle=null,this._wasmLayerId=-1,this.ignoresMemoryFactor=!1,this._usedMemory=0,this._cacheMemory=0,this.drapeTargetType=1,this._applySSAO=!D("disable-feature:im-ssao"),this._shadeNormals=!!D("enable-feature:im-shading"),this._lyrHandleToObjects=new Map,this._visibleObjects=new Set,this._initialCullFace=new Map,this._suspendedHandle=null,this._dbgFlags=new Set,this._memCache=e.view.resourceController.memoryController.newCache(`IM3DTiles-${this.uid}`,t=>this._deletePerObjectData(t))}initialize(){var a;this._dbgFlags.add(3),this._dbg(2,"Tiles3DLayerView3D initialize() called");const{view:e}=this;if(this._updatingHandles.add(()=>this.layer.modifications,()=>this._loadModifications(),F),!this._canProjectWithoutEngine())throw Fe("layer",this.layer.spatialReference.wkid,(a=e.renderSpatialReference)==null?void 0:a.wkid);const t=Re(this).then(n=>{this._wasmLayerId=n,this._intersectionHandler=new Ft(this),e.sceneIntersectionHelper.addIntersectionHandler(this._intersectionHandler),this._updatingHandles.add(()=>this.slicePlaneEnabled,o=>this._slicePlaneEnabledChange(o)),this._updatingHandles.add(()=>this._modifications,()=>this._modificationsChanged(),F),this._updatingHandles.add(()=>this.fullOpacity,()=>this._opacityChange()),this._updatingHandles.add(()=>e.clippingArea,()=>this._clippingAreaChanged(),F),this._elevationProvider=new bt({view:e,layerElevationSource:this,intersectionHandler:this._intersectionHandler}),e.elevationProvider.register(1,this._elevationProvider),e.overlayManager.registerDrapeTarget(this),this.addHandles([le(()=>this.layer.elevationInfo,o=>this._elevationInfoChanged(o))]),this._suspendedHandle=le(()=>this.suspended,o=>{var h;return(h=this._wasm)==null?void 0:h.setEnabled(this,!o)},F)});this.addResolvingPromise(t),this._replacesTerrain&&this.addHandles(Ve(()=>this.view.map.ground.opacity,()=>{this._opacityChange()}))}get _replacesTerrain(){var e;return this.layer.replacesTerrain&&!!((e=this.view.map.basemap)!=null&&e.groundLayers.includes(this.layer))}get fullOpacity(){return this._replacesTerrain?this.view.map.ground.opacity:1}get opacity(){return 1}_opacityChange(){const{fullOpacity:e}=this;this.forEachComponentObject(t=>{this._collection.getMaterial(t).objectOpacity=e})}intersect(e,t,a,n){this._intersectionHandler.intersect(e,t,a,n,null,!1)}get ready(){return!0}destroy(){this._dbg(2,"Tiles3DLayerView3D destroy() called"),Ae(this),this._suspendedHandle&&(this._suspendedHandle.remove(),this._suspendedHandle=null),this._intersectionHandler&&(this.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler),this._intersectionHandler=null),this._elevationProvider&&(this._elevationProvider.notifyObjectsChangedFunctional(e=>this.forEachComponentObject(t=>e(t.obb))),this.view.elevationProvider.unregister(this._elevationProvider),this._elevationProvider=null),this.view.overlayManager.unregisterDrapeTarget(this),this._lyrHandleToObjects.forEach(e=>this.freeObject(e)),this._lyrHandleToObjects.clear(),this._initialCullFace.clear(),this._visibleObjects.clear(),this._usedMemory=0,this._cacheMemory=0,this._memCache.destroy(),this._updatingHandles=Ie(this._updatingHandles),this.emit("visible-geometry-changed"),this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle.remove(),this._visibleGeometryChangedSchedulerHandle=null)}_modificationsChanged(){var a;const e=this.layer.spatialReference,t=xt(this._layerClippingArea,this._modifications,e);(a=this._wasm)==null||a.setMeshModifications(this,t,e.wkid)}_clippingAreaChanged(){const e=this.layer.spatialReference,t=ke();this._layerClippingArea=Be(this.view.clippingArea,t,e)?t:null,this._modificationsChanged()}_visibleGeometryChanged(){this._visibleGeometryChangedSchedulerHandle??(this._visibleGeometryChangedSchedulerHandle=qe(()=>{this.emit("visible-geometry-changed"),this._visibleGeometryChangedSchedulerHandle=null}))}_slicePlaneEnabledChange(e){this._intersectionHandler&&(this._intersectionHandler.slicePlaneEnabled=e),this.forEachComponentObject(t=>{const a=this._collection.getMaterial(t);a.commonMaterialParameters.hasSlicePlane=e,a.commonMaterialParameters.cullFace=e?0:this._initialCullFace.get(t)})}_elevationInfoChanged(e){var t;(t=this._wasm)==null||t.setLayerOffset(this,ce(e))}get _wasm(){return $e(this.view)}get wasmLayerId(){return this._wasmLayerId}get usedMemory(){return this._usedMemory}get unloadedMemory(){return 0}get cachedMemory(){return this._cacheMemory}get visibleAtCurrentScale(){return Le(this.layer.effectiveScaleRange,this.view.scale)}get performanceInfo(){let e=0,t=0,a=0,n=0,o=0,h=0;return this._lyrHandleToObjects.forEach(l=>{l.isVisible?(e+=l.textureMemoryUsage,t+=l.vboMemoryUsage,o++):(a+=l.textureMemoryUsage,n+=l.vboMemoryUsage,h++)}),new Ut(this.usedMemory,o,h,k(t),k(e),k(n),k(a))}_canProjectWithoutEngine(){var e,t;if(this.view.state.viewingMode===2){const a=(e=this.view.renderSpatialReference)!=null&&e.isWebMercator?3857:((t=this.view.renderSpatialReference)==null?void 0:t.wkid)??-1;if(a!==3857&&a!==32662)return!1}return!0}get _stage(){return this.view.stage}get _collection(){return this._stage.renderView.componentObjectCollection}get elevationProvider(){return this._elevationProvider}get elevationOffset(){return ce(this.layer.elevationInfo)}get elevationRange(){const e=this.fullExtent;return e!=null&&e.zmin&&(e!=null&&e.zmax)?new De(e.zmin,e.zmax):null}getElevationRange(e){return null}get fullExtent(){return this.layer.fullExtent}forEachComponentObject(e){this._forEachObject(this._lyrHandleToObjects.values(),e)}forEachVisibleTile(e){for(const t of this._visibleObjects)e(t)}forEachVisibleComponentObject(e){this._forEachObject(this._visibleObjects,e)}_forEachObject(e,t){for(const a of e)for(const n of a.componentObjects)t(n)}isUpdating(){const e=this._wasm;return!(this._wasmLayerId<0||e==null)&&(e.isUpdating(this._wasmLayerId)||this._compressionTracker.compressing)}updatingFlagChanged(){this.notifyChange("updating")}async createRenderable(e){var w;const t=e.meshData;if(t.data==null)throw new Error("meshData.data undefined");if(t.desc=JSON.parse(t.desc),t.desc==null)throw new Error("meshData.desc undefined");const a=Ge(t.desc.origin),n=new Array,o=this.view.basemapTerrain.spatialReference;let h,l;if(this.view.viewingMode==="global"){const _=ze();Ne(We,a,_,o),h=Je(de(),_),l=Xe(de(),h)}else h=G,l=G;const i=Ke(a),y=O(),g=kt(t.desc.obb);let b=0,u=0;const c={textureMemoryUsage:0},s=new Array,d=new Map,p=t.desc.prims.length;for(let _=0;_<p;_++){const x=t.desc.prims[_];if(this._dbg(2,JSON.stringify(x)),jt[x.ptype]==null||t.data==null){this._dbg(2,"[Unsupported Feature] Unsupported primitive mode ("+x.ptype+"). Skipping primitive.");continue}const f=(w=t.desc)!=null&&w.materials&&x.materialId!=null?t.desc.materials[x.materialId]:null,_e=f!=null?f.lightingModel:"Unlit",{positionView:P,positionAttr:U,normalsView:we,normalsAttr:B,colorAttr:R,texCoord0Attr:V,indicesView:E}=this.getBufferViews(x,t.data.buffer,h);if(U==null||P==null||E==null)continue;const W=new Ye(R!=null,V?1:0,we!=null,this._shadeNormals||this._replacesTerrain,this._applySSAO),ve=U.data.length/U.size,q=(M,r)=>!M||M.data.length/M.size===ve||(this._dbg(3,`${r} !== numPos. Skipping primitive.`),!1);if(!q(V,"numTexcoord")||!q(R,"numColors")||!q(B,"normals"))continue;const J=Qe(W),Me=(g==null?void 0:g.clone())??It(U,a);if(h!==G)for(let M=0;M<P.count;M++)P.getVec(M,y),Ze(y,y,h),P.setVec(M,y);const j=J.createBuffer(U.data.length);if(N("position",U,null,null,j,0),V!=null){const M=j.getField("uv0",he);et(V,M,0)}R!=null&&N("color",R,null,null,j,0),B!=null&&N("normalCompressed",B,null,null,j,0);const xe=new Uint32Array([0,E.typedBuffer.length]),Ce=new tt({data:j.buffer,count:j.byteLength/J.stride,layoutParameters:W},{positions:P.typedBuffer,indices:E.typedBuffer},E.typedBuffer,xe);b+=P.count+E.count;const X=this.view.renderSpatialReference,$=O(),L=[1,1,1];_t(i,X,L,o)||this._dbg(3,"Unsupported coordinate system for IM overlay"),st(i,X,$,o);const A=this._collection.createObject(new wt(it($[0],$[1],L[0],L[1]),new vt(i,l),Me,Ce,!1));if(f){const M=r=>{r.baseColor=f.baseColorFactor,r.usePBR=_e==="Pbr",r.hasParametersFromSource=!1,r.baseColorTexture=this._getTexture(f.baseColorTex,t,d,c),r.usePBR&&(r.mrrFactors=[f.metallicFactor,f.roughnessFactor,0],r.emissiveBaseColor=f.emissiveFactor??[0,0,0],r.metallicRoughnessTexture=this._getTexture(f.metalTex,t,d,c),r.emissionTexture=this._getTexture(f.emissiveTex,t,d,c),r.occlusionTexture=this._getTexture(f.occlusionTex,t,d,c),r.normalTexture=this._getTexture(f.normalTex,t,d,c)),r.objectOpacity=0,r.alphaDiscardMode=2;const H=[];r.baseColorTexture&&H.push(r.baseColorTexture.loadPromise),r.usePBR&&(r.metallicRoughnessTexture&&H.push(r.metallicRoughnessTexture.loadPromise),r.emissionTexture&&H.push(r.emissionTexture.loadPromise),r.occlusionTexture&&H.push(r.occlusionTexture.loadPromise),r.normalTexture&&H.push(r.normalTexture.loadPromise));const K=Promise.all(H);n.push(K),K.then(()=>{var Y,Q,Z,ee,te,se,ie,re,ae,ne;r.alphaDiscardMode=ge[f.alphaMode],r.objectOpacity=this.fullOpacity,c.textureMemoryUsage+=((Q=(Y=r.baseColorTexture)==null?void 0:Y.glTexture)==null?void 0:Q.usedMemory)??0,r.usePBR&&(c.textureMemoryUsage+=(((ee=(Z=r.metallicRoughnessTexture)==null?void 0:Z.glTexture)==null?void 0:ee.usedMemory)??0)+(((se=(te=r.emissionTexture)==null?void 0:te.glTexture)==null?void 0:se.usedMemory)??0)+(((re=(ie=r.occlusionTexture)==null?void 0:ie.glTexture)==null?void 0:re.usedMemory)??0)+(((ne=(ae=r.normalTexture)==null?void 0:ae.glTexture)==null?void 0:ne.usedMemory)??0))}),r.commonMaterialParameters.doubleSided=f.isDoubleSided,r.commonMaterialParameters.cullFace=f.faceCulling?Ht[f.faceCulling]:0,this._initialCullFace.set(A,r.commonMaterialParameters.cullFace),r.commonMaterialParameters.hasSlicePlane=this.slicePlaneEnabled,r.componentParameters.castShadows=0,r.textureAlphaCutoff=f.alphaCutoff??ut,r.alphaDiscardMode=ge[f.alphaMode],r.isIntegratedMesh=!0,r.sphereDepthInterpolate=this.layer.hasGoogleUrl,r.polygonOffsetEnabled=!1,r.hasOccludees=!1,r.ellipsoidMode=Tt(this.view.spatialReference)};this._collection.updateMaterial(A,M)}s.push(A),u+=this._collection.getObjectGPUMemoryUsage(A)}await Promise.all(n);const v=new Array;d.forEach(_=>{v.push(_)});const m=new Vt(e.handle,s,v,b,u,c.textureMemoryUsage,g);return this._memCache.put(`${m.handle}`,m),this._lyrHandleToObjects.set(e.handle,m),this._cacheMemory+=m.usedMemory,{memUsageBytes:m.usedMemory}}freeRenderable(e){const t=this._lyrHandleToObjects.get(e);t&&(t.isVisible?(this._visibleObjects.delete(t),this._usedMemory-=t.usedMemory):this._cacheMemory-=t.usedMemory,this.freeObject(t),this._lyrHandleToObjects.delete(e))}freeObject(e){this._memCache.pop(`${e.handle}`),e.textures.forEach(t=>this._stage.removeTexture(t)),e.componentObjects.forEach(t=>{this._collection.destroyObject(t),this._initialCullFace.delete(t)})}setRenderableVisibility(e,t,a){for(let n=0;n<a;++n){const o=t[n];if(!o)continue;const h=e[n],l=this._lyrHandleToObjects.get(h);if(l){if(l.isVisible)continue;this._visibleGeometryChanged(),l.isVisible=!0,this._visibleObjects.add(l),this._usedMemory+=l.usedMemory,this._cacheMemory-=l.usedMemory,l.componentObjects.forEach(i=>{this._collection.setObjectVisibility(i,o),this._elevationProvider.notifyObjectChanged(this._collection.getComponentObb(i))}),this._memCache.pop(`${h}`)}}for(let n=0;n<a;++n){const o=e[n],h=t[n];if(h)continue;const l=this._lyrHandleToObjects.get(o);if(l){if(!l.isVisible)continue;this._visibleGeometryChanged(),l.isVisible=!1,this._visibleObjects.delete(l),this._usedMemory-=l.usedMemory,this._cacheMemory+=l.usedMemory,l.componentObjects.forEach(i=>{this._collection.setObjectVisibility(i,h),this._elevationProvider.notifyObjectChanged(this._collection.getComponentObb(i))}),this._memCache.put(`${o}`,l)}}}_getTexture(e,t,a,n){var h,l;let o=null;if(e&&((h=t.desc)!=null&&h.images)&&((l=t.data)!=null&&l.buffer)){const i=t.desc.images[e==null?void 0:e.imageId];if(o=a.get(i),!o&&i){const y=this._stage.renderView.renderingContext.parameters.maxMaxAnisotropy,g=!!i.mipCount||y>1,b=St[e.wrapMode??"None"];let u=i.alpha?6408:6407;const c=new Uint8Array(t.data.buffer,i.data.byteOffset,i.data.byteCount);let s=null,d=null,p=null;switch(i.format){case"Raw":i.pixelFormat==="R8"?(s=c,u=6403,d=""):i.pixelFormat==="Rgb8"?(s=c,u=6407,d=""):i.pixelFormat==="Rgba8"&&(s=c,u=6408,d="");break;case"Dxt1":s=c,u=6407,d="image/vnd-ms.dds";break;case"Dxt5":s=c,u=6408,d="image/vnd-ms.dds";break;case"Basis":s=c,u=6407,d="image/ktx2";break;case"Png":d="image/png",p=document.createElement("img");break;case"Jpeg":d="image/jpeg",p=document.createElement("img");break;case"Etc2":d="image/ktx",p=document.createElement("img");break;case"Astc":this._dbg(3,"Astc texture not supported");break;case"Pvrtc":this._dbg(3,"Pvrtc texture not supported")}if(p&&d){const v=new Blob([c],{type:d});p.src=URL.createObjectURL(v),s=p}if(s&&d!=null){const v=D("enable-feature:esri-compress-IM-textures")?{compressionTracker:this._compressionTracker,compressionCallback:m=>{m&&m>0&&(n.textureMemoryUsage-=m)}}:void 0;o=new rt(s,{mipmap:g,maxAnisotropy:y,encoding:d,wrap:b,pixelFormat:u,compressionOptions:v,noUnpackFlip:!0,width:i.mip0Width,height:i.mip0Height}),this._stage.addTexture(o),a.set(i,o)}}}return o?new Ot(this.view.stage.renderView.textures,o.id):null}getBufferViews(e,t,a){let n,o,h,l,i,y,g,b=null;for(let u=0;u<e.atrbs.length;u++){const c=e.atrbs[u],s=c.view,d=void 0,p=s.byteOffset+s.byteCount,v=s.byteCount/Et[s.type],m=[...Array(v).keys()].map(w=>w);try{switch(c.sem){case"Position":s.ncomp!==3||s.type!=="F32"?this._dbg(3,"[Unsupported Feature] Unsupported view for Position ("+s+")"):(n=new z(t,s.byteOffset,d,p),o=new I(n.typedBuffer,m,3));break;case"Normal":if(s.ncomp!==3||s.type!=="F32")this._dbg(3,"[Unsupported Feature] Unsupported view for Normal ("+s+")");else{const w=new z(t,s.byteOffset,d,p),_=dt(w.typedBuffer,a);i=new ht(_.buffer),y=new I(i.typedBuffer,m,2)}break;case"TexCoord":s.ncomp!==2||s.type!=="F32"?this._dbg(3,"[Unsupported Feature] Unsupported view for Texcoord ("+s+")"):l===void 0&&(l=new I(new he(t,s.byteOffset,d,p).typedBuffer,m,2));break;case"Color":s.ncomp===4?(s.type==="F32"&&(b=new at(t,s.byteOffset,d,p)),s.type==="U8"&&(b=new nt(t,s.byteOffset,d,p)),s.type==="U16"&&(b=new ot(t,s.byteOffset,d,p))):s.ncomp===3&&(s.type==="F32"&&(b=new z(t,s.byteOffset,d,p)),s.type==="U8"&&(b=new lt(t,s.byteOffset,d,p)),s.type==="U16"&&(b=new ct(t,s.byteOffset,d,p))),b==null?this._dbg(2,"[Unsupported Feature] Unsupported view for Color ("+s+")"):h=new I(b.typedBuffer,m,s.ncomp);break;case"FeatureIndex":break;default:this._dbg(2,"[Unsupported Feature] Unsupported semantic ("+c.sem+"). Skipping vertex attribute.")}}catch(w){this._dbg(2,"Error Creating buffer ("+w+"). Skipping vertex attribute.")}}if(e.index){const u=e.index.view,c=void 0,s=u.byteOffset+u.byteCount;switch(e.index.view.type){case"U16":g=new me(t,u.byteOffset,c,s);break;case"U32":g=new ue(t,u.byteOffset,c,s);break;default:this._dbg(3,"[Unsupported Feature] index type not supported ("+u.type+").")}}if(g==null&&n!=null){const u=n.count;if(u<65535){const c=new Uint16Array(u);g=new me(c.buffer)}else{const c=new Uint32Array(u);g=new ue(c.buffer)}for(let c=0;c<u;c++)g.set(c,c)}return{positionView:n,positionAttr:o,colorAttr:h,texCoord0Attr:l,indicesView:g,normalsView:i,normalsAttr:y}}_loadModifications(){if(this.removeHandles("modifications"),this.layer.modifications==null)return void(this._modifications=[]);const e=this.layer.modifications;this.addHandles(this._updatingHandles.addOnCollectionChange(()=>e,()=>this._modifications=e.toArray(),F),"modifications")}_deletePerObjectData(e){var t;(t=this._wasm)==null||t.onRenderableEvicted(this,e.handle,e.usedMemory),this.freeRenderable(e.handle)}_dbg(e,t){this._dbgFlags.has(e)&&(e===3?pe.getLogger(this).error(t):pe.getLogger(this).warn(t))}};T([S()],C.prototype,"fullOpacity",null),T([S({type:[Mt]})],C.prototype,"_modifications",void 0),T([S()],C.prototype,"_visibleGeometryChangedSchedulerHandle",void 0),T([S()],C.prototype,"layer",void 0),T([S({readOnly:!0})],C.prototype,"visibleAtCurrentScale",null),T([S()],C.prototype,"elevationOffset",null),C=T([yt("esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D")],C);const is=C,ye=O();function It(e,t){const a=ft(e);return gt(ye,a.center,t),a.center=ye,a}function kt(e){return e?new mt(e.center,e.halfSize,pt(...e.quaternion)):null}export{is as default};
