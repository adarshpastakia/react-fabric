import{r as t,bz as c,b4 as m}from"./iframe-DpfJK_wQ.js";function B(e){return/^\d+$/.test(e)?"".concat(e,"px"):e}function y(){}var R=function(){return R=Object.assign||function(e){for(var d,a=1,o=arguments.length;a<o;a++){d=arguments[a];for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(e[u]=d[u])}return e},R.apply(this,arguments)};function te(e,d){var a=e.width,o=a===void 0?"100%":a,u=e.height,C=u===void 0?"100%":u,j=e.value,v=j===void 0?null:j,D=e.defaultValue,G=D===void 0?"":D,N=e.language,s=N===void 0?"javascript":N,S=e.theme,h=S===void 0?null:S,L=e.options,M=L===void 0?{}:L,P=e.overrideServices,J=P===void 0?{}:P,F=e.editorWillMount,K=F===void 0?y:F,H=e.editorDidMount,Q=H===void 0?y:H,$=e.editorWillUnmount,X=$===void 0?y:$,I=e.onChange,T=I===void 0?y:I,k=e.className,g=k===void 0?null:k,U=e.original,E=U===void 0?null:U,i=e.originalUri,O=e.modifiedUri,b=t.useRef(null),r=t.useRef(null),V=t.useRef(null),w=t.useRef(null),q=B(o),z=B(C),Y=t.useMemo(function(){return{width:q,height:z}},[q,z]);t.useImperativeHandle(d,function(){return{get editor(){return r.current}}});var Z=function(){var n=K(m);return n||{}},ee=function(){Q(r.current,m);var n=r.current.getModel().modified;V.current=n.onDidChangeContent(function(l){w.current||T(n.getValue(),l)})},f=function(){X(r.current,m)},x=function(){var n=v??G,l=i==null?void 0:i(m),_=O==null?void 0:O(m),W=l&&c.getModel(l),A=_&&c.getModel(_);W?(W.setValue(E),c.setModelLanguage(W,s)):W=c.createModel(n,s,l),A?(W.setValue(n),c.setModelLanguage(A,s)):A=c.createModel(n,s,_),r.current.setModel({original:W,modified:A})};return t.useEffect(function(){b.current&&(Z(),r.current=c.createDiffEditor(b.current,R(R(R({},g?{extraEditorClassName:g}:{}),M),h?{theme:h}:{}),J),x(),ee())},[]),t.useEffect(function(){r.current&&r.current.updateOptions(R(R({},g?{extraEditorClassName:g}:{}),M))},[g,M]),t.useEffect(function(){r.current&&r.current.layout()},[o,C]),t.useEffect(function(){if(r.current){var n=r.current.getModel(),l=n.original,_=n.modified;c.setModelLanguage(l,s),c.setModelLanguage(_,s)}},[s]),t.useEffect(function(){if(r.current){var n=r.current.getModel().modified;w.current=!0,r.current.getModifiedEditor().pushUndoStop(),n.pushEditOperations([],[{range:n.getFullModelRange(),text:v}]),r.current.getModifiedEditor().pushUndoStop(),w.current=!1}},[v]),t.useEffect(function(){c.setTheme(h)},[h]),t.useEffect(function(){if(r.current){var n=r.current.getModel().original;E!==n.getValue()&&n.setValue(E)}},[E]),t.useEffect(function(){return function(){if(r.current){f(),r.current.dispose();var n=r.current.getModel(),l=n.original,_=n.modified;l&&l.dispose(),_&&_.dispose()}V.current&&V.current.dispose()}},[]),t.createElement("div",{ref:b,style:Y,className:"react-monaco-editor-container"})}var re=t.forwardRef(te);re.displayName="MonacoDiffEditor";var p=function(){return p=Object.assign||function(e){for(var d,a=1,o=arguments.length;a<o;a++){d=arguments[a];for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(e[u]=d[u])}return e},p.apply(this,arguments)},ne=function(e,d){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&d.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)d.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(a[o[u]]=e[o[u]]);return a};function ie(e,d){var a=e.width,o=a===void 0?"100%":a,u=e.height,C=u===void 0?"100%":u,j=e.value,v=j===void 0?null:j,D=e.defaultValue,G=D===void 0?"":D,N=e.language,s=N===void 0?"javascript":N,S=e.theme,h=S===void 0?null:S,L=e.options,M=L===void 0?{}:L,P=e.overrideServices,J=P===void 0?{}:P,F=e.editorWillMount,K=F===void 0?y:F,H=e.editorDidMount,Q=H===void 0?y:H,$=e.editorWillUnmount,X=$===void 0?y:$,I=e.onChange,T=I===void 0?y:I,k=e.className,g=k===void 0?null:k,U=e.uri,E=t.useRef(null),i=t.useRef(null),O=t.useRef(null),b=t.useRef(null),r=B(o),V=B(C),w=t.useRef(T);w.current=T,t.useImperativeHandle(d,function(){return{get editor(){return i.current}}});var q=t.useMemo(function(){return{width:r,height:V}},[r,V]),z=function(){var f=K(m);return f||{}},Y=function(){Q(i.current,m),O.current=i.current.onDidChangeModelContent(function(f){var x;b.current||(x=w.current)===null||x===void 0||x.call(w,i.current.getValue(),f)})},Z=function(){X(i.current,m)},ee=function(){var f=v!==null?v:G;if(E.current){var x=p(p({},M),z()),n=U==null?void 0:U(m),l=n&&c.getModel(n);l?(l.setValue(f),c.setModelLanguage(l,s)):l=c.createModel(f,s,n),i.current=c.create(E.current,p(p(p({model:l},g?{extraEditorClassName:g}:{}),x),h?{theme:h}:{}),J),Y()}};return t.useEffect(ee,[]),t.useEffect(function(){if(i.current&&v!==null){if(v===i.current.getValue())return;var f=i.current.getModel();b.current=!0,i.current.pushUndoStop(),f.pushEditOperations([],[{range:f.getFullModelRange(),text:v}],void 0),i.current.pushUndoStop(),b.current=!1}},[v]),t.useEffect(function(){if(i.current){var f=i.current.getModel();c.setModelLanguage(f,s)}},[s]),t.useEffect(function(){if(i.current){M.model;var f=ne(M,["model"]);i.current.updateOptions(p(p({},g?{extraEditorClassName:g}:{}),f))}},[g,M]),t.useEffect(function(){i.current&&i.current.layout()},[o,C]),t.useEffect(function(){c.setTheme(h)},[h]),t.useEffect(function(){return function(){i.current&&(Z(),i.current.dispose()),O.current&&O.current.dispose()}},[]),t.createElement("div",{ref:E,style:q,className:"react-monaco-editor-container"})}var oe=t.forwardRef(ie);oe.displayName="MonacoEditor";export{oe as M};
