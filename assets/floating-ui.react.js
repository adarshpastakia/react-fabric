import{r as i,bD as Yt,bE as Qe,bF as hn,bG as vn,bH as Rn,bI as yn,bJ as Xt,bK as Tt,bL as st,j as ce,bM as Jt,bN as xn}from"./iframe-DC4r-n7i.js";function Ze(){return typeof window<"u"}function et(e){return Qt(e)?(e.nodeName||"").toLowerCase():"#document"}function Oe(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function En(e){var t;return(t=(Qt(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Qt(e){return Ze()?e instanceof Node||e instanceof Oe(e).Node:!1}function de(e){return Ze()?e instanceof Element||e instanceof Oe(e).Element:!1}function pe(e){return Ze()?e instanceof HTMLElement||e instanceof Oe(e).HTMLElement:!1}function bt(e){return!Ze()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Oe(e).ShadowRoot}function wn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ut(e){return["html","body","#document"].includes(et(e))}function Zt(e){return Oe(e).getComputedStyle(e)}function In(e){if(et(e)==="html")return e;const t=e.assignedSlot||e.parentNode||bt(e)&&e.host||En(e);return bt(t)?t.host:t}const kt=Math.floor;function en(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function tn(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function nn(){return/apple/i.test(navigator.vendor)}function ht(){const e=/android/i;return e.test(en())||e.test(tn())}function Cn(){return en().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function rn(){return tn().includes("jsdom/")}const St="data-floating-ui-focusable",Tn="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",it="ArrowLeft",ct="ArrowRight",kn="ArrowUp",Sn="ArrowDown";function he(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function ue(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&bt(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Ee(e){return"composedPath"in e?e.composedPath()[0]:e.target}function lt(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Mn(e){return e.matches("html,body")}function me(e){return(e==null?void 0:e.ownerDocument)||document}function yt(e){return pe(e)&&e.matches(Tn)}function vt(e){return e?e.getAttribute("role")==="combobox"&&yt(e):!1}function On(e){if(!e||rn())return!0;try{return e.matches(":focus-visible")}catch{return!0}}function Rt(e){return e?e.hasAttribute(St)?e:e.querySelector("["+St+"]")||e:null}function Se(e,t,n){n===void 0&&(n=!0);let r=e.filter(u=>{var o;return u.parentId===t&&((o=u.context)==null?void 0:o.open)}),s=r;for(;s.length;)s=n?e.filter(u=>{var o;return(o=s)==null?void 0:o.some(l=>{var h;return u.parentId===l.id&&((h=u.context)==null?void 0:h.open)})}):e,r=r.concat(s);return r}function An(e,t){let n,r=-1;function s(u,o){o>r&&(n=u,r=o),Se(e,u).forEach(h=>{s(h.id,o+1)})}return s(t,0),e.find(u=>u.id===n)}function Mt(e,t){var n;let r=[],s=(n=e.find(u=>u.id===t))==null?void 0:n.parentId;for(;s;){const u=e.find(o=>o.id===s);s=u==null?void 0:u.parentId,u&&(r=r.concat(u))}return r}function re(e){e.preventDefault(),e.stopPropagation()}function Pn(e){return"nativeEvent"in e}function on(e){return e.mozInputSource===0&&e.isTrusted?!0:ht()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function sn(e){return rn()?!1:!ht()&&e.width===0&&e.height===0||ht()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Ot(e,t){return["mouse","pen"].includes(e)}var Q=typeof document<"u"?i.useLayoutEffect:i.useEffect;const Dn={...Yt};function ve(e){const t=i.useRef(e);return Q(()=>{t.current=e}),t}const Fn=Dn.useInsertionEffect,Ln=Fn||(e=>e());function oe(e){const t=i.useRef(()=>{});return Ln(()=>{t.current=e}),i.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Be(e,t,n){return Math.floor(e/t)!==n}function Fe(e,t){return t<0||t>=e.current.length}function at(e,t){return ie(e,{disabledIndices:t})}function At(e,t){return ie(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function ie(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:s,amount:u=1}=t===void 0?{}:t,o=n;do o+=r?-u:u;while(o>=0&&o<=e.current.length-1&&Ue(e,o,s));return o}function _n(e,t){let{event:n,orientation:r,loop:s,rtl:u,cols:o,disabledIndices:l,minIndex:h,maxIndex:f,prevIndex:d,stopEvent:y=!1}=t,b=d;if(n.key===kn){if(y&&re(n),d===-1)b=f;else if(b=ie(e,{startingIndex:b,amount:o,decrement:!0,disabledIndices:l}),s&&(d-o<h||b<0)){const a=d%o,g=f%o,c=f-(g-a);g===a?b=f:b=g>a?c:c-o}Fe(e,b)&&(b=d)}if(n.key===Sn&&(y&&re(n),d===-1?b=h:(b=ie(e,{startingIndex:d,amount:o,disabledIndices:l}),s&&d+o>f&&(b=ie(e,{startingIndex:d%o-o,amount:o,disabledIndices:l}))),Fe(e,b)&&(b=d)),r==="both"){const a=kt(d/o);n.key===(u?it:ct)&&(y&&re(n),d%o!==o-1?(b=ie(e,{startingIndex:d,disabledIndices:l}),s&&Be(b,o,a)&&(b=ie(e,{startingIndex:d-d%o-1,disabledIndices:l}))):s&&(b=ie(e,{startingIndex:d-d%o-1,disabledIndices:l})),Be(b,o,a)&&(b=d)),n.key===(u?ct:it)&&(y&&re(n),d%o!==0?(b=ie(e,{startingIndex:d,decrement:!0,disabledIndices:l}),s&&Be(b,o,a)&&(b=ie(e,{startingIndex:d+(o-d%o),decrement:!0,disabledIndices:l}))):s&&(b=ie(e,{startingIndex:d+(o-d%o),decrement:!0,disabledIndices:l})),Be(b,o,a)&&(b=d));const g=kt(f/o)===a;Fe(e,b)&&(s&&g?b=n.key===(u?ct:it)?f:ie(e,{startingIndex:d-d%o-1,disabledIndices:l}):b=d)}return b}function Nn(e,t,n){const r=[];let s=0;return e.forEach((u,o)=>{let{width:l,height:h}=u,f=!1;for(n&&(s=0);!f;){const d=[];for(let y=0;y<l;y++)for(let b=0;b<h;b++)d.push(s+y+b*t);s%t+l<=t&&d.every(y=>r[y]==null)?(d.forEach(y=>{r[y]=o}),f=!0):s++}}),[...r]}function Kn(e,t,n,r,s){if(e===-1)return-1;const u=n.indexOf(e),o=t[e];switch(s){case"tl":return u;case"tr":return o?u+o.width-1:u;case"bl":return o?u+(o.height-1)*r:u;case"br":return n.lastIndexOf(e)}}function $n(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}function Ue(e,t,n){if(typeof n=="function")return n(t);if(n)return n.includes(t);const r=e.current[t];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}const _e=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function un(e,t){const n=Qe(e,_e()),r=n.length;if(r===0)return;const s=he(me(e)),u=n.indexOf(s),o=u===-1?t===1?0:r-1:u+t;return n[o]}function cn(e){return un(me(e).body,1)||e}function ln(e){return un(me(e).body,-1)||e}function Le(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!ue(n,r)}function Wn(e){Qe(e,_e()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Pt(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}var ze=typeof document<"u"?i.useLayoutEffect:i.useEffect;function Ye(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ye(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const u=s[r];if(!(u==="_owner"&&e.$$typeof)&&!Ye(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}function an(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Dt(e,t){const n=an(e);return Math.round(t*n)/n}function ft(e){const t=i.useRef(e);return ze(()=>{t.current=e}),t}function Vn(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:u,floating:o}={},transform:l=!0,whileElementsMounted:h,open:f}=e,[d,y]=i.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[b,a]=i.useState(r);Ye(b,r)||a(r);const[g,c]=i.useState(null),[x,S]=i.useState(null),R=i.useCallback(p=>{p!==F.current&&(F.current=p,c(p))},[]),v=i.useCallback(p=>{p!==_.current&&(_.current=p,S(p))},[]),w=u||g,H=o||x,F=i.useRef(null),_=i.useRef(null),$=i.useRef(d),Y=h!=null,M=ft(h),B=ft(s),W=ft(f),U=i.useCallback(()=>{if(!F.current||!_.current)return;const p={placement:t,strategy:n,middleware:b};B.current&&(p.platform=B.current),yn(F.current,_.current,p).then(E=>{const N={...E,isPositioned:W.current!==!1};T.current&&!Ye($.current,N)&&($.current=N,Xt.flushSync(()=>{y(N)}))})},[b,t,n,B,W]);ze(()=>{f===!1&&$.current.isPositioned&&($.current.isPositioned=!1,y(p=>({...p,isPositioned:!1})))},[f]);const T=i.useRef(!1);ze(()=>(T.current=!0,()=>{T.current=!1}),[]),ze(()=>{if(w&&(F.current=w),H&&(_.current=H),w&&H){if(M.current)return M.current(w,H,U);U()}},[w,H,U,M,Y]);const m=i.useMemo(()=>({reference:F,floating:_,setReference:R,setFloating:v}),[R,v]),D=i.useMemo(()=>({reference:w,floating:H}),[w,H]),L=i.useMemo(()=>{const p={position:n,left:0,top:0};if(!D.floating)return p;const E=Dt(D.floating,d.x),N=Dt(D.floating,d.y);return l?{...p,transform:"translate("+E+"px, "+N+"px)",...an(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:E,top:N}},[n,l,D.floating,d.x,d.y]);return i.useMemo(()=>({...d,update:U,refs:m,elements:D,floatingStyles:L}),[d,U,m,D,L])}const jn=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Tt({element:r.current,padding:s}).fn(n):{}:r?Tt({element:r,padding:s}).fn(n):{}}}},dr=(e,t)=>({...Rn(e),options:[e,t]}),mr=(e,t)=>({...hn(e),options:[e,t]}),gr=(e,t)=>({...vn(e),options:[e,t]}),pr=(e,t)=>({...jn(e),options:[e,t]}),Bn="data-floating-ui-focusable",Ft="active",Lt="selected",Ne="ArrowLeft",Ke="ArrowRight",fn="ArrowUp",tt="ArrowDown",Hn={...Yt};let _t=!1,Gn=0;const Nt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Gn++;function qn(){const[e,t]=i.useState(()=>_t?Nt():void 0);return Q(()=>{e==null&&t(Nt())},[]),i.useEffect(()=>{_t=!0},[]),e}const Un=Hn.useId,xt=Un||qn,br=i.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:u,shift:o}},width:l=14,height:h=7,tipRadius:f=0,strokeWidth:d=0,staticOffset:y,stroke:b,d:a,style:{transform:g,...c}={},...x}=t,S=xt(),[R,v]=i.useState(!1);if(Q(()=>{if(!s)return;Zt(s).direction==="rtl"&&v(!0)},[s]),!s)return null;const[w,H]=r.split("-"),F=w==="top"||w==="bottom";let _=y;(F&&o!=null&&o.x||!F&&o!=null&&o.y)&&(_=null);const $=d*2,Y=$/2,M=l/2*(f/-8+1),B=h/2*f/4,W=!!a,U=_&&H==="end"?"bottom":"top";let T=_&&H==="end"?"right":"left";_&&R&&(T=H==="end"?"left":"right");const m=(u==null?void 0:u.x)!=null?_||u.x:"",D=(u==null?void 0:u.y)!=null?_||u.y:"",L=a||"M0,0"+(" H"+l)+(" L"+(l-M)+","+(h-B))+(" Q"+l/2+","+h+" "+M+","+(h-B))+" Z",p={top:W?"rotate(180deg)":"",left:W?"rotate(90deg)":"rotate(-90deg)",bottom:W?"":"rotate(180deg)",right:W?"rotate(-90deg)":"rotate(90deg)"}[w];return ce.jsxs("svg",{...x,"aria-hidden":!0,ref:n,width:W?l:l+$,height:l,viewBox:"0 0 "+l+" "+(h>l?h:l),style:{position:"absolute",pointerEvents:"none",[T]:m,[U]:D,[w]:F||W?"100%":"calc(100% - "+$/2+"px)",transform:[p,g].filter(E=>!!E).join(" "),...c},children:[$>0&&ce.jsx("path",{clipPath:"url(#"+S+")",fill:"none",stroke:b,strokeWidth:$+(a?0:1),d:L}),ce.jsx("path",{stroke:$&&!a?x.fill:"none",d:L}),ce.jsx("clipPath",{id:S,children:ce.jsx("rect",{x:-Y,y:Y*(W?-1:1),width:l+$,height:l})})]})});function zn(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const Yn=i.createContext(null),Xn=i.createContext(null),dn=()=>{var e;return((e=i.useContext(Yn))==null?void 0:e.id)||null},nt=()=>i.useContext(Xn);function Me(e){return"data-floating-ui-"+e}function Xe(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}let Kt=0;function Ce(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=t;r&&cancelAnimationFrame(Kt);const u=()=>e==null?void 0:e.focus({preventScroll:n});s?u():Kt=requestAnimationFrame(u)}function Jn(e){return(e==null?void 0:e.ownerDocument)||document}let ke=new WeakMap,He=new WeakSet,Ge={},dt=0;const Qn=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,mn=e=>e&&(e.host||mn(e.parentNode)),Zn=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=mn(n);return e.contains(r)?r:null}).filter(n=>n!=null);function er(e,t,n,r){const s="data-floating-ui-inert",u=r?"inert":n?"aria-hidden":null,o=Zn(t,e),l=new Set,h=new Set(o),f=[];Ge[s]||(Ge[s]=new WeakMap);const d=Ge[s];o.forEach(y),b(t),l.clear();function y(a){!a||l.has(a)||(l.add(a),a.parentNode&&y(a.parentNode))}function b(a){!a||h.has(a)||[].forEach.call(a.children,g=>{if(et(g)!=="script")if(l.has(g))b(g);else{const c=u?g.getAttribute(u):null,x=c!==null&&c!=="false",S=ke.get(g)||0,R=u?S+1:S,v=(d.get(g)||0)+1;ke.set(g,R),d.set(g,v),f.push(g),R===1&&x&&He.add(g),v===1&&g.setAttribute(s,""),!x&&u&&g.setAttribute(u,u==="inert"?"":"true")}})}return dt++,()=>{f.forEach(a=>{const g=ke.get(a)||0,c=u?g-1:g,x=(d.get(a)||0)-1;ke.set(a,c),d.set(a,x),c||(!He.has(a)&&u&&a.removeAttribute(u),He.delete(a)),x||a.removeAttribute(s)}),dt--,dt||(ke=new WeakMap,ke=new WeakMap,He=new WeakSet,Ge={})}}function $t(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=Jn(e[0]).body;return er(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const rt={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Je=i.forwardRef(function(t,n){const[r,s]=i.useState();Q(()=>{nn()&&s("button")},[]);const u={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Me("focus-guard")]:"",style:rt};return ce.jsx("span",{...t,...u})}),gn=i.createContext(null),Wt=Me("portal");function tr(e){e===void 0&&(e={});const{id:t,root:n}=e,r=xt(),s=pn(),[u,o]=i.useState(null),l=i.useRef(null);return Q(()=>()=>{u==null||u.remove(),queueMicrotask(()=>{l.current=null})},[u]),Q(()=>{if(!r||l.current)return;const h=t?document.getElementById(t):null;if(!h)return;const f=document.createElement("div");f.id=r,f.setAttribute(Wt,""),h.appendChild(f),l.current=f,o(f)},[t,r]),Q(()=>{if(n===null||!r||l.current)return;let h=n||(s==null?void 0:s.portalNode);h&&!de(h)&&(h=h.current),h=h||document.body;let f=null;t&&(f=document.createElement("div"),f.id=t,h.appendChild(f));const d=document.createElement("div");d.id=r,d.setAttribute(Wt,""),h=f||h,h.appendChild(d),l.current=d,o(d)},[t,n,r,s]),u}function hr(e){const{children:t,id:n,root:r,preserveTabOrder:s=!0}=e,u=tr({id:n,root:r}),[o,l]=i.useState(null),h=i.useRef(null),f=i.useRef(null),d=i.useRef(null),y=i.useRef(null),b=o==null?void 0:o.modal,a=o==null?void 0:o.open,g=!!o&&!o.modal&&o.open&&s&&!!(r||u);return i.useEffect(()=>{if(!u||!s||b)return;function c(x){u&&Le(x)&&(x.type==="focusin"?Pt:Wn)(u)}return u.addEventListener("focusin",c,!0),u.addEventListener("focusout",c,!0),()=>{u.removeEventListener("focusin",c,!0),u.removeEventListener("focusout",c,!0)}},[u,s,b]),i.useEffect(()=>{u&&(a||Pt(u))},[a,u]),ce.jsxs(gn.Provider,{value:i.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:h,afterOutsideRef:f,beforeInsideRef:d,afterInsideRef:y,portalNode:u,setFocusManagerState:l}),[s,u]),children:[g&&u&&ce.jsx(Je,{"data-type":"outside",ref:h,onFocus:c=>{if(Le(c,u)){var x;(x=d.current)==null||x.focus()}else{const S=o?o.domReference:null,R=ln(S);R==null||R.focus()}}}),g&&u&&ce.jsx("span",{"aria-owns":u.id,style:rt}),u&&Xt.createPortal(t,u),g&&u&&ce.jsx(Je,{"data-type":"outside",ref:f,onFocus:c=>{if(Le(c,u)){var x;(x=y.current)==null||x.focus()}else{const S=o?o.domReference:null,R=cn(S);R==null||R.focus(),o!=null&&o.closeOnFocusOut&&(o==null||o.onOpenChange(!1,c.nativeEvent,"focus-out"))}}})]})}const pn=()=>i.useContext(gn);function Vt(e){return i.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const nr=20;let Te=[];function rr(e){Te=Te.filter(t=>t.isConnected),e&&et(e)!=="body"&&(Te.push(e),Te.length>nr&&(Te=Te.slice(-20)))}function jt(){return Te.slice().reverse().find(e=>e.isConnected)}function or(e){const t=_e();return Jt(e,t)?e:Qe(e,t)[0]||e}function Bt(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const r=_e(),u=xn(e,r).filter(l=>{const h=l.getAttribute("data-tabindex")||"";return Jt(l,r)||l.hasAttribute("data-tabindex")&&!h.startsWith("-")}),o=e.getAttribute("tabindex");t.current.includes("floating")||u.length===0?o!=="0"&&e.setAttribute("tabindex","0"):(o!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const sr=i.forwardRef(function(t,n){return ce.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:rt})});function vr(e){const{context:t,children:n,disabled:r=!1,order:s=["content"],guards:u=!0,initialFocus:o=0,returnFocus:l=!0,restoreFocus:h=!1,modal:f=!0,visuallyHiddenDismiss:d=!1,closeOnFocusOut:y=!0,outsideElementsInert:b=!1,getInsideElements:a=()=>[]}=e,{open:g,onOpenChange:c,events:x,dataRef:S,elements:{domReference:R,floating:v}}=t,w=oe(()=>{var A;return(A=S.current.floatingContext)==null?void 0:A.nodeId}),H=oe(a),F=typeof o=="number"&&o<0,_=vt(R)&&F,$=Qn(),Y=$?u:!0,M=!Y||$&&b,B=ve(s),W=ve(o),U=ve(l),T=nt(),m=pn(),D=i.useRef(null),L=i.useRef(null),p=i.useRef(!1),E=i.useRef(!1),N=i.useRef(-1),ee=m!=null,k=Rt(v),fe=oe(function(A){return A===void 0&&(A=k),A?Qe(A,_e()):[]}),se=oe(A=>{const K=fe(A);return B.current.map(P=>R&&P==="reference"?R:k&&P==="floating"?k:K).filter(Boolean).flat()});i.useEffect(()=>{if(r||!f)return;function A(P){if(P.key==="Tab"){ue(k,he(me(k)))&&fe().length===0&&!_&&re(P);const O=se(),ne=Ee(P);B.current[0]==="reference"&&ne===R&&(re(P),P.shiftKey?Ce(O[O.length-1]):Ce(O[1])),B.current[1]==="floating"&&ne===k&&P.shiftKey&&(re(P),Ce(O[0]))}}const K=me(k);return K.addEventListener("keydown",A),()=>{K.removeEventListener("keydown",A)}},[r,R,k,f,B,_,fe,se]),i.useEffect(()=>{if(r||!v)return;function A(K){const P=Ee(K),ne=fe().indexOf(P);ne!==-1&&(N.current=ne)}return v.addEventListener("focusin",A),()=>{v.removeEventListener("focusin",A)}},[r,v,fe]),i.useEffect(()=>{if(r||!y)return;function A(){E.current=!0,setTimeout(()=>{E.current=!1})}function K(P){const O=P.relatedTarget,ne=P.currentTarget;queueMicrotask(()=>{const Z=w(),ae=!(ue(R,O)||ue(v,O)||ue(O,v)||ue(m==null?void 0:m.portalNode,O)||O!=null&&O.hasAttribute(Me("focus-guard"))||T&&(Se(T.nodesRef.current,Z).find(J=>{var V,z;return ue((V=J.context)==null?void 0:V.elements.floating,O)||ue((z=J.context)==null?void 0:z.elements.domReference,O)})||Mt(T.nodesRef.current,Z).find(J=>{var V,z,Ae;return[(V=J.context)==null?void 0:V.elements.floating,Rt((z=J.context)==null?void 0:z.elements.floating)].includes(O)||((Ae=J.context)==null?void 0:Ae.elements.domReference)===O})));if(ne===R&&k&&Bt(k,B),h&&ae&&he(me(k))===me(k).body){pe(k)&&k.focus();const J=N.current,V=fe(),z=V[J]||V[V.length-1]||k;pe(z)&&z.focus()}if(S.current.insideReactTree){S.current.insideReactTree=!1;return}(_||!f)&&O&&ae&&!E.current&&O!==jt()&&(p.current=!0,c(!1,P,"focus-out"))})}if(v&&pe(R))return R.addEventListener("focusout",K),R.addEventListener("pointerdown",A),v.addEventListener("focusout",K),()=>{R.removeEventListener("focusout",K),R.removeEventListener("pointerdown",A),v.removeEventListener("focusout",K)}},[r,R,v,k,f,T,m,c,y,h,fe,_,w,B,S]);const be=i.useRef(null),X=i.useRef(null),le=Vt([be,m==null?void 0:m.beforeInsideRef]),Re=Vt([X,m==null?void 0:m.afterInsideRef]);i.useEffect(()=>{var A,K;if(r||!v)return;const P=Array.from((m==null||(A=m.portalNode)==null?void 0:A.querySelectorAll("["+Me("portal")+"]"))||[]),O=T?Mt(T.nodesRef.current,w()):[],ne=T&&!f?O.map(V=>{var z;return(z=V.context)==null?void 0:z.elements.floating}):[],Z=(K=O.find(V=>{var z;return vt(((z=V.context)==null?void 0:z.elements.domReference)||null)}))==null||(K=K.context)==null?void 0:K.elements.domReference,ae=[v,Z,...P,...ne,...H(),D.current,L.current,be.current,X.current,m==null?void 0:m.beforeOutsideRef.current,m==null?void 0:m.afterOutsideRef.current,B.current.includes("reference")||_?R:null].filter(V=>V!=null),J=f||_?$t(ae,!M,M):$t(ae);return()=>{J()}},[r,R,v,f,B,m,_,Y,M,T,w,H]),Q(()=>{if(r||!pe(k))return;const A=me(k),K=he(A);queueMicrotask(()=>{const P=se(k),O=W.current,ne=(typeof O=="number"?P[O]:O.current)||k,Z=ue(k,K);!F&&!Z&&g&&Ce(ne,{preventScroll:ne===k})})},[r,g,k,F,se,W]),Q(()=>{if(r||!k)return;const A=me(k),K=he(A);rr(K);function P(Z){let{reason:ae,event:J,nested:V}=Z;if(["hover","safe-polygon"].includes(ae)&&J.type==="mouseleave"&&(p.current=!0),ae==="outside-press")if(V)p.current=!1;else if(on(J)||sn(J))p.current=!1;else{let z=!1;document.createElement("div").focus({get preventScroll(){return z=!0,!1}}),z?p.current=!1:p.current=!0}}x.on("openchange",P);const O=A.createElement("span");O.setAttribute("tabindex","-1"),O.setAttribute("aria-hidden","true"),Object.assign(O.style,rt),ee&&R&&R.insertAdjacentElement("afterend",O);function ne(){if(typeof U.current=="boolean"){const Z=R||jt();return Z&&Z.isConnected?Z:O}return U.current.current||O}return()=>{x.off("openchange",P);const Z=he(A),ae=ue(v,Z)||T&&Se(T.nodesRef.current,w()).some(V=>{var z;return ue((z=V.context)==null?void 0:z.elements.floating,Z)}),J=ne();queueMicrotask(()=>{const V=or(J);U.current&&!p.current&&pe(V)&&(!(V!==Z&&Z!==A.body)||ae)&&V.focus({preventScroll:!0}),O.remove()})}},[r,v,k,U,S,x,T,ee,R,w]),i.useEffect(()=>{queueMicrotask(()=>{p.current=!1})},[r]),Q(()=>{if(!r&&m)return m.setFocusManagerState({modal:f,closeOnFocusOut:y,open:g,onOpenChange:c,domReference:R}),()=>{m.setFocusManagerState(null)}},[r,m,f,g,c,y,R]),Q(()=>{r||k&&Bt(k,B)},[r,k,B]);function we(A){return r||!d||!f?null:ce.jsx(sr,{ref:A==="start"?D:L,onClick:K=>c(!1,K.nativeEvent),children:typeof d=="string"?d:"Dismiss"})}const ye=!r&&Y&&(f?!_:!0)&&(ee||f);return ce.jsxs(ce.Fragment,{children:[ye&&ce.jsx(Je,{"data-type":"inside",ref:le,onFocus:A=>{if(f){const P=se();Ce(s[0]==="reference"?P[0]:P[P.length-1])}else if(m!=null&&m.preserveTabOrder&&m.portalNode)if(p.current=!1,Le(A,m.portalNode)){const P=cn(R);P==null||P.focus()}else{var K;(K=m.beforeOutsideRef.current)==null||K.focus()}}}),!_&&we("start"),n,we("end"),ye&&ce.jsx(Je,{"data-type":"inside",ref:Re,onFocus:A=>{if(f)Ce(se()[0]);else if(m!=null&&m.preserveTabOrder&&m.portalNode)if(y&&(p.current=!0),Le(A,m.portalNode)){const P=ln(R);P==null||P.focus()}else{var K;(K=m.afterOutsideRef.current)==null||K.focus()}}})]})}function Ht(e){return pe(e.target)&&e.target.tagName==="BUTTON"}function ur(e){return pe(e.target)&&e.target.tagName==="A"}function Gt(e){return yt(e)}function Rr(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:u}}=e,{enabled:o=!0,event:l="click",toggle:h=!0,ignoreMouse:f=!1,keyboardHandlers:d=!0,stickIfOpen:y=!0}=t,b=i.useRef(),a=i.useRef(!1),g=i.useMemo(()=>({onPointerDown(c){b.current=c.pointerType},onMouseDown(c){const x=b.current;c.button===0&&l!=="click"&&(Ot(x)&&f||(n&&h&&(!(s.current.openEvent&&y)||s.current.openEvent.type==="mousedown")?r(!1,c.nativeEvent,"click"):(c.preventDefault(),r(!0,c.nativeEvent,"click"))))},onClick(c){const x=b.current;if(l==="mousedown"&&b.current){b.current=void 0;return}Ot(x)&&f||(n&&h&&(!(s.current.openEvent&&y)||s.current.openEvent.type==="click")?r(!1,c.nativeEvent,"click"):r(!0,c.nativeEvent,"click"))},onKeyDown(c){b.current=void 0,!(c.defaultPrevented||!d||Ht(c))&&(c.key===" "&&!Gt(u)&&(c.preventDefault(),a.current=!0),!ur(c)&&c.key==="Enter"&&r(!(n&&h),c.nativeEvent,"click"))},onKeyUp(c){c.defaultPrevented||!d||Ht(c)||Gt(u)||c.key===" "&&a.current&&(a.current=!1,r(!(n&&h),c.nativeEvent,"click"))}}),[s,u,l,f,d,r,n,y,h]);return i.useMemo(()=>o?{reference:g}:{},[o,g])}const ir={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},cr={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},qt=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function yr(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:s,dataRef:u}=e,{enabled:o=!0,escapeKey:l=!0,outsidePress:h=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:y="pointerdown",ancestorScroll:b=!1,bubbles:a,capture:g}=t,c=nt(),x=oe(typeof h=="function"?h:()=>!1),S=typeof h=="function"?x:h,R=i.useRef(!1),{escapeKey:v,outsidePress:w}=qt(a),{escapeKey:H,outsidePress:F}=qt(g),_=i.useRef(!1),$=i.useRef(-1),Y=oe(m=>{var D;if(!n||!o||!l||m.key!=="Escape"||_.current)return;const L=(D=u.current.floatingContext)==null?void 0:D.nodeId,p=c?Se(c.nodesRef.current,L):[];if(!v&&(m.stopPropagation(),p.length>0)){let E=!0;if(p.forEach(N=>{var ee;if((ee=N.context)!=null&&ee.open&&!N.context.dataRef.current.__escapeKeyBubbles){E=!1;return}}),!E)return}r(!1,Pn(m)?m.nativeEvent:m,"escape-key")}),M=oe(m=>{var D;const L=()=>{var p;Y(m),(p=Ee(m))==null||p.removeEventListener("keydown",L)};(D=Ee(m))==null||D.addEventListener("keydown",L)}),B=oe(m=>{var D;const L=u.current.insideReactTree;u.current.insideReactTree=!1;const p=R.current;if(R.current=!1,f==="click"&&p||L||typeof S=="function"&&!S(m))return;const E=Ee(m),N="["+Me("inert")+"]",ee=me(s.floating).querySelectorAll(N);let k=de(E)?E:null;for(;k&&!ut(k);){const X=In(k);if(ut(X)||!de(X))break;k=X}if(ee.length&&de(E)&&!Mn(E)&&!ue(E,s.floating)&&Array.from(ee).every(X=>!ue(k,X)))return;if(pe(E)&&T){const X=ut(E),le=Zt(E),Re=/auto|scroll/,we=X||Re.test(le.overflowX),ye=X||Re.test(le.overflowY),A=we&&E.clientWidth>0&&E.scrollWidth>E.clientWidth,K=ye&&E.clientHeight>0&&E.scrollHeight>E.clientHeight,P=le.direction==="rtl",O=K&&(P?m.offsetX<=E.offsetWidth-E.clientWidth:m.offsetX>E.clientWidth),ne=A&&m.offsetY>E.clientHeight;if(O||ne)return}const fe=(D=u.current.floatingContext)==null?void 0:D.nodeId,se=c&&Se(c.nodesRef.current,fe).some(X=>{var le;return lt(m,(le=X.context)==null?void 0:le.elements.floating)});if(lt(m,s.floating)||lt(m,s.domReference)||se)return;const be=c?Se(c.nodesRef.current,fe):[];if(be.length>0){let X=!0;if(be.forEach(le=>{var Re;if((Re=le.context)!=null&&Re.open&&!le.context.dataRef.current.__outsidePressBubbles){X=!1;return}}),!X)return}r(!1,m,"outside-press")}),W=oe(m=>{var D;const L=()=>{var p;B(m),(p=Ee(m))==null||p.removeEventListener(f,L)};(D=Ee(m))==null||D.addEventListener(f,L)});i.useEffect(()=>{if(!n||!o)return;u.current.__escapeKeyBubbles=v,u.current.__outsidePressBubbles=w;let m=-1;function D(ee){r(!1,ee,"ancestor-scroll")}function L(){window.clearTimeout(m),_.current=!0}function p(){m=window.setTimeout(()=>{_.current=!1},wn()?5:0)}const E=me(s.floating);l&&(E.addEventListener("keydown",H?M:Y,H),E.addEventListener("compositionstart",L),E.addEventListener("compositionend",p)),S&&E.addEventListener(f,F?W:B,F);let N=[];return b&&(de(s.domReference)&&(N=st(s.domReference)),de(s.floating)&&(N=N.concat(st(s.floating))),!de(s.reference)&&s.reference&&s.reference.contextElement&&(N=N.concat(st(s.reference.contextElement)))),N=N.filter(ee=>{var k;return ee!==((k=E.defaultView)==null?void 0:k.visualViewport)}),N.forEach(ee=>{ee.addEventListener("scroll",D,{passive:!0})}),()=>{l&&(E.removeEventListener("keydown",H?M:Y,H),E.removeEventListener("compositionstart",L),E.removeEventListener("compositionend",p)),S&&E.removeEventListener(f,F?W:B,F),N.forEach(ee=>{ee.removeEventListener("scroll",D)}),window.clearTimeout(m)}},[u,s,l,S,f,n,r,b,o,v,w,Y,H,M,B,F,W]),i.useEffect(()=>{u.current.insideReactTree=!1},[u,S,f]);const U=i.useMemo(()=>({onKeyDown:Y,...d&&{[ir[y]]:m=>{r(!1,m.nativeEvent,"reference-press")},...y!=="click"&&{onClick(m){r(!1,m.nativeEvent,"reference-press")}}}}),[Y,r,d,y]),T=i.useMemo(()=>({onKeyDown:Y,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[cr[f]]:()=>{u.current.insideReactTree=!0},onBlurCapture(){Xe($),u.current.insideReactTree=!0,$.current=window.setTimeout(()=>{u.current.insideReactTree=!1})}}),[Y,f,u]);return i.useMemo(()=>o?{reference:U,floating:T}:{},[o,U,T])}function lr(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=xt(),u=i.useRef({}),[o]=i.useState(()=>zn()),l=dn()!=null,[h,f]=i.useState(r.reference),d=oe((a,g,c)=>{u.current.openEvent=a?g:void 0,o.emit("openchange",{open:a,event:g,reason:c,nested:l}),n==null||n(a,g,c)}),y=i.useMemo(()=>({setPositionReference:f}),[]),b=i.useMemo(()=>({reference:h||r.reference||null,floating:r.floating||null,domReference:r.reference}),[h,r.reference,r.floating]);return i.useMemo(()=>({dataRef:u,open:t,onOpenChange:d,elements:b,events:o,floatingId:s,refs:y}),[t,d,b,o,s,y])}function xr(e){e===void 0&&(e={});const{nodeId:t}=e,n=lr({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[u,o]=i.useState(null),[l,h]=i.useState(null),d=(s==null?void 0:s.domReference)||u,y=i.useRef(null),b=nt();Q(()=>{d&&(y.current=d)},[d]);const a=Vn({...e,elements:{...s,...l&&{reference:l}}}),g=i.useCallback(v=>{const w=de(v)?{getBoundingClientRect:()=>v.getBoundingClientRect(),getClientRects:()=>v.getClientRects(),contextElement:v}:v;h(w),a.refs.setReference(w)},[a.refs]),c=i.useCallback(v=>{(de(v)||v===null)&&(y.current=v,o(v)),(de(a.refs.reference.current)||a.refs.reference.current===null||v!==null&&!de(v))&&a.refs.setReference(v)},[a.refs]),x=i.useMemo(()=>({...a.refs,setReference:c,setPositionReference:g,domReference:y}),[a.refs,c,g]),S=i.useMemo(()=>({...a.elements,domReference:d}),[a.elements,d]),R=i.useMemo(()=>({...a,...r,refs:x,elements:S,nodeId:t}),[a,x,S,t,r]);return Q(()=>{r.dataRef.current.floatingContext=R;const v=b==null?void 0:b.nodesRef.current.find(w=>w.id===t);v&&(v.context=R)}),i.useMemo(()=>({...a,context:R,refs:x,elements:S}),[a,x,S,R])}function mt(){return Cn()&&nn()}function Er(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:s,dataRef:u,elements:o}=e,{enabled:l=!0,visibleOnly:h=!0}=t,f=i.useRef(!1),d=i.useRef(-1),y=i.useRef(!0);i.useEffect(()=>{if(!l)return;const a=Oe(o.domReference);function g(){!n&&pe(o.domReference)&&o.domReference===he(me(o.domReference))&&(f.current=!0)}function c(){y.current=!0}function x(){y.current=!1}return a.addEventListener("blur",g),mt()&&(a.addEventListener("keydown",c,!0),a.addEventListener("pointerdown",x,!0)),()=>{a.removeEventListener("blur",g),mt()&&(a.removeEventListener("keydown",c,!0),a.removeEventListener("pointerdown",x,!0))}},[o.domReference,n,l]),i.useEffect(()=>{if(!l)return;function a(g){let{reason:c}=g;(c==="reference-press"||c==="escape-key")&&(f.current=!0)}return s.on("openchange",a),()=>{s.off("openchange",a)}},[s,l]),i.useEffect(()=>()=>{Xe(d)},[]);const b=i.useMemo(()=>({onMouseLeave(){f.current=!1},onFocus(a){if(f.current)return;const g=Ee(a.nativeEvent);if(h&&de(g)){if(mt()&&!a.relatedTarget){if(!y.current&&!yt(g))return}else if(!On(g))return}r(!0,a.nativeEvent,"focus")},onBlur(a){f.current=!1;const g=a.relatedTarget,c=a.nativeEvent,x=de(g)&&g.hasAttribute(Me("focus-guard"))&&g.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var S;const R=he(o.domReference?o.domReference.ownerDocument:document);!g&&R===o.domReference||ue((S=u.current.floatingContext)==null?void 0:S.refs.floating.current,R)||ue(o.domReference,R)||x||r(!1,c,"focus")})}}),[u,o.domReference,r,h]);return i.useMemo(()=>l?{reference:b}:{},[l,b])}function gt(e,t,n){const r=new Map,s=n==="item";let u=e;if(s&&e){const{[Ft]:o,[Lt]:l,...h}=e;u=h}return{...n==="floating"&&{tabIndex:-1,[Bn]:""},...u,...t.map(o=>{const l=o?o[n]:null;return typeof l=="function"?e?l(e):null:l}).concat(e).reduce((o,l)=>(l&&Object.entries(l).forEach(h=>{let[f,d]=h;if(!(s&&[Ft,Lt].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof d=="function"){var y;(y=r.get(f))==null||y.push(d),o[f]=function(){for(var b,a=arguments.length,g=new Array(a),c=0;c<a;c++)g[c]=arguments[c];return(b=r.get(f))==null?void 0:b.map(x=>x(...g)).find(x=>x!==void 0)}}}else o[f]=d}),o),{})}}function wr(e){e===void 0&&(e=[]);const t=e.map(l=>l==null?void 0:l.reference),n=e.map(l=>l==null?void 0:l.floating),r=e.map(l=>l==null?void 0:l.item),s=i.useCallback(l=>gt(l,e,"reference"),t),u=i.useCallback(l=>gt(l,e,"floating"),n),o=i.useCallback(l=>gt(l,e,"item"),r);return i.useMemo(()=>({getReferenceProps:s,getFloatingProps:u,getItemProps:o}),[s,u,o])}const ar="Escape";function ot(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function qe(e,t){return ot(t,e===fn||e===tt,e===Ne||e===Ke)}function pt(e,t,n){return ot(t,e===tt,n?e===Ne:e===Ke)||e==="Enter"||e===" "||e===""}function Ut(e,t,n){return ot(t,n?e===Ne:e===Ke,e===tt)}function zt(e,t,n,r){const s=n?e===Ke:e===Ne,u=e===fn;return t==="both"||t==="horizontal"&&r&&r>1?e===ar:ot(t,s,u)}function Ir(e,t){const{open:n,onOpenChange:r,elements:s,floatingId:u}=e,{listRef:o,activeIndex:l,onNavigate:h=()=>{},enabled:f=!0,selectedIndex:d=null,allowEscape:y=!1,loop:b=!1,nested:a=!1,rtl:g=!1,virtual:c=!1,focusItemOnOpen:x="auto",focusItemOnHover:S=!0,openOnArrowKeyDown:R=!0,disabledIndices:v=void 0,orientation:w="vertical",parentOrientation:H,cols:F=1,scrollItemIntoView:_=!0,virtualItemRef:$,itemSizes:Y,dense:M=!1}=t,B=Rt(s.floating),W=ve(B),U=dn(),T=nt();Q(()=>{e.dataRef.current.orientation=w},[e,w]);const m=oe(()=>{h(p.current===-1?null:p.current)}),D=vt(s.domReference),L=i.useRef(x),p=i.useRef(d??-1),E=i.useRef(null),N=i.useRef(!0),ee=i.useRef(m),k=i.useRef(!!s.floating),fe=i.useRef(n),se=i.useRef(!1),be=i.useRef(!1),X=ve(v),le=ve(n),Re=ve(_),we=ve(d),[ye,A]=i.useState(),[K,P]=i.useState(),O=oe(()=>{function C(q){if(c){var te;(te=q.id)!=null&&te.endsWith("-fui-option")&&(q.id=u+"-"+Math.random().toString(16).slice(2,10)),A(q.id),T==null||T.events.emit("virtualfocus",q),$&&($.current=q)}else Ce(q,{sync:se.current,preventScroll:!0})}const j=o.current[p.current],I=be.current;j&&C(j),(se.current?q=>q():requestAnimationFrame)(()=>{const q=o.current[p.current]||j;if(!q)return;j||C(q);const te=Re.current;te&&Z&&(I||!N.current)&&(q.scrollIntoView==null||q.scrollIntoView(typeof te=="boolean"?{block:"nearest",inline:"nearest"}:te))})});Q(()=>{f&&(n&&s.floating?L.current&&d!=null&&(be.current=!0,p.current=d,m()):k.current&&(p.current=-1,ee.current()))},[f,n,s.floating,d,m]),Q(()=>{if(f&&n&&s.floating)if(l==null){if(se.current=!1,we.current!=null)return;if(k.current&&(p.current=-1,O()),(!fe.current||!k.current)&&L.current&&(E.current!=null||L.current===!0&&E.current==null)){let C=0;const j=()=>{o.current[0]==null?(C<2&&(C?requestAnimationFrame:queueMicrotask)(j),C++):(p.current=E.current==null||pt(E.current,w,g)||a?at(o,X.current):At(o,X.current),E.current=null,m())};j()}}else Fe(o,l)||(p.current=l,O(),be.current=!1)},[f,n,s.floating,l,we,a,o,w,g,m,O,X]),Q(()=>{var C;if(!f||s.floating||!T||c||!k.current)return;const j=T.nodesRef.current,I=(C=j.find(te=>te.id===U))==null||(C=C.context)==null?void 0:C.elements.floating,G=he(me(s.floating)),q=j.some(te=>te.context&&ue(te.context.elements.floating,G));I&&!q&&N.current&&I.focus({preventScroll:!0})},[f,s.floating,T,U,c]),Q(()=>{if(!f||!T||!c||U)return;function C(j){P(j.id),$&&($.current=j)}return T.events.on("virtualfocus",C),()=>{T.events.off("virtualfocus",C)}},[f,T,c,U,$]),Q(()=>{ee.current=m,fe.current=n,k.current=!!s.floating}),Q(()=>{n||(E.current=null,L.current=x)},[n,x]);const ne=l!=null,Z=i.useMemo(()=>{function C(I){if(!le.current)return;const G=o.current.indexOf(I);G!==-1&&p.current!==G&&(p.current=G,m())}return{onFocus(I){let{currentTarget:G}=I;se.current=!0,C(G)},onClick:I=>{let{currentTarget:G}=I;return G.focus({preventScroll:!0})},...S&&{onMouseMove(I){let{currentTarget:G}=I;se.current=!0,be.current=!1,C(G)},onPointerLeave(I){let{pointerType:G}=I;if(!(!N.current||G==="touch")&&(se.current=!0,p.current=-1,m(),!c)){var q;(q=W.current)==null||q.focus({preventScroll:!0})}}}}},[le,W,S,o,m,c]),ae=i.useCallback(()=>{var C;return H??(T==null||(C=T.nodesRef.current.find(j=>j.id===U))==null||(C=C.context)==null||(C=C.dataRef)==null?void 0:C.current.orientation)},[U,T,H]),J=oe(C=>{if(N.current=!1,se.current=!0,C.which===229||!le.current&&C.currentTarget===W.current)return;if(a&&zt(C.key,w,g,F)){qe(C.key,ae())||re(C),r(!1,C.nativeEvent,"list-navigation"),pe(s.domReference)&&(c?T==null||T.events.emit("virtualfocus",s.domReference):s.domReference.focus());return}const j=p.current,I=at(o,v),G=At(o,v);if(D||(C.key==="Home"&&(re(C),p.current=I,m()),C.key==="End"&&(re(C),p.current=G,m())),F>1){const q=Y||Array.from({length:o.current.length},()=>({width:1,height:1})),te=Nn(q,F,M),Pe=te.findIndex(ge=>ge!=null&&!Ue(o,ge,v)),$e=te.reduce((ge,Ie,We)=>Ie!=null&&!Ue(o,Ie,v)?We:ge,-1),De=te[_n({current:te.map(ge=>ge!=null?o.current[ge]:null)},{event:C,orientation:w,loop:b,rtl:g,cols:F,disabledIndices:$n([...(typeof v!="function"?v:null)||o.current.map((ge,Ie)=>Ue(o,Ie,v)?Ie:void 0),void 0],te),minIndex:Pe,maxIndex:$e,prevIndex:Kn(p.current>G?I:p.current,q,te,F,C.key===tt?"bl":C.key===(g?Ne:Ke)?"tr":"tl"),stopEvent:!0})];if(De!=null&&(p.current=De,m()),w==="both")return}if(qe(C.key,w)){if(re(C),n&&!c&&he(C.currentTarget.ownerDocument)===C.currentTarget){p.current=pt(C.key,w,g)?I:G,m();return}pt(C.key,w,g)?b?p.current=j>=G?y&&j!==o.current.length?-1:I:ie(o,{startingIndex:j,disabledIndices:v}):p.current=Math.min(G,ie(o,{startingIndex:j,disabledIndices:v})):b?p.current=j<=I?y&&j!==-1?o.current.length:G:ie(o,{startingIndex:j,decrement:!0,disabledIndices:v}):p.current=Math.max(I,ie(o,{startingIndex:j,decrement:!0,disabledIndices:v})),Fe(o,p.current)&&(p.current=-1),m()}}),V=i.useMemo(()=>c&&n&&ne&&{"aria-activedescendant":K||ye},[c,n,ne,K,ye]),z=i.useMemo(()=>({"aria-orientation":w==="both"?void 0:w,...D?{}:V,onKeyDown:J,onPointerMove(){N.current=!0}}),[V,J,w,D]),Ae=i.useMemo(()=>{function C(I){x==="auto"&&on(I.nativeEvent)&&(L.current=!0)}function j(I){L.current=x,x==="auto"&&sn(I.nativeEvent)&&(L.current=!0)}return{...V,onKeyDown(I){N.current=!1;const G=I.key.startsWith("Arrow"),q=["Home","End"].includes(I.key),te=G||q,Pe=Ut(I.key,w,g),$e=zt(I.key,w,g,F),De=Ut(I.key,ae(),g),ge=qe(I.key,w),Ie=(a?De:ge)||I.key==="Enter"||I.key.trim()==="";if(c&&n){const Ve=T==null?void 0:T.nodesRef.current.find(je=>je.parentId==null),xe=T&&Ve?An(T.nodesRef.current,Ve.id):null;if(te&&xe&&$){const je=new KeyboardEvent("keydown",{key:I.key,bubbles:!0});if(Pe||$e){var We,Et;const bn=((We=xe.context)==null?void 0:We.elements.domReference)===I.currentTarget,It=$e&&!bn?(Et=xe.context)==null?void 0:Et.elements.domReference:Pe?o.current.find(Ct=>(Ct==null?void 0:Ct.id)===ye):null;It&&(re(I),It.dispatchEvent(je),P(void 0))}if((ge||q)&&xe.context&&xe.context.open&&xe.parentId&&I.currentTarget!==xe.context.elements.domReference){var wt;re(I),(wt=xe.context.elements.domReference)==null||wt.dispatchEvent(je);return}}return J(I)}if(!(!n&&!R&&G)){if(Ie){const Ve=qe(I.key,ae());E.current=a&&Ve?null:I.key}if(a){De&&(re(I),n?(p.current=at(o,X.current),m()):r(!0,I.nativeEvent,"list-navigation"));return}ge&&(d!=null&&(p.current=d),re(I),!n&&R?r(!0,I.nativeEvent,"list-navigation"):J(I),n&&m())}},onFocus(){n&&!c&&(p.current=-1,m())},onPointerDown:j,onPointerEnter:j,onMouseDown:C,onClick:C}},[ye,V,F,J,X,x,o,a,m,r,n,R,w,ae,g,d,T,c,$]);return i.useMemo(()=>f?{reference:Ae,floating:z,item:Z}:{},[f,Ae,z,Z])}function Cr(e,t){var n;const{open:r,dataRef:s}=e,{listRef:u,activeIndex:o,onMatch:l,onTypingChange:h,enabled:f=!0,findMatch:d=null,resetMs:y=750,ignoreKeys:b=[],selectedIndex:a=null}=t,g=i.useRef(-1),c=i.useRef(""),x=i.useRef((n=a??o)!=null?n:-1),S=i.useRef(null),R=oe(l),v=oe(h),w=ve(d),H=ve(b);Q(()=>{r&&(Xe(g),S.current=null,c.current="")},[r]),Q(()=>{if(r&&c.current===""){var M;x.current=(M=a??o)!=null?M:-1}},[r,a,o]);const F=oe(M=>{M?s.current.typing||(s.current.typing=M,v(M)):s.current.typing&&(s.current.typing=M,v(M))}),_=oe(M=>{function B(D,L,p){const E=w.current?w.current(L,p):L.find(N=>(N==null?void 0:N.toLocaleLowerCase().indexOf(p.toLocaleLowerCase()))===0);return E?D.indexOf(E):-1}const W=u.current;if(c.current.length>0&&c.current[0]!==" "&&(B(W,W,c.current)===-1?F(!1):M.key===" "&&re(M)),W==null||H.current.includes(M.key)||M.key.length!==1||M.ctrlKey||M.metaKey||M.altKey)return;r&&M.key!==" "&&(re(M),F(!0)),W.every(D=>{var L,p;return D?((L=D[0])==null?void 0:L.toLocaleLowerCase())!==((p=D[1])==null?void 0:p.toLocaleLowerCase()):!0})&&c.current===M.key&&(c.current="",x.current=S.current),c.current+=M.key,Xe(g),g.current=window.setTimeout(()=>{c.current="",x.current=S.current,F(!1)},y);const T=x.current,m=B(W,[...W.slice((T||0)+1),...W.slice(0,(T||0)+1)],c.current);m!==-1?(R(m),S.current=m):M.key!==" "&&(c.current="",F(!1))}),$=i.useMemo(()=>({onKeyDown:_}),[_]),Y=i.useMemo(()=>({onKeyDown:_,onKeyUp(M){M.key===" "&&F(!1)}}),[_,F]);return i.useMemo(()=>f?{reference:$,floating:Y}:{},[f,$,Y])}export{hr as F,xr as a,Rr as b,yr as c,Ir as d,Cr as e,gr as f,wr as g,vr as h,pr as i,Er as j,br as k,dr as o,mr as s,nt as u};
