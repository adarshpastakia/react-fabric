import{e as f}from"./Lyr3DModule.js";import"./iframe-DwvN93Ge.js";import"./ShadowCastClear.glsl.js";import"./index.js";import"./Viewport.js";import"./Section.js";import"./ErrorBoundary.js";import"./createClass.js";import"./Global.js";import"./useIsDark.js";import"./debounce.js";import"./index2.js";let o,r;async function j(t){await c();const s={status:1,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]};if(t.inputs.length<1)return{result:s,transferList:[]};const n={ptrs:[],sizes:[]};for(const e of t.inputs){const l=r._malloc(e.byteLength);new Uint8Array(r.HEAPU8.buffer,l,e.byteLength).set(new Uint8Array(e)),n.ptrs.push(l),n.sizes.push(e.byteLength)}const i=r.process(t.jobDescJson,t.id,n,t.isMissingResourceCase);s.status=i.status,s.missingInputUrls=i.missingInputUrls.slice();const p=i.status===0&&i.data,u=s.status===2&&s.missingInputUrls.length>0;s.jobDescJson=i.jobDescJson.slice(),s.error=i.error.slice(),p?s.data=i.data.slice():u&&(s.originalInputs=t.inputs.slice());for(let e=0;e<n.ptrs.length;++e)r._free(n.ptrs[e]);const a=[];if(p)a.push(s.data.buffer);else if(u)for(const e of t.inputs)a.push(e);return{result:s,transferList:a}}async function A(t){await c(),r.add_spatial_reference_info(t.sr,t.isGCS,t.toMetersXY,t.toMetersZ)}function D(){r&&(r.uninitialize_lyr3d_worker_wasm(),r=null)}function c(){return r?Promise.resolve():(o||(o=f().then(t=>{r=t,r.initialize_lyr3d_worker_wasm(),o=null})),o)}export{A as addSpatialReferenceInfo,D as destroyWasm,c as initialize,j as process};
