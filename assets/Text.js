import{u as _,a as A,_ as W}from"./index2.js";import{_ as I,az as K,r as v,l as P,bm as V,j as l,m as q}from"./iframe-DZ_tjZ0H.js";import{u as B}from"./usePropToggle.js";import{g as S}from"./Tooltip.js";import{a as x}from"./types.js";var u=function(t,e){return getComputedStyle(t).getPropertyValue(e)},F=function(t,e){var r=t.cloneNode(!0);r.style.font=u(e??t,"font"),r.style.width="".concat(t.offsetWidth,"px"),r.style.padding=u(e??t,"padding"),r.style.lineHeight=u(e??t,"line-height"),r.style.letterSpacing=u(e??t,"letter-spacing"),r.style.webkitLineClamp="unset",r.style.position="absolute",r.style.left="-10000%",document.body.appendChild(r);var c=r.offsetHeight;return r.remove(),c},G=["children","className","inline","bg","color","family","size","clamp","align"];function T(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable})),e.push.apply(e,r)}return e}function p(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?T(Object(e),!0).forEach(function(r){W(i,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):T(Object(e)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(e,r))})}return i}var Z=function(t){var e=t.children,r=t.className,c=t.inline,g=t.bg,f=t.color,d=t.family,a=t.size,s=t.clamp,m=t.align,y=I(t,G),C=K("core"),k=C.t,o=v.useRef(null),N=v.useState(!1),j=P(N,2),z=j[0],D=j[1],E=B(!1),h=P(E,3),O=h[0],H=h[1],M=h[2],b=v.useCallback(function(){var n=o.current;n&&V(s)&&s>0&&!M.current&&D(F(n.firstElementChild,n)>n.offsetHeight)},[s]);_(function(){if(o.current){var n=new ResizeObserver(b);return n.observe(o.current),b(),function(){n.disconnect()}}},[e,b],"Text check height");var w=A(function(){var n={};return g&&(n.backgroundColor=S(g)),f&&(n.color=S(f)),m&&(n.textAlign=m),a&&!(a in x)&&(n.fontSize=a),a&&a in x&&(n.fontSize=x[a]),n},[g,f,a,m,d],"Text styles");return c?l.jsx("span",p(p({className:r,style:w},y),{},{children:e})):l.jsxs("article",{className:r,children:[l.jsx("div",{ref:o,style:{"--text-clamp":O?"unset":s??"unset"},children:l.jsx("div",p(p({className:q("fabric-text","mixed-lang px-[2px] whitespace-pre-wrap",d&&"font-".concat(d),s&&"line-clamp-1"),style:w},y),{},{children:e}))}),z&&l.jsx("div",{className:"fabric-moreLink",children:l.jsxs("span",{role:"link",tabIndex:0,"data-inner-clickable":!0,onClick:function(L){return[L.stopPropagation(),H()]},children:["...",k("action.".concat(O?"less":"more"))]})})]})};export{Z as T};
