var Xl=Object.defineProperty;var Gl=(n,e,t)=>e in n?Xl(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var fe=(n,e,t)=>Gl(n,typeof e!="symbol"?e+"":e,t);import{r as z,j as ce,bG as ts}from"./iframe-BcXNitKG.js";function w(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Se=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Yl=Se&&"documentMode"in document?document.documentMode:null,_e=Se&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),je=Se&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Dn=!(!Se||!("InputEvent"in window)||Yl)&&"getTargetRanges"in new window.InputEvent("input"),Yt=Se&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Nt=Se&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ql=Se&&/Android/.test(navigator.userAgent),bo=Se&&/^(?=.*Chrome).*/i.test(navigator.userAgent),ns=Se&&Ql&&bo,$n=Se&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!bo;function In(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}const Zl=1,ea=3,ta=9,na=11,nt=0,ko=1,Et=2,ra=0,ia=1,sa=2,zn=4,Bn=8,di=128,oa=1792|(112|(3|zn|Bn)|di),hi=1,gi=2,pi=3,_i=4,mi=5,yi=6,er=Yt||Nt||$n?" ":"​",ze=`

`,la=je?" ":er,To="֑-߿יִ-﷽ﹰ-ﻼ",wo="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",aa=new RegExp("^[^"+wo+"]*["+To+"]"),ca=new RegExp("^[^"+To+"]*["+wo+"]"),rt={bold:1,capitalize:1024,code:16,highlight:di,italic:2,lowercase:256,strikethrough:zn,subscript:32,superscript:64,underline:Bn,uppercase:512},ua={directionless:1,unmergeable:2},rs={center:gi,end:yi,justify:_i,left:hi,right:pi,start:mi},fa={[gi]:"center",[yi]:"end",[_i]:"justify",[hi]:"left",[pi]:"right",[mi]:"start"},da={normal:0,segmented:2,token:1},ha={[ra]:"normal",[sa]:"segmented",[ia]:"token"},ga="$";function No(n,e,t,r,i,s){let o=n.getFirstChild();for(;o!==null;){const l=o.__key;o.__parent===e&&(v(o)&&No(o,l,t,r,i,s),t.has(l)||s.delete(l),i.push(l)),o=o.getNextSibling()}}const pa=100;let $r=!1,xi=0;function _a(n){xi=n.timeStamp}function xr(n,e,t){const r=n.nodeName==="BR",i=e.__lexicalLineBreak;return i&&(n===i||r&&n.previousSibling===i)||r&&cr(n,t)!==void 0}function ma(n,e,t){const r=ve(ge(t));let i=null,s=null;r!==null&&r.anchorNode===n&&(i=r.anchorOffset,s=r.focusOffset);const o=n.nodeValue;o!==null&&Bi(e,o,i,s,!1)}function ya(n,e,t){if(T(n)){const r=n.anchor.getNode();if(r.is(t)&&n.format!==r.getFormat())return!1}return Re(e)&&t.isAttached()}function xa(n,e,t,r){for(let i=n;i&&!pc(i);i=hn(i)){const s=cr(i,e);if(s!==void 0){const o=Y(s,t);if(o)return B(o)||!U(i)?void 0:[i,o]}else if(i===r)return[r,vl(t)]}}function Eo(n,e,t){$r=!0;const r=performance.now()-xi>pa;try{de(n,()=>{const i=L()||function(f){return f.getEditorState().read(()=>{const g=L();return g!==null?g.clone():null})}(n),s=new Map,o=n.getRootElement(),l=n._editorState,a=n._blockCursorElement;let c=!1,u="";for(let f=0;f<e.length;f++){const g=e[f],h=g.type,p=g.target,_=xa(p,n,l,o);if(!_)continue;const[y,m]=_;if(h==="characterData")r&&P(m)&&Re(p)&&ya(i,p,m)&&ma(p,m,n);else if(h==="childList"){c=!0;const x=g.addedNodes;for(let S=0;S<x.length;S++){const E=x[S],k=yl(E),b=E.parentNode;if(b!=null&&E!==a&&k===null&&!xr(E,b,n)){if(je){const F=(U(E)?E.innerText:null)||E.nodeValue;F&&(u+=F)}b.removeChild(E)}}const C=g.removedNodes,N=C.length;if(N>0){let S=0;for(let E=0;E<N;E++){const k=C[E];(xr(k,p,n)||a===k)&&(p.appendChild(k),S++)}N!==S&&s.set(y,m)}}}if(s.size>0)for(const[f,g]of s)g.reconcileObservedMutation(f,n);const d=t.takeRecords();if(d.length>0){for(let f=0;f<d.length;f++){const g=d[f],h=g.addedNodes,p=g.target;for(let _=0;_<h.length;_++){const y=h[_],m=y.parentNode;m==null||y.nodeName!=="BR"||xr(y,p,n)||m.removeChild(y)}}t.takeRecords()}i!==null&&(c&&ae(i),je&&kl(n)&&i.insertRawText(u))})}finally{$r=!1}}function Po(n){const e=n._observer;e!==null&&Eo(n,e.takeRecords(),e)}function Lo(n){(function(e){xi===0&&ge(e).addEventListener("textInput",_a,!0)})(n),n._observer=new MutationObserver((e,t)=>{Eo(n,e,t)})}let va=class Oo{constructor(e,t=new Map,r=void 0,i=new Map,s=void 0){this.node=e,this.sharedConfigMap=t,this.unknownState=r,this.knownState=i;const o=s!==void 0?s:function(l,a,c){let u=c.size;if(a)for(const d in a){const f=l.get(d);f&&c.has(f)||u++}return u}(t,r,i);this.size=o}getValue(e){const t=this.knownState.get(e);if(t!==void 0)return t;this.sharedConfigMap.set(e.key,e);let r=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){const i=this.unknownState[e.key];i!==void 0&&(r=e.parse(i)),this.updateFromKnown(e,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const e={...this.unknownState};for(const[t,r]of this.knownState)t.isEqual(r,t.defaultValue)?delete e[t.key]:e[t.key]=t.unparse(r);return Sn(e)?{[ga]:e}:{}}getWritable(e){if(this.node===e)return this;const t=new Map(this.knownState),r=Sn(i=this.unknownState)&&{...i};var i;if(r)for(const s of t.keys())delete r[s.key];return new Oo(e,this.sharedConfigMap,Sn(r),t,this.size)}updateFromKnown(e,t){const r=e.key;this.sharedConfigMap.set(r,e);const{knownState:i,unknownState:s}=this;i.has(e)||s&&r in s||this.size++,i.set(e,t)}updateFromUnknown(e,t){const r=this.sharedConfigMap.get(e);r?this.updateFromKnown(r,r.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){const{knownState:t}=this;for(const r of t.keys())t.set(r,r.defaultValue);if(this.size=t.size,this.unknownState={},e)for(const[r,i]of Object.entries(e))this.updateFromUnknown(r,i);this.unknownState=Sn(this.unknownState)}};function Sn(n){if(n)for(const e in n)return n}function Sa(n){const e=n.getWritable(),t=e.__state?e.__state.getWritable(e):new va(e);return e.__state=t,t}function is(n,e){const t=n.__mode,r=n.__format,i=n.__style,s=e.__mode,o=e.__format,l=e.__style,a=n.__state,c=e.__state;return(t===null||t===s)&&(r===null||r===o)&&(i===null||i===l)&&(n.__state===null||a===c||function(u,d){if(u===d)return!0;if(u&&d&&u.size!==d.size)return!1;const f=new Set,g=(p,_)=>{for(const[y,m]of p.knownState){if(f.has(y.key))continue;f.add(y.key);const x=_?_.getValue(y):y.defaultValue;if(x!==m&&!y.isEqual(x,m))return!0}return!1},h=(p,_)=>{const{unknownState:y}=p,m=_?_.unknownState:void 0;if(y){for(const[x,C]of Object.entries(y))if(!f.has(x)&&(f.add(x),C!==(m?m[x]:void 0)))return!0}return!1};return!(u&&g(u,d)||d&&g(d,u)||u&&h(u,d)||d&&h(d,u))}(a,c))}function ss(n,e){const t=n.mergeWithSibling(e),r=J()._normalizedNodes;return r.add(n.__key),r.add(e.__key),t}function os(n){let e,t,r=n;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(e=r.getPreviousSibling())!==null&&P(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(is(e,r)){r=ss(e,r);break}break}e.remove()}for(;(t=r.getNextSibling())!==null&&P(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(is(r,t)){r=ss(r,t);break}break}t.remove()}}else r.remove()}function Pt(n){return ls(n.anchor),ls(n.focus),n}function ls(n){for(;n.type==="element";){const e=n.getNode(),t=n.offset;let r,i;if(t===e.getChildrenSize()?(r=e.getChildAtIndex(t-1),i=!0):(r=e.getChildAtIndex(t),i=!1),P(r)){n.set(r.__key,i?r.getTextContentSize():0,"text",!0);break}if(!v(r))break;n.set(r.__key,i?r.getChildrenSize():0,"element",!0)}}let Ve,ie,Qt,tr,Ir,zr,it,xe,Br,Zt,V="",re="",Ce=null,be="",$e="",Fo=!1,en=!1,On=null;function Wn(n,e){const t=it.get(n);if(e!==null){const r=Kr(n);r.parentNode===e&&e.removeChild(r)}if(xe.has(n)||ie._keyToDOMMap.delete(n),v(t)){const r=Kn(t,it);Wr(r,0,r.length-1,null)}t!==void 0&&Wi(Zt,Qt,tr,t,"destroyed")}function Wr(n,e,t,r){let i=e;for(;i<=t;++i){const s=n[i];s!==void 0&&Wn(s,r)}}function Xe(n,e){n.setProperty("text-align",e)}const Ca="40px";function Ao(n,e){const t=Ve.theme.indent;if(typeof t=="string"){const i=n.classList.contains(t);e>0&&!i?n.classList.add(t):e<1&&i&&n.classList.remove(t)}const r=getComputedStyle(n).getPropertyValue("--lexical-indent-base-value")||Ca;n.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${r})`)}function Mo(n,e){const t=n.style;e===0?Xe(t,""):e===hi?Xe(t,"left"):e===gi?Xe(t,"center"):e===pi?Xe(t,"right"):e===_i?Xe(t,"justify"):e===mi?Xe(t,"start"):e===yi&&Xe(t,"end")}function Rn(n,e){const t=xe.get(n);t===void 0&&w(60);const r=t.createDOM(Ve,ie);if(function(i,s,o){const l=o._keyToDOMMap;(function(a,c,u){const d=`__lexicalKey_${c._key}`;a[d]=u})(s,o,i),l.set(i,s)}(n,r,ie),P(t)?r.setAttribute("data-lexical-text","true"):B(t)&&r.setAttribute("data-lexical-decorator","true"),v(t)){const i=t.__indent,s=t.__size;if(i!==0&&Ao(r,i),s!==0){const l=s-1;(function(a,c,u,d){const f=re;re="",Rr(a,u,0,c,u.getDOMSlot(d)),$o(u,d),re=f})(Kn(t,xe),l,t,r)}const o=t.__format;o!==0&&Mo(r,o),t.isInline()||Do(null,t,r),ur(t)&&(V+=ze,$e+=ze)}else{const i=t.getTextContent();if(B(t)){const s=t.decorate(ie,Ve);s!==null&&Io(n,s),r.contentEditable="false"}else P(t)&&(t.isDirectionless()||(re+=i));V+=i,$e+=i}return e!==null&&e.insertChild(r),Wi(Zt,Qt,tr,t,"created"),r}function Rr(n,e,t,r,i){const s=V;V="";let o=t;for(;o<=r;++o){Rn(n[o],i);const l=xe.get(n[o]);l!==null&&P(l)&&(Ce===null&&(Ce=l.getFormat()),be===""&&(be=l.getStyle()))}ur(e)&&(V+=ze),i.element.__lexicalTextContent=V,V=s+V}function as(n,e){if(n){const t=n.__last;if(t){const r=e.get(t);if(r)return Tt(r)?"line-break":B(r)&&r.isInline()?"decorator":null}return"empty"}return null}function Do(n,e,t){const r=as(n,it),i=as(e,xe);r!==i&&e.getDOMSlot(t).setManagedLineBreak(i)}function $o(n,e){const t=e.__lexicalDirTextContent||"",r=e.__lexicalDir||"";if(t!==re||r!==On){const i=re==="",s=i?On:function(o){return aa.test(o)?"rtl":ca.test(o)?"ltr":null}(re);if(s!==r){const o=e.classList,l=Ve.theme;let a=r!==null?l[r]:void 0,c=s!==null?l[s]:void 0;if(a!==void 0){if(typeof a=="string"){const u=In(a);a=l[r]=u}o.remove(...a)}if(s===null||i&&s==="ltr")e.removeAttribute("dir");else{if(c!==void 0){if(typeof c=="string"){const u=In(c);c=l[s]=u}c!==void 0&&o.add(...c)}e.dir=s}en||(n.getWritable().__dir=s)}On=s,e.__lexicalDirTextContent=re,e.__lexicalDir=s}}function ba(n,e,t){const r=re;var i;re="",Ce=null,be="",function(s,o,l){const a=V,c=s.__size,u=o.__size;V="";const d=l.element;if(c===1&&u===1){const f=s.__first,g=o.__first;if(f===g)Ut(f,d);else{const p=Kr(f),_=Rn(g,null);try{d.replaceChild(_,p)}catch(y){if(typeof y=="object"&&y!=null){const m=`${y.toString()} Parent: ${d.tagName}, new child: {tag: ${_.tagName} key: ${g}}, old child: {tag: ${p.tagName}, key: ${f}}.`;throw new Error(m)}throw y}Wn(f,null)}const h=xe.get(g);P(h)&&(Ce===null&&(Ce=h.getFormat()),be===""&&(be=h.getStyle()))}else{const f=Kn(s,it),g=Kn(o,xe);if(f.length!==c&&w(227),g.length!==u&&w(228),c===0)u!==0&&Rr(g,o,0,u-1,l);else if(u===0){if(c!==0){const h=l.after==null&&l.before==null&&l.element.__lexicalLineBreak==null;Wr(f,0,c-1,h?null:d),h&&(d.textContent="")}}else(function(h,p,_,y,m,x){const C=y-1,N=m-1;let S,E,k=x.getFirstChild(),b=0,F=0;for(;b<=C&&F<=N;){const $=p[b],M=_[F];if($===M)k=vr(Ut(M,x.element)),b++,F++;else{S===void 0&&(S=new Set(p)),E===void 0&&(E=new Set(_));const Q=E.has($),Oe=S.has(M);if(Q)if(Oe){const Fe=Ot(ie,M);Fe===k?k=vr(Ut(M,x.element)):(x.withBefore(k).insertChild(Fe),Ut(M,x.element)),b++,F++}else Rn(M,x.withBefore(k)),F++;else k=vr(Kr($)),Wn($,x.element),b++}const R=xe.get(M);R!==null&&P(R)&&(Ce===null&&(Ce=R.getFormat()),be===""&&(be=R.getStyle()))}const A=b>C,K=F>N;if(A&&!K){const $=_[N+1],M=$===void 0?null:ie.getElementByKey($);Rr(_,h,F,N,x.withBefore(M))}else K&&!A&&Wr(p,b,C,x.element)})(o,f,g,c,u,l)}ur(o)&&(V+=ze),d.__lexicalTextContent=V,V=a+V}(n,e,e.getDOMSlot(t)),$o(e,t),i=e,Ce==null||Ce===i.__textFormat||en||i.setTextFormat(Ce),function(s){be===""||be===s.__textStyle||en||s.setTextStyle(be)}(e),re=r}function Kn(n,e){const t=[];let r=n.__first;for(;r!==null;){const i=e.get(r);i===void 0&&w(101),t.push(r),r=i.__next}return t}function Ut(n,e){const t=it.get(n);let r=xe.get(n);t!==void 0&&r!==void 0||w(61);const i=Fo||zr.has(n)||Ir.has(n),s=Ot(ie,n);if(t===r&&!i){if(v(t)){const o=s.__lexicalTextContent;o!==void 0&&(V+=o,$e+=o);const l=s.__lexicalDirTextContent;l!==void 0&&(re+=l)}else{const o=t.getTextContent();P(t)&&!t.isDirectionless()&&(re+=o),$e+=o,V+=o}return s}if(t!==r&&i&&Wi(Zt,Qt,tr,r,"updated"),r.updateDOM(t,s,Ve)){const o=Rn(n,null);return e===null&&w(62),e.replaceChild(o,s),Wn(n,null),o}if(v(t)&&v(r)){const o=r.__indent;o!==t.__indent&&Ao(s,o);const l=r.__format;l!==t.__format&&Mo(s,l),i&&(ba(t,r,s),te(r)||r.isInline()||Do(t,r,s)),ur(r)&&(V+=ze,$e+=ze)}else{const o=r.getTextContent();if(B(r)){const l=r.decorate(ie,Ve);l!==null&&Io(n,l)}else P(r)&&!r.isDirectionless()&&(re+=o);V+=o,$e+=o}if(!en&&te(r)&&r.__cachedText!==$e){const o=r.getWritable();o.__cachedText=$e,r=o}return s}function Io(n,e){let t=ie._pendingDecorators;const r=ie._decorators;if(t===null){if(r[n]===e)return;t=xl(ie)}t[n]=e}function vr(n){let e=n.nextSibling;return e!==null&&e===ie._blockCursorElement&&(e=e.nextSibling),e}function ka(n,e,t,r,i,s){V="",$e="",re="",Fo=r===Et,On=null,ie=t,Ve=t._config,Qt=t._nodes,tr=ie._listeners.mutation,Ir=i,zr=s,it=n._nodeMap,xe=e._nodeMap,en=e._readOnly,Br=new Map(t._keyToDOMMap);const o=new Map;return Zt=o,Ut("root",null),ie=void 0,Qt=void 0,Ir=void 0,zr=void 0,it=void 0,xe=void 0,Ve=void 0,Br=void 0,Zt=void 0,o}function Kr(n){const e=Br.get(n);return e===void 0&&w(75,n),e}function Mt(n){return{}}const zo={},Ta={},Bo={},Ze={},Ct={},tn={},bt={},vi={},Jr={},nn={},rn={},Je={},Si={},Ci={},wa={},Wo={},Na={},bi={},Ea={},ki={},Ti={},Jn={},wi={},Ro={},Ni={},Ko={},Jo={},Pa={},La={},cs={},Uo={},Oa={},jo={},Vo={},Fa={},nr={},Ei={},Ur={},Aa={},Ma={},Cn={},bn={},Da={},$a={},Ia={},Me=Object.freeze({}),jr=30,Vr=[["keydown",function(n,e){if(qt=n.timeStamp,qr=n.key,e.isComposing())return;const{key:t,shiftKey:r,ctrlKey:i,metaKey:s,altKey:o}=n;if(!O(e,wa,n)&&t!=null){if(Sr&&mt(qr))return de(e,()=>{kn(e,Cr)}),Sr=!1,void(Cr="");if(function(l,a,c,u){return $s(l)&&!a&&!u&&!c}(t,i,o,s))O(e,Wo,n);else if(function(l,a,c,u,d){return $s(l)&&!u&&!c&&(a||d)}(t,i,r,o,s))O(e,Na,n);else if(function(l,a,c,u){return Ds(l)&&!a&&!u&&!c}(t,i,o,s))O(e,bi,n);else if(function(l,a,c,u,d){return Ds(l)&&!u&&!c&&(a||d)}(t,i,r,o,s))O(e,Ea,n);else if(function(l,a,c){return function(u){return u==="ArrowUp"}(l)&&!a&&!c}(t,i,s))O(e,ki,n);else if(function(l,a,c){return function(u){return u==="ArrowDown"}(l)&&!a&&!c}(t,i,s))O(e,Ti,n);else if(function(l,a){return Is(l)&&a}(t,r))Ht=!0,O(e,Jn,n);else if(function(l){return l===" "}(t))O(e,wi,n);else if(function(l,a){return _e&&a&&l.toLowerCase()==="o"}(t,i))n.preventDefault(),Ht=!0,O(e,Ct,!0);else if(function(l,a){return Is(l)&&!a}(t,r))Ht=!1,O(e,Jn,n);else if(function(l,a,c,u){return _e?!a&&!c&&(mt(l)||l.toLowerCase()==="h"&&u):u||a||c?!1:mt(l)}(t,o,s,i))mt(t)?O(e,Ro,n):(n.preventDefault(),O(e,Ze,!0));else if(function(l){return l==="Escape"}(t))O(e,Ni,n);else if(function(l,a,c,u,d){return _e?!(c||u||d)&&(Kt(l)||l.toLowerCase()==="d"&&a):a||u||d?!1:Kt(l)}(t,i,r,o,s))Kt(t)?O(e,Ko,n):(n.preventDefault(),O(e,Ze,!1));else if(function(l,a,c){return mt(l)&&(_e?a:c)}(t,o,i))n.preventDefault(),O(e,nn,!0);else if(function(l,a,c){return Kt(l)&&(_e?a:c)}(t,o,i))n.preventDefault(),O(e,nn,!1);else if(function(l,a){return _e&&a&&mt(l)}(t,s))n.preventDefault(),O(e,rn,!0);else if(function(l,a){return _e&&a&&Kt(l)}(t,s))n.preventDefault(),O(e,rn,!1);else if(function(l,a,c,u){return l.toLowerCase()==="b"&&!a&&jt(c,u)}(t,o,s,i))n.preventDefault(),O(e,Je,"bold");else if(function(l,a,c,u){return l.toLowerCase()==="u"&&!a&&jt(c,u)}(t,o,s,i))n.preventDefault(),O(e,Je,"underline");else if(function(l,a,c,u){return l.toLowerCase()==="i"&&!a&&jt(c,u)}(t,o,s,i))n.preventDefault(),O(e,Je,"italic");else if(function(l,a,c,u){return l==="Tab"&&!a&&!c&&!u}(t,o,i,s))O(e,Jo,n);else if(function(l,a,c,u){return l.toLowerCase()==="z"&&!a&&jt(c,u)}(t,r,s,i))n.preventDefault(),O(e,Si,void 0);else if(function(l,a,c,u){return _e?l.toLowerCase()==="z"&&c&&a:l.toLowerCase()==="y"&&u||l.toLowerCase()==="z"&&u&&a}(t,r,s,i))n.preventDefault(),O(e,Ci,void 0);else{const l=e._editorState._selection;l===null||T(l)?!je&&zs(t,s,i)&&(n.preventDefault(),O(e,Ur,n)):function(a,c,u,d){return c?!1:a.toLowerCase()==="c"?_e?u:d:!1}(t,r,s,i)?(n.preventDefault(),O(e,nr,n)):function(a,c,u,d){return c?!1:a.toLowerCase()==="x"?_e?u:d:!1}(t,r,s,i)?(n.preventDefault(),O(e,Ei,n)):zs(t,s,i)&&(n.preventDefault(),O(e,Ur,n))}(function(l,a,c,u){return l||a||c||u})(i,r,o,s)&&O(e,Ia,n)}}],["pointerdown",function(n,e){const t=n.target,r=n.pointerType;$t(t)&&r!=="touch"&&n.button===0&&de(e,()=>{B(Be(t))||(Xr=!0)})}],["compositionstart",function(n,e){de(e,()=>{const t=L();if(T(t)&&!e.isComposing()){const r=t.anchor,i=t.anchor.getNode();Z(r.key),(n.timeStamp<qt+jr||r.type==="element"||!t.isCollapsed()||i.getFormat()!==t.format||P(i)&&i.getStyle()!==t.style)&&O(e,bt,la)}})}],["compositionend",function(n,e){je?Rt=!0:Nt||!Yt&&!$n?de(e,()=>{kn(e,n.data)}):(Sr=!0,Cr=n.data)}],["input",function(n,e){n.stopPropagation(),de(e,()=>{const t=L(),r=n.data,i=Yo(n);if(r!=null&&T(t)&&Xo(t,i,r,n.timeStamp,!1)){Rt&&(kn(e,r),Rt=!1);const s=t.anchor.getNode(),o=ve(ge(e));if(o===null)return;const l=t.isBackward(),a=l?t.anchor.offset:t.focus.offset,c=l?t.focus.offset:t.anchor.offset;Dn&&!t.isCollapsed()&&P(s)&&o.anchorNode!==null&&s.getTextContent().slice(0,a)+r+s.getTextContent().slice(a+c)===bl(o.anchorNode)||O(e,bt,r);const u=r.length;je&&u>1&&n.inputType==="insertCompositionText"&&!e.isComposing()&&(t.anchor.offset-=u),Yt||Nt||$n||!e.isComposing()||(qt=0,Z(null))}else zi(!1,e,r!==null?r:void 0),Rt&&(kn(e,r||void 0),Rt=!1);(function(){ee();const s=J();Po(s)})()},{event:n}),vt=null}],["click",function(n,e){de(e,()=>{const t=L(),r=ve(ge(e)),i=Dt();if(r){if(T(t)){const s=t.anchor,o=s.getNode();if(s.type==="element"&&s.offset===0&&t.isCollapsed()&&!te(o)&&j().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&i!==null&&t.is(i))r.removeAllRanges(),t.dirty=!0;else if(n.detail===3&&!t.isCollapsed()&&o!==t.focus.getNode()){const l=function(a,c){let u=a;for(;u!==j()&&u!=null;){if(c(u))return u;u=u.getParent()}return null}(o,a=>v(a)&&!a.isInline());v(l)&&l.select(0)}}else if(n.pointerType==="touch"){const s=r.anchorNode;(U(s)||Re(s))&&ae(sr(i,r,e,n))}}O(e,Bo,n)})}],["cut",Me],["copy",Me],["dragstart",Me],["dragover",Me],["dragend",Me],["paste",Me],["focus",Me],["blur",Me],["drop",Me]];Dn&&Vr.push(["beforeinput",(n,e)=>function(t,r){const i=t.inputType,s=Yo(t);i==="deleteCompositionText"||je&&kl(r)||i!=="insertCompositionText"&&de(r,()=>{const o=L();if(i==="deleteContentBackward"){if(o===null){const g=Dt();if(!T(g))return;ae(g.clone())}if(T(o)){const g=o.anchor.key===o.focus.key;if(l=t.timeStamp,qr==="MediaLast"&&l<qt+jr&&r.isComposing()&&g){if(Z(null),qt=0,setTimeout(()=>{de(r,()=>{Z(null)})},jr),T(o)){const h=o.anchor.getNode();h.markDirty(),P(h)||w(142),Go(o,h)}}else{Z(null),t.preventDefault();const h=o.anchor.getNode(),p=h.getTextContent(),_=h.canInsertTextAfter(),y=o.anchor.offset===0&&o.focus.offset===p.length;let m=ns&&g&&!y&&_;if(m&&o.isCollapsed()&&(m=!B(Zr(o.anchor,!0))),!m){O(r,Ze,!0);const x=L();ns&&T(x)&&x.isCollapsed()&&(Ge=x,setTimeout(()=>Ge=null))}}return}}var l;if(!T(o))return;const a=t.data;vt!==null&&zi(!1,r,vt),o.dirty&&vt===null||!o.isCollapsed()||te(o.anchor.getNode())||s===null||o.applyDOMRange(s),vt=null;const c=o.anchor,u=o.focus,d=c.getNode(),f=u.getNode();if(i!=="insertText"&&i!=="insertTranspose")switch(t.preventDefault(),i){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":O(r,bt,t);break;case"insertFromComposition":Z(null),O(r,bt,t);break;case"insertLineBreak":Z(null),O(r,Ct,!1);break;case"insertParagraph":Z(null),Ht&&!Nt?(Ht=!1,O(r,Ct,!1)):O(r,tn,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":O(r,vi,t);break;case"deleteByComposition":(function(g,h){return g!==h||v(g)||v(h)||!g.isToken()||!h.isToken()})(d,f)&&O(r,Jr,t);break;case"deleteByDrag":case"deleteByCut":O(r,Jr,t);break;case"deleteContent":O(r,Ze,!1);break;case"deleteWordBackward":O(r,nn,!0);break;case"deleteWordForward":O(r,nn,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":O(r,rn,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":O(r,rn,!1);break;case"formatStrikeThrough":O(r,Je,"strikethrough");break;case"formatBold":O(r,Je,"bold");break;case"formatItalic":O(r,Je,"italic");break;case"formatUnderline":O(r,Je,"underline");break;case"historyUndo":O(r,Si,void 0);break;case"historyRedo":O(r,Ci,void 0)}else{if(a===`
`)t.preventDefault(),O(r,Ct,!1);else if(a===ze)t.preventDefault(),O(r,tn,void 0);else if(a==null&&t.dataTransfer){const g=t.dataTransfer.getData("text/plain");t.preventDefault(),o.insertRawText(g)}else a!=null&&Xo(o,s,a,t.timeStamp,!0)?(t.preventDefault(),O(r,bt,a)):vt=a;qo=t.timeStamp}})}(n,e)]);let qt=0,qr=null,qo=0,vt=null;const Un=new WeakMap;let Hr=!1,Xr=!1,Ht=!1,Rt=!1,Sr=!1,Cr="",Ge=null,Ho=[0,"",0,"root",0];function Xo(n,e,t,r,i){const s=n.anchor,o=n.focus,l=s.getNode(),a=J(),c=ve(ge(a)),u=c!==null?c.anchorNode:null,d=s.key,f=a.getElementByKey(d),g=t.length;return d!==o.key||!P(l)||(!i&&(!Dn||qo<r+50)||l.isDirty()&&g<2||Sl(t))&&s.offset!==o.offset&&!l.isComposing()||Ye(l)||l.isDirty()&&g>1||(i||!Dn)&&f!==null&&!l.isComposing()&&u!==Lt(f)||c!==null&&e!==null&&(!e.collapsed||e.startContainer!==c.anchorNode||e.startOffset!==c.anchorOffset)||l.getFormat()!==n.format||l.getStyle()!==n.style||function(h,p){if(p.isSegmented())return!0;if(!h.isCollapsed())return!1;const _=h.anchor.offset,y=p.getParentOrThrow(),m=p.isToken();return _===0?!p.canInsertTextBefore()||!y.canInsertTextBefore()&&!p.isComposing()||m||function(x){const C=x.getPreviousSibling();return(P(C)||v(C)&&C.isInline())&&!C.canInsertTextAfter()}(p):_===p.getTextContentSize()&&(!p.canInsertTextAfter()||!y.canInsertTextAfter()&&!p.isComposing()||m)}(n,l)}function us(n,e){return Re(n)&&n.nodeValue!==null&&e!==0&&e!==n.nodeValue.length}function fs(n,e,t){const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}=n;Hr&&(Hr=!1,us(r,i)&&us(s,o)&&!Ge)||de(e,()=>{if(!t)return void ae(null);if(!dn(e,r,s))return;let l=L();if(Ge&&T(l)&&l.isCollapsed()){const a=l.anchor,c=Ge.anchor;(a.key===c.key&&a.offset===c.offset+1||a.offset===1&&c.getNode().is(a.getNode().getPreviousSibling()))&&(l=Ge.clone(),ae(l))}if(Ge=null,T(l)){const a=l.anchor,c=a.getNode();if(l.isCollapsed()){n.type==="Range"&&n.anchorNode===n.focusNode&&(l.dirty=!0);const u=ge(e).event,d=u?u.timeStamp:performance.now(),[f,g,h,p,_]=Ho,y=j(),m=e.isComposing()===!1&&y.getTextContent()==="";if(d<_+200&&a.offset===h&&a.key===p)Fn(l,f,g);else if(a.type==="text")P(c)||w(141),Go(l,c);else if(a.type==="element"&&!m){v(c)||w(259);const x=a.getNode();x.isEmpty()?function(C,N){const S=N.getTextFormat(),E=N.getTextStyle();Fn(C,S,E)}(l,x):Fn(l,0,"")}}else{const u=a.key,d=l.focus.key,f=l.getNodes(),g=f.length,h=l.isBackward(),p=h?o:i,_=h?i:o,y=h?d:u,m=h?u:d;let x=oa,C=!1;for(let N=0;N<g;N++){const S=f[N],E=S.getTextContentSize();if(P(S)&&E!==0&&!(N===0&&S.__key===y&&p===E||N===g-1&&S.__key===m&&_===0)&&(C=!0,x&=S.getFormat(),x===0))break}l.format=C?x:0}}O(e,zo,void 0)})}function Fn(n,e,t){n.format===e&&n.style===t||(n.format=e,n.style=t,n.dirty=!0)}function Go(n,e){Fn(n,e.getFormat(),e.getStyle())}function Yo(n){if(!n.getTargetRanges)return null;const e=n.getTargetRanges();return e.length===0?null:e[0]}function kn(n,e){const t=n._compositionKey;if(Z(null),t!==null&&e!=null){if(e===""){const r=Y(t),i=Lt(n.getElementByKey(t));return void(i!==null&&i.nodeValue!==null&&P(r)&&Bi(r,i.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const r=L();if(T(r)){const i=r.focus;return r.anchor.set(i.key,i.offset,i.type),void O(n,Jn,null)}}}zi(!0,n,e)}function Qo(n){let e=n.__lexicalEventHandles;return e===void 0&&(e=[],n.__lexicalEventHandles=e),e}const kt=new Map;function Zo(n){const e=fc(n.target);if(e===null)return;const t=$i(e.anchorNode);if(t===null)return;Xr&&(Xr=!1,de(t,()=>{const a=Dt(),c=e.anchorNode;(U(c)||Re(c))&&ae(sr(a,e,t,n))}));const r=Ii(t),i=r[r.length-1],s=i._key,o=kt.get(s),l=o||i;l!==t&&fs(e,l,!1),fs(e,t,!0),t!==i?kt.set(s,t):o&&kt.delete(s)}function ds(n){n._lexicalHandled=!0}function hs(n){return n._lexicalHandled===!0}function za(n){const e=n.ownerDocument,t=Un.get(e);t===void 0&&w(162);const r=t-1;r>=0||w(164),Un.set(e,r),r===0&&e.removeEventListener("selectionchange",Zo);const i=ar(n);Di(i)?(function(o){if(o._parentEditor!==null){const l=Ii(o),a=l[l.length-1]._key;kt.get(a)===o&&kt.delete(a)}else kt.delete(o._key)}(i),n.__lexicalEditor=null):i&&w(198);const s=Qo(n);for(let o=0;o<s.length;o++)s[o]();n.__lexicalEventHandles=[]}function Gr(n,e,t){ee();const r=n.__key,i=n.getParent();if(i===null)return;const s=function(l){const a=L();if(!T(a)||!v(l))return a;const{anchor:c,focus:u}=a,d=c.getNode(),f=u.getNode();return ei(d,l)&&c.set(l.__key,0,"element"),ei(f,l)&&u.set(l.__key,0,"element"),a}(n);let o=!1;if(T(s)&&e){const l=s.anchor,a=s.focus;l.key===r&&(Vn(l,n,i,n.getPreviousSibling(),n.getNextSibling()),o=!0),a.key===r&&(Vn(a,n,i,n.getPreviousSibling(),n.getNextSibling()),o=!0)}else ke(s)&&e&&n.isSelected()&&n.selectPrevious();if(T(s)&&e&&!o){const l=n.getIndexWithinParent();et(n),jn(s,i,l,-1)}else et(n);t||ne(i)||i.canBeEmpty()||!i.isEmpty()||Gr(i,e),e&&te(i)&&i.isEmpty()&&i.selectEnd()}class rr{static getType(){w(64,this.name)}static clone(e){w(65,this.name)}afterCloneFrom(e){this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),ml(this,e)}getType(){return this.__type}isInline(){w(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const t=Y(e);if(t===null)break;e=t.__parent}return!1}isSelected(e){const t=e||L();if(t==null)return!1;const r=t.getNodes().some(i=>i.__key===this.__key);if(P(this))return r;if(T(t)&&t.anchor.type==="element"&&t.focus.type==="element"){if(t.isCollapsed())return!1;const i=this.getParent();if(B(this)&&this.isInline()&&i){const s=t.isBackward()?t.focus:t.anchor;if(i.is(s.getNode())&&s.offset===i.getChildrenSize()&&this.is(i.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let t=e.getFirstChild(),r=0;for(;t!==null;){if(this.is(t))return r;r++,t=t.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:Y(e)}getParentOrThrow(){const e=this.getParent();return e===null&&w(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const t=e.getParent();if(ne(t))return v(e)||e===this&&B(e)||w(194),e;e=t}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&w(67,this.__key),e}getParents(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t),t=t.getParent();return e}getParentKeys(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:Y(e)}getPreviousSiblings(){const e=[],t=this.getParent();if(t===null)return e;let r=t.getFirstChild();for(;r!==null&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:Y(e)}getNextSiblings(){const e=[];let t=this.getNextSibling();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){const t=v(this)?this:this.getParent(),r=v(e)?e:e.getParent(),i=t&&r?Mn(t,r):null;return i?i.commonAncestor:null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){const t=Mn(this,e);return t!==null&&(t.type==="descendant"||(t.type==="branch"?El(t)===-1:(t.type!=="same"&&t.type!=="ancestor"&&w(279),!1)))}isParentOf(e){const t=Mn(this,e);return t!==null&&t.type==="ancestor"}getNodesBetween(e){const t=this.isBefore(e),r=[],i=new Set;let s=this;for(;s!==null;){const o=s.__key;if(i.has(o)||(i.add(o),r.push(s)),s===e)break;const l=v(s)?t?s.getFirstChild():s.getLastChild():null;if(l!==null){s=l;continue}const a=t?s.getNextSibling():s.getPreviousSibling();if(a!==null){s=a;continue}const c=s.getParentOrThrow();if(i.has(c.__key)||r.push(c),c===e)break;let u=null,d=c;do{if(d===null&&w(68),u=t?d.getNextSibling():d.getPreviousSibling(),d=d.getParent(),d===null)break;u!==null||i.has(d.__key)||r.push(d)}while(u===null);s=u}return t||r.reverse(),r}isDirty(){const e=J()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){const e=Y(this.__key);return e===null&&w(113),e}getWritable(){ee();const e=He(),t=J(),r=e._nodeMap,i=this.__key,s=this.getLatest(),o=t._cloneNotNeeded,l=L();if(l!==null&&l.setCachedNodes(null),o.has(i))return Hn(s),s;const a=Ki(s);return o.add(i),Hn(a),r.set(i,a),a}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){w(70)}updateDOM(e,t,r){w(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){const e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){w(18,this.name)}updateFromJSON(e){return function(t,r){const i=t.getWritable();return(r||i.__state)&&Sa(t).updateFromJSON(r),i}(this,e.$)}static transform(){return null}remove(e){Gr(this,!0,e)}replace(e,t){ee();let r=L();r!==null&&(r=r.clone()),Er(this,e);const i=this.getLatest(),s=this.__key,o=e.__key,l=e.getWritable(),a=this.getParentOrThrow().getWritable(),c=a.__size;et(l);const u=i.getPreviousSibling(),d=i.getNextSibling(),f=i.__prev,g=i.__next,h=i.__parent;if(Gr(i,!1,!0),u===null?a.__first=o:u.getWritable().__next=o,l.__prev=f,d===null?a.__last=o:d.getWritable().__prev=o,l.__next=g,l.__parent=h,a.__size=c,t&&(v(this)&&v(l)||w(139),this.getChildren().forEach(p=>{l.append(p)})),T(r)){ae(r);const p=r.anchor,_=r.focus;p.key===s&&ms(p,l),_.key===s&&ms(_,l)}return Ue()===s&&Z(o),l}insertAfter(e,t=!0){ee(),Er(this,e);const r=this.getWritable(),i=e.getWritable(),s=i.getParent(),o=L();let l=!1,a=!1;if(s!==null){const g=e.getIndexWithinParent();if(et(i),T(o)){const h=s.__key,p=o.anchor,_=o.focus;l=p.type==="element"&&p.key===h&&p.offset===g+1,a=_.type==="element"&&_.key===h&&_.offset===g+1}}const c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),d=i.__key,f=r.__next;if(c===null?u.__last=d:c.getWritable().__prev=d,u.__size++,r.__next=d,i.__next=f,i.__prev=r.__key,i.__parent=r.__parent,t&&T(o)){const g=this.getIndexWithinParent();jn(o,u,g+1);const h=u.__key;l&&o.anchor.set(h,g+2,"element"),a&&o.focus.set(h,g+2,"element")}return e}insertBefore(e,t=!0){ee(),Er(this,e);const r=this.getWritable(),i=e.getWritable(),s=i.__key;et(i);const o=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),a=r.__prev,c=this.getIndexWithinParent();o===null?l.__first=s:o.getWritable().__next=s,l.__size++,r.__prev=s,i.__prev=a,i.__next=r.__key,i.__parent=r.__parent;const u=L();return t&&T(u)&&jn(u,this.getParentOrThrow(),c),e}isParentRequired(){return!1}createParentElementNode(){return H()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){ee();const r=this.getPreviousSibling(),i=this.getParentOrThrow();if(r===null)return i.select(0,0);if(v(r))return r.select();if(!P(r)){const s=r.getIndexWithinParent()+1;return i.select(s,s)}return r.select(e,t)}selectNext(e,t){ee();const r=this.getNextSibling(),i=this.getParentOrThrow();if(r===null)return i.select();if(v(r))return r.select(0,0);if(!P(r)){const s=r.getIndexWithinParent();return i.select(s,s)}return r.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}class on extends rr{static getType(){return"linebreak"}static clone(e){return new on(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>function(t){const r=t.parentElement;if(r!==null&&Xn(r)){const i=r.firstChild;if(i===t||i.nextSibling===t&&Tn(i)){const s=r.lastChild;if(s===t||s.previousSibling===t&&Tn(s))return!0}}return!1}(e)||function(t){const r=t.parentElement;if(r!==null&&Xn(r)){const i=r.firstChild;if(i===t||i.nextSibling===t&&Tn(i))return!1;const s=r.lastChild;if(s===t||s.previousSibling===t&&Tn(s))return!0}return!1}(e)?null:{conversion:Ba,priority:0}}}static importJSON(e){return st().updateFromJSON(e)}}function Ba(n){return{node:st()}}function st(){return Le(new on)}function Tt(n){return n instanceof on}function Tn(n){return Re(n)&&/^( |\t|\r?\n)+$/.test(n.textContent||"")}function br(n,e){return 16&e?"code":e&di?"mark":32&e?"sub":64&e?"sup":null}function kr(n,e){return 1&e?"strong":2&e?"em":"span"}function el(n,e,t,r,i){const s=r.classList;let o=wt(i,"base");o!==void 0&&s.add(...o),o=wt(i,"underlineStrikethrough");let l=!1;const a=e&Bn&&e&zn;o!==void 0&&(t&Bn&&t&zn?(l=!0,a||s.add(...o)):a&&s.remove(...o));for(const c in rt){const u=rt[c];if(o=wt(i,c),o!==void 0)if(t&u){if(l&&(c==="underline"||c==="strikethrough")){e&u&&s.remove(...o);continue}e&u&&(!a||c!=="underline")&&c!=="strikethrough"||s.add(...o)}else e&u&&s.remove(...o)}}function tl(n,e,t){const r=e.firstChild,i=t.isComposing(),s=n+(i?er:"");if(r==null)e.textContent=s;else{const o=r.nodeValue;if(o!==s)if(i||je){const[l,a,c]=function(u,d){const f=u.length,g=d.length;let h=0,p=0;for(;h<f&&h<g&&u[h]===d[h];)h++;for(;p+h<f&&p+h<g&&u[f-p-1]===d[g-p-1];)p++;return[h,f-h-p,d.slice(h,g-p)]}(o,s);a!==0&&r.deleteData(l,a),r.insertData(l,c)}else r.nodeValue=s}}function gs(n,e,t,r,i,s){tl(i,n,e);const o=s.theme.text;o!==void 0&&el(0,0,r,n,o)}function wn(n,e){const t=document.createElement(e);return t.appendChild(n),t}class dt extends rr{static getType(){return"text"}static clone(e){return new dt(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return ha[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Ue()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){const t=rt[e];return!!(this.getFormat()&t)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return qn(this.getLatest().__format,e,t)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,t){const r=this.__format,i=br(0,r),s=kr(0,r),o=i===null?s:i,l=document.createElement(o);let a=l;this.hasFormat("code")&&l.setAttribute("spellcheck","false"),i!==null&&(a=document.createElement(s),l.appendChild(a)),gs(a,this,0,r,this.__text,e);const c=this.__style;return c!==""&&(l.style.cssText=c),l}updateDOM(e,t,r){const i=this.__text,s=e.__format,o=this.__format,l=br(0,s),a=br(0,o),c=kr(0,s),u=kr(0,o);if((l===null?c:l)!==(a===null?u:a))return!0;if(l===a&&c!==u){const p=t.firstChild;p==null&&w(48);const _=document.createElement(u);return gs(_,this,0,o,i,r),t.replaceChild(_,p),!1}let d=t;a!==null&&l!==null&&(d=t.firstChild,d==null&&w(49)),tl(i,d,this);const f=r.theme.text;f!==void 0&&s!==o&&el(0,s,o,d,f);const g=e.__style,h=this.__style;return g!==h&&(t.style.cssText=h),!1}static importDOM(){return{"#text":()=>({conversion:Ja,priority:0}),b:()=>({conversion:Ra,priority:0}),code:()=>({conversion:De,priority:0}),em:()=>({conversion:De,priority:0}),i:()=>({conversion:De,priority:0}),mark:()=>({conversion:De,priority:0}),s:()=>({conversion:De,priority:0}),span:()=>({conversion:Wa,priority:0}),strong:()=>({conversion:De,priority:0}),sub:()=>({conversion:De,priority:0}),sup:()=>({conversion:De,priority:0}),u:()=>({conversion:De,priority:0})}}static importJSON(e){return X().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:t}=super.exportDOM(e);return U(t)||w(132),t.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(t=wn(t,"b")),this.hasFormat("italic")&&(t=wn(t,"i")),this.hasFormat("strikethrough")&&(t=wn(t,"s")),this.hasFormat("underline")&&(t=wn(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){const t=this.getWritable();return t.__format=typeof e=="string"?rt[e]:e,t}setDetail(e){const t=this.getWritable();return t.__detail=typeof e=="string"?ua[e]:e,t}setStyle(e){const t=this.getWritable();return t.__style=e,t}toggleFormat(e){const t=qn(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const t=da[e];if(this.__mode===t)return this;const r=this.getWritable();return r.__mode=t,r}setTextContent(e){if(this.__text===e)return this;const t=this.getWritable();return t.__text=e,t}select(e,t){ee();let r=e,i=t;const s=L(),o=this.getTextContent(),l=this.__key;if(typeof o=="string"){const a=o.length;r===void 0&&(r=a),i===void 0&&(i=a)}else r=0,i=0;if(!T(s))return il(l,r,l,i,"text","text");{const a=Ue();a!==s.anchor.key&&a!==s.focus.key||Z(l),s.setTextNodeRange(this,r,this,i)}return s}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,r,i){const s=this.getWritable(),o=s.__text,l=r.length;let a=e;a<0&&(a=l+a,a<0&&(a=0));const c=L();if(i&&T(c)){const d=e+l;c.setTextNodeRange(s,d,s,d)}const u=o.slice(0,a)+r+o.slice(a+t);return s.__text=u,s}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){ee();const t=this.getLatest(),r=t.getTextContent();if(r==="")return[];const i=t.__key,s=Ue(),o=r.length;e.sort((k,b)=>k-b),e.push(o);const l=[],a=e.length;for(let k=0,b=0;k<o&&b<=a;b++){const F=e[b];F>k&&(l.push(r.slice(k,F)),k=F)}const c=l.length;if(c===1)return[t];const u=l[0],d=t.getParent();let f;const g=t.getFormat(),h=t.getStyle(),p=t.__detail;let _=!1,y=null,m=null;const x=L();if(T(x)){const[k,b]=x.isBackward()?[x.focus,x.anchor]:[x.anchor,x.focus];k.type==="text"&&k.key===i&&(y=k),b.type==="text"&&b.key===i&&(m=b)}t.isSegmented()?(f=X(u),f.__format=g,f.__style=h,f.__detail=p,_=!0):(f=t.getWritable(),f.__text=u);const C=[f];for(let k=1;k<c;k++){const b=X(l[k]);b.__format=g,b.__style=h,b.__detail=p;const F=b.__key;s===i&&Z(F),C.push(b)}const N=y?y.offset:null,S=m?m.offset:null;let E=0;for(const k of C){if(!y&&!m)break;const b=E+k.getTextContentSize();if(y!==null&&N!==null&&N<=b&&N>=E&&(y.set(k.getKey(),N-E,"text"),N<b&&(y=null)),m!==null&&S!==null&&S<=b&&S>=E){m.set(k.getKey(),S-E,"text");break}E=b}if(d!==null){(function(F){const A=F.getPreviousSibling(),K=F.getNextSibling();A!==null&&Hn(A),K!==null&&Hn(K)})(this);const k=d.getWritable(),b=this.getIndexWithinParent();_?(k.splice(b,0,C),this.remove()):k.splice(b,1,C),T(x)&&jn(x,d,b,c-1)}return C}mergeWithSibling(e){const t=e===this.getPreviousSibling();t||e===this.getNextSibling()||w(50);const r=this.__key,i=e.__key,s=this.__text,o=s.length;Ue()===i&&Z(r);const l=L();if(T(l)){const d=l.anchor,f=l.focus;d!==null&&d.key===i&&ks(d,t,r,e,o),f!==null&&f.key===i&&ks(f,t,r,e,o)}const a=e.__text,c=t?a+s:s+a;this.setTextContent(c);const u=this.getWritable();return e.remove(),u}isTextEntity(){return!1}}function Wa(n){return{forChild:Pi(n.style),node:null}}function Ra(n){const e=n,t=e.style.fontWeight==="normal";return{forChild:Pi(e.style,t?void 0:"bold"),node:null}}const ps=new WeakMap;function Ka(n){if(!U(n))return!1;if(n.nodeName==="PRE")return!0;const e=n.style.whiteSpace;return typeof e=="string"&&e.startsWith("pre")}function Ja(n){const e=n;n.parentElement===null&&w(129);let t=e.textContent||"";if(function(r){let i,s=r.parentNode;const o=[r];for(;s!==null&&(i=ps.get(s))===void 0&&!Ka(s);)o.push(s),s=s.parentNode;const l=i===void 0?s:i;for(let a=0;a<o.length;a++)ps.set(o[a],l);return l}(e)!==null){const r=t.split(/(\r?\n|\t)/),i=[],s=r.length;for(let o=0;o<s;o++){const l=r[o];l===`
`||l===`\r
`?i.push(st()):l==="	"?i.push(an()):l!==""&&i.push(X(l))}return{node:i}}if(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," "),t==="")return{node:null};if(t[0]===" "){let r=e,i=!0;for(;r!==null&&(r=_s(r,!1))!==null;){const s=r.textContent||"";if(s.length>0){/[ \t\n]$/.test(s)&&(t=t.slice(1)),i=!1;break}}i&&(t=t.slice(1))}if(t[t.length-1]===" "){let r=e,i=!0;for(;r!==null&&(r=_s(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(t=t.slice(0,t.length-1))}return t===""?{node:null}:{node:X(t)}}function _s(n,e){let t=n;for(;;){let r;for(;(r=e?t.nextSibling:t.previousSibling)===null;){const s=t.parentElement;if(s===null)return null;t=s}if(t=r,U(t)){const s=t.style.display;if(s===""&&!ri(t)||s!==""&&!s.startsWith("inline"))return null}let i=t;for(;(i=e?t.firstChild:t.lastChild)!==null;)t=i;if(Re(t))return t;if(t.nodeName==="BR")return null}}const Ua={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function De(n){const e=Ua[n.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:Pi(n.style,e),node:null}}function X(n=""){return Le(new dt(n))}function P(n){return n instanceof dt}function Pi(n,e){const t=n.fontWeight,r=n.textDecoration.split(" "),i=t==="700"||t==="bold",s=r.includes("line-through"),o=n.fontStyle==="italic",l=r.includes("underline"),a=n.verticalAlign;return c=>(P(c)&&(i&&!c.hasFormat("bold")&&c.toggleFormat("bold"),s&&!c.hasFormat("strikethrough")&&c.toggleFormat("strikethrough"),o&&!c.hasFormat("italic")&&c.toggleFormat("italic"),l&&!c.hasFormat("underline")&&c.toggleFormat("underline"),a!=="sub"||c.hasFormat("subscript")||c.toggleFormat("subscript"),a!=="super"||c.hasFormat("superscript")||c.toggleFormat("superscript"),e&&!c.hasFormat(e)&&c.toggleFormat(e)),c)}class ln extends dt{static getType(){return"tab"}static clone(e){return new ln(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){const t=super.createDOM(e),r=wt(e.theme,"tab");return r!==void 0&&t.classList.add(...r),t}static importJSON(e){return an().updateFromJSON(e)}setTextContent(e){return e!=="	"&&e!==""&&w(126),super.setTextContent(e)}setDetail(e){return e!==2&&w(127),this}setMode(e){return e!=="normal"&&w(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function an(){return Le(new ln)}function ja(n){return n instanceof ln}class Va{constructor(e,t,r){this._selection=null,this.key=e,this.offset=t,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:Nl(he(qe(this,"next")),he(qe(e,"next")))<0}getNode(){const e=Y(this.key);return e===null&&w(20),e}set(e,t,r,i){const s=this._selection,o=this.key;i&&this.key===e&&this.offset===t&&this.type===r||(this.key=e,this.offset=t,this.type=r,cn()||(Ue()===o&&Z(e),s!==null&&(s.setCachedNodes(null),s.dirty=!0)))}}function Pe(n,e,t){return new Va(n,e,t)}function Tr(n,e){let t=e.__key,r=n.offset,i="element";if(P(e)){i="text";const s=e.getTextContentSize();r>s&&(r=s)}else if(!v(e)){const s=e.getNextSibling();if(P(s))t=s.__key,r=0,i="text";else{const o=e.getParent();o&&(t=o.__key,r=e.getIndexWithinParent()+1)}}n.set(t,r,i)}function ms(n,e){if(v(e)){const t=e.getLastDescendant();v(t)||P(t)?Tr(n,t):Tr(n,e)}else Tr(n,e)}class ir{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!ke(e))return!1;const t=this._nodes,r=e._nodes;return t.size===r.size&&Array.from(t).every(i=>r.has(i))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new ir(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.getNodes(),r=t.length,i=t[r-1];let s;if(P(i))s=i.select();else{const o=i.getIndexWithinParent()+1;s=i.getParentOrThrow().select(o,o)}s.insertNodes(e);for(let o=0;o<r;o++)t[o].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=this._nodes,r=[];for(const i of t){const s=Y(i);s!==null&&r.push(s)}return cn()||(this._cachedNodes=r),r}getTextContent(){const e=this.getNodes();let t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}}function T(n){return n instanceof ht}class ht{constructor(e,t,r,i){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=r,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!T(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=function(r){const i=[],[s,o]=r.getTextSlices();s&&i.push(s.caret.origin);const l=new Set,a=new Set;for(const c of r)if(Ee(c)){const{origin:u}=c;i.length===0?l.add(u):(a.add(u),i.push(u))}else{const{origin:u}=c;v(u)&&a.has(u)||i.push(u)}if(o&&i.push(o.caret.origin),at(r.focus)&&v(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let c=pe(r.focus.origin,"previous");Ee(c)&&l.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(i[i.length-1]);c=Vi(c))l.delete(c.origin),i.pop();for(;i.length>1;){const c=i[i.length-1];if(!v(c)||a.has(c)||c.isEmpty()||l.has(c))break;i.pop()}if(i.length===0&&r.isCollapsed()){const c=he(r.anchor),u=he(r.anchor.getFlipped()),d=g=>tt(g)?g.origin:g.getNodeAtCaret(),f=d(c)||d(u)||(r.anchor.getNodeAtCaret()?c.origin:u.origin);i.push(f)}return i}(Ll(ii(this),"next"));return cn()||(this._cachedNodes=t),t}setTextNodeRange(e,t,r,i){this.anchor.set(e.__key,t,"text"),this.focus.set(r.__key,i,"text")}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const t=e[0],r=e[e.length-1],i=this.anchor,s=this.focus,o=i.isBefore(s),[l,a]=Yr(this);let c="",u=!0;for(let d=0;d<e.length;d++){const f=e[d];if(v(f)&&!f.isInline())u||(c+=`
`),u=!f.isEmpty();else if(u=!1,P(f)){let g=f.getTextContent();f===t?f===r?i.type==="element"&&s.type==="element"&&s.offset!==i.offset||(g=l<a?g.slice(l,a):g.slice(a,l)):g=o?g.slice(l):g.slice(a):f===r&&(g=o?g.slice(0,a):g.slice(0,l)),c+=g}else!B(f)&&!Tt(f)||f===r&&this.isCollapsed()||(c+=f.getTextContent())}return c}applyDOMRange(e){const t=J(),r=t.getEditorState()._selection,i=rl(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,r);if(i===null)return;const[s,o]=i;this.anchor.set(s.key,s.offset,s.type,!0),this.focus.set(o.key,o.offset,o.type,!0),Pt(this)}clone(){const e=this.anchor,t=this.focus;return new ht(Pe(e.key,e.offset,e.type),Pe(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=qn(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const t=rt[e];return!!(this.format&t)}insertRawText(e){const t=e.split(/(\r?\n|\t)/),r=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];o===`
`||o===`\r
`?r.push(st()):o==="	"?r.push(an()):r.push(X(o))}this.insertNodes(r)}insertText(e){const t=this.anchor,r=this.focus,i=this.format,s=this.style;let o=t,l=r;!this.isCollapsed()&&r.isBefore(t)&&(o=r,l=t),o.type==="element"&&function(_,y,m,x){const C=_.getNode(),N=C.getChildAtIndex(_.offset),S=X(),E=te(C)?H().append(S):S;S.setFormat(m),S.setStyle(x),N===null?C.append(E):N.insertBefore(E),_.is(y)&&y.set(S.__key,0,"text"),_.set(S.__key,0,"text")}(o,l,i,s),l.type==="element"&&ut(l,he(qe(l,"next")));const a=o.offset;let c=l.offset;const u=this.getNodes(),d=u.length;let f=u[0];P(f)||w(26);const g=f.getTextContent().length,h=f.getParentOrThrow();let p=u[d-1];if(d===1&&l.type==="element"&&(c=g,l.set(o.key,c,"text")),this.isCollapsed()&&a===g&&(f.isSegmented()||f.isToken()||!f.canInsertTextAfter()||!h.canInsertTextAfter()&&f.getNextSibling()===null)){let _=f.getNextSibling();if(P(_)&&_.canInsertTextBefore()&&!Ye(_)||(_=X(),_.setFormat(i),_.setStyle(s),h.canInsertTextAfter()?f.insertAfter(_):h.insertAfter(_)),_.select(0,0),f=_,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&a===0&&(f.isSegmented()||f.isToken()||!f.canInsertTextBefore()||!h.canInsertTextBefore()&&f.getPreviousSibling()===null)){let _=f.getPreviousSibling();if(P(_)&&!Ye(_)||(_=X(),_.setFormat(i),h.canInsertTextBefore()?f.insertBefore(_):h.insertBefore(_)),_.select(),f=_,e!=="")return void this.insertText(e)}else if(f.isSegmented()&&a!==g){const _=X(f.getTextContent());_.setFormat(i),f.replace(_),f=_}else if(!this.isCollapsed()&&e!==""){const _=p.getParent();if(!h.canInsertTextBefore()||!h.canInsertTextAfter()||v(_)&&(!_.canInsertTextBefore()||!_.canInsertTextAfter()))return this.insertText(""),nl(this.anchor,this.focus,null),void this.insertText(e)}if(d===1){if(f.isToken()){const x=X(e);return x.select(),void f.replace(x)}const _=f.getFormat(),y=f.getStyle();if(a!==c||_===i&&y===s){if(ja(f)){const x=X(e);return x.setFormat(i),x.setStyle(s),x.select(),void f.replace(x)}}else{if(f.getTextContent()!==""){const x=X(e);if(x.setFormat(i),x.setStyle(s),x.select(),a===0)f.insertBefore(x,!1);else{const[C]=f.splitText(a);C.insertAfter(x,!1)}return void(x.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}f.setFormat(i),f.setStyle(s)}const m=c-a;f=f.spliceText(a,m,e,!0),f.getTextContent()===""?f.remove():this.anchor.type==="text"&&(f.isComposing()?this.anchor.offset-=e.length:(this.format=_,this.style=y))}else{const _=new Set([...f.getParentKeys(),...p.getParentKeys()]),y=v(f)?f:f.getParentOrThrow();let m=v(p)?p:p.getParentOrThrow(),x=p;if(!y.is(m)&&m.isInline())do x=m,m=m.getParentOrThrow();while(m.isInline());if(l.type==="text"&&(c!==0||p.getTextContent()==="")||l.type==="element"&&p.getIndexWithinParent()<c)if(P(p)&&!p.isToken()&&c!==p.getTextContentSize()){if(p.isSegmented()){const k=X(p.getTextContent());p.replace(k),p=k}te(l.getNode())||l.type!=="text"||(p=p.spliceText(0,c,"")),_.add(p.__key)}else{const k=p.getParentOrThrow();k.canBeEmpty()||k.getChildrenSize()!==1?p.remove():k.remove()}else _.add(p.__key);const C=m.getChildren(),N=new Set(u),S=y.is(m),E=y.isInline()&&f.getNextSibling()===null?y:f;for(let k=C.length-1;k>=0;k--){const b=C[k];if(b.is(f)||v(b)&&b.isParentOf(f))break;b.isAttached()&&(!N.has(b)||b.is(x)?S||E.insertAfter(b,!1):b.remove())}if(!S){let k=m,b=null;for(;k!==null;){const F=k.getChildren(),A=F.length;(A===0||F[A-1].is(b))&&(_.delete(k.__key),b=k),k=k.getParent()}}if(f.isToken())if(a===g)f.select();else{const k=X(e);k.select(),f.replace(k)}else f=f.spliceText(a,g-a,e,!0),f.getTextContent()===""?f.remove():f.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);for(let k=1;k<d;k++){const b=u[k],F=b.__key;_.has(F)||b.remove()}}}removeText(){const e=L()===this;Or(this,bc(ii(this))),e&&L()!==this&&ae(this)}formatText(e,t=null){if(this.isCollapsed())return this.toggleFormat(e),void Z(null);const r=this.getNodes(),i=[];for(const C of r)P(C)&&i.push(C);const s=C=>{r.forEach(N=>{if(v(N)){const S=N.getFormatFlags(e,C);N.setTextFormat(S)}})},o=i.length;if(o===0)return this.toggleFormat(e),Z(null),void s(t);const l=this.anchor,a=this.focus,c=this.isBackward(),u=c?a:l,d=c?l:a;let f=0,g=i[0],h=u.type==="element"?0:u.offset;if(u.type==="text"&&h===g.getTextContentSize()&&(f=1,g=i[1],h=0),g==null)return;const p=g.getFormatFlags(e,t);s(p);const _=o-1;let y=i[_];const m=d.type==="text"?d.offset:y.getTextContentSize();if(g.is(y)){if(h===m)return;if(Ye(g)||h===0&&m===g.getTextContentSize())g.setFormat(p);else{const C=g.splitText(h,m),N=h===0?C[0]:C[1];N.setFormat(p),u.type==="text"&&u.set(N.__key,0,"text"),d.type==="text"&&d.set(N.__key,m-h,"text")}return void(this.format=p)}h===0||Ye(g)||([,g]=g.splitText(h),h=0),g.setFormat(p);const x=y.getFormatFlags(e,p);m>0&&(m===y.getTextContentSize()||Ye(y)||([y]=y.splitText(m)),y.setFormat(x));for(let C=f+1;C<_;C++){const N=i[C],S=N.getFormatFlags(e,x);N.setFormat(S)}u.type==="text"&&u.set(g.__key,h,"text"),d.type==="text"&&d.set(y.__key,m,"text"),this.format=p|x}insertNodes(e){if(e.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const h=L();return T(h)||w(134),h.insertNodes(e)}const t=(this.isBackward()?this.focus:this.anchor).getNode(),r=Lr(t,ye),i=e[e.length-1];if(v(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const h=wr(this);r.splice(h,0,e),i.selectEnd()}return}if(!e.some(h=>(v(h)||B(h))&&!h.isInline())){v(r)||w(211,t.constructor.name,t.getType());const h=wr(this);return r.splice(h,0,e),void i.selectEnd()}const s=function(h){const p=H();let _=null;for(let y=0;y<h.length;y++){const m=h[y],x=Tt(m);if(x||B(m)&&m.isInline()||v(m)&&m.isInline()||P(m)||m.isParentRequired()){if(_===null&&(_=m.createParentElementNode(),p.append(_),x))continue;_!==null&&_.append(m)}else p.append(m),_=null}return p}(e),o=s.getLastDescendant(),l=s.getChildren(),a=!v(r)||!r.isEmpty()?this.insertParagraph():null,c=l[l.length-1];let u=l[0];var d;v(d=u)&&ye(d)&&!d.isEmpty()&&v(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(v(r)||w(211,t.constructor.name,t.getType()),r.append(...u.getChildren()),u=l[1]),u&&(r===null&&w(212,t.constructor.name,t.getType()),function(h,p,_){const y=p.getParentOrThrow().getLastChild();let m=p;const x=[p];for(;m!==y;)m.getNextSibling()||w(140),m=m.getNextSibling(),x.push(m);let C=h;for(const N of x)C=C.insertAfter(N)}(r,u));const f=Lr(o,ye);a&&v(f)&&(a.canMergeWhenEmpty()||ye(c))&&(f.append(...a.getChildren()),a.remove()),v(r)&&r.isEmpty()&&r.remove(),o.selectEnd();const g=v(r)?r.getLastChild():null;Tt(g)&&f!==r&&g.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=H();return j().splice(this.anchor.offset,0,[o]),o.select(),o}const e=wr(this),t=Lr(this.anchor.getNode(),ye);v(t)||w(213);const r=t.getChildAtIndex(e),i=r?[r,...r.getNextSiblings()]:[],s=t.insertNewAfter(this,!1);return s?(s.append(...i),s.selectStart(),s):null}insertLineBreak(e){const t=st();if(this.insertNodes([t]),e){const r=t.getParentOrThrow(),i=t.getIndexWithinParent();r.select(i,i)}}extract(){const e=this.getNodes(),t=e.length,r=t-1,i=this.anchor,s=this.focus;let o=e[0],l=e[r];const[a,c]=Yr(this);if(t===0)return[];if(t===1){if(P(o)&&!this.isCollapsed()){const d=a>c?c:a,f=a>c?a:c,g=o.splitText(d,f),h=d===0?g[0]:g[1];return h!=null?[h]:[]}return[o]}const u=i.isBefore(s);if(P(o)){const d=u?a:c;d===o.getTextContentSize()?e.shift():d!==0&&([,o]=o.splitText(d),e[0]=o)}if(P(l)){const d=l.getTextContent().length,f=u?c:a;f===0?e.pop():f!==d&&([l]=l.splitText(f),e[r]=l)}return e}modify(e,t,r){if(Ts(this,e,t,r))return;const i=e==="move",s=J(),o=ve(ge(s));if(!o)return;const l=s._blockCursorElement,a=s._rootElement,c=this.focus.getNode();if(a===null||l===null||!v(c)||c.isInline()||c.canBeEmpty()||ti(l,s,a),this.dirty){let u=Ot(s,this.anchor.key),d=Ot(s,this.focus.key);this.anchor.type==="text"&&(u=Lt(u)),this.focus.type==="text"&&(d=Lt(d)),u&&d&&ll(o,u,this.anchor.offset,d,this.focus.offset)}if(function(u,d,f,g){u.modify(d,f,g)}(o,e,t?"backward":"forward",r),o.rangeCount>0){const u=o.getRangeAt(0),d=this.anchor.getNode(),f=te(d)?d:ac(d);if(this.applyDOMRange(u),this.dirty=!0,!i){const g=this.getNodes(),h=[];let p=!1;for(let _=0;_<g.length;_++){const y=g[_];ei(y,f)?h.push(y):p=!0}if(p&&h.length>0)if(t){const _=h[0];v(_)?_.selectStart():_.getParentOrThrow().selectStart()}else{const _=h[h.length-1];v(_)?_.selectEnd():_.getParentOrThrow().selectEnd()}o.anchorNode===u.startContainer&&o.anchorOffset===u.startOffset||function(_){const y=_.focus,m=_.anchor,x=m.key,C=m.offset,N=m.type;m.set(y.key,y.offset,y.type,!0),y.set(x,C,N,!0)}(this)}}r==="lineboundary"&&Ts(this,e,t,r,"decorators")}forwardDeletion(e,t,r){if(!r&&(e.type==="element"&&v(t)&&e.offset===t.getChildrenSize()||e.type==="text"&&e.offset===t.getTextContentSize())){const i=t.getParent(),s=t.getNextSibling()||(i===null?null:i.getNextSibling());if(v(s)&&s.isShadowRoot())return!0}return!1}deleteCharacter(e){const t=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let i=r.getNode();if(this.forwardDeletion(r,i,e))return;const s=Hi(qe(r,e?"previous":"next"));if(s.getTextSlices().every(l=>l===null||l.distance===0)){let l={type:"initial"};for(const a of s.iterNodeCarets("shadowRoot"))if(Ee(a)){if(!a.origin.isInline()){if(a.origin.isShadowRoot()){if(l.type==="merge-block")break;if(v(s.anchor.origin)&&s.anchor.origin.isEmpty()){const c=he(a);Or(this,Ft(c,c)),s.anchor.origin.remove()}return}l.type!=="merge-next-block"&&l.type!=="merge-block"||(l={block:l.block,caret:a,type:"merge-block"})}}else{if(l.type==="merge-block")break;if(at(a)){if(v(a.origin)){if(a.origin.isInline()){if(!a.origin.isParentOf(s.anchor.origin))break}else l={block:a.origin,type:"merge-next-block"};continue}if(B(a.origin)){if(!a.origin.isIsolated())if(l.type==="merge-next-block"&&(a.origin.isKeyboardSelectable()||!a.origin.isInline())&&v(s.anchor.origin)&&s.anchor.origin.isEmpty()){s.anchor.origin.remove();const c=ol();c.add(a.origin.getKey()),ae(c)}else a.origin.remove();return}break}}if(l.type==="merge-block"){const{caret:a,block:c}=l;return Or(this,Ft(!a.origin.isEmpty()&&c.isEmpty()?Gi(se(c,a.direction)):s.anchor,a)),this.removeText()}}const o=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&r.offset===0&&xs(this,r.getNode()))return}else{const l=o.type==="text"?o.getNode():null;if(i=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){const a=o.offset,c=l.getTextContentSize();if(l.is(i)||e&&a!==c||!e&&a!==0)return void vs(l,e,a)}else if(i!==null&&i.isSegmented()){const a=r.offset,c=i.getTextContentSize();if(i.is(l)||e&&a!==0||!e&&a!==c)return void vs(i,e,a)}(function(a,c){const u=a.anchor,d=a.focus,f=u.getNode(),g=d.getNode();if(f===g&&u.type==="text"&&d.type==="text"){const h=u.offset,p=d.offset,_=h<p,y=_?h:p,m=_?p:h,x=m-1;y!==x&&function(C){return!(Sl(C)||qa(C))}(f.getTextContent().slice(y,m))&&(c?d.set(d.key,x,d.type):u.set(u.key,x,u.type))}})(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&te(r.getParent())&&r.getPreviousSibling()===null&&xs(this,r)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){const t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function ke(n){return n instanceof ir}function ys(n){const e=n.offset;if(n.type==="text")return e;const t=n.getNode();return e===t.getChildrenSize()?t.getTextContent().length:0}function Yr(n){const e=n.getStartEndPoints();if(e===null)return[0,0];const[t,r]=e;return t.type==="element"&&r.type==="element"&&t.key===r.key&&t.offset===r.offset?[0,0]:[ys(t),ys(r)]}function xs(n,e){for(let t=e;t;t=t.getParent()){if(v(t)){if(t.collapseAtStart(n))return!0;if(ne(t))break}if(t.getPreviousSibling())break}return!1}const qa=(()=>{try{const n=new RegExp("\\p{Emoji}","u"),e=n.test.bind(n);if(e("❤️")&&e("#️⃣")&&e("👍"))return e}catch{}return()=>!1})();function vs(n,e,t){const r=n,i=r.getTextContent().split(/(?=\s)/g),s=i.length;let o=0,l=0;for(let c=0;c<s;c++){const u=c===s-1;if(l=o,o+=i[c].length,e&&o===t||o>t||u){i.splice(c,1),u&&(l=void 0);break}}const a=i.join("").trim();a===""?r.remove():(r.setTextContent(a),r.select(l,l))}function Ss(n,e,t,r){let i,s=e;if(U(n)){let o=!1;const l=n.childNodes,a=l.length,c=r._blockCursorElement;s===a&&(o=!0,s=a-1);let u=l[s],d=!1;if(u===c)u=l[s+1],d=!0;else if(c!==null){const f=c.parentNode;n===f&&e>Array.prototype.indexOf.call(f.children,c)&&s--}if(i=St(u),P(i))s=Ms(i,o);else{let f=St(n);if(f===null)return null;if(v(f)){const g=r.getElementByKey(f.getKey());g===null&&w(214),[f,s]=f.getDOMSlot(g).resolveChildIndex(f,g,n,e),v(f)||w(215),o&&s>=f.getChildrenSize()&&(s=Math.max(0,f.getChildrenSize()-1));let p=f.getChildAtIndex(s);if(v(p)&&function(_,y,m){const x=_.getParent();return m===null||x===null||!x.canBeEmpty()||x!==m.getNode()}(p,0,t)){const _=o?p.getLastDescendant():p.getFirstDescendant();_===null?f=p:(p=_,f=v(p)?p:p.getParentOrThrow()),s=0}P(p)?(i=p,f=null,s=Ms(p,o)):p!==f&&o&&!d&&(v(f)||w(216),s=Math.min(f.getChildrenSize(),s+1))}else{const g=f.getIndexWithinParent();s=e===0&&B(f)&&St(n)===f?g:g+1,f=f.getParentOrThrow()}if(v(f))return Pe(f.__key,s,"element")}}else i=St(n);return P(i)?Pe(i.__key,s,"text"):null}function Cs(n,e,t){const r=n.offset,i=n.getNode();if(r===0){const s=i.getPreviousSibling(),o=i.getParent();if(e){if((t||!e)&&s===null&&v(o)&&o.isInline()){const l=o.getPreviousSibling();P(l)&&n.set(l.__key,l.getTextContent().length,"text")}}else v(s)&&!t&&s.isInline()?n.set(s.__key,s.getChildrenSize(),"element"):P(s)&&n.set(s.__key,s.getTextContent().length,"text")}else if(r===i.getTextContent().length){const s=i.getNextSibling(),o=i.getParent();if(e&&v(s)&&s.isInline())n.set(s.__key,0,"element");else if((t||e)&&s===null&&v(o)&&o.isInline()&&!o.canInsertTextAfter()){const l=o.getNextSibling();P(l)&&n.set(l.__key,0,"text")}}}function nl(n,e,t){if(n.type==="text"&&e.type==="text"){const r=n.isBefore(e),i=n.is(e);Cs(n,r,i),Cs(e,!r,i),i&&e.set(n.key,n.offset,n.type);const s=J();if(s.isComposing()&&s._compositionKey!==n.key&&T(t)){const o=t.anchor,l=t.focus;n.set(o.key,o.offset,o.type,!0),e.set(l.key,l.offset,l.type,!0)}}}function rl(n,e,t,r,i,s){if(n===null||t===null||!dn(i,n,t))return null;const o=Ss(n,e,T(s)?s.anchor:null,i);if(o===null)return null;const l=Ss(t,r,T(s)?s.focus:null,i);if(l===null)return null;if(o.type==="element"&&l.type==="element"){const a=St(n),c=St(t);if(B(a)&&B(c))return null}return nl(o,l,s),[o,l]}function Qr(n){return v(n)&&!n.isInline()}function il(n,e,t,r,i,s){const o=He(),l=new ht(Pe(n,e,i),Pe(t,r,s),0,"");return l.dirty=!0,o._selection=l,l}function sl(){const n=Pe("root",0,"element"),e=Pe("root",0,"element");return new ht(n,e,0,"")}function ol(){return new ir(new Set)}function Ju(n,e){return sr(null,n,e,null)}function sr(n,e,t,r){const i=t._window;if(i===null)return null;const s=r||i.event,o=s?s.type:void 0,l=o==="selectionchange",a=!$r&&(l||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&s&&s.detail===3||o==="drop"||o===void 0);let c,u,d,f;if(T(n)&&!a)return n.clone();if(e===null)return null;if(c=e.anchorNode,u=e.focusNode,d=e.anchorOffset,f=e.focusOffset,l&&T(n)&&!dn(t,c,u))return n.clone();const g=rl(c,d,u,f,t,n);if(g===null)return null;const[h,p]=g;return new ht(h,p,T(n)?n.format:0,T(n)?n.style:"")}function L(){return He()._selection}function Dt(){return J()._editorState._selection}function jn(n,e,t,r=1){const i=n.anchor,s=n.focus,o=i.getNode(),l=s.getNode();if(!e.is(o)&&!e.is(l))return;const a=e.__key;if(n.isCollapsed()){const c=i.offset;if(t<=c&&r>0||t<c&&r<0){const u=Math.max(0,c+r);i.set(a,u,"element"),s.set(a,u,"element"),bs(n)}}else{const c=n.isBackward(),u=c?s:i,d=u.getNode(),f=c?i:s,g=f.getNode();if(e.is(d)){const h=u.offset;(t<=h&&r>0||t<h&&r<0)&&u.set(a,Math.max(0,h+r),"element")}if(e.is(g)){const h=f.offset;(t<=h&&r>0||t<h&&r<0)&&f.set(a,Math.max(0,h+r),"element")}}bs(n)}function bs(n){const e=n.anchor,t=e.offset,r=n.focus,i=r.offset,s=e.getNode(),o=r.getNode();if(n.isCollapsed()){if(!v(s))return;const l=s.getChildrenSize(),a=t>=l,c=a?s.getChildAtIndex(l-1):s.getChildAtIndex(t);if(P(c)){let u=0;a&&(u=c.getTextContentSize()),e.set(c.__key,u,"text"),r.set(c.__key,u,"text")}}else{if(v(s)){const l=s.getChildrenSize(),a=t>=l,c=a?s.getChildAtIndex(l-1):s.getChildAtIndex(t);if(P(c)){let u=0;a&&(u=c.getTextContentSize()),e.set(c.__key,u,"text")}}if(v(o)){const l=o.getChildrenSize(),a=i>=l,c=a?o.getChildAtIndex(l-1):o.getChildAtIndex(i);if(P(c)){let u=0;a&&(u=c.getTextContentSize()),r.set(c.__key,u,"text")}}}}function Vn(n,e,t,r,i){let s=null,o=0,l=null;r!==null?(s=r.__key,P(r)?(o=r.getTextContentSize(),l="text"):v(r)&&(o=r.getChildrenSize(),l="element")):i!==null&&(s=i.__key,P(i)?l="text":v(i)&&(l="element")),s!==null&&l!==null?n.set(s,o,l):(o=e.getIndexWithinParent(),o===-1&&(o=t.getChildrenSize()),n.set(t.__key,o,"element"))}function ks(n,e,t,r,i){n.type==="text"?n.set(t,n.offset+(e?0:i),"text"):n.offset>r.getIndexWithinParent()&&n.set(n.key,n.offset-1,"element")}function ll(n,e,t,r,i){try{n.setBaseAndExtent(e,t,r,i)}catch{}}function Ha(n,e,t,r,i,s,o){const l=r.anchorNode,a=r.focusNode,c=r.anchorOffset,u=r.focusOffset,d=document.activeElement;if(i.has("collaboration")&&d!==s||d!==null&&Mi(d))return;if(!T(e))return void(n!==null&&dn(t,l,a)&&r.removeAllRanges());const f=e.anchor,g=e.focus,h=f.key,p=g.key,_=Ot(t,h),y=Ot(t,p),m=f.offset,x=g.offset,C=e.format,N=e.style,S=e.isCollapsed();let E=_,k=y,b=!1;if(f.type==="text"){E=Lt(_);const R=f.getNode();b=R.getFormat()!==C||R.getStyle()!==N}else T(n)&&n.anchor.type==="text"&&(b=!0);var F,A,K,$,M;if(g.type==="text"&&(k=Lt(y)),E!==null&&k!==null&&(S&&(n===null||b||T(n)&&(n.format!==C||n.style!==N))&&(F=C,A=N,K=m,$=h,M=performance.now(),Ho=[F,A,K,$,M]),c!==m||u!==x||l!==E||a!==k||r.type==="Range"&&S||(d!==null&&s.contains(d)||s.focus({preventScroll:!0}),f.type==="element"))){if(ll(r,E,m,k,x),!i.has("skip-scroll-into-view")&&e.isCollapsed()&&s!==null&&s===document.activeElement){const R=T(e)&&e.anchor.type==="element"?E.childNodes[m]||null:r.rangeCount>0?r.getRangeAt(0):null;if(R!==null){let Q;if(R instanceof Text){const Oe=document.createRange();Oe.selectNode(R),Q=Oe.getBoundingClientRect()}else Q=R.getBoundingClientRect();(function(Oe,Fe,Ae){const Bt=Tl(Ae),Zi=Ri(Bt);if(Bt===null||Zi===null)return;let{top:_r,bottom:mr}=Fe,yn=0,xn=0,Ke=Ae;for(;Ke!==null;){const yr=Ke===Bt.body;if(yr)yn=0,xn=ge(Oe).innerHeight;else{const vn=Ke.getBoundingClientRect();yn=vn.top,xn=vn.bottom}let Wt=0;if(_r<yn?Wt=-(yn-_r):mr>xn&&(Wt=mr-xn),Wt!==0)if(yr)Zi.scrollBy(0,Wt);else{const vn=Ke.scrollTop;Ke.scrollTop+=Wt;const es=Ke.scrollTop-vn;_r-=es,mr-=es}if(yr)break;Ke=hn(Ke)}})(t,Q,s)}}Hr=!0}}function Xa(n){let e=L()||Dt();e===null&&(e=j().selectEnd()),e.insertNodes(n)}function wr(n){let e=n;n.isCollapsed()||e.removeText();const t=L();T(t)&&(e=t),T(e)||w(161);const r=e.anchor;let i=r.getNode(),s=r.offset;for(;!ye(i);){const o=i;if([i,s]=Ga(i,s),o.is(i))break}return s}function Ga(n,e){const t=n.getParent();if(!t){const i=H();return j().append(i),i.select(),[j(),0]}if(P(n)){const i=n.splitText(e);if(i.length===0)return[t,n.getIndexWithinParent()];const s=e===0?0:1;return[t,i[0].getIndexWithinParent()+s]}if(!v(n)||e===0)return[t,n.getIndexWithinParent()];const r=n.getChildAtIndex(e);if(r){const i=new ht(Pe(n.__key,e,"element"),Pe(n.__key,e,"element"),0,""),s=n.insertNewAfter(i);s&&s.append(r,...r.getNextSiblings())}return[t,n.getIndexWithinParent()+1]}function Ts(n,e,t,r,i="decorators-and-blocks"){if(e==="move"&&r==="character"&&!n.isCollapsed()){const[u,d]=t===n.isBackward()?[n.focus,n.anchor]:[n.anchor,n.focus];return d.set(u.key,u.offset,u.type),!0}const s=qe(n.focus,t?"previous":"next"),o=r==="lineboundary",l=e==="move";let a=s,c=i==="decorators-and-blocks";if(!Pl(a)){for(const u of a){c=!1;const{origin:d}=u;if(!B(d)||d.isIsolated()||(a=u,!o||!d.isInline()))break}if(c)for(const u of Hi(s).iterNodeCarets(e==="extend"?"shadowRoot":"root")){if(Ee(u))u.origin.isInline()||(a=u);else{if(v(u.origin))continue;B(u.origin)&&!u.origin.isInline()&&(a=u)}break}}if(a===s)return!1;if(l&&!o&&B(a.origin)&&a.origin.isKeyboardSelectable()){const u=ol();return u.add(a.origin.getKey()),ae(u),!0}return a=he(a),l&&ut(n.anchor,a),ut(n.focus,a),c||!o}let G=null,q=null,oe=!1,Nr=!1,An=0;const ws={characterData:!0,childList:!0,subtree:!0};function cn(){return oe||G!==null&&G._readOnly}function ee(){oe&&w(13)}function al(){An>99&&w(14)}function He(){return G===null&&w(195,cl()),G}function J(){return q===null&&w(196,cl()),q}function cl(){let n=0;const e=new Set,t=lr.version;if(typeof window<"u")for(const i of document.querySelectorAll("[contenteditable]")){const s=ar(i);if(Di(s))n++;else if(s){let o=String(s.constructor.version||"<0.17.1");o===t&&(o+=" (separately built, likely a bundler configuration issue)"),e.add(o)}}let r=` Detected on the page: ${n} compatible editor(s) with version ${t}`;return e.size&&(r+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),r}function Ya(){return q}function Ns(n,e,t){const r=e.__type,i=function(l,a){const c=l._nodes.get(a);return c===void 0&&w(30,a),c}(n,r);let s=t.get(r);s===void 0&&(s=Array.from(i.transforms),t.set(r,s));const o=s.length;for(let l=0;l<o&&(s[l](e),e.isAttached());l++);}function Es(n,e){return n!==void 0&&n.__key!==e&&n.isAttached()}function ul(n,e){if(!e)return;const t=n._updateTags;let r=e;Array.isArray(e)||(r=[e]);for(const i of r)t.add(i)}function Qa(n){return Li(n,J()._nodes)}function Li(n,e){const t=n.type,r=e.get(t);r===void 0&&w(17,t);const i=r.klass;n.type!==i.getType()&&w(18,i.name);const s=i.importJSON(n),o=n.children;if(v(s)&&Array.isArray(o))for(let l=0;l<o.length;l++){const a=Li(o[l],e);s.append(a)}return s}function Ps(n,e,t){const r=G,i=oe,s=q;G=e,oe=!0,q=n;try{return t()}finally{G=r,oe=i,q=s}}function Ie(n,e){const t=n._pendingEditorState,r=n._rootElement,i=n._headless||r===null;if(t===null)return;const s=n._editorState,o=s._selection,l=t._selection,a=n._dirtyType!==nt,c=G,u=oe,d=q,f=n._updating,g=n._observer;let h=null;if(n._pendingEditorState=null,n._editorState=t,!i&&a&&g!==null){q=n,G=t,oe=!1,n._updating=!0;try{const S=n._dirtyType,E=n._dirtyElements,k=n._dirtyLeaves;g.disconnect(),h=ka(s,t,n,S,E,k)}catch(S){if(S instanceof Error&&n._onError(S),Nr)throw S;return pl(n,null,r,t),Lo(n),n._dirtyType=Et,Nr=!0,Ie(n,s),void(Nr=!1)}finally{g.observe(r,ws),n._updating=f,G=c,oe=u,q=d}}t._readOnly||(t._readOnly=!0);const p=n._dirtyLeaves,_=n._dirtyElements,y=n._normalizedNodes,m=n._updateTags,x=n._deferred;a&&(n._dirtyType=nt,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements=new Map,n._normalizedNodes=new Set,n._updateTags=new Set),function(S,E){const k=S._decorators;let b=S._pendingDecorators||k;const F=E._nodeMap;let A;for(A in b)F.has(A)||(b===k&&(b=xl(S)),delete b[A])}(n,t);const C=i?null:ve(ge(n));if(n._editable&&C!==null&&(a||l===null||l.dirty)&&r!==null&&!m.has("skip-dom-selection")){q=n,G=t;try{if(g!==null&&g.disconnect(),a||l===null||l.dirty){const S=n._blockCursorElement;S!==null&&ti(S,n,r),Ha(o,l,n,C,m,r)}(function(S,E,k){let b=S._blockCursorElement;if(T(k)&&k.isCollapsed()&&k.anchor.type==="element"&&E.contains(document.activeElement)){const F=k.anchor,A=F.getNode(),K=F.offset;let $=!1,M=null;if(K===A.getChildrenSize())Pr(A.getChildAtIndex(K-1))&&($=!0);else{const R=A.getChildAtIndex(K);if(R!==null&&Pr(R)){const Q=R.getPreviousSibling();(Q===null||Pr(Q))&&($=!0,M=S.getElementByKey(R.__key))}}if($){const R=S.getElementByKey(A.__key);return b===null&&(S._blockCursorElement=b=function(Q){const Oe=Q.theme,Fe=document.createElement("div");Fe.contentEditable="false",Fe.setAttribute("data-lexical-cursor","true");let Ae=Oe.blockCursor;if(Ae!==void 0){if(typeof Ae=="string"){const Bt=In(Ae);Ae=Oe.blockCursor=Bt}Ae!==void 0&&Fe.classList.add(...Ae)}return Fe}(S._config)),E.style.caretColor="transparent",void(M===null?R.appendChild(b):R.insertBefore(b,M))}}b!==null&&ti(b,S,E)})(n,r,l)}finally{g!==null&&g.observe(r,ws),q=d,G=c}}h!==null&&function(S,E,k,b,F){const A=Array.from(S._listeners.mutation),K=A.length;for(let $=0;$<K;$++){const[M,R]=A[$],Q=E.get(R);Q!==void 0&&M(Q,{dirtyLeaves:b,prevEditorState:F,updateTags:k})}}(n,h,m,p,s),T(l)||l===null||o!==null&&o.is(l)||n.dispatchCommand(zo,void 0);const N=n._pendingDecorators;N!==null&&(n._decorators=N,n._pendingDecorators=null,Xt("decorator",n,!0,N)),function(S,E,k){const b=As(E),F=As(k);b!==F&&Xt("textcontent",S,!0,F)}(n,e||s,t),Xt("update",n,!0,{dirtyElements:_,dirtyLeaves:p,editorState:t,normalizedNodes:y,prevEditorState:e||s,tags:m}),function(S,E){if(S._deferred=[],E.length!==0){const k=S._updating;S._updating=!0;try{for(let b=0;b<E.length;b++)E[b]()}finally{S._updating=k}}}(n,x),function(S){const E=S._updates;if(E.length!==0){const k=E.shift();if(k){const[b,F]=k;Oi(S,b,F)}}}(n)}function Xt(n,e,t,...r){const i=e._updating;e._updating=t;try{const s=Array.from(e._listeners[n]);for(let o=0;o<s.length;o++)s[o].apply(null,r)}finally{e._updating=i}}function fl(n,e,t){if(n._updating===!1||q!==n){let i=!1;return n.update(()=>{i=fl(n,e,t)}),i}const r=Ii(n);for(let i=4;i>=0;i--)for(let s=0;s<r.length;s++){const o=r[s]._commands.get(e);if(o!==void 0){const l=o[i];if(l!==void 0){const a=Array.from(l),c=a.length;for(let u=0;u<c;u++)if(a[u](t,n)===!0)return!0}}}return!1}function Ls(n,e){const t=n._updates;let r=e||!1;for(;t.length!==0;){const i=t.shift();if(i){const[s,o]=i;let l;if(o!==void 0){if(l=o.onUpdate,o.skipTransforms&&(r=!0),o.discrete){const a=n._pendingEditorState;a===null&&w(191),a._flushSync=!0}l&&n._deferred.push(l),ul(n,o.tag)}s()}}return r}function Oi(n,e,t){const r=n._updateTags;let i,s=!1,o=!1;t!==void 0&&(i=t.onUpdate,ul(n,t.tag),s=t.skipTransforms||!1,o=t.discrete||!1),i&&n._deferred.push(i);const l=n._editorState;let a=n._pendingEditorState,c=!1;(a===null||a._readOnly)&&(a=n._pendingEditorState=dl(a||l),c=!0),a._flushSync=o;const u=G,d=oe,f=q,g=n._updating;G=a,oe=!1,n._updating=!0,q=n;const h=n._headless||n.getRootElement()===null;try{c&&(h?l._selection!==null&&(a._selection=l._selection.clone()):a._selection=function(m,x){const C=m.getEditorState()._selection,N=ve(ge(m));return T(C)||C==null?sr(C,N,m,x):C.clone()}(n,t&&t.event||null));const _=n._compositionKey;e(),s=Ls(n,s),function(m,x){const C=x.getEditorState()._selection,N=m._selection;if(T(N)){const S=N.anchor,E=N.focus;let k;if(S.type==="text"&&(k=S.getNode(),k.selectionTransform(C,N)),E.type==="text"){const b=E.getNode();k!==b&&b.selectionTransform(C,N)}}}(a,n),n._dirtyType!==nt&&(s?function(m,x){const C=x._dirtyLeaves,N=m._nodeMap;for(const S of C){const E=N.get(S);P(E)&&E.isAttached()&&E.isSimpleText()&&!E.isUnmergeable()&&os(E)}}(a,n):function(m,x){const C=x._dirtyLeaves,N=x._dirtyElements,S=m._nodeMap,E=Ue(),k=new Map;let b=C,F=b.size,A=N,K=A.size;for(;F>0||K>0;){if(F>0){x._dirtyLeaves=new Set;for(const $ of b){const M=S.get($);P(M)&&M.isAttached()&&M.isSimpleText()&&!M.isUnmergeable()&&os(M),M!==void 0&&Es(M,E)&&Ns(x,M,k),C.add($)}if(b=x._dirtyLeaves,F=b.size,F>0){An++;continue}}x._dirtyLeaves=new Set,x._dirtyElements=new Map;for(const $ of A){const M=$[0],R=$[1];if(M!=="root"&&!R)continue;const Q=S.get(M);Q!==void 0&&Es(Q,E)&&Ns(x,Q,k),N.set(M,R)}b=x._dirtyLeaves,F=b.size,A=x._dirtyElements,K=A.size,An++}x._dirtyLeaves=C,x._dirtyElements=N}(a,n),Ls(n),function(m,x,C,N){const S=m._nodeMap,E=x._nodeMap,k=[];for(const[b]of N){const F=E.get(b);F!==void 0&&(F.isAttached()||(v(F)&&No(F,b,S,E,k,N),S.has(b)||N.delete(b),k.push(b)))}for(const b of k)E.delete(b);for(const b of C){const F=E.get(b);F===void 0||F.isAttached()||(S.has(b)||C.delete(b),E.delete(b))}}(l,a,n._dirtyLeaves,n._dirtyElements)),_!==n._compositionKey&&(a._flushSync=!0);const y=a._selection;if(T(y)){const m=a._nodeMap,x=y.anchor.key,C=y.focus.key;m.get(x)!==void 0&&m.get(C)!==void 0||w(19)}else ke(y)&&y._nodes.size===0&&(a._selection=null)}catch(_){return _ instanceof Error&&n._onError(_),n._pendingEditorState=l,n._dirtyType=Et,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),void Ie(n)}finally{G=u,oe=d,q=f,n._updating=g,An=0}n._dirtyType!==nt||n._deferred.length>0||function(_,y){const m=y.getEditorState()._selection,x=_._selection;if(x!==null){if(x.dirty||!x.is(m))return!0}else if(m!==null)return!0;return!1}(a,n)?a._flushSync?(a._flushSync=!1,Ie(n)):c&&rc(()=>{Ie(n)}):(a._flushSync=!1,c&&(r.clear(),n._deferred=[],n._pendingEditorState=null))}function de(n,e,t){n._updating?q===n?e():n._updates.push([e,t]):Oi(n,e,t)}class Gt{constructor(e,t,r){this.element=e,this.before=t||null,this.after=r||null}withBefore(e){return new Gt(this.element,e,this.after)}withAfter(e){return new Gt(this.element,this.before,e)}withElement(e){return new Gt(e,this.before,this.after)}insertChild(e){const t=this.before||this.getManagedLineBreak();return t!==null&&t.parentElement!==this.element&&w(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&w(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&w(224),this.element.replaceChild(e,t),this}getFirstChild(){const e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){if(e===null)this.removeManagedLineBreak();else{const t=e==="decorator"&&(Nt||Yt);this.insertManagedLineBreak(t)}}removeManagedLineBreak(){const e=this.getManagedLineBreak();if(e){const t=this.element,r=e.nodeName==="IMG"?e.nextSibling:null;r&&t.removeChild(r),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){const t=this.getManagedLineBreak();if(t){if(e===(t.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,i=this.before,s=document.createElement("br");if(r.insertBefore(s,i),e){const o=document.createElement("img");o.setAttribute("data-lexical-linebreak","true"),o.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",o.alt="",r.insertBefore(o,s),r.__lexicalLineBreak=o}else r.__lexicalLineBreak=s}getFirstChildOffset(){let e=0;for(let t=this.after;t!==null;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,r,i){if(r===this.element){const a=this.getFirstChildOffset();return[e,Math.min(a+e.getChildrenSize(),Math.max(a,i))]}const s=Os(t,r);s.push(i);const o=Os(t,this.element);let l=e.getIndexWithinParent();for(let a=0;a<o.length;a++){const c=s[a],u=o[a];if(c===void 0||c<u)break;if(c>u){l+=1;break}}return[e.getParentOrThrow(),l]}}function Os(n,e){const t=[];let r=e;for(;r!==n&&r!==null;r=e.parentNode){let i=0;for(let s=r.previousSibling;s!==null;s=s.previousSibling)i++;t.push(i)}return r!==n&&w(225),t.reverse()}class We extends rr{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__first=e.__first,this.__last=e.__last,this.__size=e.__size,this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return fa[e]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const e=J()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return t!==null&&t.is(e)}getAllTextNodes(){const e=[];let t=this.getFirstChild();for(;t!==null;){if(P(t)&&e.push(t),v(t)){const r=t.getAllTextNodes();e.push(...r)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;v(e);){const t=e.getFirstChild();if(t===null)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;v(e);){const t=e.getLastChild();if(t===null)break;e=t}return e}getDescendantByIndex(e){const t=this.getChildren(),r=t.length;if(e>=r){const s=t[r-1];return v(s)&&s.getLastDescendant()||s||null}const i=t[e];return v(i)&&i.getFirstDescendant()||i||null}getFirstChild(){const e=this.getLatest().__first;return e===null?null:Y(e)}getFirstChildOrThrow(){const e=this.getFirstChild();return e===null&&w(45,this.__key),e}getLastChild(){const e=this.getLatest().__last;return e===null?null:Y(e)}getLastChildOrThrow(){const e=this.getLastChild();return e===null&&w(96,this.__key),e}getChildAtIndex(e){const t=this.getChildrenSize();let r,i;if(e<t/2){for(r=this.getFirstChild(),i=0;r!==null&&i<=e;){if(i===e)return r;r=r.getNextSibling(),i++}return null}for(r=this.getLastChild(),i=t-1;r!==null&&i>=e;){if(i===e)return r;r=r.getPreviousSibling(),i--}return null}getTextContent(){let e="";const t=this.getChildren(),r=t.length;for(let i=0;i<r;i++){const s=t[i];e+=s.getTextContent(),v(s)&&i!==r-1&&!s.isInline()&&(e+=ze)}return e}getTextContentSize(){let e=0;const t=this.getChildren(),r=t.length;for(let i=0;i<r;i++){const s=t[i];e+=s.getTextContentSize(),v(s)&&i!==r-1&&!s.isInline()&&(e+=ze.length)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(e!==""){const t=rs[e];return!!(this.getFormat()&t)}return!1}hasTextFormat(e){const t=rt[e];return!!(this.getTextFormat()&t)}getFormatFlags(e,t){return qn(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){ee();const r=L();let i=e,s=t;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&t===0){const a=this.getFirstChild();if(P(a)||v(a))return a.select(0,0)}else if(!(e!==void 0&&e!==o||t!==void 0&&t!==o)){const a=this.getLastChild();if(P(a)||v(a))return a.select()}}i===void 0&&(i=o),s===void 0&&(s=o);const l=this.__key;return T(r)?(r.anchor.set(l,i,"element"),r.focus.set(l,s,"element"),r.dirty=!0,r):il(l,i,l,s,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach(t=>t.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=e!==""?rs[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){const t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){const t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,r){const i=r.length,s=this.getChildrenSize(),o=this.getWritable();e+t<=s||w(226,String(e),String(t),String(s));const l=o.__key,a=[],c=[],u=this.getChildAtIndex(e+t);let d=null,f=s-t+i;if(e!==0)if(e===s)d=this.getLastChild();else{const h=this.getChildAtIndex(e);h!==null&&(d=h.getPreviousSibling())}if(t>0){let h=d===null?this.getFirstChild():d.getNextSibling();for(let p=0;p<t;p++){h===null&&w(100);const _=h.getNextSibling(),y=h.__key;et(h.getWritable()),c.push(y),h=_}}let g=d;for(let h=0;h<i;h++){const p=r[h];g!==null&&p.is(g)&&(d=g=g.getPreviousSibling());const _=p.getWritable();_.__parent===l&&f--,et(_);const y=p.__key;if(g===null)o.__first=y,_.__prev=null;else{const m=g.getWritable();m.__next=y,_.__prev=m.__key}p.__key===l&&w(76),_.__parent=l,a.push(y),g=p}if(e+t===s)g!==null&&(g.getWritable().__next=null,o.__last=g.__key);else if(u!==null){const h=u.getWritable();if(g!==null){const p=g.getWritable();h.__prev=g.__key,p.__next=u.__key}else h.__prev=null}if(o.__size=f,c.length){const h=L();if(T(h)){const p=new Set(c),_=new Set(a),{anchor:y,focus:m}=h;Fs(y,p,_)&&Vn(y,y.getNode(),this,d,u),Fs(m,p,_)&&Vn(m,m.getNode(),this,d,u),f!==0||this.canBeEmpty()||ne(this)||this.remove()}}return o}getDOMSlot(e){return new Gt(e)}exportDOM(e){const{element:t}=super.exportDOM(e);if(U(t)){const r=this.getIndent();r>0&&(t.style.paddingInlineStart=40*r+"px");const i=this.getDirection();i&&(t.dir=i)}return{element:t}}exportJSON(){const e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),r=this.getTextStyle();return t!==0&&(e.textFormat=t),r!==""&&(e.textStyle=r),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){const r=this.getDOMSlot(e);let i=r.getFirstChild();for(let s=this.getFirstChild();s;s=s.getNextSibling()){const o=t.getElementByKey(s.getKey());o!==null&&(i==null?(r.insertChild(o),i=o):i!==o&&r.replaceChild(o,i),i=i.nextSibling)}}}function v(n){return n instanceof We}function Fs(n,e,t){let r=n.getNode();for(;r;){const i=r.__key;if(e.has(i)&&!t.has(i))return!0;r=r.getParent()}return!1}class Za extends rr{decorate(e,t){w(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function B(n){return n instanceof Za}class un extends We{static getType(){return"root"}static clone(){return new un}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){w(51)}getTextContent(){const e=this.__cachedText;return!cn()&&J()._dirtyType!==nt||e===null?super.getTextContent():e}remove(){w(52)}replace(e){w(53)}insertBefore(e){w(54)}insertAfter(e){w(55)}updateDOM(e,t){return!1}append(...e){for(let t=0;t<e.length;t++){const r=e[t];v(r)||B(r)||w(56)}return super.append(...e)}static importJSON(e){return j().updateFromJSON(e)}collapseAtStart(){return!0}}function te(n){return n instanceof un}function dl(n){return new or(new Map(n._nodeMap))}function Fi(){return new or(new Map([["root",new un]]))}function hl(n){const e=n.exportJSON(),t=n.constructor;if(e.type!==t.getType()&&w(130,t.name),v(n)){const r=e.children;Array.isArray(r)||w(59,t.name);const i=n.getChildren();for(let s=0;s<i.length;s++){const o=hl(i[s]);r.push(o)}}return e}class or{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e,t){return Ps(t&&t.editor||null,this,e)}clone(e){const t=new or(this._nodeMap,e===void 0?this._selection:e);return t._readOnly=!0,t}toJSON(){return Ps(null,this,()=>({root:hl(j())}))}}class Ai extends We{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class fn extends We{static getType(){return"paragraph"}static clone(e){return new fn(e.__key)}createDOM(e){const t=document.createElement("p"),r=wt(e.theme,"paragraph");return r!==void 0&&t.classList.add(...r),t}updateDOM(e,t,r){return!1}static importDOM(){return{p:e=>({conversion:ec,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(U(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();t.style.textAlign=r}return{element:t}}static importJSON(e){return H().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(e,t){const r=H();r.setTextFormat(e.format),r.setTextStyle(e.style);const i=this.getDirection();return r.setDirection(i),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,t),r}collapseAtStart(){const e=this.getChildren();if(e.length===0||P(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function ec(n){const e=H();return n.style&&(e.setFormat(n.style.textAlign),Ji(n,e)),{node:e}}function H(){return Le(new fn)}function gl(n){return n instanceof fn}const I=0,Te=1,Uu=3,tc=4;function pl(n,e,t,r){const i=n._keyToDOMMap;i.clear(),n._editorState=Fi(),n._pendingEditorState=r,n._compositionKey=null,n._dirtyType=nt,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),n._normalizedNodes=new Set,n._updateTags=new Set,n._updates=[],n._blockCursorElement=null;const s=n._observer;s!==null&&(s.disconnect(),n._observer=null),e!==null&&(e.textContent=""),t!==null&&(t.textContent="",i.set("root",t))}function ju(n){const e=n||{},t=Ya(),r=e.theme||{},i=n===void 0?t:e.parentEditor||null,s=e.disableEvents||!1,o=Fi(),l=e.namespace||(i!==null?i._config.namespace:Cl()),a=e.editorState,c=[un,dt,on,ln,fn,Ai,...e.nodes||[]],{onError:u,html:d}=e,f=e.editable===void 0||e.editable;let g;if(n===void 0&&t!==null)g=t._nodes;else{g=new Map;for(let p=0;p<c.length;p++){let _=c[p],y=null,m=null;if(typeof _!="function"){const S=_;_=S.replace,y=S.with,m=S.withKlass||null}const x=_.getType(),C=_.transform(),N=new Set;C!==null&&N.add(C),g.set(x,{exportDOM:d&&d.export?d.export.get(_):void 0,klass:_,replace:y,replaceWithKlass:m,transforms:N})}}const h=new lr(o,i,g,{disableEvents:s,namespace:l,theme:r},u||console.error,function(p,_){const y=new Map,m=new Set,x=C=>{Object.keys(C).forEach(N=>{let S=y.get(N);S===void 0&&(S=[],y.set(N,S)),S.push(C[N])})};return p.forEach(C=>{const N=C.klass.importDOM;if(N==null||m.has(N))return;m.add(N);const S=N.call(C.klass);S!==null&&x(S)}),_&&x(_),y}(g,d?d.import:void 0),f);return a!==void 0&&(h._pendingEditorState=a,h._dirtyType=Et),h}class lr{constructor(e,t,r,i,s,o,l){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=nt,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Cl(),this._onError=s,this._htmlConversions=o,this._editable=l,this._headless=t!==null&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){const t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){const t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){const t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){const t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,r){r===void 0&&w(35);const i=this._commands;i.has(e)||i.set(e,[new Set,new Set,new Set,new Set,new Set]);const s=i.get(e);s===void 0&&w(36,String(e));const o=s[r];return o.add(t),()=>{o.delete(t),s.every(l=>l.size===0)&&i.delete(e)}}registerMutationListener(e,t,r){const i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,s=this._listeners.mutation;s.set(t,i);const o=r&&r.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(t,i),()=>{s.delete(t)}}getRegisteredNode(e){const t=this._nodes.get(e.getType());return t===void 0&&w(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){const r=this._editorState,i=Rs(r).get(t.getType());if(!i)return;const s=new Map;for(const o of i.keys())s.set(o,"created");s.size>0&&e(s,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){const r=this.getRegisteredNode(e);return r.transforms.add(t),r}registerNodeTransform(e,t){const r=this.registerNodeTransformToKlass(e,t),i=[r],s=r.replaceWithKlass;if(s!=null){const o=this.registerNodeTransformToKlass(s,t);i.push(o)}return function(o,l){const a=Rs(o.getEditorState()),c=[];for(const u of l){const d=a.get(u);d&&c.push(d)}c.length!==0&&o.update(()=>{for(const u of c)for(const d of u.keys()){const f=Y(d);f&&f.markDirty()}},o._pendingEditorState===null?{tag:"history-merge"}:void 0)}(this,i.map(o=>o.klass.getType())),()=>{i.forEach(o=>o.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return O(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const t=this._rootElement;if(e!==t){const r=wt(this._config.theme,"root"),i=this._pendingEditorState||this._editorState;if(this._rootElement=e,pl(this,t,e,i),t!==null&&(this._config.disableEvents||za(t),r!=null&&t.classList.remove(...r)),e!==null){const s=Ri(e),o=e.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=s,this._dirtyType=Et,Lo(this),this._updateTags.add("history-merge"),Ie(this),this._config.disableEvents||function(l,a){const c=l.ownerDocument,u=Un.get(c);(u===void 0||u<1)&&c.addEventListener("selectionchange",Zo),Un.set(c,(u||0)+1),l.__lexicalEditor=a;const d=Qo(l);for(let f=0;f<Vr.length;f++){const[g,h]=Vr[f],p=typeof h=="function"?_=>{hs(_)||(ds(_),(a.isEditable()||g==="click")&&h(_,a))}:_=>{if(hs(_))return;ds(_);const y=a.isEditable();switch(g){case"cut":return y&&O(a,Ei,_);case"copy":return O(a,nr,_);case"paste":return y&&O(a,vi,_);case"dragstart":return y&&O(a,jo,_);case"dragover":return y&&O(a,Vo,_);case"dragend":return y&&O(a,Fa,_);case"focus":return y&&O(a,Da,_);case"blur":return y&&O(a,$a,_);case"drop":return y&&O(a,Uo,_)}};l.addEventListener(g,p),d.push(()=>{l.removeEventListener(g,p)})}}(e,this),r!=null&&e.classList.add(...r)}else this._window=null,this._updateTags.add("history-merge"),Ie(this);Xt("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&w(38);let r=e;r._readOnly&&(r=dl(e),r._selection=e._selection?e._selection.clone():null),Po(this);const i=this._pendingEditorState,s=this._updateTags,o=t!==void 0?t.tag:null;i===null||i.isEmpty()||(o!=null&&s.add(o),Ie(this)),this._pendingEditorState=r,this._dirtyType=Et,this._dirtyElements.set("root",!1),this._compositionKey=null,o!=null&&s.add(o),this._updating||Ie(this)}parseEditorState(e,t){return function(r,i,s){const o=Fi(),l=G,a=oe,c=q,u=i._dirtyElements,d=i._dirtyLeaves,f=i._cloneNotNeeded,g=i._dirtyType;i._dirtyElements=new Map,i._dirtyLeaves=new Set,i._cloneNotNeeded=new Set,i._dirtyType=0,G=o,oe=!1,q=i;try{const h=i._nodes;Li(r.root,h),s&&s(),o._readOnly=!0}catch(h){h instanceof Error&&i._onError(h)}finally{i._dirtyElements=u,i._dirtyLeaves=d,i._cloneNotNeeded=f,i._dirtyType=g,G=l,oe=a,q=c}return o}(typeof e=="string"?JSON.parse(e):e,this,t)}read(e){return Ie(this),this.getEditorState().read(e,{editor:this})}update(e,t){(function(r,i,s){r._updating?r._updates.push([i,s]):Oi(r,i,s)})(this,e,t)}focus(e,t={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),de(this,()=>{const i=L(),s=j();i!==null?i.dirty=!0:s.getChildrenSize()!==0&&(t.defaultSelection==="rootStart"?s.selectStart():s.selectEnd()),oc("focus"),lc(()=>{r.removeAttribute("autocapitalize"),e&&e()})}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const t=ve(this._window);t!==null&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,Xt("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}lr.version="0.27.2+prod.esm";let nc=1;const rc=typeof queueMicrotask=="function"?queueMicrotask:n=>{Promise.resolve().then(n)};function Mi(n){const e=document.activeElement;if(!U(e))return!1;const t=e.nodeName;return B(Be(n))&&(t==="INPUT"||t==="TEXTAREA"||e.contentEditable==="true"&&ar(e)==null)}function dn(n,e,t){const r=n.getRootElement();try{return r!==null&&r.contains(e)&&r.contains(t)&&e!==null&&!Mi(e)&&$i(e)===n}catch{return!1}}function Di(n){return n instanceof lr}function $i(n){let e=n;for(;e!=null;){const t=ar(e);if(Di(t))return t;e=hn(e)}return null}function ar(n){return n?n.__lexicalEditor:null}function Ye(n){return n.isToken()||n.isSegmented()}function Re(n){return $t(n)&&n.nodeType===ea}function ic(n){return $t(n)&&n.nodeType===ta}function Lt(n){let e=n;for(;e!=null;){if(Re(e))return e;e=e.firstChild}return null}function qn(n,e,t){const r=rt[e];if(t!==null&&(n&r)==(t&r))return n;let i=n^r;return e==="subscript"?i&=-65:e==="superscript"?i&=-33:e==="lowercase"?(i&=-513,i&=-1025):e==="uppercase"?(i&=-257,i&=-1025):e==="capitalize"&&(i&=-257,i&=-513),i}function _l(n){return P(n)||Tt(n)||B(n)}function ml(n,e){if(e!=null)return void(n.__key=e);ee(),al();const t=J(),r=He(),i=""+nc++;r._nodeMap.set(i,n),v(n)?t._dirtyElements.set(i,!0):t._dirtyLeaves.add(i),t._cloneNotNeeded.add(i),t._dirtyType=ko,n.__key=i}function et(n){const e=n.getParent();if(e!==null){const t=n.getWritable(),r=e.getWritable(),i=n.getPreviousSibling(),s=n.getNextSibling();if(i===null)if(s!==null){const o=s.getWritable();r.__first=s.__key,o.__prev=null}else r.__first=null;else{const o=i.getWritable();if(s!==null){const l=s.getWritable();l.__prev=o.__key,o.__next=l.__key}else o.__next=null;t.__prev=null}if(s===null)if(i!==null){const o=i.getWritable();r.__last=i.__key,o.__next=null}else r.__last=null;else{const o=s.getWritable();if(i!==null){const l=i.getWritable();l.__next=o.__key,o.__prev=l.__key}else o.__prev=null;t.__next=null}r.__size--,t.__parent=null}}function Hn(n){al();const e=n.getLatest(),t=e.__parent,r=He(),i=J(),s=r._nodeMap,o=i._dirtyElements;t!==null&&function(a,c,u){let d=a;for(;d!==null;){if(u.has(d))return;const f=c.get(d);if(f===void 0)break;u.set(d,!1),d=f.__parent}}(t,s,o);const l=e.__key;i._dirtyType=ko,v(n)?o.set(l,!0):i._dirtyLeaves.add(l)}function Z(n){ee();const e=J(),t=e._compositionKey;if(n!==t){if(e._compositionKey=n,t!==null){const r=Y(t);r!==null&&r.getWritable()}if(n!==null){const r=Y(n);r!==null&&r.getWritable()}}}function Ue(){return cn()?null:J()._compositionKey}function Y(n,e){const t=(e||He())._nodeMap.get(n);return t===void 0?null:t}function yl(n,e){const t=cr(n,J());return t!==void 0?Y(t,e):null}function cr(n,e){return n[`__lexicalKey_${e._key}`]}function Be(n,e){let t=n;for(;t!=null;){const r=yl(t,e);if(r!==null)return r;t=hn(t)}return null}function xl(n){const e=n._decorators,t=Object.assign({},e);return n._pendingDecorators=t,t}function As(n){return n.read(()=>j().getTextContent())}function j(){return vl(He())}function vl(n){return n._nodeMap.get("root")}function ae(n){ee();const e=He();n!==null&&(n.dirty=!0,n.setCachedNodes(null)),e._selection=n}function St(n){const e=J(),t=function(r,i){let s=r;for(;s!=null;){const o=cr(s,i);if(o!==void 0)return o;s=hn(s)}return null}(n,e);return t===null?n===e.getRootElement()?Y("root"):null:Y(t)}function Ms(n,e){return e?n.getTextContentSize():0}function Sl(n){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(n)}function Ii(n){const e=[];let t=n;for(;t!==null;)e.push(t),t=t._parentEditor;return e}function Cl(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function bl(n){return Re(n)?n.nodeValue:null}function zi(n,e,t){const r=ve(ge(e));if(r===null)return;const i=r.anchorNode;let{anchorOffset:s,focusOffset:o}=r;if(i!==null){let l=bl(i);const a=Be(i);if(l!==null&&P(a)){if(l===er&&t){const c=t.length;l=t,s=c,o=c}l!==null&&Bi(a,l,s,o,n)}}}function Bi(n,e,t,r,i){let s=n;if(s.isAttached()&&(i||!s.isDirty())){const o=s.isComposing();let l=e;(o||i)&&e[e.length-1]===er&&(l=e.slice(0,-1));const a=s.getTextContent();if(i||l!==a){if(l===""){if(Z(null),Yt||Nt||$n)s.remove();else{const p=J();setTimeout(()=>{p.update(()=>{s.isAttached()&&s.remove()})},20)}return}const c=s.getParent(),u=Dt(),d=s.getTextContentSize(),f=Ue(),g=s.getKey();if(s.isToken()||f!==null&&g===f&&!o||T(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===n.__key&&u.anchor.offset===0&&!s.canInsertTextBefore()&&!o||u.focus.key===n.__key&&u.focus.offset===d&&!s.canInsertTextAfter()&&!o))return void s.markDirty();const h=L();if(!T(h)||t===null||r===null)return void s.setTextContent(l);if(h.setTextNodeRange(s,t,s,r),s.isSegmented()){const p=X(s.getTextContent());s.replace(p),s=p}s.setTextContent(l)}}}function Ds(n){return n==="ArrowLeft"}function $s(n){return n==="ArrowRight"}function jt(n,e){return _e?n:e}function Is(n){return n==="Enter"}function mt(n){return n==="Backspace"}function Kt(n){return n==="Delete"}function zs(n,e,t){return n.toLowerCase()==="a"&&jt(e,t)}function sc(n){const e=j();if(T(n)){const t=n.anchor,r=n.focus,i=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();return t.set(i.getKey(),0,"element"),r.set(i.getKey(),i.getChildrenSize(),"element"),Pt(n),n}{const t=e.select(0,e.getChildrenSize());return ae(Pt(t)),t}}function wt(n,e){n.__lexicalClassNameCache===void 0&&(n.__lexicalClassNameCache={});const t=n.__lexicalClassNameCache,r=t[e];if(r!==void 0)return r;const i=n[e];if(typeof i=="string"){const s=In(i);return t[e]=s,s}return i}function Wi(n,e,t,r,i){if(t.size===0)return;const s=r.__type,o=r.__key,l=e.get(s);l===void 0&&w(33,s);const a=l.klass;let c=n.get(a);c===void 0&&(c=new Map,n.set(a,c));const u=c.get(o),d=u==="destroyed"&&i==="created";(u===void 0||d)&&c.set(o,d?"updated":i)}function Bs(n,e,t){const r=n.getParent();let i=t,s=n;return r!==null&&(e&&t===0?(i=s.getIndexWithinParent(),s=r):e||t!==s.getChildrenSize()||(i=s.getIndexWithinParent()+1,s=r)),s.getChildAtIndex(e?i-1:i)}function Zr(n,e){const t=n.offset;if(n.type==="element")return Bs(n.getNode(),e,t);{const r=n.getNode();if(e&&t===0||!e&&t===r.getTextContentSize()){const i=e?r.getPreviousSibling():r.getNextSibling();return i===null?Bs(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):i}}return null}function kl(n){const e=ge(n).event,t=e&&e.inputType;return t==="insertFromPaste"||t==="insertFromPasteAsQuotation"}function O(n,e,t){return fl(n,e,t)}function ur(n){return!te(n)&&!n.isLastChild()&&!n.isInline()}function Ot(n,e){const t=n._keyToDOMMap.get(e);return t===void 0&&w(75,e),t}function hn(n){const e=n.assignedSlot||n.parentElement;return ni(e)?e.host:e}function Tl(n){return ic(n)?n:U(n)?n.ownerDocument:null}function oc(n){ee(),J()._updateTags.add(n)}function lc(n){ee(),J()._deferred.push(n)}function ei(n,e){let t=n.getParent();for(;t!==null;){if(t.is(e))return!0;t=t.getParent()}return!1}function Ri(n){const e=Tl(n);return e?e.defaultView:null}function ge(n){const e=n._window;return e===null&&w(78),e}function ac(n){let e=n.getParentOrThrow();for(;e!==null;){if(ne(e))return e;e=e.getParentOrThrow()}return e}function ne(n){return te(n)||v(n)&&n.isShadowRoot()}function cc(n){const e=n.constructor.clone(n);return ml(e,null),e}function Le(n){const e=J(),t=n.constructor.getType(),r=e._nodes.get(t);r===void 0&&w(200,n.constructor.name,t);const{replace:i,replaceWithKlass:s}=r;if(i!==null){const o=i(n),l=o.constructor;return s!==null?o instanceof s||w(201,s.name,s.getType(),l.name,l.getType(),n.constructor.name,t):o instanceof n.constructor&&l!==n.constructor||w(202,l.name,l.getType(),n.constructor.name,t),o.__key===n.__key&&w(203,n.constructor.name,t,l.name,l.getType()),o}return n}function Er(n,e){!te(n.getParent())||v(e)||B(e)||w(99)}function uc(n){const e=Y(n);return e===null&&w(63,n),e}function Pr(n){return(B(n)||v(n)&&!n.canBeEmpty())&&!n.isInline()}function ti(n,e,t){t.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=n.parentElement;r!==null&&r.removeChild(n)}function ve(n){return Se?(n||window).getSelection():null}function fc(n){const e=Ri(n);return e?e.getSelection():null}function dc(n,e){let t=n.getChildAtIndex(e);t==null&&(t=n),ne(n)&&w(102);const r=o=>{const l=o.getParentOrThrow(),a=ne(l),c=o!==t||a?cc(o):o;if(a)return v(o)&&v(c)||w(133),o.insertAfter(c),[o,c,c];{const[u,d,f]=r(l),g=o.getNextSiblings();return f.append(c,...g),[u,d,c]}},[i,s]=r(t);return[i,s]}function wl(n){return U(n)&&n.tagName==="A"}function U(n){return $t(n)&&n.nodeType===Zl}function $t(n){return typeof n=="object"&&n!==null&&"nodeType"in n&&typeof n.nodeType=="number"}function ni(n){return $t(n)&&n.nodeType===na}function ri(n){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return n.nodeName.match(e)!==null}function Xn(n){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return n.nodeName.match(e)!==null}function ye(n){if(B(n)&&!n.isInline())return!0;if(!v(n)||ne(n))return!1;const e=n.getFirstChild(),t=e===null||Tt(e)||P(e)||e.isInline();return!n.isInline()&&n.canBeEmpty()!==!1&&t}function Lr(n,e){let t=n;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function hc(){return J()}const Ws=new WeakMap,gc=new Map;function Rs(n){if(!n._readOnly&&n.isEmpty())return gc;n._readOnly||w(192);let e=Ws.get(n);return e||(e=function(t){const r=new Map;for(const[i,s]of t._nodeMap){const o=s.__type;let l=r.get(o);l||(l=new Map,r.set(o,l)),l.set(i,s)}return r}(n),Ws.set(n,e)),e}function Ki(n){const e=n.constructor.clone(n);return e.afterCloneFrom(n),e}function Ji(n,e){const t=(parseInt(n.style.paddingInlineStart,10)||0)/40;e.setIndent(t)}function Vu(n){n.__lexicalUnmanaged=!0}function pc(n){return n.__lexicalUnmanaged===!0}const _c={next:"previous",previous:"next"};class Ui{constructor(e){this.origin=e}[Symbol.iterator](){return Xi({hasNext:at,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return se(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return se(this.origin,this.direction)}remove(){const e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){const r=this.getNodeAtCaret();return e.is(this.origin)||e.is(r)||(r===null?this.insert(e):r.replace(e,t)),this}splice(e,t,r="next"){const i=r===this.direction?t:Array.from(t).reverse();let s=this;const o=this.getParentAtCaret(),l=new Map;for(let a=s.getAdjacentCaret();a!==null&&l.size<e;a=a.getAdjacentCaret()){const c=a.origin.getWritable();l.set(c.getKey(),c)}for(const a of i){if(l.size>0){const c=s.getNodeAtCaret();if(c){if(l.delete(c.getKey()),l.delete(a.getKey()),!(c.is(a)||s.origin.is(a))){const u=a.getParent();u&&u.is(o)&&a.remove(),c.replace(a)}}else c===null&&w(263,Array.from(l).join(" "))}else s.insert(a);s=se(a,this.direction)}for(const a of l.values())a.remove();return this}}class sn extends Ui{constructor(){super(...arguments);fe(this,"type","child")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:pe(t,this.direction)}getParentCaret(t="root"){return se(ji(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=It(this.direction);return se(this.getNodeAtCaret(),t)||pe(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof sn&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const mc={root:te,shadowRoot:ne};function It(n){return _c[n]}function ji(n,e="root"){return mc[e](n)?null:n}class ot extends Ui{constructor(){super(...arguments);fe(this,"type","sibling")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:se(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return v(this.origin)?pe(this.origin,this.direction):null}getParentCaret(t="root"){return se(ji(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=It(this.direction);return se(this.getNodeAtCaret(),t)||pe(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof ot&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof ot||t instanceof lt)&&this.direction===t.direction&&this.origin.is(t.origin)}}class lt extends Ui{constructor(t,r){super(t);fe(this,"type","text");this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:ct(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return se(ji(this.getParentAtCaret(),t),this.direction)}getFlipped(){return ct(this.origin,It(this.direction),this.offset)}isSamePointCaret(t){return t instanceof lt&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof ot||t instanceof lt)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return se(this.origin,this.direction)}}function tt(n){return n instanceof lt}function at(n){return n instanceof ot}function Ee(n){return n instanceof sn}const yc={next:class extends lt{constructor(){super(...arguments);fe(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends lt{constructor(){super(...arguments);fe(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},xc={next:class extends ot{constructor(){super(...arguments);fe(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends ot{constructor(){super(...arguments);fe(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},vc={next:class extends sn{constructor(){super(...arguments);fe(this,"direction","next")}getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends sn{constructor(){super(...arguments);fe(this,"direction","previous")}getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function se(n,e){return n?new xc[e](n):null}function ct(n,e,t){return n?new yc[e](n,fr(n,t)):null}function fr(n,e){const t=n.getTextContentSize(),r=e==="next"?t:e==="previous"?0:e;return r>=0&&r<=t||w(274,String(e),String(t)),r}function Ks(n,e){return new Cc(n,e)}function pe(n,e){return v(n)?new vc[e](n):null}function Sc(n){return n&&n.getChildCaret()||n}function Vi(n){return n&&Sc(n.getAdjacentCaret())}class qi{constructor(e,t,r){fe(this,"type","node-caret-range");this.anchor=e,this.focus=t,this.direction=r}getLatest(){const e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new qi(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const e=i=>{const s=this[i].getLatest();return tt(s)?function(o,l){const{direction:a,origin:c}=o,u=fr(c,l==="focus"?It(a):a);return Ks(o,u-o.offset)}(s,i):null},t=e("anchor"),r=e("focus");if(t&&r){const{caret:i}=t,{caret:s}=r;if(i.isSameNodeCaret(s))return[Ks(i,s.offset-i.offset),null]}return[t,r]}iterNodeCarets(e="root"){const t=tt(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),i=tt(r),s=o=>o.isSameNodeCaret(r)?null:Vi(o)||o.getParentCaret(e);return Xi({hasNext:o=>o!==null&&!(i&&r.isSameNodeCaret(o)),initial:t.isSameNodeCaret(r)?null:s(t),map:o=>o,step:s})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class Cc{constructor(e,t){fe(this,"type","slice");this.caret=e,this.distance=t}getSliceIndices(){const{distance:e,caret:{offset:t}}=this,r=t+e;return r<t?[r,t]:[t,r]}getTextContent(){const[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:e,direction:t}}=this,[r,i]=this.getSliceIndices(),s=e.getTextContent();return ct(e.setTextContent(s.slice(0,r)+s.slice(i)),t,r)}}function Hi(n){return Ft(n,se(j(),n.direction))}function Ft(n,e){return n.direction!==e.direction&&w(265),new qi(n,e,n.direction)}function Xi(n){const{initial:e,hasNext:t,step:r,map:i}=n;let s=e;return{[Symbol.iterator](){return this},next(){if(!t(s))return{done:!0,value:void 0};const o={done:!1,value:i(s)};return s=r(s),o}}}function Nl(n,e){const t=Mn(n.origin,e.origin);switch(t===null&&w(275,n.origin.getKey(),e.origin.getKey()),t.type){case"same":{const r=n.type==="text",i=e.type==="text";return r&&i?function(s,o){return Math.sign(s-o)}(n.offset,e.offset):n.type===e.type?0:r?-1:i?1:n.type==="child"?-1:1}case"ancestor":return n.type==="child"?-1:1;case"descendant":return e.type==="child"?1:-1;case"branch":return El(t)}}function El(n){const{a:e,b:t}=n,r=e.__key,i=t.__key;let s=e,o=t;for(;s&&o;s=s.getNextSibling(),o=o.getNextSibling()){if(s.__key===i)return-1;if(o.__key===r)return 1}return s===null?1:-1}function Nn(n,e){return e.is(n)}function Js(n){return v(n)?[n.getLatest(),null]:[n.getParent(),n.getLatest()]}function Mn(n,e){if(n.is(e))return{commonAncestor:n,type:"same"};const t=new Map;for(let[r,i]=Js(n);r;i=r,r=r.getParent())t.set(r,i);for(let[r,i]=Js(e);r;i=r,r=r.getParent()){const s=t.get(r);if(s!==void 0)return s===null?(Nn(n,r)||w(276),{commonAncestor:r,type:"ancestor"}):i===null?(Nn(e,r)||w(277),{commonAncestor:r,type:"descendant"}):((v(s)||Nn(n,s))&&(v(i)||Nn(e,i))&&r.is(s.getParent())&&r.is(i.getParent())||w(278),{a:s,b:i,commonAncestor:r,type:"branch"})}return null}function qe(n,e){const{type:t,key:r,offset:i}=n,s=uc(n.key);return t==="text"?(P(s)||w(266,s.getType(),r),ct(s,e,i)):(v(s)||w(267,s.getType(),r),Ol(s,n.offset,e))}function ut(n,e){const{origin:t,direction:r}=e,i=r==="next";tt(e)?n.set(t.getKey(),e.offset,"text"):at(e)?P(t)?n.set(t.getKey(),fr(t,r),"text"):n.set(t.getParentOrThrow().getKey(),t.getIndexWithinParent()+(i?1:0),"element"):(Ee(e)&&v(t)||w(268),n.set(t.getKey(),i?0:t.getChildrenSize(),"element"))}function Or(n,e){ut(n.anchor,e.anchor),ut(n.focus,e.focus)}function ii(n){const{anchor:e,focus:t}=n,r=qe(e,"next"),i=qe(t,"next"),s=Nl(r,i)<=0?"next":"previous";return Ft(At(r,s),At(i,s))}function Gi(n){const{direction:e,origin:t}=n,r=se(t,It(e)).getNodeAtCaret();return r?se(r,e):pe(t.getParentOrThrow(),e)}function Us(n,e="root"){const t=[n];for(let r=Ee(n)?n.getParentCaret(e):n.getSiblingCaret();r!==null;r=r.getParentCaret(e))t.push(Gi(r));return t}function Fr(n){return!!n&&n.origin.isAttached()}function bc(n,e="removeEmptySlices"){if(n.isCollapsed())return n;const t="root",r="next";let i=e;const s=Ll(n,r),o=Us(s.anchor,t),l=Us(s.focus.getFlipped(),t),a=new Set,c=[];for(const h of s.iterNodeCarets(t))if(Ee(h))a.add(h.origin.getKey());else if(at(h)){const{origin:p}=h;v(p)&&!a.has(p.getKey())||c.push(p)}for(const h of c)h.remove();for(const h of s.getTextSlices()){if(!h)continue;const{origin:p}=h.caret,_=p.getTextContentSize(),y=Gi(se(p,r)),m=p.getMode();if(Math.abs(h.distance)===_&&i==="removeEmptySlices"||m==="token"&&h.distance!==0)y.remove();else if(h.distance!==0){i="removeEmptySlices";let x=h.removeTextSlice();const C=h.caret.origin;if(m==="segmented"){const N=x.origin,S=X(N.getTextContent()).setStyle(N.getStyle()).setFormat(N.getFormat());y.replaceOrInsert(S),x=ct(S,r,x.offset)}C.is(o[0].origin)&&(o[0]=x),C.is(l[0].origin)&&(l[0]=x.getFlipped())}}let u,d;for(const h of o)if(Fr(h)){u=he(h);break}for(const h of l)if(Fr(h)){d=he(h);break}const f=function(h,p,_){if(!h||!p)return null;const y=h.getParentAtCaret(),m=p.getParentAtCaret();if(!y||!m)return null;const x=y.getParents().reverse();x.push(y);const C=m.getParents().reverse();C.push(m);const N=Math.min(x.length,C.length);let S;for(S=0;S<N&&x[S]===C[S];S++);const E=(F,A)=>{let K;for(let $=S;$<F.length;$++){const M=F[$];if(ne(M))return;!K&&A(M)&&(K=M)}return K},k=E(x,ye),b=k&&E(C,F=>_.has(F.getKey())&&ye(F));return k&&b?[k,b]:null}(u,d,a);if(f){const[h,p]=f;pe(h,"previous").splice(0,p.getChildren()),p.remove()}const g=[u,d,...o,...l].find(Fr);if(g){const h=At(he(g),n.direction);return Ft(h,h)}w(269,JSON.stringify(o.map(h=>h.origin.__key)))}function he(n){const e=function(i){let s=i;for(;Ee(s);){const o=Vi(s);if(!Ee(o))break;s=o}return s}(n.getLatest()),{direction:t}=e;if(P(e.origin))return tt(e)?e:ct(e.origin,t,t);const r=e.getAdjacentCaret();return at(r)&&P(r.origin)?ct(r.origin,t,It(t)):e}function Pl(n){return tt(n)&&n.offset!==fr(n.origin,n.direction)}function At(n,e){return n.direction===e?n:n.getFlipped()}function Ll(n,e){return n.direction===e?n:Ft(At(n.focus,e),At(n.anchor,e))}function Ol(n,e,t){let r=pe(n,"next");for(let i=0;i<e;i++){const s=r.getAdjacentCaret();if(s===null)break;r=s}return At(r,t)}function Fl(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Gn=new Map;function Al(n){const e={};if(!n)return e;const t=n.split(";");for(const r of t)if(r!==""){const[i,s]=r.split(/:([^]+)/);i&&s&&(e[i.trim()]=s.trim())}return e}function Yi(n){let e=Gn.get(n);return e===void 0&&(e=Al(n),Gn.set(n,e)),e}function kc(n){let e="";for(const t in n)t&&(e+=`${t}: ${n[t]};`);return e}function Ml(n,e){const t=n.getStartEndPoints();if(e.isSelected(n)&&!e.isSegmented()&&!e.isToken()&&t!==null){const[r,i]=t,s=n.isBackward(),o=r.getNode(),l=i.getNode(),a=e.is(o),c=e.is(l);if(a||c){const[u,d]=Yr(n),f=o.is(l),g=e.is(s?l:o),h=e.is(s?o:l);let p,_=0;return f?(_=u>d?d:u,p=u>d?u:d):g?(_=s?d:u,p=void 0):h&&(_=0,p=s?u:d),e.__text=e.__text.slice(_,p),e}}return e}function qu(n){if(n.type==="text")return n.offset===n.getNode().getTextContentSize();const e=n.getNode();return v(e)||Fl(177),n.offset===e.getChildrenSize()}function Tc(n){const e=n.getStyle(),t=Al(e);Gn.set(e,t)}function Ar(n,e){(T(n)?n.isCollapsed():P(n)||v(n))||Fl(280);const t=Yi(T(n)?n.style:P(n)?n.getStyle():n.getTextStyle()),r=Object.entries(e).reduce((s,[o,l])=>(typeof l=="function"?s[o]=l(t[o],n):l===null?delete s[o]:s[o]=l,s),{...t}),i=kc(r);T(n)||P(n)?n.setStyle(i):n.setTextStyle(i),Gn.set(i,r)}function Hu(n,e){if(T(n)&&n.isCollapsed()){Ar(n,e);const t=n.anchor.getNode();v(t)&&t.isEmpty()&&Ar(t,e)}wc(t=>{Ar(t,e)})}function wc(n){const e=L();if(!e)return;const t=new Map;if(T(e))for(const s of ii(e).getTextSlices())s&&t.set(s.caret.origin.getKey(),s.getSliceIndices());const r=e.getNodes();for(const s of r){if(!P(s)||!s.canHaveFormat())continue;const[o,l]=(i=s,t.get(i.getKey())||[0,i.getTextContentSize()]);l!==o&&(Ye(s)||o===0&&l===s.getTextContentSize()?n(s):n(s.splitText(o,l)[o===0?0:1]))}var i;T(e)&&e.anchor.type==="text"&&e.focus.type==="text"&&e.anchor.key===e.focus.key&&Nc(e)}function Nc(n){if(n.isBackward()){const{anchor:e,focus:t}=n,{key:r,offset:i,type:s}=e;e.set(t.key,t.offset,t.type),t.set(r,i,s)}}function Ec(n,e){const t=n.getFormatType(),r=n.getIndent();t!==e.getFormatType()&&e.setFormat(t),r!==e.getIndent()&&e.setIndent(r)}function Xu(n,e,t=Ec){if(n===null)return;const r=n.getStartEndPoints(),i=new Map;let s=null;if(r){const[o,l]=r;s=sl(),s.anchor.set(o.key,o.offset,o.type),s.focus.set(l.key,l.offset,l.type);const a=qs(o.getNode(),ye),c=qs(l.getNode(),ye);v(a)&&i.set(a.getKey(),a),v(c)&&i.set(c.getKey(),c)}for(const o of n.getNodes())v(o)&&ye(o)&&i.set(o.getKey(),o);for(const[o,l]of i){const a=e();t(l,a),l.replace(a,!0),s&&(o===s.anchor.key&&s.anchor.set(a.getKey(),s.anchor.offset,s.anchor.type),o===s.focus.key&&s.focus.set(a.getKey(),s.focus.offset,s.focus.type))}s&&n.is(L())&&ae(s)}function js(n,e){const t=qe(n.focus,e?"previous":"next");if(Pl(t))return!1;for(const r of Hi(t)){if(Ee(r))return!r.origin.isInline();if(!v(r.origin)){if(B(r.origin))return!0;break}}return!1}function Pc(n,e,t,r){n.modify(e?"extend":"move",t,r)}function Lc(n){const e=n.anchor.getNode();return(te(e)?e:e.getParentOrThrow()).getDirection()==="rtl"}function Vs(n,e,t){const r=Lc(n);Pc(n,e,t?!r:r,"character")}function Oc(n,e,t){const r=Yi(n.getStyle());return r!==null&&r[e]||t}function Gu(n,e,t=""){let r=null;const i=n.getNodes(),s=n.anchor,o=n.focus,l=n.isBackward(),a=l?o.offset:s.offset,c=l?o.getNode():s.getNode();if(T(n)&&n.isCollapsed()&&n.style!==""){const u=Yi(n.style);if(u!==null&&e in u)return u[e]}for(let u=0;u<i.length;u++){const d=i[u];if((u===0||a!==0||!d.is(c))&&P(d)){const f=Oc(d,e,t);if(r===null)r=f;else if(r!==f){r="";break}}}return r===null?t:r}function qs(n,e){let t=n;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function Fc(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const dr=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Ac=dr&&"documentMode"in document?document.documentMode:null,Mc=dr&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);!(!dr||!("InputEvent"in window)||Ac)&&"getTargetRanges"in new window.InputEvent("input");function Dl(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}function gt(...n){return()=>{for(let e=n.length-1;e>=0;e--)n[e]();n.length=0}}const Dc=dr,$c=Mc;function gn(n,...e){const t=Dl(...e);t.length>0&&n.classList.add(...t)}function $l(n,...e){const t=Dl(...e);t.length>0&&n.classList.remove(...t)}function Yu(n){return n?n.getAdjacentCaret():null}function Ic(n,e){let t=n;for(;t!=null;){if(t instanceof e)return t;t=t.getParent()}return null}function zc(n){const e=pn(n,t=>v(t)&&!t.isInline());return v(e)||Fc(4,n.__key),e}const pn=(n,e)=>{let t=n;for(;t!==j()&&t!=null;){if(e(t))return t;t=t.getParent()}return null};function Qu(n){const e=L()||Dt();if(T(e)){const{focus:t}=e,r=t.getNode(),i=t.offset;if(ne(r))Ol(r,i,"next").insert(n),n.selectNext();else{let s,o;P(r)?(s=r.getParentOrThrow(),o=r.getIndexWithinParent(),i>0&&(o+=1,r.splitText(i))):(s=r,o=i);const[,l]=dc(s,o);l.insertBefore(n),l.selectStart()}}else{if(e!=null){const r=e.getNodes();r[r.length-1].getTopLevelElementOrThrow().insertAfter(n)}else j().append(n);const t=H();n.insertAfter(t),t.select()}return n.getLatest()}function Zu(n,e){const t=e();return n.replace(t),t.append(n),t}function Qe(n,e){return n!==null&&Object.getPrototypeOf(n).constructor.name===e.name}function ef(n,e){const t=[];for(let r=0;r<n.length;r++){const i=e(n[r]);i!==null&&t.push(i)}return t}function tf(n,e){pe(n,"next").insert(e)}let Mr=!($c||!Dc)&&void 0;function Bc(n){let e=1;if(function(){if(Mr===void 0){const t=document.createElement("div");t.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(t);const r=t.getBoundingClientRect();t.style.setProperty("zoom","2"),Mr=t.getBoundingClientRect().width===r.width,document.body.removeChild(t)}return Mr}())for(;n;)e*=Number(window.getComputedStyle(n).getPropertyValue("zoom")),n=n.parentElement;return e}function nf(n,e){return Il(n,e,null)}function Il(n,e,t){let r=!1;for(const i of zl(n))e(i)?t!==null&&t(i):(r=!0,v(i)&&Il(i,e,t||(s=>i.insertAfter(s))),i.remove());return r}function rf(n,e){const t=[],r=Array.from(n).reverse();for(let i=r.pop();i!==void 0;i=r.pop())if(e(i))t.push(i);else if(v(i))for(const s of zl(i))r.push(s);return t}function zl(n){return Wc(pe(n,"previous"))}function Wc(n){return Xi({hasNext:at,initial:n.getAdjacentCaret(),map:e=>e.origin.getLatest(),step:e=>e.getAdjacentCaret()})}function we(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Rc(n){let e=1,t=n.getParent();for(;t!=null;){if(W(t)){const r=t.getParent();if(D(r)){e++,t=r.getParent();continue}we(40)}return e}return e}function si(n){let e=n.getParent();D(e)||we(40);let t=e;for(;t!==null;)t=t.getParent(),D(t)&&(e=t);return e}function Bl(n){let e=[];const t=n.getChildren().filter(W);for(let r=0;r<t.length;r++){const i=t[r],s=i.getFirstChild();D(s)?e=e.concat(Bl(s)):e.push(i)}return e}function Ne(n){return W(n)&&D(n.getFirstChild())}function Hs(n){return ue().append(n)}function Wl(n,e){return W(n)&&(e.length===0||e.length===1&&n.is(e[0])&&n.getChildrenSize()===0)}function oi(n){const e=L();if(e!==null){let t=e.getNodes();if(T(e)){const i=e.getStartEndPoints();i===null&&we(143);const[s]=i,o=s.getNode(),l=o.getParent();if(ne(o)){const a=o.getFirstChild();if(a)t=a.selectStart().getNodes();else{const c=H();o.append(c),t=c.select().getNodes()}}else if(Wl(o,t)){const a=le(n);if(ne(l)){o.replace(a);const c=ue();v(o)&&(c.setFormat(o.getFormatType()),c.setIndent(o.getIndent())),a.append(c)}else if(W(o)){const c=o.getParentOrThrow();ft(a,c.getChildren()),c.replace(a)}return}}const r=new Set;for(let i=0;i<t.length;i++){const s=t[i];if(!v(s)||!s.isEmpty()||W(s)||r.has(s.getKey())){if(_l(s)){let o=s.getParent();for(;o!=null;){const l=o.getKey();if(D(o)){if(!r.has(l)){const a=le(n);ft(a,o.getChildren()),o.replace(a),r.add(l)}break}{const a=o.getParent();if(ne(a)&&!r.has(l)){r.add(l),Xs(o,n);break}o=a}}}}else Xs(s,n)}}}function ft(n,e){n.splice(n.getChildrenSize(),0,e)}function Xs(n,e){if(D(n))return n;const t=n.getPreviousSibling(),r=n.getNextSibling(),i=ue();let s;if(ft(i,n.getChildren()),D(t)&&e===t.getListType())t.append(i),D(r)&&e===r.getListType()&&(ft(t,r.getChildren()),r.remove()),s=t;else if(D(r)&&e===r.getListType())r.getFirstChildOrThrow().insertBefore(i),s=r;else{const o=le(e);o.append(i),n.replace(o),s=o}return i.setFormat(n.getFormatType()),i.setIndent(n.getIndent()),n.remove(),s}function Qi(n,e){const t=n.getLastChild(),r=e.getFirstChild();t&&r&&Ne(t)&&Ne(r)&&(Qi(t.getFirstChild(),r.getFirstChild()),r.remove());const i=e.getChildren();i.length>0&&n.append(...i),e.remove()}function Kc(){const n=L();if(T(n)){const e=new Set,t=n.getNodes(),r=n.anchor.getNode();if(Wl(r,t))e.add(si(r));else for(let i=0;i<t.length;i++){const s=t[i];if(_l(s)){const o=Ic(s,pt);o!=null&&e.add(si(o))}}for(const i of e){let s=i;const o=Bl(i);for(const l of o){const a=H().setTextStyle(n.style).setTextFormat(n.format);ft(a,l.getChildren()),s.insertAfter(a),s=a,l.__key===n.anchor.key&&ut(n.anchor,he(pe(a,"next"))),l.__key===n.focus.key&&ut(n.focus,he(pe(a,"next"))),l.remove()}i.remove()}}}function Jc(n){const e=new Set;if(Ne(n)||e.has(n.getKey()))return;const t=n.getParent(),r=n.getNextSibling(),i=n.getPreviousSibling();if(Ne(r)&&Ne(i)){const s=i.getFirstChild();if(D(s)){s.append(n);const o=r.getFirstChild();D(o)&&(ft(s,o.getChildren()),r.remove(),e.add(r.getKey()))}}else if(Ne(r)){const s=r.getFirstChild();if(D(s)){const o=s.getFirstChild();o!==null&&o.insertBefore(n)}}else if(Ne(i)){const s=i.getFirstChild();D(s)&&s.append(n)}else if(D(t)){const s=ue().setTextFormat(t.getTextFormat()).setTextStyle(t.getTextStyle()),o=le(t.getListType()).setTextFormat(t.getTextFormat()).setTextStyle(t.getTextStyle());s.append(o),o.append(n),i?i.insertAfter(s):r?r.insertBefore(s):t.append(s)}}function Uc(n){if(Ne(n))return;const e=n.getParent(),t=e?e.getParent():void 0;if(D(t?t.getParent():void 0)&&W(t)&&D(e)){const r=e?e.getFirstChild():void 0,i=e?e.getLastChild():void 0;if(n.is(r))t.insertBefore(n),e.isEmpty()&&t.remove();else if(n.is(i))t.insertAfter(n),e.isEmpty()&&t.remove();else{const s=e.getListType(),o=ue(),l=le(s);o.append(l),n.getPreviousSiblings().forEach(u=>l.append(u));const a=ue(),c=le(s);a.append(c),ft(c,n.getNextSiblings()),t.insertBefore(o),t.insertAfter(a),t.replace(n)}}}function jc(){const n=L();if(!T(n)||!n.isCollapsed())return!1;const e=n.anchor.getNode();if(!W(e)||e.getChildrenSize()!==0)return!1;const t=si(e),r=e.getParent();D(r)||we(40);const i=r.getParent();let s;if(ne(i))s=H(),t.insertAfter(s);else{if(!W(i))return!1;s=ue(),i.insertAfter(s)}s.setTextStyle(n.style).setTextFormat(n.format).select();const o=e.getNextSiblings();if(o.length>0){const l=le(r.getListType());if(W(s)){const a=ue();a.append(l),s.insertAfter(a)}else s.insertAfter(l);l.append(...o)}return function(l){let a=l;for(;a.getNextSibling()==null&&a.getPreviousSibling()==null;){const c=a.getParent();if(c==null||!W(c)&&!D(c))break;a=c}a.remove()}(e),!0}function Yn(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}class pt extends We{static getType(){return"listitem"}static clone(e){return new pt(e.__value,e.__checked,e.__key)}constructor(e,t,r){super(r),this.__value=e===void 0?1:e,this.__checked=t}createDOM(e){const t=document.createElement("li"),r=this.getParent();D(r)&&r.getListType()==="check"&&Ys(t,this,null),t.value=this.__value,Gs(t,e.theme,this);const i=this.__style||this.__textStyle;return i&&(t.style.cssText=i),t}updateDOM(e,t,r){const i=this.getParent();D(i)&&i.getListType()==="check"&&Ys(t,this,e),t.value=this.__value,Gs(t,r.theme,this);const s=e.__style||e.__textStyle,o=this.__style||this.__textStyle;return s!==o&&(t.style.cssText=o,o===""&&t.removeAttribute("style")),!1}static transform(){return e=>{if(W(e)||we(144),e.__checked==null)return;const t=e.getParent();D(t)&&t.getListType()!=="check"&&e.getChecked()!=null&&e.setChecked(void 0)}}static importDOM(){return{li:()=>({conversion:Vc,priority:0})}}static importJSON(e){return ue().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setValue(e.value).setChecked(e.checked)}exportDOM(e){const t=this.createDOM(e._config);t.style.textAlign=this.getFormatType();const r=this.getDirection();return r&&(t.dir=r),{element:t}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...e){for(let t=0;t<e.length;t++){const r=e[t];if(v(r)&&this.canMergeWith(r)){const i=r.getChildren();this.append(...i),r.remove()}else super.append(r)}return this}replace(e,t){if(W(e))return super.replace(e);this.setIndent(0);const r=this.getParentOrThrow();if(!D(r))return e;if(r.__first===this.getKey())r.insertBefore(e);else if(r.__last===this.getKey())r.insertAfter(e);else{const i=le(r.getListType());let s=this.getNextSibling();for(;s;){const o=s;s=s.getNextSibling(),i.append(o)}r.insertAfter(e),e.insertAfter(i)}return t&&(v(e)||we(139),this.getChildren().forEach(i=>{e.append(i)})),this.remove(),r.getChildrenSize()===0&&r.remove(),e}insertAfter(e,t=!0){const r=this.getParentOrThrow();if(D(r)||we(39),W(e))return super.insertAfter(e,t);const i=this.getNextSiblings();if(r.insertAfter(e,t),i.length!==0){const s=le(r.getListType());i.forEach(o=>s.append(o)),e.insertAfter(s,t)}return e}remove(e){const t=this.getPreviousSibling(),r=this.getNextSibling();super.remove(e),t&&r&&Ne(t)&&Ne(r)&&(Qi(t.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(e,t=!0){const r=ue().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,t),r}collapseAtStart(e){const t=H();this.getChildren().forEach(o=>t.append(o));const r=this.getParentOrThrow(),i=r.getParentOrThrow(),s=W(i);if(r.getChildrenSize()===1)if(s)r.remove(),i.select();else{r.insertBefore(t),r.remove();const o=e.anchor,l=e.focus,a=t.getKey();o.type==="element"&&o.getNode().is(this)&&o.set(a,o.offset,"element"),l.type==="element"&&l.getNode().is(this)&&l.set(a,l.offset,"element")}else r.insertBefore(t),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){const t=this.getWritable();return t.__value=e,t}getChecked(){const e=this.getLatest();let t;const r=this.getParent();return D(r)&&(t=r.getListType()),t==="check"?!!e.__checked:void 0}setChecked(e){const t=this.getWritable();return t.__checked=e,t}toggleChecked(){const e=this.getWritable();return e.setChecked(!e.__checked)}getIndent(){const e=this.getParent();if(e===null||!this.isAttached())return this.getLatest().__indent;let t=e.getParentOrThrow(),r=0;for(;W(t);)t=t.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(e){typeof e!="number"&&we(117),(e=Math.floor(e))>=0||we(199);let t=this.getIndent();for(;t!==e;)t<e?(Jc(this),t++):(Uc(this),t--);return this}canInsertAfter(e){return W(e)}canReplaceWith(e){return W(e)}canMergeWith(e){return W(e)||gl(e)}extractWithChild(e,t){if(!T(t))return!1;const r=t.anchor.getNode(),i=t.focus.getNode();return this.isParentOf(r)&&this.isParentOf(i)&&this.getTextContent().length===t.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return le("bullet")}canMergeWhenEmpty(){return!0}}function Gs(n,e,t){const r=[],i=[],s=e.list,o=s?s.listitem:void 0;let l;if(s&&s.nested&&(l=s.nested.listitem),o!==void 0&&r.push(...Yn(o)),s){const a=t.getParent(),c=D(a)&&a.getListType()==="check",u=t.getChecked();c&&!u||i.push(s.listitemUnchecked),c&&u||i.push(s.listitemChecked),c&&r.push(u?s.listitemChecked:s.listitemUnchecked)}if(l!==void 0){const a=Yn(l);t.getChildren().some(c=>D(c))?r.push(...a):i.push(...a)}i.length>0&&$l(n,...i),r.length>0&&gn(n,...r)}function Ys(n,e,t,r){D(e.getFirstChild())?(n.removeAttribute("role"),n.removeAttribute("tabIndex"),n.removeAttribute("aria-checked")):(n.setAttribute("role","checkbox"),n.setAttribute("tabIndex","-1"),t&&e.__checked===t.__checked||n.setAttribute("aria-checked",e.getChecked()?"true":"false"))}function Vc(n){if(n.classList.contains("task-list-item")){for(const t of n.children)if(t.tagName==="INPUT")return qc(t)}const e=n.getAttribute("aria-checked");return{node:ue(e==="true"||e!=="false"&&void 0)}}function qc(n){return n.getAttribute("type")!=="checkbox"?{node:null}:{node:ue(n.hasAttribute("checked"))}}function ue(n){return Le(new pt(void 0,n))}function W(n){return n instanceof pt}class _n extends We{static getType(){return"list"}static clone(e){const t=e.__listType||eo[e.__tag];return new _n(t,e.__start,e.__key)}constructor(e="number",t=1,r){super(r);const i=eo[e]||e;this.__listType=i,this.__tag=i==="number"?"ol":"ul",this.__start=t}getTag(){return this.__tag}setListType(e){const t=this.getWritable();return t.__listType=e,t.__tag=e==="number"?"ol":"ul",t}getListType(){return this.__listType}getStart(){return this.__start}setStart(e){const t=this.getWritable();return t.__start=e,t}createDOM(e,t){const r=this.__tag,i=document.createElement(r);return this.__start!==1&&i.setAttribute("start",String(this.__start)),i.__lexicalListType=this.__listType,Qs(i,e.theme,this),i}updateDOM(e,t,r){return e.__tag!==this.__tag||(Qs(t,r.theme,this),!1)}static transform(){return e=>{D(e)||we(163),function(t){const r=t.getNextSibling();D(r)&&t.getListType()===r.getListType()&&Qi(t,r)}(e),function(t){const r=t.getListType()!=="check";let i=t.getStart();for(const s of t.getChildren())W(s)&&(s.getValue()!==i&&s.setValue(i),r&&s.getLatest().__checked!=null&&s.setChecked(void 0),D(s.getFirstChild())||i++)}(e)}}static importDOM(){return{ol:()=>({conversion:Zs,priority:0}),ul:()=>({conversion:Zs,priority:0})}}static importJSON(e){return le().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setListType(e.listType).setStart(e.start)}exportDOM(e){const t=this.createDOM(e._config,e);return U(t)&&(this.__start!==1&&t.setAttribute("start",String(this.__start)),this.__listType==="check"&&t.setAttribute("__lexicalListType","check")),{element:t}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}append(...e){for(let t=0;t<e.length;t++){const r=e[t];if(W(r))super.append(r);else{const i=ue();if(D(r))i.append(r);else if(v(r))if(r.isInline())i.append(r);else{const s=X(r.getTextContent());i.append(s)}else i.append(r);super.append(i)}}return this}extractWithChild(e){return W(e)}}function Qs(n,e,t){const r=[],i=[],s=e.list;if(s!==void 0){const o=s[`${t.__tag}Depth`]||[],l=Rc(t)-1,a=l%o.length,c=o[a],u=s[t.__tag];let d;const f=s.nested,g=s.checklist;if(f!==void 0&&f.list&&(d=f.list),u!==void 0&&r.push(u),g!==void 0&&t.__listType==="check"&&r.push(g),c!==void 0){r.push(...Yn(c));for(let h=0;h<o.length;h++)h!==a&&i.push(t.__tag+h)}if(d!==void 0){const h=Yn(d);l>1?r.push(...h):i.push(...h)}}i.length>0&&$l(n,...i),r.length>0&&gn(n,...r)}function Hc(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t];if(W(r)){e.push(r);const i=r.getChildren();i.length>1&&i.forEach(s=>{D(s)&&e.push(Hs(s))})}else e.push(Hs(r))}return e}function Zs(n){const e=n.nodeName.toLowerCase();let t=null;return e==="ol"?t=le("number",n.start):e==="ul"&&(t=function(r){if(r.getAttribute("__lexicallisttype")==="check"||r.classList.contains("contains-task-list"))return!0;for(const i of r.childNodes)if(U(i)&&i.hasAttribute("aria-checked"))return!0;return!1}(n)?le("check"):le("bullet")),{after:Hc,node:t}}const eo={ol:"number",ul:"bullet"};function le(n="number",e=1){return Le(new _n(n,e))}function D(n){return n instanceof _n}const Xc=Mt(),Gc=Mt(),Yc=Mt(),Qc=Mt();function Zc(n){return gt(n.registerCommand(Gc,()=>(oi("number"),!0),Te),n.registerCommand(Xc,()=>(oi("bullet"),!0),Te),n.registerCommand(Qc,()=>(Kc(),!0),Te),n.registerCommand(tn,()=>jc(),Te),n.registerNodeTransform(pt,e=>{const t=e.getFirstChild();if(t){if(P(t)){const r=t.getStyle(),i=t.getFormat();e.getTextStyle()!==r&&e.setTextStyle(r),e.getTextFormat()!==i&&e.setTextFormat(i)}}else{const r=L();T(r)&&(r.style!==e.getTextStyle()||r.format!==e.getTextFormat())&&r.isCollapsed()&&e.is(r.anchor.getNode())&&e.setTextStyle(r.style).setTextFormat(r.format)}}),n.registerNodeTransform(dt,e=>{const t=e.getParent();if(W(t)&&e.is(t.getFirstChild())){const r=e.getStyle(),i=e.getFormat();r===t.getTextStyle()&&i===t.getTextFormat()||t.setTextStyle(r).setTextFormat(i)}}))}function eu(n,e){n.update(()=>oi(e))}const tu=z.createContext(null);function sf(n,e){let t=null;return n!=null&&(t=n[1]),{getTheme:function(){return e??(t!=null?t.getTheme():null)}}}function _t(){const n=z.useContext(tu);return n==null&&function(e,...t){const r=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",e);for(const s of t)i.append("v",s);throw r.search=i.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),n}function of(){const[n]=_t();return z.useEffect(()=>gt(n.registerCommand(Yc,()=>(eu(n,"check"),!0),Te),n.registerCommand(Ti,e=>ro(e,n,!1),Te),n.registerCommand(ki,e=>ro(e,n,!0),Te),n.registerCommand(Ni,e=>{if(li()!=null){const t=n.getRootElement();return t!=null&&t.focus(),!0}return!1},Te),n.registerCommand(wi,e=>{const t=li();return!(t==null||!n.isEditable())&&(n.update(()=>{const r=Be(t);W(r)&&(e.preventDefault(),r.toggleChecked())}),!0)},Te),n.registerCommand(bi,e=>n.getEditorState().read(()=>{const t=L();if(T(t)&&t.isCollapsed()){const{anchor:r}=t,i=r.type==="element";if(i||r.offset===0){const s=r.getNode(),o=pn(s,l=>v(l)&&!l.isInline());if(W(o)){const l=o.getParent();if(D(l)&&l.getListType()==="check"&&(i||o.getFirstDescendant()===s)){const a=n.getElementByKey(o.__key);if(a!=null&&document.activeElement!==a)return a.focus(),e.preventDefault(),!0}}}}return!1}),Te),n.registerRootListener((e,t)=>{e!==null&&(e.addEventListener("click",to),e.addEventListener("pointerdown",no)),t!==null&&(t.removeEventListener("click",to),t.removeEventListener("pointerdown",no))}))),null}function Rl(n,e){const t=n.target;if(!U(t))return;const r=t.firstChild;if(U(r)&&(r.tagName==="UL"||r.tagName==="OL"))return;const i=t.parentNode;if(!i||i.__lexicalListType!=="check")return;const s=t.getBoundingClientRect(),o=n.pageX/Bc(t);(t.dir==="rtl"?o<s.right&&o>s.right-20:o>s.left&&o<s.left+20)&&e()}function to(n){Rl(n,()=>{if(U(n.target)){const e=n.target,t=$i(e);t!=null&&t.isEditable()&&t.update(()=>{const r=Be(e);W(r)&&(e.focus(),r.toggleChecked())})}})}function no(n){Rl(n,()=>{n.preventDefault()})}function li(){const n=document.activeElement;return U(n)&&n.tagName==="LI"&&n.parentNode!=null&&n.parentNode.__lexicalListType==="check"?n:null}function ro(n,e,t){const r=li();return r!=null&&e.update(()=>{const i=Be(r);if(!W(i))return;const s=function(o,l){let a=l?o.getPreviousSibling():o.getNextSibling(),c=o;for(;a==null&&W(c);)c=c.getParentOrThrow().getParent(),c!=null&&(a=l?c.getPreviousSibling():c.getNextSibling());for(;W(a);){const u=l?a.getLastChild():a.getFirstChild();if(!D(u))return a;a=l?u.getLastChild():u.getFirstChild()}return null}(i,t);if(s!=null){s.selectStart();const o=e.getElementByKey(s.__key);o!=null&&(n.preventDefault(),setTimeout(()=>{o.focus()},0))}}),!1}function nu(){return j().getTextContent()}function ru(n,e=!0){if(n)return!1;let t=nu();return e&&(t=t.trim()),t===""}function iu(n){if(!ru(n,!1))return!1;const e=j().getChildren(),t=e.length;if(t>1)return!1;for(let r=0;r<t;r++){const i=e[r];if(B(i))return!1;if(v(i)){if(!gl(i)||i.__indent!==0)return!1;const s=i.getChildren(),o=s.length;for(let l=0;l<o;l++){const a=s[r];if(!P(a))return!1}}}return!0}function Kl(n){return()=>iu(n)}const Jl=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?z.useLayoutEffect:z.useEffect;function su({editor:n,ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:r,ariaDescribedBy:i,ariaErrorMessage:s,ariaExpanded:o,ariaInvalid:l,ariaLabel:a,ariaLabelledBy:c,ariaMultiline:u,ariaOwns:d,ariaRequired:f,autoCapitalize:g,className:h,id:p,role:_="textbox",spellCheck:y=!0,style:m,tabIndex:x,"data-testid":C,...N},S){const[E,k]=z.useState(n.isEditable()),b=z.useCallback(A=>{A&&A.ownerDocument&&A.ownerDocument.defaultView?n.setRootElement(A):n.setRootElement(null)},[n]),F=z.useMemo(()=>function(...A){return K=>{A.forEach($=>{typeof $=="function"?$(K):$!=null&&($.current=K)})}}(S,b),[b,S]);return Jl(()=>(k(n.isEditable()),n.registerEditableListener(A=>{k(A)})),[n]),ce.jsx("div",{"aria-activedescendant":E?e:void 0,"aria-autocomplete":E?t:"none","aria-controls":E?r:void 0,"aria-describedby":i,...s!=null?{"aria-errormessage":s}:{},"aria-expanded":E&&_==="combobox"?!!o:void 0,...l!=null?{"aria-invalid":l}:{},"aria-label":a,"aria-labelledby":c,"aria-multiline":u,"aria-owns":E?d:void 0,"aria-readonly":!E||void 0,"aria-required":f,autoCapitalize:g,className:h,contentEditable:E,"data-testid":C,id:p,ref:F,role:E?_:void 0,spellCheck:y,style:m,tabIndex:x,...N})}const ou=z.forwardRef(su);function io(n){return n.getEditorState().read(Kl(n.isComposing()))}const lf=z.forwardRef(lu);function lu(n,e){const{placeholder:t,...r}=n,[i]=_t();return ce.jsxs(ce.Fragment,{children:[ce.jsx(ou,{editor:i,...r,ref:e}),t!=null&&ce.jsx(au,{editor:i,content:t})]})}function au({content:n,editor:e}){const t=function(o){const[l,a]=z.useState(()=>io(o));return Jl(()=>{function c(){const u=io(o);a(u)}return c(),gt(o.registerUpdateListener(()=>{c()}),o.registerEditableListener(()=>{c()}))},[o]),l}(e),[r,i]=z.useState(e.isEditable());if(z.useLayoutEffect(()=>(i(e.isEditable()),e.registerEditableListener(o=>{i(o)})),[e]),!t)return null;let s=null;return typeof n=="function"?s=n(r):n!==null&&(s=n),s===null?null:ce.jsx("div",{"aria-hidden":!0,children:s})}function ai(n,e){return ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},ai(n,e)}var so={error:null},cu=function(n){var e,t;function r(){for(var s,o=arguments.length,l=new Array(o),a=0;a<o;a++)l[a]=arguments[a];return(s=n.call.apply(n,[this].concat(l))||this).state=so,s.resetErrorBoundary=function(){for(var c,u=arguments.length,d=new Array(u),f=0;f<u;f++)d[f]=arguments[f];s.props.onReset==null||(c=s.props).onReset.apply(c,d),s.reset()},s}t=n,(e=r).prototype=Object.create(t.prototype),e.prototype.constructor=e,ai(e,t),r.getDerivedStateFromError=function(s){return{error:s}};var i=r.prototype;return i.reset=function(){this.setState(so)},i.componentDidCatch=function(s,o){var l,a;(l=(a=this.props).onError)==null||l.call(a,s,o)},i.componentDidUpdate=function(s,o){var l,a,c,u,d=this.state.error,f=this.props.resetKeys;d!==null&&o.error!==null&&((c=s.resetKeys)===void 0&&(c=[]),(u=f)===void 0&&(u=[]),c.length!==u.length||c.some(function(g,h){return!Object.is(g,u[h])}))&&((l=(a=this.props).onResetKeysChange)==null||l.call(a,s.resetKeys,f),this.reset())},i.render=function(){var s=this.state.error,o=this.props,l=o.fallbackRender,a=o.FallbackComponent,c=o.fallback;if(s!==null){var u={error:s,resetErrorBoundary:this.resetErrorBoundary};if(z.isValidElement(c))return c;if(typeof l=="function")return l(u);if(a)return z.createElement(a,u);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},r}(z.Component);function af({children:n,onError:e}){return ce.jsx(cu,{fallback:ce.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:n})}const En=0,ci=1,ui=2,me=0,uu=1,oo=2,fu=3,du=4;function hu(n,e,t,r,i){if(n===null||t.size===0&&r.size===0&&!i)return me;const s=e._selection,o=n._selection;if(i)return uu;if(!(T(s)&&T(o)&&o.isCollapsed()&&s.isCollapsed()))return me;const l=function(y,m,x){const C=y._nodeMap,N=[];for(const S of m){const E=C.get(S);E!==void 0&&N.push(E)}for(const[S,E]of x){if(!E)continue;const k=C.get(S);k===void 0||te(k)||N.push(k)}return N}(e,t,r);if(l.length===0)return me;if(l.length>1){const y=e._nodeMap,m=y.get(s.anchor.key),x=y.get(o.anchor.key);return m&&x&&!n._nodeMap.has(m.__key)&&P(m)&&m.__text.length===1&&s.anchor.offset===1?oo:me}const a=l[0],c=n._nodeMap.get(a.__key);if(!P(c)||!P(a)||c.__mode!==a.__mode)return me;const u=c.__text,d=a.__text;if(u===d)return me;const f=s.anchor,g=o.anchor;if(f.key!==g.key||f.type!=="text")return me;const h=f.offset,p=g.offset,_=d.length-u.length;return _===1&&p===h-1?oo:_===-1&&p===h+1?fu:_===-1&&p===h?du:me}function gu(n,e){let t=Date.now(),r=me;return(i,s,o,l,a,c)=>{const u=Date.now();if(c.has("historic"))return r=me,t=u,ui;const d=hu(i,s,l,a,n.isComposing()),f=(()=>{const g=o===null||o.editor===n,h=c.has("history-push");if(!h&&g&&c.has("history-merge"))return En;if(i===null)return ci;const p=s._selection;return l.size>0||a.size>0?h===!1&&d!==me&&d===r&&u<t+e&&g||l.size===1&&function(_,y,m){const x=y._nodeMap.get(_),C=m._nodeMap.get(_),N=y._selection,S=m._selection;return!(T(N)&&T(S)&&N.anchor.type==="element"&&N.focus.type==="element"&&S.anchor.type==="text"&&S.focus.type==="text"||!P(x)||!P(C)||x.__parent!==C.__parent)&&JSON.stringify(y.read(()=>x.exportJSON()))===JSON.stringify(m.read(()=>C.exportJSON()))}(Array.from(l)[0],i,s)?En:ci:p!==null?En:ui})();return t=u,r=d,f}}function lo(n){n.undoStack=[],n.redoStack=[],n.current=null}function pu(n,e,t){const r=gu(n,t);return gt(n.registerCommand(Si,()=>(function(s,o){const l=o.redoStack,a=o.undoStack;if(a.length!==0){const c=o.current,u=a.pop();c!==null&&(l.push(c),s.dispatchCommand(Cn,!0)),a.length===0&&s.dispatchCommand(bn,!1),o.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:"historic"})}}(n,e),!0),I),n.registerCommand(Ci,()=>(function(s,o){const l=o.redoStack,a=o.undoStack;if(l.length!==0){const c=o.current;c!==null&&(a.push(c),s.dispatchCommand(bn,!0));const u=l.pop();l.length===0&&s.dispatchCommand(Cn,!1),o.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:"historic"})}}(n,e),!0),I),n.registerCommand(Aa,()=>(lo(e),!1),I),n.registerCommand(Ma,()=>(lo(e),n.dispatchCommand(Cn,!1),n.dispatchCommand(bn,!1),!0),I),n.registerUpdateListener(({editorState:s,prevEditorState:o,dirtyLeaves:l,dirtyElements:a,tags:c})=>{const u=e.current,d=e.redoStack,f=e.undoStack,g=u===null?null:u.editorState;if(u!==null&&s===g)return;const h=r(o,s,u,l,a,c);if(h===ci)d.length!==0&&(e.redoStack=[],n.dispatchCommand(Cn,!1)),u!==null&&(f.push({...u}),n.dispatchCommand(bn,!0));else if(h===ui)return;e.current={editor:n,editorState:s}}))}function _u(){return{current:null,redoStack:[],undoStack:[]}}function cf({delay:n,externalHistoryState:e}){const[t]=_t();return function(r,i,s=1e3){const o=z.useMemo(()=>i||_u(),[i]);z.useEffect(()=>pu(r,o,s),[s,r,o])}(t,e,n),null}function uf(){const[n]=_t();return z.useEffect(()=>{if(!n.hasNodes([_n,pt]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")},[n]),function(e){z.useEffect(()=>Zc(e),[e])}(n),null}const mu=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?z.useLayoutEffect:z.useEffect;function yu(n){return{initialValueFn:()=>n.isEditable(),subscribe:e=>n.registerEditableListener(e)}}function xu(){return function(n){const[e]=_t(),t=z.useMemo(()=>n(e),[e,n]),[r,i]=z.useState(()=>t.initialValueFn()),s=z.useRef(r);return mu(()=>{const{initialValueFn:o,subscribe:l}=t,a=o();return s.current!==a&&(s.current=a,i(a)),l(c=>{s.current=c,i(c)})},[t,n]),r}(yu)}function vu(n){const e=window.location.origin,t=r=>{if(r.origin!==e)return;const i=n.getRootElement();if(document.activeElement!==i)return;const s=r.data;if(typeof s=="string"){let o;try{o=JSON.parse(s)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){const l=o.payload;if(l&&l.functionId==="makeChanges"){const a=l.args;if(a){const[c,u,d,f,g,h]=a;n.update(()=>{const p=L();if(T(p)){const _=p.anchor;let y=_.getNode(),m=0,x=0;if(P(y)&&c>=0&&u>=0&&(m=c,x=c+u,p.setTextNodeRange(y,m,y,x)),m===x&&d===""||(p.insertRawText(d),y=_.getNode()),P(y)){m=f,x=f+g;const C=y.getTextContentSize();m=m>C?C:m,x=x>C?C:x,p.setTextNodeRange(y,m,y,x)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}}function Su(n,e){const t=e.body?e.body.childNodes:[];let r=[];const i=[];for(let s=0;s<t.length;s++){const o=t[s];if(!jl.has(o.nodeName)){const l=Vl(o,n,i,!1);l!==null&&(r=r.concat(l))}}return function(s){for(const o of s)o.getNextSibling()instanceof Ai&&o.insertAfter(st());for(const o of s){const l=o.getChildren();for(const a of l)o.insertBefore(a);o.remove()}}(i),r}function Cu(n,e){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const t=document.createElement("div"),r=j().getChildren();for(let i=0;i<r.length;i++)Ul(n,r[i],t,e);return t.innerHTML}function Ul(n,e,t,r=null){let i=r===null||e.isSelected(r);const s=v(e)&&e.excludeFromCopy("html");let o=e;if(r!==null){let g=Ki(e);g=P(g)&&r!==null?Ml(r,g):g,o=g}const l=v(o)?o.getChildren():[],a=n._nodes.get(o.getType());let c;c=a&&a.exportDOM!==void 0?a.exportDOM(n,o):o.exportDOM(n);const{element:u,after:d}=c;if(!u)return!1;const f=document.createDocumentFragment();for(let g=0;g<l.length;g++){const h=l[g],p=Ul(n,h,f,r);!i&&v(e)&&p&&e.extractWithChild(h,r,"html")&&(i=!0)}if(i&&!s){if((U(u)||ni(u))&&u.append(f),t.append(u),d){const g=d.call(o,u);g&&(ni(u)?u.replaceChildren(g):u.replaceWith(g))}}else t.append(f);return i}const jl=new Set(["STYLE","SCRIPT"]);function Vl(n,e,t,r,i=new Map,s){let o=[];if(jl.has(n.nodeName))return o;let l=null;const a=function(h,p){const{nodeName:_}=h,y=p._htmlConversions.get(_.toLowerCase());let m=null;if(y!==void 0)for(const x of y){const C=x(h);C!==null&&(m===null||(m.priority||0)<=(C.priority||0))&&(m=C)}return m!==null?m.conversion:null}(n,e),c=a?a(n):null;let u=null;if(c!==null){u=c.after;const h=c.node;if(l=Array.isArray(h)?h[h.length-1]:h,l!==null){for(const[,p]of i)if(l=p(l,s),!l)break;l&&o.push(...Array.isArray(h)?h:[l])}c.forChild!=null&&i.set(n.nodeName,c.forChild)}const d=n.childNodes;let f=[];const g=(l==null||!ne(l))&&(l!=null&&Qr(l)||r);for(let h=0;h<d.length;h++)f.push(...Vl(d[h],e,t,g,new Map(i),l));return u!=null&&(f=u(f)),Xn(n)&&(f=bu(n,f,g?()=>{const h=new Ai;return t.push(h),h}:H)),l==null?f.length>0?o=o.concat(f):Xn(n)&&function(h){return h.nextSibling==null||h.previousSibling==null?!1:ri(h.nextSibling)&&ri(h.previousSibling)}(n)&&(o=o.concat(st())):v(l)&&l.append(...f),o}function bu(n,e,t){const r=n.style.textAlign,i=[];let s=[];for(let o=0;o<e.length;o++){const l=e[o];if(Qr(l))r&&!l.getFormat()&&l.setFormat(r),i.push(l);else if(s.push(l),o===e.length-1||o<e.length-1&&Qr(e[o+1])){const a=t();a.setFormat(r),a.append(...s),i.push(a),s=[]}}return i}function Qn(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function ku(n,e=L()){return e==null&&Qn(166),T(e)&&e.isCollapsed()||e.getNodes().length===0?"":Cu(n,e)}function Tu(n,e=L()){return e==null&&Qn(166),T(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(wu(n,e))}function ao(n,e,t){const r=n.getData("application/x-lexical-editor");if(r)try{const l=JSON.parse(r);if(l.namespace===t._config.namespace&&Array.isArray(l.nodes))return co(t,Nu(l.nodes),e)}catch{}const i=n.getData("text/html"),s=n.getData("text/plain");if(i&&s!==i)try{const l=new DOMParser().parseFromString(function(a){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:c=>c}).createHTML(a):a}(i),"text/html");return co(t,Su(t,l),e)}catch{}const o=s||n.getData("text/uri-list");if(o!=null)if(T(e)){const l=o.split(/(\r?\n|\t)/);l[l.length-1]===""&&l.pop();for(let a=0;a<l.length;a++){const c=L();if(T(c)){const u=l[a];u===`
`||u===`\r
`?c.insertParagraph():u==="	"?c.insertNodes([an()]):c.insertText(u)}}}else e.insertRawText(o)}function co(n,e,t){n.dispatchCommand(Ta,{nodes:e,selection:t})||t.insertNodes(e)}function ql(n,e,t,r=[]){let i=e===null||t.isSelected(e);const s=v(t)&&t.excludeFromCopy("html");let o=t;if(e!==null){let c=Ki(t);c=P(c)&&e!==null?Ml(e,c):c,o=c}const l=v(o)?o.getChildren():[],a=function(c){const u=c.exportJSON(),d=c.constructor;if(u.type!==d.getType()&&Qn(58,d.name),v(c)){const f=u.children;Array.isArray(f)||Qn(59,d.name)}return u}(o);if(P(o)){const c=o.__text;c.length>0?a.text=c:i=!1}for(let c=0;c<l.length;c++){const u=l[c],d=ql(n,e,u,a.children);!i&&v(t)&&d&&t.extractWithChild(u,e,"clone")&&(i=!0)}if(i&&!s)r.push(a);else if(Array.isArray(a.children))for(let c=0;c<a.children.length;c++){const u=a.children[c];r.push(u)}return i}function wu(n,e){const t=[],r=j().getChildren();for(let i=0;i<r.length;i++)ql(n,e,r[i],t);return{namespace:n._config.namespace,nodes:t}}function Nu(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t],i=Qa(r);P(i)&&Tc(i),e.push(i)}return e}let yt=null;async function uo(n,e,t){if(yt!==null)return!1;if(e!==null)return new Promise((c,u)=>{n.update(()=>{c(fo(n,e,t))})});const r=n.getRootElement(),i=n._window||window,s=window.document,o=ve(i);if(r===null||o===null)return!1;const l=s.createElement("span");l.style.cssText="position: fixed; top: -1000px;",l.append(s.createTextNode("#")),r.append(l);const a=new Range;return a.setStart(l,0),a.setEnd(l,1),o.removeAllRanges(),o.addRange(a),new Promise((c,u)=>{const d=n.registerCommand(nr,f=>(Qe(f,ClipboardEvent)&&(d(),yt!==null&&(window.clearTimeout(yt),yt=null),c(fo(n,f,t))),!0),tc);yt=window.setTimeout(()=>{d(),yt=null,c(!1)},50),s.execCommand("copy"),l.remove()})}function fo(n,e,t){if(t===void 0){const i=ve(n._window);if(!i)return!1;const s=i.anchorNode,o=i.focusNode;if(s!==null&&o!==null&&!dn(n,s,o))return!1;const l=L();if(l===null)return!1;t=Pu(l)}e.preventDefault();const r=e.clipboardData;return r!==null&&(Lu(r,t),!0)}const Eu=[["text/html",ku],["application/x-lexical-editor",Tu]];function Pu(n=L()){const e={"text/plain":n?n.getTextContent():""};if(n){const t=hc();for(const[r,i]of Eu){const s=i(t,n);s!==null&&(e[r]=s)}}return e}function Lu(n,e){for(const t in e){const r=e[t];r!==void 0&&n.setData(t,r)}}function ho(n,e){if(document.caretRangeFromPoint!==void 0){const t=document.caretRangeFromPoint(n,e);return t===null?null:{node:t.startContainer,offset:t.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const t=document.caretPositionFromPoint(n,e);return t===null?null:{node:t.offsetNode,offset:t.offset}}return null}const zt=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Ou=zt&&"documentMode"in document?document.documentMode:null,Fu=!(!zt||!("InputEvent"in window)||Ou)&&"getTargetRanges"in new window.InputEvent("input"),Au=zt&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),go=zt&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Mu=zt&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Du=zt&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Mu,po=Mt();class hr extends We{static getType(){return"quote"}static clone(e){return new hr(e.__key)}createDOM(e){const t=document.createElement("blockquote");return gn(t,e.theme.quote),t}updateDOM(e,t){return!1}static importDOM(){return{blockquote:e=>({conversion:$u,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(U(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();t.style.textAlign=r;const i=this.getDirection();i&&(t.dir=i)}return{element:t}}static importJSON(e){return Hl().updateFromJSON(e)}insertNewAfter(e,t){const r=H(),i=this.getDirection();return r.setDirection(i),this.insertAfter(r,t),r}collapseAtStart(){const e=H();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}canMergeWhenEmpty(){return!0}}function Hl(){return Le(new hr)}function ff(n){return n instanceof hr}class gr extends We{static getType(){return"heading"}static clone(e){return new gr(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}setTag(e){const t=this.getWritable();return this.__tag=e,t}createDOM(e){const t=this.__tag,r=document.createElement(t),i=e.theme.heading;if(i!==void 0){const s=i[t];gn(r,s)}return r}updateDOM(e,t,r){return e.__tag!==this.__tag}static importDOM(){return{h1:e=>({conversion:xt,priority:0}),h2:e=>({conversion:xt,priority:0}),h3:e=>({conversion:xt,priority:0}),h4:e=>({conversion:xt,priority:0}),h5:e=>({conversion:xt,priority:0}),h6:e=>({conversion:xt,priority:0}),p:e=>{const t=e.firstChild;return t!==null&&_o(t)?{conversion:()=>({node:null}),priority:3}:null},span:e=>_o(e)?{conversion:t=>({node:Vt("h1")}),priority:3}:null}}exportDOM(e){const{element:t}=super.exportDOM(e);if(U(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();t.style.textAlign=r;const i=this.getDirection();i&&(t.dir=i)}return{element:t}}static importJSON(e){return Vt(e.tag).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(e,t=!0){const r=e?e.anchor.offset:0,i=this.getLastDescendant(),s=!i||e&&e.anchor.key===i.getKey()&&r===i.getTextContentSize()||!e?H():Vt(this.getTag()),o=this.getDirection();if(s.setDirection(o),this.insertAfter(s,t),r===0&&!this.isEmpty()&&e){const l=H();l.select(),this.replace(l,!0)}return s}collapseAtStart(){const e=this.isEmpty()?H():Vt(this.getTag());return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}extractWithChild(){return!0}}function _o(n){return n.nodeName.toLowerCase()==="span"&&n.style.fontSize==="26pt"}function xt(n){const e=n.nodeName.toLowerCase();let t=null;return e!=="h1"&&e!=="h2"&&e!=="h3"&&e!=="h4"&&e!=="h5"&&e!=="h6"||(t=Vt(e),n.style!==null&&(Ji(n,t),t.setFormat(n.style.textAlign))),{node:t}}function $u(n){const e=Hl();return n.style!==null&&(e.setFormat(n.style.textAlign),Ji(n,e)),{node:e}}function Vt(n="h1"){return Le(new gr(n))}function df(n){return n instanceof gr}function Pn(n){let e=null;if(Qe(n,DragEvent)?e=n.dataTransfer:Qe(n,ClipboardEvent)&&(e=n.clipboardData),e===null)return[!1,[],!1];const t=e.types,r=t.includes("Files"),i=t.includes("text/html")||t.includes("text/plain");return[r,Array.from(e.files),i]}function mo(n){const e=L();if(!T(e))return!1;const t=new Set,r=e.getNodes();for(let i=0;i<r.length;i++){const s=r[i],o=s.getKey();if(t.has(o))continue;const l=pn(s,c=>v(c)&&!c.isInline());if(l===null)continue;const a=l.getKey();l.canIndent()&&!t.has(a)&&(t.add(a),n(l))}return t.size>0}function Ln(n){const e=Be(n);return B(e)}function Dr(n){for(const e of["lowercase","uppercase","capitalize"])n.hasFormat(e)&&n.toggleFormat(e)}function Iu(n){return gt(n.registerCommand(Bo,e=>{const t=L();return!!ke(t)&&(t.clear(),!0)},0),n.registerCommand(Ze,e=>{const t=L();return!!T(t)&&(t.deleteCharacter(e),!0)},I),n.registerCommand(nn,e=>{const t=L();return!!T(t)&&(t.deleteWord(e),!0)},I),n.registerCommand(rn,e=>{const t=L();return!!T(t)&&(t.deleteLine(e),!0)},I),n.registerCommand(bt,e=>{const t=L();if(typeof e=="string")t!==null&&t.insertText(e);else{if(t===null)return!1;const r=e.dataTransfer;if(r!=null)ao(r,t,n);else if(T(t)){const i=e.data;return i&&t.insertText(i),!0}}return!0},I),n.registerCommand(Jr,()=>{const e=L();return!!T(e)&&(e.removeText(),!0)},I),n.registerCommand(Je,e=>{const t=L();return!!T(t)&&(t.formatText(e),!0)},I),n.registerCommand(Oa,e=>{const t=L();if(!T(t)&&!ke(t))return!1;const r=t.getNodes();for(const i of r){const s=pn(i,o=>v(o)&&!o.isInline());s!==null&&s.setFormat(e)}return!0},I),n.registerCommand(Ct,e=>{const t=L();return!!T(t)&&(t.insertLineBreak(e),!0)},I),n.registerCommand(tn,()=>{const e=L();return!!T(e)&&(e.insertParagraph(),!0)},I),n.registerCommand(Pa,()=>(Xa([an()]),!0),I),n.registerCommand(La,()=>mo(e=>{const t=e.getIndent();e.setIndent(t+1)}),I),n.registerCommand(cs,()=>mo(e=>{const t=e.getIndent();t>0&&e.setIndent(t-1)}),I),n.registerCommand(ki,e=>{const t=L();if(ke(t)&&!Ln(e.target)){const r=t.getNodes();if(r.length>0)return r[0].selectPrevious(),!0}else if(T(t)){const r=Zr(t.focus,!0);if(!e.shiftKey&&B(r)&&!r.isIsolated()&&!r.isInline())return r.selectPrevious(),e.preventDefault(),!0}return!1},I),n.registerCommand(Ti,e=>{const t=L();if(ke(t)){const r=t.getNodes();if(r.length>0)return r[0].selectNext(0,0),!0}else if(T(t)){if(function(i){const s=i.focus;return s.key==="root"&&s.offset===j().getChildrenSize()}(t))return e.preventDefault(),!0;const r=Zr(t.focus,!1);if(!e.shiftKey&&B(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),e.preventDefault(),!0}return!1},I),n.registerCommand(bi,e=>{const t=L();if(ke(t)){const r=t.getNodes();if(r.length>0)return e.preventDefault(),r[0].selectPrevious(),!0}if(!T(t))return!1;if(js(t,!0)){const r=e.shiftKey;return e.preventDefault(),Vs(t,r,!0),!0}return!1},I),n.registerCommand(Wo,e=>{const t=L();if(ke(t)&&!Ln(e.target)){const i=t.getNodes();if(i.length>0)return e.preventDefault(),i[0].selectNext(0,0),!0}if(!T(t))return!1;const r=e.shiftKey;return!!js(t,!1)&&(e.preventDefault(),Vs(t,r,!1),!0)},I),n.registerCommand(Ro,e=>{if(Ln(e.target))return!1;const t=L();if(!T(t))return!1;const{anchor:r}=t,i=r.getNode();return t.isCollapsed()&&r.offset===0&&!te(i)&&zc(i).getIndent()>0?(e.preventDefault(),n.dispatchCommand(cs,void 0)):(!go||navigator.language!=="ko-KR")&&(e.preventDefault(),n.dispatchCommand(Ze,!0))},I),n.registerCommand(Ko,e=>{if(Ln(e.target))return!1;const t=L();return!!T(t)&&(e.preventDefault(),n.dispatchCommand(Ze,!1))},I),n.registerCommand(Jn,e=>{const t=L();if(!T(t))return!1;if(Dr(t),e!==null){if((go||Au||Du)&&Fu)return!1;if(e.preventDefault(),e.shiftKey)return n.dispatchCommand(Ct,!1)}return n.dispatchCommand(tn,void 0)},I),n.registerCommand(Ni,()=>{const e=L();return!!T(e)&&(n.blur(),!0)},I),n.registerCommand(Uo,e=>{const[,t]=Pn(e);if(t.length>0){const i=ho(e.clientX,e.clientY);if(i!==null){const{offset:s,node:o}=i,l=Be(o);if(l!==null){const a=sl();if(P(l))a.anchor.set(l.getKey(),s,"text"),a.focus.set(l.getKey(),s,"text");else{const u=l.getParentOrThrow().getKey(),d=l.getIndexWithinParent()+1;a.anchor.set(u,d,"element"),a.focus.set(u,d,"element")}const c=Pt(a);ae(c)}n.dispatchCommand(po,t)}return e.preventDefault(),!0}const r=L();return!!T(r)},I),n.registerCommand(jo,e=>{const[t]=Pn(e),r=L();return!(t&&!T(r))},I),n.registerCommand(Vo,e=>{const[t]=Pn(e),r=L();if(t&&!T(r))return!1;const i=ho(e.clientX,e.clientY);if(i!==null){const s=Be(i.node);B(s)&&e.preventDefault()}return!0},I),n.registerCommand(Ur,()=>(sc(),!0),I),n.registerCommand(nr,e=>(uo(n,Qe(e,ClipboardEvent)?e:null),!0),I),n.registerCommand(Ei,e=>(async function(t,r){await uo(r,Qe(t,ClipboardEvent)?t:null),r.update(()=>{const i=L();T(i)?i.removeText():ke(i)&&i.getNodes().forEach(s=>s.remove())})}(e,n),!0),I),n.registerCommand(vi,e=>{const[,t,r]=Pn(e);return t.length>0&&!r?(n.dispatchCommand(po,t),!0):$t(e.target)&&Mi(e.target)?!1:L()!==null&&(function(i,s){i.preventDefault(),s.update(()=>{const o=L(),l=Qe(i,InputEvent)||Qe(i,KeyboardEvent)?null:i.clipboardData;l!=null&&o!==null&&ao(l,o,s)},{tag:"paste"})}(e,n),!0)},I),n.registerCommand(wi,e=>{const t=L();return T(t)&&Dr(t),!1},I),n.registerCommand(Jo,e=>{const t=L();return T(t)&&Dr(t),!1},I))}const fi=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?z.useLayoutEffect:z.useEffect;function yo(n){return n.getEditorState().read(Kl(n.isComposing()))}function hf({contentEditable:n,placeholder:e=null,ErrorBoundary:t}){const[r]=_t(),i=function(s,o){const[l,a]=z.useState(()=>s.getDecorators());return fi(()=>s.registerDecoratorListener(c=>{ts.flushSync(()=>{a(c)})}),[s]),z.useEffect(()=>{a(s.getDecorators())},[s]),z.useMemo(()=>{const c=[],u=Object.keys(l);for(let d=0;d<u.length;d++){const f=u[d],g=ce.jsx(o,{onError:p=>s._onError(p),children:ce.jsx(z.Suspense,{fallback:null,children:l[f]})}),h=s.getElementByKey(f);h!==null&&c.push(ts.createPortal(g,h,f))}return c},[o,l,s])}(r,t);return function(s){fi(()=>gt(Iu(s),vu(s)),[s])}(r),ce.jsxs(ce.Fragment,{children:[n,ce.jsx(zu,{content:e}),i]})}function zu({content:n}){const[e]=_t(),t=function(i){const[s,o]=z.useState(()=>yo(i));return fi(()=>{function l(){const a=yo(i);o(a)}return l(),gt(i.registerUpdateListener(()=>{l()}),i.registerEditableListener(()=>{l()}))},[i]),s}(e),r=xu();return t?typeof n=="function"?n(r):n:null}const Bu=new Set(["http:","https:","mailto:","sms:","tel:"]);class mn extends We{static getType(){return"link"}static clone(e){return new mn(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e="",t={},r){super(r);const{target:i=null,rel:s=null,title:o=null}=t;this.__url=e,this.__target=i,this.__rel=s,this.__title=o}createDOM(e){const t=document.createElement("a");return t.href=this.sanitizeUrl(this.__url),this.__target!==null&&(t.target=this.__target),this.__rel!==null&&(t.rel=this.__rel),this.__title!==null&&(t.title=this.__title),gn(t,e.theme.link),t}updateDOM(e,t,r){if(wl(t)){const i=this.__url,s=this.__target,o=this.__rel,l=this.__title;i!==e.__url&&(t.href=i),s!==e.__target&&(s?t.target=s:t.removeAttribute("target")),o!==e.__rel&&(o?t.rel=o:t.removeAttribute("rel")),l!==e.__title&&(l?t.title=l:t.removeAttribute("title"))}return!1}static importDOM(){return{a:e=>({conversion:Wu,priority:1})}}static importJSON(e){return Zn().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){try{const t=new URL(e);if(!Bu.has(t.protocol))return"about:blank"}catch{return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){const t=this.getWritable();return t.__url=e,t}getTarget(){return this.getLatest().__target}setTarget(e){const t=this.getWritable();return t.__target=e,t}getRel(){return this.getLatest().__rel}setRel(e){const t=this.getWritable();return t.__rel=e,t}getTitle(){return this.getLatest().__title}setTitle(e){const t=this.getWritable();return t.__title=e,t}insertNewAfter(e,t=!0){const r=Zn(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,t),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,r){if(!T(t))return!1;const i=t.anchor.getNode(),s=t.focus.getNode();return this.isParentOf(i)&&this.isParentOf(s)&&t.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function Wu(n){let e=null;if(wl(n)){const t=n.textContent;(t!==null&&t!==""||n.children.length>0)&&(e=Zn(n.getAttribute("href")||"",{rel:n.getAttribute("rel"),target:n.getAttribute("target"),title:n.getAttribute("title")}))}return{node:e}}function Zn(n="",e){return Le(new mn(n,e))}function Jt(n){return n instanceof mn}class pr extends mn{constructor(e="",t={},r){super(e,t,r),this.__isUnlinked=t.isUnlinked!==void 0&&t.isUnlinked!==null&&t.isUnlinked}static getType(){return"autolink"}static clone(e){return new pr(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){const t=this.getWritable();return t.__isUnlinked=e,t}createDOM(e){return this.__isUnlinked?document.createElement("span"):super.createDOM(e)}updateDOM(e,t,r){return super.updateDOM(e,t,r)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){return xo().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIsUnlinked(e.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(e,t=!0){const r=this.getParentOrThrow().insertNewAfter(e,t);if(v(r)){const i=xo(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(i),i}return null}}function xo(n="",e){return Le(new pr(n,e))}function vo(n){return n instanceof pr}const gf=Mt();function So(n,e){if(n.type==="element"){const t=n.getNode();return v(t)||function(r,...i){const s=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams;o.append("code",r);for(const l of i)o.append("v",l);throw s.search=o.toString(),Error(`Minified Lexical error #${r}; visit ${s.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),t.getChildren()[n.offset+e]||null}return null}function pf(n,e={}){const{target:t,title:r}=e,i=e.rel===void 0?"noreferrer":e.rel,s=L();if(!T(s))return;const o=s.extract();if(n===null)return void o.forEach(c=>{const u=pn(c,d=>!vo(d)&&Jt(d));if(u){const d=u.getChildren();for(let f=0;f<d.length;f++)u.insertBefore(d[f]);u.remove()}});const l=new Set,a=c=>{l.has(c.getKey())||(l.add(c.getKey()),c.setURL(n),t!==void 0&&c.setTarget(t),i!==void 0&&c.setRel(i),r!==void 0&&c.setTitle(r))};if(o.length===1){const c=Co(o[0],Jt);if(c!==null)return a(c)}(function(c){const u=L();if(!T(u))return c();const d=Pt(u),f=d.isBackward(),g=So(d.anchor,f?-1:0),h=So(d.focus,f?0:-1);if(c(),g||h){const p=L();if(T(p)){const _=p.clone();if(g){const y=g.getParent();y&&_.anchor.set(y.getKey(),g.getIndexWithinParent()+(f?1:0),"element")}if(h){const y=h.getParent();y&&_.focus.set(y.getKey(),h.getIndexWithinParent()+(f?0:1),"element")}ae(Pt(_))}}})(()=>{let c=null;for(const u of o){if(!u.isAttached())continue;const d=Co(u,Jt);if(d){a(d);continue}if(v(u)){if(!u.isInline())continue;if(Jt(u)){if(!(vo(u)||c!==null&&c.getParentOrThrow().isParentOf(u))){a(u),c=u;continue}for(const g of u.getChildren())u.insertBefore(g);u.remove();continue}}const f=u.getPreviousSibling();Jt(f)&&f.is(c)?f.append(u):(c=Zn(n,{rel:i,target:t,title:r}),u.insertAfter(c),c.append(u))}})}function Co(n,e){let t=n;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}export{gt as $,st as A,tf as B,$t as C,pn as D,Qu as E,Ti as F,ki as G,bi as H,Wo as I,Uu as J,nn as K,Ni as L,rn as M,I as N,ju as O,nf as P,X as Q,dt as R,Ze as S,H as T,Le as U,tc as V,Ro as W,P as X,Ko as Y,Ei as Z,Vu as _,af as a,cf as a$,uo as a0,Pu as a1,Qe as a2,Je as a3,Oa as a4,bt as a5,Jo as a6,Da as a7,zo as a8,Dt as a9,Lc as aA,Jt as aB,D as aC,Ic as aD,df as aE,Gu as aF,Cn as aG,bn as aH,Hu as aI,Xu as aJ,La as aK,cs as aL,zc as aM,ff as aN,qu as aO,_n as aP,Gc as aQ,Qc as aR,Yc as aS,Xc as aT,Vt as aU,Hl as aV,hr as aW,gr as aX,pt as aY,uf as aZ,of as a_,ae as aa,ve as ab,Ju as ac,tn as ad,sl as ae,gl as af,te as ag,ne as ah,Pe as ai,qe as aj,Pl as ak,Hi as al,at as am,Ee as an,pe as ao,he as ap,ut as aq,Vi as ar,Pt as as,cn as at,rt as au,Za as av,Uo as aw,Vo as ax,Te as ay,Pn as az,sf as b,fn as b0,Xa as b1,Zu as b2,$a as b3,_u as b4,wa as b5,ke as b6,ol as b7,le as b8,W as b9,ue as ba,B as bb,ef as bc,Pa as bd,Qr as be,Rc as bf,Jn as bg,Zn as bh,mn as bi,vi as bj,gf as bk,pf as bl,pr as bm,vo as bn,xo as bo,oc as bp,Ia as bq,Si as br,Ci as bs,ja as c,an as d,gn as e,We as f,U as g,hf as h,se as i,j,L as k,Yu as l,hc as m,$l as n,_t as o,Be as p,v as q,tu as r,Tt as s,Y as t,rf as u,Bo as v,Ta as w,lf as x,T as y,Mt as z};
