import{bs as p,bt as b,b8 as y}from"./ShadowCastClear.glsl.js";function f(a,e){if(a.symbol!=null)return a.symbol;const o=e==null?void 0:e.renderer;return o!=null&&o.type!=="dot-density"?o.getSymbol(a,e):null}function m(a,e){const o=f(a,e);if(o==null)return null;const r=e==null?void 0:e.renderer,i=new p(r,o);if(r==null||!("visualVariables"in r)||!r.visualVariables)return i;const c=b(r,a,e)??[],t=["proportional","proportional","proportional"];for(const{variable:n,value:l}of c)if(l!=null||n.type==="size"&&n.useSymbolValue)switch(n.type){case"color":i.color=l==null?void 0:l.toRgba();break;case"size":if(n.target==="outline")i.outlineSize=l;else{const u=n.axis,s=n.useSymbolValue?"symbol-value":l??"proportional";switch(u){case"width":t[0]=s;break;case"depth":t[1]=s;break;case"height":t[2]=s;break;case"width-and-depth":t[0]=t[1]=s;break;default:t[0]=t[1]=t[2]=s}}break;case"opacity":i.opacity=l;break;case"rotation":switch(n.axis){case"tilt":i.tilt=l;break;case"roll":i.roll=l;break;default:i.heading=l}}return t[0]==="proportional"&&t[1]==="proportional"&&t[2]==="proportional"||(i.size=t),i}async function d(a,e){var o;return a.symbol!=null?a.symbol:((o=e==null?void 0:e.renderer)==null?void 0:o.getSymbolAsync(a,e))??null}async function v(a,e){const o=await d(a,e);if(!o)return null;const r=e==null?void 0:e.renderer,i=new p(r,o);if(!r||!("visualVariables"in r)||!r.visualVariables)return i;const c=b(r,a,e)??[],t=["proportional","proportional","proportional"];for(const{variable:n,value:l}of c)if(n.type==="color")i.color=y.toUnitRGBA(l);else if(n.type==="size")if(n.target==="outline")i.outlineSize=l;else{const u=n.axis,s=n.useSymbolValue?"symbol-value":l;u==="width"?t[0]=s:u==="depth"?t[1]=s:u==="height"?t[2]=s:t[0]=t[1]=u==="width-and-depth"?s:t[2]=s}else n.type==="opacity"?i.opacity=l:n.type==="rotation"&&n.axis==="tilt"?i.tilt=l:n.type==="rotation"&&n.axis==="roll"?i.roll=l:n.type==="rotation"&&(i.heading=l);return(isFinite(t[0])||isFinite(t[1])||isFinite(t[2]))&&(i.size=t),i}function w(a,e=0){const o=a[e];return typeof o=="number"&&isFinite(o)?o:null}function g(a){for(let e=0;e<3;e++){const o=a[e];if(typeof o=="number")return isFinite(o)?o:0}return 0}export{w as a,v as n,m as r,g as s};
