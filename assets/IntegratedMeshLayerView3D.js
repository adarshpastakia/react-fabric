import{dF as l,fk as n,b5 as p,E as e,F as i,eh as d,V as m}from"./ShadowCastClear.glsl.js";import{O as u}from"./I3SMeshView3D.js";import{l as c}from"./LayerView3D.js";import{d as h}from"./LayerView.js";import"./iframe-DwvN93Ge.js";import"./index.js";import"./Viewport.js";import"./Section.js";import"./ErrorBoundary.js";import"./createClass.js";import"./Global.js";import"./useIsDark.js";import"./debounce.js";import"./index2.js";import"./Transform.js";import"./projectBoundingSphere.js";import"./I3SOverrides.js";import"./resourceUtils.js";import"./I3SUtil.js";import"./featurePopupQueryUtils.js";import"./I3SBinaryReader.js";import"./EllipsoidMode.js";import"./SceneModification.js";import"./ExtentSet.js";import"./rendererConversion.js";import"./optimizedFeatureQueryEngineAdapter.js";import"./popupUtils.js";import"./I3SMeshWorkerHandle.js";import"./SceneLayerWorker.js";import"./attributeUtils.js";import"./highlightUtils.js";import"./highlightOptionsUtils.js";const g=.2;let t=class extends u(c(h)){constructor(){super(...arguments),this.type="integrated-mesh-3d",this._elevationContext=1,this._supportsLabeling=!1,this._applySSAO=!l("disable-feature:im-ssao"),this._shadeNormals=!!l("enable-feature:im-shading"),this.drapeTargetType=1}get i3slayer(){return this.layer}get updatingProgressValue(){var r;return((r=this._controller)==null?void 0:r.updatingProgress)??0}get lodFactor(){var r,o,a,s;return((s=(a=(o=(r=this.view)==null?void 0:r.qualitySettings)==null?void 0:o.sceneService)==null?void 0:a.integratedMesh)==null?void 0:s.lodFactor)??1}get progressiveLoadFactor(){return this.lodFactor>=1?g:1}get visibleAtCurrentScale(){return n(this.i3slayer.effectiveScaleRange,this.view.scale)}get fullOpacity(){return 1}get layerPopupEnabledAndHasTemplate(){return!1}initialize(){this._updatingHandles.add(()=>this.layer.modifications,()=>this._loadModifications(),p),this.view.overlayManager.registerDrapeTarget(this)}destroy(){this.view.overlayManager.unregisterDrapeTarget(this)}get ready(){return this.layer.loaded}_createLayerGraphic(){}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}_loadModifications(){if(this.removeHandles("modifications"),this.layer.modifications==null)return void(this._modifications=[]);const r=this.layer.modifications;this.addHandles(this._updatingHandles.addOnCollectionChange(()=>r,()=>this._modifications=r.toArray(),p),"modifications")}};e([i()],t.prototype,"layer",void 0),e([i()],t.prototype,"i3slayer",null),e([i(d)],t.prototype,"updatingProgress",void 0),e([i()],t.prototype,"updatingProgressValue",null),e([i()],t.prototype,"lodFactor",null),e([i({readOnly:!0})],t.prototype,"progressiveLoadFactor",null),e([i({readOnly:!0})],t.prototype,"visibleAtCurrentScale",null),e([i()],t.prototype,"fullOpacity",null),t=e([m("esri.views.3d.layers.IntegratedMeshLayerView3D")],t);const Q=t;export{Q as default};
