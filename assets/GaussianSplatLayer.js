import{al as c,am as m,an as v,jl as S,ao as w,jm as x,jn as E,as as g,b0 as o,K as d,dF as R,b as n,f as p,H as T,jo as u,jp as j,l as h,jq as L,E as s,F as a,av as $,jr as b,V as C}from"./ShadowCastClear.glsl.js";import{R as F,E as y}from"./tiles3DUtils.js";import"./iframe-qDaPDssc.js";import"./index.js";import"./Viewport.js";import"./debounce.js";import"./index2.js";import"./Section.js";import"./ErrorBoundary.js";import"./createClass.js";import"./Global.js";import"./useIsDark.js";let t=class extends c(m(v(S(w(x(E(g))))))){constructor(e){super(e),this.operationalLayerType="GaussianSplatLayer",this.type="gaussian-splat",this.opacity=1,this.minScale=0,this.maxScale=0,this.url=null,this.rootTilesetJSON=null,this.fullExtent=new o(-180,-90,180,90,this.spatialReference),this.spatialReference=new d({wkid:4326,vcsWkid:115700}),this.esriCrsSpatialReference=null,this.esriCrsFullExtent=null}get supportedSpatialReferences(){return this.initialized&&this.esriCrsSpatialReference?[this.spatialReference,this.esriCrsSpatialReference]:[this.spatialReference]}get fullExtents(){return this.initialized&&this.esriCrsFullExtent?[this.fullExtent,this.esriCrsFullExtent]:[this.fullExtent]}set elevationInfo(e){e!=null&&e.mode!=="absolute-height"||this._set("elevationInfo",e),this._validateElevationInfo(e)}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const r=e!=null?e.signal:null;if(!R("enable-feature:gaussianSplatLayer"))throw new n("GaussianSplatLayer-init:not-supported","This layer is currently not supported.");try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:l=>{var i;if((i=l.typeKeywords)!=null&&i.includes("GaussianSplat"))return!0;throw new n("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service"})}},e)}catch(l){p(l)}this.url&&await T(this.url,{query:{...this.customParameters,token:this.apiKey},responseType:"json",signal:r}).then(i=>{this.rootTilesetJSON=i.data;const f=F(this.rootTilesetJSON);this.fullExtent=y(this.rootTilesetJSON,!1),this.spatialReference=this.fullExtent.spatialReference,f&&(this.esriCrsFullExtent=y(this.rootTilesetJSON,!0),this.esriCrsSpatialReference=this.esriCrsFullExtent.spatialReference)},i=>{p(i)})}_validateElevationInfo(e){const r="Gaussian Splat layers";u(h.getLogger(this),j(r,"absolute-height",e)),u(h.getLogger(this),L(r,e))}};s([a({type:["GaussianSplatLayer"]})],t.prototype,"operationalLayerType",void 0),s([a({readOnly:!0})],t.prototype,"type",void 0),s([a({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],t.prototype,"opacity",void 0),s([a({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"minScale",void 0),s([a({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"maxScale",void 0),s([a($)],t.prototype,"url",void 0),s([a({type:o})],t.prototype,"fullExtent",void 0),s([a({type:d})],t.prototype,"spatialReference",void 0),s([a({readOnly:!0})],t.prototype,"supportedSpatialReferences",null),s([a({type:[o]})],t.prototype,"fullExtents",null),s([a({type:["show","hide"]})],t.prototype,"listMode",void 0),s([a(b)],t.prototype,"elevationInfo",null),t=s([C("esri.layers.GaussianSplatLayer")],t);const H=t;export{H as default};
