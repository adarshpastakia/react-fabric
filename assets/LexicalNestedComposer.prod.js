import{r as i,j as y}from"./iframe-DpfJK_wQ.js";import{r as v,t as j,q as K,d as M,D as O}from"./LexicalLink.prod.js";const _=[["Cat","rgb(125, 50, 0)"],["Dog","rgb(100, 0, 0)"],["Rabbit","rgb(150, 0, 0)"],["Frog","rgb(200, 0, 0)"],["Fox","rgb(200, 75, 0)"],["Hedgehog","rgb(0, 75, 0)"],["Pigeon","rgb(0, 125, 0)"],["Squirrel","rgb(75, 100, 0)"],["Bear","rgb(125, 100, 0)"],["Tiger","rgb(0, 0, 150)"],["Leopard","rgb(0, 0, 200)"],["Zebra","rgb(0, 0, 250)"],["Wolf","rgb(0, 100, 150)"],["Owl","rgb(0, 100, 100)"],["Gull","rgb(100, 0, 100)"],["Squid","rgb(150, 0, 150)"]],w=_[Math.floor(Math.random()*_.length)],R=i.createContext({clientID:0,color:w[1],isCollabActive:!1,name:w[0],yjsDocMap:new Map});function T(e,l){return i.useContext(R)}function C(e){const l=new Set,{ownNodeConfig:c}=O(e),d=e.transform();if(c){const g=c.$transform;g&&l.add(g)}return d&&l.add(d),l}function W({initialEditor:e,children:l,initialNodes:c,initialTheme:d,skipCollabChecks:g,skipEditableListener:m}){const x=i.useRef(!1),u=i.useContext(v);u==null&&function(t,...f){const n=new URL("https://lexical.dev/docs/error"),a=new URLSearchParams;a.append("code",t);for(const r of f)a.append("v",r);throw n.search=a.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(9);const[s,{getTheme:D}]=u,k=i.useMemo(()=>{const t=d||D()||void 0,f=j(u,t);t!==void 0&&(e._config.theme=t),e._parentEditor=e._parentEditor||s;const n=e._createEditorArgs,a=n&&n.namespace;if(c){a||(e._config.namespace=s._config.namespace);for(let r of c){let p=null,o=null;if(typeof r!="function"){const h=r;r=h.replace,p=h.with,o=h.withKlass||null}const E=K(e,r.getType());e._nodes.set(r.getType(),{exportDOM:E?E.exportDOM:void 0,klass:r,replace:p,replaceWithKlass:o,sharedNodeState:M(r),transforms:C(r)})}}else if(n&&n.nodes)a||(e._config.namespace=s._config.namespace);else{const r=e._nodes=new Map(s._nodes);a||(e._config.namespace=s._config.namespace);for(const[p,o]of r)e._nodes.set(p,{exportDOM:o.exportDOM,klass:o.klass,replace:o.replace,replaceWithKlass:o.replaceWithKlass,sharedNodeState:M(o.klass),transforms:C(o.klass)})}return[e,f]},[]),{isCollabActive:S,yjsDocMap:L}=T(),b=g||x.current||L.has(e.getKey());return i.useEffect(()=>{b&&(x.current=!0)},[b]),i.useEffect(()=>{if(!m){const t=f=>e.setEditable(f);return t(s.isEditable()),s.registerEditableListener(t)}},[e,s,m]),y.jsx(v.Provider,{value:k,children:!S||b?l:null})}export{W as h};
