import{b as c}from"./ShadowCastClear.glsl.js";import"./iframe-DpfJK_wQ.js";import"./index.js";import"./Viewport.js";import"./debounce.js";import"./index2.js";import"./Section.js";import"./ErrorBoundary.js";import"./createClass.js";import"./Global.js";import"./useIsDark.js";function k(o,r){let t=r.responseType;t?t!=="array-buffer"&&t!=="blob"&&t!=="json"&&t!=="native"&&t!=="native-request-init"&&t!=="text"&&(t="text"):t="json",r.responseType=t;const u=r.signal;return delete r.signal,globalThis.invokeStaticMessage("request",{url:o,options:r},{signal:u}).then(async e=>{let n,s,l,p,a;if(e.data)if(e.data instanceof ArrayBuffer){if(!(t!=="json"&&t!=="text"&&t!=="blob"||(n=new Blob([e.data]),t!=="json"&&t!=="text"||(p=await n.text(),t!=="json")))){try{s=JSON.parse(p||null)}catch(i){const b={...i,url:o,requestOptions:r};throw new c("request:server",i.message,b)}if(s.error){const i={...s.error,url:o,requestOptions:r};throw new c("request:server",s.error.message,i)}}}else t==="native"&&(e.data.signal=u,l=await fetch(e.data.url,e.data),e.httpStatus=l.status);switch(t){case"blob":a=n;break;case"json":a=s;break;case"native":a=l;break;case"text":a=p;break;default:a=e.data}return{data:a,httpStatus:e.httpStatus,requestOptions:r,ssl:e.ssl,url:o}})}export{k as execute};
