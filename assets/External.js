import{H as p,ar as f,hP as m,i6 as y,i7 as b}from"./ShadowCastClear.glsl.js";class H{constructor(t,s,r){this.assetName=t,this.assetMimeType=s,this.parts=r}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&m(this.parts,t.parts,(s,r)=>s.equals(r))}isOnService(t){return this.parts.every(s=>s.isOnService(t))}makeHash(){let t="";for(const s of this.parts)t+=s.partHash;return t}async toBlob(t){const{parts:s}=this;if(s.length===1)return s[0].toBlob(t);const r=await Promise.all(s.map(n=>n.toBlob(t)));return f(t),new Blob(r)}}class ${constructor(t,s){this.partUrl=t,this.partHash=s}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:s}=await p(this.partUrl,{responseType:"blob"});return f(t),s}}function d(e){return v(e==null?void 0:e.source)}const c=/^(model\/gltf\+json)|(model\/gltf-binary)$/,l=/\.(gltf|glb)/i;function v(e){switch(e==null?void 0:e.type){case"client":return Array.isArray(e.files)?e.files.some(i):i(e.files);case"service":return e.assets.some(i);case"loadable":return!0;default:return!1}}function i(e){if(e instanceof File){const{type:t,name:s}=e;return c.test(t)||l.test(s)}return c.test(e.assetMimeType)||l.test(e.assetName)}function T(e,t){if(!e)return!1;const{source:s}=e;return g(s,t)}function w(e,t){if(e===t)return!0;const{source:s}=e,{source:r}=t;if(s===r)return!0;if(s.type==="service"&&r.type==="service"){if(s.assets.length!==r.assets.length)return!1;const n=(a,u)=>a.assetName<u.assetName?-1:a.assetName>u.assetName?1:0,o=[...s.assets].sort(n),h=[...r.assets].sort(n);for(let a=0;a<o.length;++a)if(!o[a].equals(h[a]))return!1;return!0}return!1}function g(e,t){return e.type==="service"&&e.assets.every(s=>s.isOnService(t))}function B(e,t){return e instanceof File?y(e,t):b(e.assetMimeType,e.assetName,t)}function M(e){switch(e.type){case"client":return Array.isArray(e.files)?e.files:[e.files];case"service":return e.assets;case"loadable":return}}function U(e){return!!e.original}export{M as b,T as f,H as i,w as m,$ as n,d as o,U as v,B as y};
