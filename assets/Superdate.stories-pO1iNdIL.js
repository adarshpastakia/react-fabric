import{aS as O,j as e,r as o,aT as k,aV as g,aW as E,m as re}from"./iframe-BcXNitKG.js";import{b as ne,C as se}from"./index-DUA9IMpG.js";import{M as le,a as C}from"./Menu-CIViNpVY.js";import{a as q,D as x}from"./Google-DOYfq3v8.js";import{D as F}from"./DateDisplay-CGmEnYvR.js";import{u as oe}from"./floating-ui.react-CCZcFCqr.js";import{D as ie}from"./Dropdown-DUHKUE_z.js";import{B as M}from"./Button-7R_E-GE9.js";import{u as Z}from"./Global-HPy1X0OU.js";import{C as ue}from"./BasePanel-DkxgOkoR.js";import{T as de}from"./Tooltip-J_gHpl9C.js";import{F as ce,C as A,N as pe,S as z,a as ee,T as me,b as D,R as $e,E as ye}from"./Select-DKu2rxhM.js";import{C as P}from"./Content-BJKCk6Ue.js";import{D as ve}from"./Divider-DB8bkHxO.js";import"./ColorPicker-0pYYboV3.js";import{b as H,c as Q,d as Y}from"./zh-CN-Bmeuy_N5.js";const he=" ⇽ ",be={quick:"حدد مسرعا",relative:"نسبيا",events:"الأحداث",absolute:"مطلق",preset:"المسبقة",current:"تيار",previous:"السابق",from:"من عند",to:"إلى","+":"من الان","-":"منذ",apply:"يتقدم",$now:"الآن",$minute:"دقيقة",$hour:"ساعة",$day:"يوم",$week:"أسبوع",$month:"شهر",$quarter:"ربع",$year:"عام",$decade:"عقد"},fe={$day:"اليوم",$week:"هذا الاسبوع",$month:"هذا الشهر",$quarter:"هذا الربع",$year:"هذه السنة",$decade:"هذا العقد"},we={$day:"غدا",$week:"الاسبوع القادم",$month:"الشهر القادم",$quarter:"الربع القادم",$year:"العام القادم",$decade:"العقد القادم",$minute:"بعد دقيقة",$hour:"بعد ساعة",$minute_plural:"بعد {{count}} دقائق",$hour_plural:"بعد {{count}} ساعات",$day_plural:"بعد {{count}} أيام",$week_plural:"بعد {{count}} أسابيع",$month_plural:"بعد {{count}} أشهر",$quarter_plural:"بعد {{count}} أرباع",$year_plural:"بعد {{count}} سنوات",$decade_plural:"بعد {{count}} عقود"},ge={$day:"في الامس",$week:"الاسبوع الماضي",$month:"الشهر الماضي",$quarter:"الربع الأخير",$year:"العام الماضي",$decade:"العقد الماضي",$minute:"منذ دقيقة",$hour:"منذ ساعة",$minute_plural:"منذ {{count}} دقيقة",$hour_plural:"منذ {{count}} ساعات",$day_plural:"منذ {{count}} أيام",$week_plural:"من {{count}} اسابيع",$month_plural:"قبل {{count}} أشهر",$quarter_plural:"منذ {{count}} أرباع",$year_plural:"منذ {{count}} سنوات",$decade_plural:"منذ {{count}} عقود"},xe={separator:he,label:be,now:fe,next:we,prev:ge},qe=" ⇾ ",Se={ramadan:"Ramadan",christmas:"Christmas",newYear:"New Year"},je={quick:"Quick Select",relative:"Relative",absolute:"Absolute",events:"Events",preset:"Presets",current:"Current",previous:"Previous",from:"From",to:"To","+":"From now","-":"Ago",apply:"Apply",$now:"Now",$minute:"Minute",$hour:"Hour",$day:"Day",$week:"Week",$month:"Month",$quarter:"Quarter",$year:"Year",$decade:"Decade"},Te={$day:"Today",$week:"This week",$month:"This month",$quarter:"This quarter",$year:"This year",$decade:"This decade"},ke={$day:"Tomorrow",$week:"Next week",$month:"Next month",$quarter:"Next quarter",$year:"Next year",$decade:"Next decade",$minute:"A minute later",$hour:"An hour later",$minute_other:"{{count}} minutes later",$hour_other:"{{count}} hours later",$day_other:"{{count}} days later",$week_other:"{{count}} weeks later",$month_other:"{{count}} months later",$quarter_other:"{{count}} quarters later",$year_other:"{{count}} years later",$decade_other:"{{count}} decades later"},_e={$day:"Yesterday",$week:"Last week",$month:"Last month",$quarter:"Last quarter",$year:"Last year",$decade:"Last decade",$minute:"A minute ago",$hour:"An hour ago",$minute_other:"{{count}} minutes ago",$hour_other:"{{count}} hours ago",$day_other:"{{count}} days ago",$week_other:"{{count}} weeks ago",$month_other:"{{count}} months ago",$quarter_other:"{{count}} quarters ago",$year_other:"{{count}} years ago",$decade_other:"{{count}} decades ago"},De={separator:qe,event:Se,label:je,now:Te,next:ke,prev:_e};ne("superdate",{en:De,ar:xe});const N=({label:n,prefix:a,showApply:s})=>{const{t:l}=O("superdate");return e.jsxs(ce,{label:n,className:"mb-2",children:[e.jsx(A,{name:`${a}.diff`,children:e.jsx(pe,{width:"5rem",min:1,max:99})}),e.jsx(A,{name:`${a}.part`,children:e.jsx(z,{width:"6rem",options:Object.values(q).slice(1).map(t=>({id:t,label:l(`label.${t}`)}))})}),e.jsx(A,{name:`${a}.op`,children:e.jsx(z,{width:"7rem",options:[{id:"-",label:l("label.-")},{id:"+",label:l("label.+")}]})}),s&&e.jsx(M,{variant:"solid",type:"submit",children:l("label.apply")})]})};N.__docgenInfo={description:"",methods:[],displayName:"RelativeInput"};const Ne=[{value:"$day",label:"superdate:now.$day"},{value:"$day-1",label:"superdate:prev.$day"},{value:"$day+1",label:"superdate:next.$day"},{value:"$week",label:"superdate:now.$week"},{value:"$week-1",label:"superdate:prev.$week"},{value:"$week+1",label:"superdate:next.$week"},{value:"$month",label:"superdate:now.$month"},{value:"$month-1",label:"superdate:prev.$month"},{value:"$month+1",label:"superdate:next.$month"},{value:"$quarter",label:"superdate:now.$quarter"},{value:"$quarter-1",label:"superdate:prev.$quarter"},{value:"$quarter+1",label:"superdate:next.$quarter"},{value:"$year",label:"superdate:now.$year"},{value:"$year-1",label:"superdate:prev.$year"},{value:"$year+1",label:"superdate:next.$year"}],Oe=k({rel:k({diff:E().required().label("Difference"),op:g().required().oneOf(["+","-"]).label("Operator"),part:g().required().oneOf(Object.values(q)).label("Date part")})}),ae=({presets:n=Ne,value:a="",onChange:s})=>{const{t:l}=O(),t=o.useCallback(({rel:{part:r,diff:u,op:c}})=>{s(`${r}${c}${u}|${q.NOW}`)},[]),i=o.useMemo(()=>{if(a!=null&&a.endsWith(q.NOW)){const[,r,u,c="0"]=a.split("|").shift().match(/^(\$\w+)([+-])(\d+)?$/)??[];return{rel:{part:r,op:u,diff:c}}}},[a]);return e.jsxs(P,{children:[e.jsx("div",{className:"inline-block origin-left rtl:origin-right",style:{zoom:.85},children:e.jsx(ee,{schema:Oe,onSubmit:t,defaultValues:i,children:e.jsx(N,{label:l("superdate:label.relative"),prefix:"rel",showApply:!0})})}),e.jsx(ve,{children:l("superdate:label.preset")}),e.jsx("div",{className:"grid grid-cols-3 flex-row text-sm gap-2",children:n.map(r=>e.jsx("button",{className:"link appearance-none text-start",onClick:()=>s==null?void 0:s(r.value),children:l(r.label,{defaultValue:r.label})},r.value))})]})};ae.__docgenInfo={description:"",methods:[],displayName:"QuickSelect",props:{presets:{defaultValue:{value:`[
  { value: "$day", label: "superdate:now.$day" },
  { value: "$day-1", label: "superdate:prev.$day" },
  { value: "$day+1", label: "superdate:next.$day" },
  { value: "$week", label: "superdate:now.$week" },
  { value: "$week-1", label: "superdate:prev.$week" },
  { value: "$week+1", label: "superdate:next.$week" },
  { value: "$month", label: "superdate:now.$month" },
  { value: "$month-1", label: "superdate:prev.$month" },
  { value: "$month+1", label: "superdate:next.$month" },
  { value: "$quarter", label: "superdate:now.$quarter" },
  { value: "$quarter-1", label: "superdate:prev.$quarter" },
  { value: "$quarter+1", label: "superdate:next.$quarter" },
  { value: "$year", label: "superdate:now.$year" },
  { value: "$year-1", label: "superdate:prev.$year" },
  { value: "$year+1", label: "superdate:next.$year" },
]`,computed:!1},required:!1},value:{defaultValue:{value:'""',computed:!1},required:!1}}};const Ie=k({from:k({diff:E().required().label("Difference"),op:g().required().oneOf(["+","-"]).label("Operator"),part:g().required().oneOf(Object.values(q)).label("Date part")}),to:k({diff:E().required().label("Difference"),op:g().required().oneOf(["+","-"]).label("Operator"),part:g().required().oneOf(Object.values(q)).label("Date part")})}),te=({value:n="",onChange:a})=>{const{t:s}=O("superdate"),l=o.useCallback(({to:i,from:r})=>{a(`${r.part}${r.op}${r.diff}|${i.part}${i.op}${i.diff}`)},[]),t=o.useMemo(()=>{if(n!=null&&n.match(/^(\$\w+)([+-])(\d+)?\|(\$\w+)([+-])(\d+)?$/)){const[,i,r,u="0"]=n.split("|").shift().match(/^(\$\w+)([+-])(\d+)?$/)??[],[,c,h,p="0"]=n.split("|").pop().match(/^(\$\w+)([+-])(\d+)?$/)??[];return{from:{part:i,op:r,diff:u},to:{part:c,op:h,diff:p}}}},[n]);return e.jsx(P,{children:e.jsx("div",{className:"scale-90",children:e.jsxs(ee,{schema:Ie,defaultValues:t,onSubmit:l,children:[e.jsx(N,{label:s("label.from"),prefix:"from"}),e.jsx(N,{label:s("label.to"),prefix:"to"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(M,{variant:"solid",type:"submit",children:s("label.apply")})})]})})})};te.__docgenInfo={description:"",methods:[],displayName:"RelativePanel",props:{value:{defaultValue:{value:'""',computed:!1},required:!1}}};const V=({events:n,value:a,presets:s,recurringEvents:l,onChange:t})=>{const{t:i}=O("superdate"),r=oe(),{currentCalendar:u,currentLocale:c}=Z(),h=o.useMemo(()=>u==="hijri",[u]),[p,S]=o.useState(""),[I,m]=o.useState("quick");o.useEffect(()=>{a!=null&&a.match(/^(\$\w+)([+-])(\d+)\|(\$\w+)([+-])(\d+)$/)?m("relative"):a&&!(a!=null&&a.match(/^(\$\w+)/))?m("absolute"):m("quick"),a&&S(a)},[a]);const d=o.useCallback($=>{var f,w,y,v;const b=x.parseRange($);S($),t==null||t($,[(w=(f=b[0])==null?void 0:f.toISOString)==null?void 0:w.call(f),(v=(y=b[1])==null?void 0:y.toISOString)==null?void 0:v.call(y)]),r==null||r.events.emit("close")},[h,c]);return e.jsx("div",{className:re("rounded-capped outline select-none overflow-hidden grid","fabric-superDate"),children:e.jsxs(me,{headerClassName:"border-b",onChange:m,activeTab:I,children:[e.jsx(D,{id:"quick",label:i("label.quick"),children:e.jsx(ae,{value:p,onChange:d,presets:s})}),e.jsx(D,{id:"relative",label:i("label.relative"),children:e.jsx(te,{value:p,onChange:d})}),e.jsx(D,{id:"absolute",label:i("label.absolute"),children:e.jsx(P,{className:"p-0",children:e.jsx($e,{withTime:!0,showHijriToggle:!0,value:p?x.parseRange(p):void 0,showApply:!0,onChange:([$,b])=>d==null?void 0:d(`${$}|${b}`)})})}),e.jsx(D,{id:"events",label:i("label.events"),children:e.jsx(ye,{isHijri:h,onChange:d,events:n,recurringEvents:l})})]})})},R=({as:n="button",color:a="primary",size:s,variant:l,disabled:t,fullWidth:i,onChange:r,value:u,"data-test-value":c,"data-testid":h,...p})=>{const{currentCalendar:S,currentLocale:I}=Z(),m=o.useMemo(()=>S==="hijri",[S]),[d,$]=o.useState();o.useEffect(()=>{$(u)},[u]);const b=o.useCallback(w=>{var v,L,_,W;const y=x.parseRange(w);$(w),r==null||r(w,[(L=(v=y[0])==null?void 0:v.toISOString)==null?void 0:L.call(v),(W=(_=y[1])==null?void 0:_.toISOString)==null?void 0:W.call(_)])},[m,I]),f=n==="button"?M:ue;return e.jsxs(ie,{showArrow:!0,children:[e.jsx(de,{content:x.relativeTooltip(d,m),children:e.jsx(f,{icon:se.clock,size:s,color:a,disabled:t,fullWidth:i,variant:l,"data-test-value":c,"data-testid":h,children:x.relativeLabel(d,m)??""})}),e.jsx(V,{...p,value:d,onChange:b})]})};V.__docgenInfo={description:"",methods:[],displayName:"SuperDateTabs",props:{as:{required:!1,tsType:{name:"union",raw:'"button" | "chip"',elements:[{name:"literal",value:'"button"'},{name:"literal",value:'"chip"'}]},description:""},color:{required:!1,tsType:{name:"ColorState"},description:""},size:{required:!1,tsType:{name:"SizeType"},description:""},variant:{required:!1,tsType:{name:"union",raw:'"solid" | "outline" | "link"',elements:[{name:"literal",value:'"solid"'},{name:"literal",value:'"outline"'},{name:"literal",value:'"link"'}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},fullWidth:{required:!1,tsType:{name:"boolean"},description:""},value:{required:!1,tsType:{name:"string"},description:"relative date value"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string, dates: [string, string]) => void",signature:{arguments:[{type:{name:"string"},name:"value"},{type:{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]},name:"dates"}],return:{name:"void"}}},description:"change handler"},events:{required:!1,tsType:{name:"Array",elements:[{name:"EventType"}],raw:"EventType[]"},description:"list of calendar events"},recurringEvents:{required:!1,tsType:{name:"Array",elements:[{name:"EventType"}],raw:"EventType[]"},description:"list of calendar events"},presets:{required:!1,tsType:{name:"Array",elements:[{name:"PresetType"}],raw:"PresetType[]"},description:`list of relative presets

{value:'$year-5|$year', label:'last 5 years'}`}},composes:["TestProps"]};R.__docgenInfo={description:"Superdate panel provides ability to select relative and absolute dates\n\nRelative dates parts\n`$now`,\n`$minute`,\n`$hour`,\n`$day`,\n`$week`,\n`$month`,\n`$quarter`,\n`$year`,\n`$decade`",methods:[],displayName:"SuperDate",props:{as:{required:!1,tsType:{name:"union",raw:'"button" | "chip"',elements:[{name:"literal",value:'"button"'},{name:"literal",value:'"chip"'}]},description:"",defaultValue:{value:'"button"',computed:!1}},color:{required:!1,tsType:{name:"ColorState"},description:"",defaultValue:{value:'"primary"',computed:!1}},size:{required:!1,tsType:{name:"SizeType"},description:""},variant:{required:!1,tsType:{name:"union",raw:'"solid" | "outline" | "link"',elements:[{name:"literal",value:'"solid"'},{name:"literal",value:'"outline"'},{name:"literal",value:'"link"'}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},fullWidth:{required:!1,tsType:{name:"boolean"},description:""},value:{required:!1,tsType:{name:"string"},description:"relative date value"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string, dates: [string, string]) => void",signature:{arguments:[{type:{name:"string"},name:"value"},{type:{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]},name:"dates"}],return:{name:"void"}}},description:"change handler"},events:{required:!1,tsType:{name:"Array",elements:[{name:"EventType"}],raw:"EventType[]"},description:"list of calendar events"},recurringEvents:{required:!1,tsType:{name:"Array",elements:[{name:"EventType"}],raw:"EventType[]"},description:"list of calendar events"},presets:{required:!1,tsType:{name:"Array",elements:[{name:"PresetType"}],raw:"PresetType[]"},description:`list of relative presets

{value:'$year-5|$year', label:'last 5 years'}`}},composes:["TestProps"]};const Ce={component:R,title:"@superdate/Superdate",parameters:{layout:"centered",controls:{exclude:"children"}}},j={render:n=>e.jsx(R,{...n}),args:{value:"$year-2|$now",recurringEvents:[{label:"National Day",start:"2000-11-30",end:"2000-12-03"}],presets:[{value:"$year-2|$now",label:"Last 2 years"},{value:"$year-5|$now",label:"Last 5 years"},{value:"$year-10|$now",label:"Last 10 years"}]}},T={render:n=>{const[a,s]=o.useState(n.value),[l,t]=o.useMemo(()=>a?x.parseRange(a):[],[a]);return e.jsxs("div",{children:[e.jsx("div",{className:"inline-block",children:e.jsx(V,{...n,value:a,onChange:s})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("span",{className:"text-muted",children:"Relative value: "}),e.jsx("span",{className:"font-medium",children:a})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted",children:"Actual value: "}),e.jsx(F,{date:l,showAlternateDate:!0}),e.jsx("span",{children:" ⇾ "}),e.jsx(F,{date:t,showAlternateDate:!0,children:e.jsxs(le,{children:[e.jsx(C,{label:"± 1 Day",onClick:()=>t&&s(`${H(t,-1).toISOString()}|${H(t,1).toISOString()}`)}),e.jsx(C,{label:"± 1 Week",onClick:()=>t&&s(`${Q(t,-1).toISOString()}|${Q(t,1).toISOString()}`)}),e.jsx(C,{label:"± 1 Month",onClick:()=>t&&s(`${Y(t,-1).toISOString()}|${Y(t,1).toISOString()}`)})]})})]})]})},args:{value:"$year-2|$now"}};var B,U,G;j.parameters={...j.parameters,docs:{...(B=j.parameters)==null?void 0:B.docs,source:{originalSource:`{
  render: args => {
    return <SuperDate {...args} />;
  },
  args: {
    value: "$year-2|$now",
    recurringEvents: [{
      label: "National Day",
      start: "2000-11-30",
      end: "2000-12-03"
    }],
    presets: [{
      value: "$year-2|$now",
      label: "Last 2 years"
    }, {
      value: "$year-5|$now",
      label: "Last 5 years"
    }, {
      value: "$year-10|$now",
      label: "Last 10 years"
    }]
  }
}`,...(G=(U=j.parameters)==null?void 0:U.docs)==null?void 0:G.source}}};var J,K,X;T.parameters={...T.parameters,docs:{...(J=T.parameters)==null?void 0:J.docs,source:{originalSource:`{
  render: args => {
    const [value, setValue] = useState(args.value);
    const [start, end] = useMemo(() => value ? DateUtil.parseRange(value) : [], [value]);
    return <div>
        <div className="inline-block">
          <SuperDateTabs {...args} value={value} onChange={setValue} />
        </div>
        <div className="mt-8">
          <span className="text-muted">Relative value: </span>
          <span className="font-medium">{value}</span>
        </div>
        <div>
          <span className="text-muted">Actual value: </span>
          <DateDisplay date={start} showAlternateDate />
          <span> ⇾ </span>
          <DateDisplay date={end} showAlternateDate>
            <Menu>
              <MenuItem label="± 1 Day" onClick={() => end && setValue(\`\${addDays(end, -1).toISOString()}|\${addDays(end, 1).toISOString()}\`)} />
              <MenuItem label="± 1 Week" onClick={() => end && setValue(\`\${addWeeks(end, -1).toISOString()}|\${addWeeks(end, 1).toISOString()}\`)} />
              <MenuItem label="± 1 Month" onClick={() => end && setValue(\`\${addMonths(end, -1).toISOString()}|\${addMonths(end, 1).toISOString()}\`)} />
            </Menu>
          </DateDisplay>
        </div>
      </div>;
  },
  args: {
    value: "$year-2|$now"
  }
}`,...(X=(K=T.parameters)==null?void 0:K.docs)==null?void 0:X.source}}};const Ae=["_Superdate","Playground"],Ke=Object.freeze(Object.defineProperty({__proto__:null,Playground:T,_Superdate:j,__namedExportsOrder:Ae,default:Ce},Symbol.toStringTag,{value:"Module"}));export{T as P,Ke as S,j as _,R as a};
