import{_ as de,r as d,j as i,m as A,aR as U,l as it,aS as ne,aX as vt,aM as ee,aP as at,aO as pe,aN as $e,bl as xt,b$ as fe,s as le,bj as te,bG as Tt}from"./iframe-BcXNitKG.js";import{a as wt,C,b as jt,c as kt}from"./index-DUA9IMpG.js";import{_ as ce,I as W,T as qt}from"./Tooltip-J_gHpl9C.js";import{B as Te}from"./ButtonGroup-CZyLy_kH.js";import{B as K,L as Nt,g as Ot,a as Ct,S as lt}from"./Button-7R_E-GE9.js";import{E as we}from"./EmptyContent-CnA5ADIa.js";import{c as je,m as oe}from"./_isEqual-JedAdon-.js";import{C as Fe,I as Et}from"./Input-IeT5RECO.js";import{T as At}from"./Text-LNzV1gTO.js";import{u as re}from"./useDebounce-rX8HuXnO.js";import{D as St,a as Mt}from"./Dropdown-DUHKUE_z.js";import{M as he,a as ge}from"./Menu-CIViNpVY.js";import"./Google-DOYfq3v8.js";import{D as It}from"./DateDisplay-CGmEnYvR.js";import{g as zt}from"./_getByPath-ibQb353G.js";import{D as Rt}from"./Divider-DB8bkHxO.js";import{D as Pt}from"./DropdownTool-C8jg9dyY.js";import{E as Dt}from"./ColorPicker-0pYYboV3.js";import{g as ot}from"./_dedupe-Dul_0PfE.js";import{d as ke}from"./_debounce-BHO_GiD4.js";import{H as Lt}from"./HeadFoot-DLpVmsEq.js";import{S as Vt}from"./Section-BAtoQgEv.js";import{I as _t}from"./InputWrapper-DVhr945a.js";import{u as Wt}from"./eventHandlers-JUcml5Fv.js";var Bt=["children","className","align","actions","disabled"];function He(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function Ke(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?He(Object(t),!0).forEach(function(n){ce(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):He(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var $t=function(r){var t=r.children,n=r.className,s=r.align,a=r.actions,l=r.disabled,o=de(r,Bt),c=d.useCallback(function(m){if(m){var f=m.cloneNode(!0);f.className="",f.style.left="-200%",f.style.overflow="hidden",f.style.position="absolute",f.style.whiteSpace="nowrap",document.body.appendChild(f),m.style.setProperty("--width","".concat(f.offsetWidth,"px")),f.remove()}},[]);return i.jsxs("div",Ke(Ke({className:A(n,"fabric-actionLabel","flex overflow-hidden gap-1 items-center cursor-default select-none"),"data-disabled":l},o),{},{children:[i.jsx(Te,{ref:c,"data-inner-clickable":!0,className:A("fabric-actions","overflow-hidden flex-content",s==="end"&&"order-2"),children:a}),i.jsx("div",{className:"flex-initial truncate",children:t})]}))},Ft=["value","hideLabel","className"];function Ge(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function Je(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ge(Object(t),!0).forEach(function(n){ce(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ge(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Ht=function(r){var t=r.value,n=r.hideLabel,s=r.className,a=de(r,Ft),l=wt(function(){return t/16.67},[t],"Meter activeCount");return i.jsxs("div",Je(Je({className:A("fabric-meter",s,"flex flex-nowrap items-center gap-[2px]")},a),{},{children:[[0,1,2,3,4,5].map(function(o){return i.jsx("div",{className:A("fabric-meterBar","first-of-type:rounded-s last-of-type:rounded-e bg-tint-100 relative outline -outline-offset-1 outline-muted overflow-hidden after:absolute after:inset-0"),"data-active":l>=o,style:{"--width":"".concat(Math.min((l-o)*100,100),"%")}},o)}),!n&&i.jsx("label",{className:"text-muted",children:U.percent(t/100)})]}))},Kt=["ref","label","value","name","checked","invalid","disabled","error","width","icon","iconChecked","required","onChange"];function Xe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function Gt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Xe(Object(t),!0).forEach(function(n){ce(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Jt=function(r){var t=r.ref,n=r.label,s=r.value,a=r.name,l=r.checked,o=r.invalid,c=r.disabled,m=r.error,f=r.width,g=r.icon,O=r.iconChecked;r.required;var w=r.onChange,p=de(r,Kt),T=d.useState(!1),R=it(T,2),x=R[0],y=R[1],N=d.useDeferredValue(!!l),h=d.useMemo(function(){var P;return(P=O??g)!==null&&P!==void 0?P:C.checkboxOn},[g,O]),k=d.useMemo(function(){return g??C.checkboxOff},[g]);d.useEffect(function(){y(N)},[N]);var S=d.useCallback(function(P){var v,u;y((v=P==null?void 0:P.target.checked)!==null&&v!==void 0?v:!1),w==null||w((u=P==null?void 0:P.target.checked)!==null&&u!==void 0?u:!1)},[w,s]);return i.jsxs("label",{className:A(o?"ring-danger-500":"ring-primary-500",c?"opacity-50 cursor-not-allowed":" opacity-85 hover:opacity-100 cursor-pointer","inline-flex gap-1 py-1 items-center relative rounded ring-offset-2 has-[:focus-visible]:ring-1"),style:{width:f},children:[i.jsx("input",Gt({className:A("appearance-none absolute opacity-0 inset-0 bg-transparent border-none outline-none ring-0"),"aria-invalid":o,"aria-disabled":c,disabled:c,"aria-errormessage":m,type:"checkbox",ref:t,size:1,tabIndex:0,name:a,autoComplete:"off",checked:x,onChange:S},p)),i.jsx(W,{className:A("p-0.5",x&&g&&!O&&"bg-primary-500 text-white!"),size:"1.25em",color:o?"danger":"primary",icon:x?h:k}),i.jsx(Dt,{invalid:o,error:m}),n&&i.jsx("span",{className:"flex-initial leading-tight truncate",children:n})]})},Xt=["ref","value","name","invalid","readOnly","disabled","required","searching","placeholder","autoFocus","hideHandle","allowClear","searchOnChange","onBlur","onFocus","onSearch","onChange","onEnterPressed"];function Ue(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function Ye(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ue(Object(t),!0).forEach(function(n){ce(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ue(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var dt=function(r){var t=r.ref,n=r.value,s=r.name,a=r.invalid,l=r.readOnly,o=r.disabled,c=r.required,m=r.searching,f=r.placeholder,g=r.autoFocus,O=r.hideHandle,w=r.allowClear,p=w===void 0?!0:w,T=r.searchOnChange,R=T===void 0?!1:T,x=r.onBlur,y=r.onFocus,N=r.onSearch,h=r.onChange;r.onEnterPressed;var k=de(r,Xt),S=d.useState(""),P=it(S,2),v=P[0],u=P[1],j=d.useDeferredValue(n),M=d.useRef(""),L=re(function(){return N==null?void 0:N(M.current)},[N],250),B=Wt(L);d.useEffect(function(){u(j??"")},[j]);var $=d.useCallback(function(I){var b=I==null?void 0:I.target.value;M.current=b??"",u(b??""),h==null||h(b??null),(!I||R)&&L()},[h,R,L]);return i.jsx(_t,Ye(Ye({showClear:!!v&&!o&&!l,onClear:$,allowClear:p,invalid:a,readOnly:l,disabled:o,required:c,actionButton:i.jsxs(d.Fragment,{children:[m&&i.jsx(W,{className:"p-2",icon:C.spinner,animate:"spin"}),!m&&!O&&i.jsx(K,{tabIndex:-1,variant:"link","aria-label":"search",disabled:!v,icon:C.search,onClick:L})]})},k),{},{children:i.jsx("input",{className:"appearance-none bg-transparent py-1 px-2 flex-1 border-none outline-none ring-0 peer","aria-invalid":a,"aria-disabled":o,"aria-readonly":l,placeholder:f,disabled:o,readOnly:l,size:1,"data-testid":s,name:s,type:"search",ref:t,autoComplete:"off",autoFocus:g,value:v,onBlur:x,onFocus:y,onChange:$,onKeyDown:B})}))};const Ut={noRecords:"لا تسجيلات"},Yt={noItems:"لا توجد عناصر",error:"خطأ في تحميل العناصر",loading:"تحميل العناصر…"},Qt={empty:"لا توجد سجلات متاحة"},Zt={empty:"لا توجد خصائص بيانات",true:"نعم",false:"رقم"},en={empty:"لا توجد عناصر قائمة"},tn={empty:"لا توجد رسوم بيانية"},nn={find:"تجد…",copy:"قيمة النسخ",filter:"منقي…",showShortcuts:"اختصارات لوحة المفاتيح…",collapseAll:"انهيار جميع",expandAll:"توسيع الكل",checkAll:"تحقق من الكل",uncheckAll:"الغاءالكل",addFilter:"أضف عامل تصفية",addFilterNot:"إضافة لا تصفية"},rn={label:Ut,tree:Yt,datagrid:Qt,json:Zt,checkList:en,histogram:tn,action:nn},sn={noRecords:"No Records"},an={noItems:"No items",error:"Error loading items",loading:"Loading items..."},ln={empty:"No records available"},on={empty:"No data properties",true:"Yes",false:"No"},dn={empty:"No list items"},cn={empty:"No histograms"},un={find:"Find...",copy:"Copy Value",filter:"Filter...",showShortcuts:"Keyboard shortcuts...",collapseAll:"Collapse All",expandAll:"Expand All",checkAll:"Check All",uncheckAll:"Uncheck All",addFilter:"Add Filter",addFilterNot:"Add not Filter"},mn={label:sn,tree:an,datagrid:ln,json:on,checkList:dn,histogram:cn,action:un};jt("data",{en:mn,ar:rn});const pn="M20.84 22.73L11.11 13H3V11H9.11L6.11 8H3V6H4.11L1.11 3L2.39 1.73L22.11 21.46L20.84 22.73M15 11H14.2L15 11.8V11M21 8V6H9.2L11.2 8H21M3 18H9V16H3V18Z",fn=({items:e=[],total:r,color:t="primary-500",sortBy:n="count",emptyTitle:s,emptyMessage:a,onClick:l,...o})=>{const{t:c}=ne("data"),m=d.useMemo(()=>r||Math.max(...e.map(g=>g.count)),[r,e]),f=d.useMemo(()=>e.sort(je(n==="label"?"asc":"desc",n)),[e,n]);return i.jsxs("div",{className:"fabric-histogram from-0% to-100%",...o,style:{"--color":vt(t)?t:`var(--color-${t})`},children:[f.length===0&&i.jsx(we,{icon:i.jsx(W,{icon:pn,size:"2.5rem"}),title:s,message:a??c("histogram.empty")}),f==null?void 0:f.map(g=>i.jsxs("div",{role:"none","data-disabled":g.count===0||g.disabled,className:A("relative cursor-pointer flex flex-nowrap items-center select-none overflow-hidden min-h-6 my-px","fabric-histoLabel",((g.total??g.count)===0||g.disabled)&&"pointer-events-none"),"data-testid":g.id,onClick:O=>[l==null?void 0:l(g.id),O.stopPropagation()],children:[i.jsx("div",{className:A("absolute z-0 inset-0 opacity-50 min-w-2 ltr:bg-gradient-to-r rtl:bg-gradient-to-l","fabric-histoBar"),style:{width:`${Math.min(g.count/m,1)*100}%`}}),i.jsx($t,{className:"flex-1 truncate z-1 text-sm cursor-pointer font-medium",actions:[i.jsx(K,{color:"danger",size:"sm",stopPropagation:!0,icon:C.funnelMinus,"aria-label":"Filter Negative",onClick:()=>l==null?void 0:l(g.id,!0)},"negative"),i.jsx(K,{color:"primary",size:"sm",stopPropagation:!0,icon:C.funnelPlus,"aria-label":"Filter",onClick:()=>l==null?void 0:l(g.id)},"positive")],children:g.label}),i.jsx("span",{className:A("z-1 rounded-full text-xs font-medium px-2 py-1 leading-none","fabric-histoBadge"),children:U.number(g.count)})]},g.id))]})};fn.__docgenInfo={description:"",methods:[],displayName:"Histogram",props:{items:{required:!1,tsType:{name:"Array",elements:[{name:"HistogramItem"}],raw:"HistogramItem[]"},description:"histogram items list",defaultValue:{value:"[]",computed:!1}},total:{required:!1,tsType:{name:"number"},description:"total count"},color:{required:!1,tsType:{name:"union",raw:"ColorType | PaletteType",elements:[{name:"ColorType"},{name:"PaletteType"}]},description:"histogram bar color",defaultValue:{value:'"primary-500"',computed:!1}},sortBy:{required:!1,tsType:{name:"union",raw:'"label" | "count"',elements:[{name:"literal",value:'"label"'},{name:"literal",value:'"count"'}]},description:"sorted list",defaultValue:{value:'"count"',computed:!1}},emptyTitle:{required:!1,tsType:{name:"union",raw:"string | JSX.Element",elements:[{name:"string"},{name:"JSX.Element"}]},description:"title when histo list is empty"},emptyMessage:{required:!1,tsType:{name:"union",raw:"string | JSX.Element",elements:[{name:"string"},{name:"JSX.Element"}]},description:"message when histo list is empty"},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string, negative?: true) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"literal",value:"true"},name:"negative"}],return:{name:"void"}}},description:"handle histo click"}},composes:["TestProps"]};const ye=(e,r=[],t="")=>{const n=[];return Object.entries(e).forEach(([s,a])=>{if(at(a)&&pe(a[0]))n.push(...ye(a,[...r,s],s));else{const l={field:t?`${t}.${s}`:s,value:a,path:[...r,s].join(".")};pe(a)&&!ee(a)&&!("_score_"in a)&&(l.children=ye(a,[...r,s])),n.push(l)}}),n.flat(99)},ct=({value:e,path:r,field:t,children:n,copy:s,filters:a,labeler:l,formatter:o,propertyScheme:c,showPropertyTree:m,onFilter:f,inline:g,labelWidth:O="30%",level:w=0})=>{const{t:p}=ne("data"),[T,R]=d.useState(!0),x=d.useMemo(()=>!!n,[n]),y=d.useMemo(()=>(e==null?void 0:e._label_)??e??"",[e]),N=d.useMemo(()=>{var u,j,M,L,B,$,I;if(n)return null;if($e(e))return i.jsx("span",{className:"text-muted",children:"null"});if(ee(e))return i.jsx("span",{className:"text-muted",children:"empty"});let v=y;if(o){const b=o==null?void 0:o(r,y);$e(b)||(v=b)}return at(y)&&(v=`[${y.join(", ")}]`),(u=c==null?void 0:c.date)!=null&&u.includes(r),(j=c==null?void 0:c.time)!=null&&j.includes(r)&&(v=U.date(y,"pp")),(M=c==null?void 0:c.number)!=null&&M.phone(r)&&(v=U.phone(y)),(L=c==null?void 0:c.bytes)!=null&&L.includes(r)&&(v=U.bytes(y)),(B=c==null?void 0:c.percent)!=null&&B.includes(r)&&(v=U.percent(y)),($=c==null?void 0:c.number)!=null&&$.includes(r)&&(v=U.number(y)),((I=c==null?void 0:c.boolean)!=null&&I.includes(r)||xt(y))&&(v=p(y?"json.true":"json.false")),(v==null?void 0:v.length)>128?v=i.jsx(At,{clamp:3,children:v}):v=i.jsx("div",{className:"break-words",children:v}),i.jsxs(d.Fragment,{children:[v,pe(e)&&e._score_>0&&i.jsx(Ht,{className:"text-xs",value:e._score_})]})},[e,r,o,c,y]),h=d.useMemo(()=>r.replace(/\.\d*\./,"."),[r]),k=d.useMemo(()=>{var v,u;return!ee(e)&&(fe(s)||((v=s==null?void 0:s.includes)==null?void 0:v.call(s,r))||((u=s==null?void 0:s.includes)==null?void 0:u.call(s,h)))},[s,e,r,h]),S=d.useMemo(()=>{var v,u;return fe(a)||((v=a==null?void 0:a.includes)==null?void 0:v.call(a,r))||((u=a==null?void 0:a.includes)==null?void 0:u.call(a,h))},[a,r,h]),P=d.useMemo(()=>i.jsxs("div",{className:A("text-dimmed text-sm px-2 flex-1 group",g?"truncate":"break-words"),children:[!x&&S&&i.jsxs("div",{className:"hidden pe-1 group-hover:inline-block",children:[i.jsx(K,{color:"danger",size:"xs",variant:"link",icon:C.funnelMinus,"aria-label":"Filter Negative",onClick:()=>f==null?void 0:f(h,y,!0)},"negative"),i.jsx(K,{color:"primary",size:"xs",variant:"link",icon:C.funnelPlus,"aria-label":"Filter",onClick:()=>f==null?void 0:f(h,y)},"positive")]}),(l==null?void 0:l(r))??t]}),[t,l,h,y,x,S]);return i.jsxs(d.Fragment,{children:[m&&i.jsxs("div",{className:A("py-2",g&&"flex flex-nowrap items-center"),style:{paddingInlineStart:w*8},children:[i.jsxs("div",{role:"none",className:A("flex overflow-hidden items-center",g&&"flex-content"),style:{flexBasis:O},onClick:()=>x&&R(!T),children:[x&&i.jsx(W,{rtlFlip:!0,icon:T?C.chevronDown:C.chevronRight}),P]}),N&&i.jsxs("div",{className:A("px-2 flex flex-nowrap overflow-hidden",g&&"flex-1"),children:[k&&i.jsx(Fe,{size:"xs",text:y}),i.jsx("div",{className:"flex-1",children:N})]})]}),!m&&!n&&i.jsxs("div",{className:A("py-2",g&&"flex flex-nowrap items-center"),children:[i.jsx("div",{role:"none",className:A("flex overflow-hidden items-center",g&&"flex-content"),style:{flexBasis:O},children:P}),i.jsxs("div",{className:A("px-2 flex flex-nowrap overflow-hidden",g&&"flex-1"),children:[k&&i.jsx(Fe,{size:"xs",text:e}),i.jsx("div",{className:"flex-1",children:N})]})]}),T&&(n==null?void 0:n.map(v=>i.jsx(ct,{...v,level:w+1,copy:s,inline:g,showPropertyTree:m,propertyScheme:c,filters:a,labelWidth:O,formatter:o,labeler:l,onFilter:f},v.path)))]})},hn=({className:e,json:r,copy:t,propertyScheme:n,filters:s,inline:a,labelWidth:l,formatter:o,labeler:c,onFilter:m,emptyMessage:f,showPropertyTree:g=!0,...O})=>{const{t:w}=ne("data"),p=d.useMemo(()=>ye(r),[r]);return i.jsx("div",{...O,className:A(e,"bg-alternate"),children:ee(r)?i.jsx(we,{size:"sm",message:f??w("json.empty")}):p.map(T=>i.jsx(ct,{...T,copy:t,inline:a,showPropertyTree:g,propertyScheme:n,filters:s,labelWidth:l,formatter:o,labeler:c,onFilter:m},T.path))})};hn.__docgenInfo={description:"",methods:[],displayName:"JsonViewer",props:{json:{required:!0,tsType:{name:"T"},description:"json value"},inline:{required:!1,tsType:{name:"boolean"},description:"display inline"},labelWidth:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"label fixed width when using inline"},showPropertyTree:{required:!1,tsType:{name:"boolean"},description:`display object properties as tree
@default true`,defaultValue:{value:"true",computed:!1}},propertyScheme:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  boolean?: string[];
  date?: string[];
  time?: string[];
  number?: string[];
  bytes?: string[];
  percent?: string[];
  phone?: string[];
}`,signature:{properties:[{key:"boolean",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"date",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"time",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"number",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"bytes",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"percent",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"phone",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}}]}},description:"properties to format as dates\n(default format applied to property name containing `date` | `time`)"},copy:{required:!1,tsType:{name:"union",raw:"true | string[]",elements:[{name:"literal",value:"true"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:"enable value copy"},filters:{required:!1,tsType:{name:"union",raw:"true | string[]",elements:[{name:"literal",value:"true"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:"enable filter callbacks"},emptyMessage:{required:!1,tsType:{name:"string"},description:"message for empty json"},onFilter:{required:!1,tsType:{name:"signature",type:"function",raw:"(path: string, value: AnyObject, negate: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"path"},{type:{name:"AnyObject"},name:"value"},{type:{name:"boolean"},name:"negate"}],return:{name:"void"}}},description:"on filter callback"},labeler:{required:!1,tsType:{name:"signature",type:"function",raw:"(path: string) => string | undefined",signature:{arguments:[{type:{name:"string"},name:"path"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:"render function for custom label display"},formatter:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  path?: string,
  value?: AnyObject,
) => string | JSX.Element | undefined`,signature:{arguments:[{type:{name:"string"},name:"path"},{type:{name:"AnyObject"},name:"value"}],return:{name:"union",raw:"string | JSX.Element | undefined",elements:[{name:"string"},{name:"JSX.Element"},{name:"undefined"}]}}},description:"render function for custom value display"}},composes:["CssProp"]};const ut=d.memo(({page:e,ranges:r,totalPages:t,minimal:n,onPageChange:s})=>{const[a,l,o]=r,c=d.useMemo(()=>i.jsxs(d.Fragment,{children:[a==null?void 0:a.map(m=>i.jsx("button",{onClick:()=>s(m),className:A("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",e===m&&"bg-primary-500 text-white pointer-events-none"),children:m+1},m)),l&&i.jsx("span",{className:"leading-none inline-block w-8 text-center text-dimmed",children:"..."}),l==null?void 0:l.map(m=>i.jsx("button",{onClick:()=>s(m),className:A("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",e===m&&"bg-primary-500 text-white pointer-events-none"),children:m+1},m)),o&&i.jsx("span",{className:"leading-none inline-block w-8 text-center text-dimmed",children:"..."}),o==null?void 0:o.map(m=>i.jsx("button",{onClick:()=>s(m),className:A("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",e===m&&"bg-primary-500 text-white pointer-events-none"),children:m+1},m))]}),[a,l,o,e]);return i.jsxs("div",{className:"inline-flex items-center",children:[i.jsx("button",{onClick:()=>s(0),className:A("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",e===0&&"pointer-events-none text-tint-300"),children:i.jsx(W,{icon:C.chevronsLeft,rtlFlip:!0})}),i.jsx("button",{onClick:()=>s(e-1),className:A("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",e===0&&"pointer-events-none text-tint-300"),children:i.jsx(W,{icon:C.chevronLeft,rtlFlip:!0})}),!n&&c,n&&i.jsxs("label",{className:"leading-none inline-block px-1 text-center text-sm select-none fixed-numbers",children:[e+1,"/",t]}),i.jsx("button",{onClick:()=>s(e+1),className:A("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",e+1>=t&&"pointer-events-none text-tint-300"),children:i.jsx(W,{icon:C.chevronRight,rtlFlip:!0})}),i.jsx("button",{onClick:()=>s(t-1),className:A("leading-none text-sm hover:bg-primary-200 w-8 h-6 rounded-full",e+1>=t&&"pointer-events-none text-tint-300"),children:i.jsx(W,{icon:C.chevronsRight,rtlFlip:!0})})]})});ut.displayName="Pagination";ut.__docgenInfo={description:"",methods:[],displayName:"Pagination",props:{page:{required:!0,tsType:{name:"number"},description:"currrent page number"},totalPages:{required:!0,tsType:{name:"number"},description:"total page count"},ranges:{required:!0,tsType:{name:"Array",elements:[{name:"Array",elements:[{name:"number"}],raw:"number[]"}],raw:"number[][]"},description:"pagination sections [start, mid, end]"},minimal:{required:!1,tsType:{name:"boolean"},description:"minimal view"},onPageChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(page: number) => void",signature:{arguments:[{type:{name:"number"},name:"page"}],return:{name:"void"}}},description:"page change handler"}}};const mt=({columns:e,onClick:r})=>i.jsx("div",{className:"group font-medium w-6 flex flex-nowrap text-start items-center",children:i.jsxs(St,{placement:"bottom-end",children:[i.jsx(W,{icon:C.insert,className:"p-1 rounded-t rounded-b-none hover:outline"}),i.jsx(he,{className:"text-sm",onClick:r,children:e.map(t=>i.jsx(ge,{id:String(t.id),"data-dropdown-dismiss":"false",label:`${t.label??String(t.id)}`,icon:t.hidden?"":C.tick},String(t.id)))})]})});mt.__docgenInfo={description:"",methods:[],displayName:"AddColumn",props:{columns:{required:!0,tsType:{name:"Array",elements:[{name:"TableColumn"}],raw:"TableColumn[]"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""}}};const gn=(e,r,t)=>{var c;const n=r.firstElementChild,s=getComputedStyle(e).direction==="rtl",a=m=>{const f=e.getBoundingClientRect(),g=s?f.left-m.clientX:m.clientX-f.right;n.style.width=`${e.offsetWidth+g}px`},l=()=>{t(n.offsetWidth),r.style.display="none",document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l)},o=e.getBoundingClientRect();if(e.parentElement!=null){const m=(c=e.closest("[data-ref='tableScroller']"))==null?void 0:c.getBoundingClientRect();s?(n.style.left="unset",n.style.right=`${m.width-o.right}px`):(n.style.right="unset",n.style.left=`${o.left}px`)}n.style.width=`${e.offsetWidth}px`,n.style.minWidth=e.style.minWidth||"48px",n.style.maxWidth=e.style.maxWidth||"75vw",r.style.display="block",document.addEventListener("mousemove",a),document.addEventListener("mouseup",l)},pt=d.createContext({}),ft=({children:e})=>{const r=d.useRef(null),[t,n]=d.useState(new Map),s=d.useCallback(a=>{a&&r.current!=null&&gn(a,r.current,l=>{n(new Map(t.set(a.dataset.id??"",l)))})},[t]);return i.jsxs(pt.Provider,{value:{startResize:s,widths:t},children:[e,i.jsx("div",{className:"absolute inset-0 hidden z-20 cursor-col-resize",ref:r,children:i.jsx("div",{className:"absolute inset-y-0 bg-muted opacity-50 border-primary border-e-2"})})]})},qe=()=>d.useContext(pt);ft.__docgenInfo={description:"",methods:[],displayName:"TableProvider"};const Ne="3rem",Oe="64rem",Ce="12rem",se=({column:e,item:r,index:t})=>{const{widths:n}=qe(),s=d.useMemo(()=>n.get(e.id.toString())??e.width,[n,e]),a=d.useMemo(()=>{const l=zt(r,e.id.toString());return e.renderer!=null?e.renderer(l,r,t):e.dataType==="boolean"?(e.valueMap??{true:"Yes",false:"no"})[`${fe(l)?"true":"false"}`]:e.valueMap!=null&&e.dataType==="string"&&l in e.valueMap?e.valueMap[l]:["date","time","datetime"].includes(e.dataType??"")?i.jsx(It,{date:l,format:e.format}):e.dataType==="number"?U.number(l,e.format):l??""},[r,e]);return i.jsx("div",{className:"overflow-hidden bg-inherit start-0 border-e group/table-col",style:{width:s??Ce,minWidth:e.minWidth??Ne,maxWidth:e.maxWidth??Oe},children:i.jsx("div",{className:A("px-2 py-1",e.className,e.truncate&&"truncate",e.align==="center"&&"text-center",e.align==="end"&&"text-end"),children:a})})};se.__docgenInfo={description:"",methods:[],displayName:"BodyCell",props:{column:{required:!0,tsType:{name:"TableColumn"},description:""},item:{required:!0,tsType:{name:"KeyValue"},description:""},index:{required:!0,tsType:{name:"number"},description:""}}};const Ee=({state:e,onClick:r})=>i.jsx("div",{className:"group font-medium border-e w-6 flex flex-nowrap text-start py-1",children:i.jsx(W,{icon:e===2?C.checkboxInt:e===1?C.checkboxOn:C.checkboxOff,className:"p-1 text-tint-700 hover:text-primary-600",onClick:t=>[r==null?void 0:r(),t.stopPropagation()]})});Ee.__docgenInfo={description:"",methods:[],displayName:"CheckboxCell",props:{state:{required:!0,tsType:{name:"union",raw:"0 | 1 | 2",elements:[{name:"literal",value:"0"},{name:"literal",value:"1"},{name:"literal",value:"2"}]},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ht=({rowKey:e,index:r,data:t,keyProperty:n,measureElement:s,state:a,hideableColumns:l,wrapperStart:o,wrapperEnd:c,onRowClick:m,checkableRows:f,checked:g,toggleChecked:O,canExpand:w,expanded:p,toggleExpand:T,expandRow:R})=>{var x,y,N;return i.jsxs("div",{ref:s,"data-index":r,className:r%2?"bg-even":"bg-odd",children:[i.jsxs("div",{role:"none","data-row":r,className:A("flex flex-nowrap datatable-row data-[hilight]:outline-1 -outline-offset-1 outline-primary-500 group/table-row",m&&"hover:bg-primary-50 active:bg-primary-100",r%2?"bg-even":"bg-odd"),onClick:()=>f&&n&&!m?O(t[n]):m==null?void 0:m(t),children:[i.jsxs("div",{className:o,children:[!!w&&i.jsx("div",{className:A("group font-medium w-6 flex flex-nowrap text-start py-1",!w(t)&&"pointer-events-none opacity-35"),children:i.jsx(W,{className:"p-1 text-tint-700 hover:text-primary-600",icon:p?C.collapse:C.expand,onClick:h=>[n&&T(t[n]),h.stopPropagation()]})}),f&&n&&i.jsx(Ee,{onClick:()=>O(t[n]),state:g}),(x=a.start)==null?void 0:x.map((h,k)=>i.jsx(se,{column:h,item:t,index:k},`${String(e)}:${k}`))]}),(y=a.cols)==null?void 0:y.map((h,k)=>i.jsx(se,{column:h,item:t,index:k},`${String(e)}:${k}`)),i.jsxs("div",{className:c,children:[(N=a.end)==null?void 0:N.map((h,k)=>i.jsx(se,{column:h,item:t,index:k},`${String(e)}:${k}`)),l&&i.jsx("div",{className:"w-6"})]})]}),p&&R(t)]})};ht.__docgenInfo={description:"",methods:[],displayName:"BodyRow",props:{rowKey:{required:!0,tsType:{name:"Key"},description:""},index:{required:!0,tsType:{name:"number"},description:""},data:{required:!0,tsType:{name:"KeyValue"},description:""},keyProperty:{required:!1,tsType:{name:"Key"},description:""},measureElement:{required:!0,tsType:{name:"AnyObject"},description:""},state:{required:!0,tsType:{name:"KeyValue",elements:[{name:"Array",elements:[{name:"TableColumn"}],raw:"TableColumn[]"}],raw:"KeyValue<TableColumn[]>"},description:""},hideableColumns:{required:!1,tsType:{name:"boolean"},description:""},wrapperStart:{required:!0,tsType:{name:"string"},description:""},wrapperEnd:{required:!0,tsType:{name:"string"},description:""},checkableRows:{required:!1,tsType:{name:"boolean"},description:""},checked:{required:!0,tsType:{name:"union",raw:"0 | 1",elements:[{name:"literal",value:"0"},{name:"literal",value:"1"}]},description:""},onRowClick:{required:!1,tsType:{name:"AnyObject"},description:""},canExpand:{required:!1,tsType:{name:"AnyObject"},description:""},expandRow:{required:!1,tsType:{name:"AnyObject"},description:""},expanded:{required:!0,tsType:{name:"boolean"},description:""},toggleExpand:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Key) => void",signature:{arguments:[{type:{name:"Key"},name:"key"}],return:{name:"void"}}},description:""},toggleChecked:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Key) => void",signature:{arguments:[{type:{name:"Key"},name:"key"}],return:{name:"void"}}},description:""}}};const ie=({id:e,width:r,maxWidth:t,minWidth:n})=>{const{widths:s}=qe(),a=d.useMemo(()=>s.get(e.toString())??r,[s,e,r]);return i.jsx("div",{className:"overflow-hidden border-e",style:{width:a??Ce,minWidth:n??Ne,maxWidth:t??Oe}},`blank:${e.toString()}`)};ie.__docgenInfo={description:"",methods:[],displayName:"EmptyCell",props:{id:{required:!0,tsType:{name:"union",raw:"keyof T | string",elements:[{name:"T"},{name:"string"}]},description:""},label:{required:!1,tsType:{name:"string"},description:""},tooltip:{required:!1,tsType:{name:"string"},description:""},actions:{required:!1,tsType:{name:"Array",elements:[{name:"ReactElement"}],raw:"ReactElement[]"},description:""},align:{required:!1,tsType:{name:"union",raw:'"start" | "center" | "end"',elements:[{name:"literal",value:'"start"'},{name:"literal",value:'"center"'},{name:"literal",value:'"end"'}]},description:""},locked:{required:!1,tsType:{name:"union",raw:'"start" | "end"',elements:[{name:"literal",value:'"start"'},{name:"literal",value:'"end"'}]},description:""},hidden:{required:!1,tsType:{name:"boolean"},description:""},truncate:{required:!1,tsType:{name:"boolean"},description:""},hideable:{required:!1,tsType:{name:"boolean"},description:""},resizable:{required:!1,tsType:{name:"boolean"},description:""},sortable:{required:!1,tsType:{name:"boolean"},description:""},filterable:{required:!1,tsType:{name:"boolean"},description:""},filter:{required:!1,tsType:{name:"AnyObject"},description:""},filterOptions:{required:!1,tsType:{name:"Array",elements:[{name:"AnyObject"}],raw:"AnyObject[]"},description:""},width:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},minWidth:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},maxWidth:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},dataType:{required:!1,tsType:{name:"union",raw:`| "string"
| "number"
| "boolean"
| "datetime"
| "date"
| "time"
| "unknown"`,elements:[{name:"literal",value:'"string"'},{name:"literal",value:'"number"'},{name:"literal",value:'"boolean"'},{name:"literal",value:'"datetime"'},{name:"literal",value:'"date"'},{name:"literal",value:'"time"'},{name:"literal",value:'"unknown"'}]},description:""},format:{required:!1,tsType:{name:"string"},description:""},valueMap:{required:!1,tsType:{name:"KeyValue"},description:""},renderer:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: AnyObject, data: T, index: number) => Elements<AnyObject>",signature:{arguments:[{type:{name:"AnyObject"},name:"value"},{type:{name:"T"},name:"data"},{type:{name:"number"},name:"index"}],return:{name:"Elements",elements:[{name:"AnyObject"}],raw:"Elements<AnyObject>"}}},description:""}},composes:["CssProp","IconProps","TestProps"]};const yn=(e,r="",t)=>{const n=[];return e.forEach(s=>{if(t)return(t==null?void 0:t(s,r))&&n.push(s);if(r&&le(r)){if(oe(s.label??s.toString(),r))return n.push(s)}else return n.push(s)}),n},bn=(e,r)=>{const[t,n]=d.useState(),s=d.useDeferredValue(e??[]),[a,l]=d.useState([]),[o,c]=d.useTransition(),m=d.useCallback((f,g)=>c(()=>l(yn(f,g,r))),[]);return d.useEffect(()=>{t?m(s,t):l(e)},[t,s]),{onSearch:n,query:t,filteredList:a,isSearching:o}},vn=({list:e=te,filter:r,onFilter:t})=>{const[n,s]=d.useState(new Set(r)),{filteredList:a,query:l,onSearch:o}=bn(e,(c,m)=>oe(c.id??c,m));return i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{children:i.jsx(dt,{autoFocus:!0,value:l,onSearch:o,searchOnChange:!0})}),i.jsxs("div",{className:"flex-1 overflow-auto scroll-thin",children:[a.map((c,m)=>i.jsx("div",{className:"flex gap-x-1 text-xs items-center",children:i.jsx(Jt,{checked:n.has(c.id??c),onChange:f=>{const g=new Set(Array.from(n.values()));f?g.add(c.id??c):g.delete(c.id??c),s(g)},label:i.jsx("span",{className:"truncate",children:c.label??c})})},m)),a.length===0&&i.jsx("span",{className:"text-muted text-xs",children:"No items found"})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(Mt,{children:i.jsx(K,{size:"xs",onClick:()=>t==null?void 0:t(Array.from(n)),children:"Apply"})})})]})},be=({type:e,list:r,filter:t,onFilter:n})=>i.jsxs("div",{className:"flex flex-col min-w-[16rem]",children:[r&&i.jsx(vn,{list:r,filter:t,onFilter:n}),!r&&e==="string"&&i.jsx(Et,{autoFocus:!0,allowClear:!0,value:t,onEnterPressed:s=>n(s.target.value??"")})]});be.__docgenInfo={description:"",methods:[],displayName:"ColumnFilters",props:{type:{required:!0,tsType:{name:'TableColumn["dataType"]',raw:'TableColumn["dataType"]'},description:""},onFilter:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: AnyObject) => void",signature:{arguments:[{type:{name:"AnyObject"},name:"value"}],return:{name:"void"}}},description:""},list:{required:!1,tsType:{name:"Array",elements:[{name:"AnyObject"}],raw:"AnyObject[]"},description:""},filter:{required:!0,tsType:{name:"AnyObject"},description:""}}};const ae=({id:e,dataType:r,label:t,icon:n,iconBg:s,iconColor:a,rtlFlip:l,actions:o,locked:c,filter:m,filterable:f,filterOptions:g,tooltip:O,sortable:w,resizable:p,width:T,maxWidth:R,minWidth:x,sort:y,onSort:N,onFilter:h})=>{const{startResize:k,widths:S}=qe(),P=d.useMemo(()=>S.get(e.toString())??T,[S,T,e]),v=d.useCallback(j=>{w&&(N==null||N({id:e.toString(),order:j??((y==null?void 0:y.id)===e&&y.order==="asc"?"desc":"asc")}))},[N,y,w]),u=d.useMemo(()=>{let j=[];return f&&(r??g)&&j.push(i.jsx(he,{label:"Filter",icon:m?C.tick:"",trigger:"click",children:i.jsx(be,{type:r,list:g,filter:m,onFilter:M=>h==null?void 0:h(e,M)})},"filters")),w&&j.push(i.jsx(ge,{label:"Sort ascending",icon:C.sortAsc,onClick:()=>v("asc")},"sort-asc"),i.jsx(ge,{label:"Sort descending",icon:C.sortDesc,onClick:()=>v("desc")},"sort-desc")),o&&(j.push(i.jsx(Rt,{},"div")),j.push(...o)),j.length===1&&(j=[i.jsx(be,{type:r,list:g,filter:m,onFilter:M=>h==null?void 0:h(e,M)},"filters")]),j},[w,o,h,v]);return i.jsxs("div",{role:"none","data-id":e,onClick:()=>v(),className:"group/tool font-medium border-e flex flex-nowrap text-start items-center table-header-cell",style:{width:P??Ce,minWidth:x??Ne,maxWidth:R??Oe},children:[i.jsx(qt,{content:O??t,disabled:!(O??t),children:i.jsxs("div",{className:"flex-initial px-2 py-1 text-sm truncate sticky start-0",children:[n&&i.jsx(W,{icon:n,bg:s,color:a,rtlFlip:l}),i.jsx("span",{children:t??" "})]})}),w&&i.jsxs("div",{className:"text-sm text-tint-300",children:[(y==null?void 0:y.id)===e&&(y==null?void 0:y.order)==="desc"&&i.jsx("span",{children:"▼"}),(y==null?void 0:y.id)===e&&(y==null?void 0:y.order)==="asc"&&i.jsx("span",{children:"▲"})]}),i.jsx("div",{className:"flex-1"}),u.length>0&&i.jsx(Pt,{groupHover:!0,placement:"bottom-end",children:i.jsx(he,{className:"text-sm",children:u})}),f&&!ee(m)&&i.jsx(K,{size:"sm",variant:"link","aria-label":"clear filter",stopPropagation:!0,icon:C.funnelRemove,onClick:()=>h==null?void 0:h(e)}),p&&i.jsx("div",{role:"none",className:"cursor-col-resize border-e bg-transparent border-tint-200 w-[5px] self-stretch",onMouseDown:j=>j.currentTarget.parentElement&&k(j.currentTarget.parentElement)})]})};ae.__docgenInfo={description:"",methods:[],displayName:"HeaderCell",props:{id:{required:!0,tsType:{name:"union",raw:"keyof T | string",elements:[{name:"T"},{name:"string"}]},description:""},label:{required:!1,tsType:{name:"string"},description:""},tooltip:{required:!1,tsType:{name:"string"},description:""},actions:{required:!1,tsType:{name:"Array",elements:[{name:"ReactElement"}],raw:"ReactElement[]"},description:""},align:{required:!1,tsType:{name:"union",raw:'"start" | "center" | "end"',elements:[{name:"literal",value:'"start"'},{name:"literal",value:'"center"'},{name:"literal",value:'"end"'}]},description:""},locked:{required:!1,tsType:{name:"union",raw:'"start" | "end"',elements:[{name:"literal",value:'"start"'},{name:"literal",value:'"end"'}]},description:""},hidden:{required:!1,tsType:{name:"boolean"},description:""},truncate:{required:!1,tsType:{name:"boolean"},description:""},hideable:{required:!1,tsType:{name:"boolean"},description:""},resizable:{required:!1,tsType:{name:"boolean"},description:""},sortable:{required:!1,tsType:{name:"boolean"},description:""},filterable:{required:!1,tsType:{name:"boolean"},description:""},filter:{required:!1,tsType:{name:"AnyObject"},description:""},filterOptions:{required:!1,tsType:{name:"Array",elements:[{name:"AnyObject"}],raw:"AnyObject[]"},description:""},width:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},minWidth:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},maxWidth:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},dataType:{required:!1,tsType:{name:"union",raw:`| "string"
| "number"
| "boolean"
| "datetime"
| "date"
| "time"
| "unknown"`,elements:[{name:"literal",value:'"string"'},{name:"literal",value:'"number"'},{name:"literal",value:'"boolean"'},{name:"literal",value:'"datetime"'},{name:"literal",value:'"date"'},{name:"literal",value:'"time"'},{name:"literal",value:'"unknown"'}]},description:""},format:{required:!1,tsType:{name:"string"},description:""},valueMap:{required:!1,tsType:{name:"KeyValue"},description:""},renderer:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: AnyObject, data: T, index: number) => Elements<AnyObject>",signature:{arguments:[{type:{name:"AnyObject"},name:"value"},{type:{name:"T"},name:"data"},{type:{name:"number"},name:"index"}],return:{name:"Elements",elements:[{name:"AnyObject"}],raw:"Elements<AnyObject>"}}},description:""}},composes:["CssProp","IconProps","TestProps"]};const xn=e=>{const[r,t]=d.useReducer((n,s)=>{if(s.type==="columns"&&(n.columns=s.columns),s.type==="hide"){const c=n.columns.find(m=>m.id===s.id);c&&n.columns.splice(n.columns.indexOf(c),1,{...c,hidden:c.hidden!==!0})}const{start:a=[],end:l=[],cols:o=[]}=ot(n.columns.filter(c=>c.hidden!==!0),"locked","cols");return{...n,start:a,end:l,cols:o}},{columns:[],start:[],end:[],cols:[]});return d.useEffect(()=>{t({type:"columns",columns:e})},[e]),{state:r,onHide:n=>t({type:"hide",id:n})}};function Z(e,r,t){let n=t.initialDeps??[],s;function a(){var l,o,c,m;let f;t.key&&((l=t.debug)!=null&&l.call(t))&&(f=Date.now());const g=e();if(!(g.length!==n.length||g.some((p,T)=>n[T]!==p)))return s;n=g;let w;if(t.key&&((o=t.debug)!=null&&o.call(t))&&(w=Date.now()),s=r(...g),t.key&&((c=t.debug)!=null&&c.call(t))){const p=Math.round((Date.now()-f)*100)/100,T=Math.round((Date.now()-w)*100)/100,R=T/16,x=(y,N)=>{for(y=String(y);y.length<N;)y=" "+y;return y};console.info(`%c⏱ ${x(T,5)} /${x(p,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(m=t==null?void 0:t.onChange)==null||m.call(t,s),s}return a.updateDeps=l=>{n=l},a}function Qe(e,r){if(e===void 0)throw new Error("Unexpected undefined");return e}const Tn=(e,r)=>Math.abs(e-r)<=1,wn=(e,r,t)=>{let n;return function(...s){e.clearTimeout(n),n=e.setTimeout(()=>r.apply(this,s),t)}},Ze=e=>{const{offsetWidth:r,offsetHeight:t}=e;return{width:r,height:t}},jn=e=>e,gt=e=>{const r=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let s=r;s<=t;s++)n.push(s);return n},kn=(e,r)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const s=l=>{const{width:o,height:c}=l;r({width:Math.round(o),height:Math.round(c)})};if(s(Ze(t)),!n.ResizeObserver)return()=>{};const a=new n.ResizeObserver(l=>{const o=()=>{const c=l[0];if(c!=null&&c.borderBoxSize){const m=c.borderBoxSize[0];if(m){s({width:m.inlineSize,height:m.blockSize});return}}s(Ze(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},et={passive:!0},tt=typeof window>"u"?!0:"onscrollend"in window,qn=(e,r)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let s=0;const a=e.options.useScrollendEvent&&tt?()=>{}:wn(n,()=>{r(s,!1)},e.options.isScrollingResetDelay),l=f=>()=>{const{horizontal:g,isRtl:O}=e.options;s=g?t.scrollLeft*(O&&-1||1):t.scrollTop,a(),r(s,f)},o=l(!0),c=l(!1);c(),t.addEventListener("scroll",o,et);const m=e.options.useScrollendEvent&&tt;return m&&t.addEventListener("scrollend",c,et),()=>{t.removeEventListener("scroll",o),m&&t.removeEventListener("scrollend",c)}},Nn=(e,r,t)=>{if(r!=null&&r.borderBoxSize){const n=r.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},On=(e,{adjustments:r=0,behavior:t},n)=>{var s,a;const l=e+r;(a=(s=n.scrollElement)==null?void 0:s.scrollTo)==null||a.call(s,{[n.options.horizontal?"left":"top"]:l,behavior:t})};class Cn{constructor(r){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(s=>{s.forEach(a=>{const l=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var s;(s=n())==null||s.disconnect(),t=null},observe:s=>{var a;return(a=n())==null?void 0:a.observe(s,{box:"border-box"})},unobserve:s=>{var a;return(a=n())==null?void 0:a.unobserve(s)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,s])=>{typeof s>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:jn,rangeExtractor:gt,onChange:()=>{},measureElement:Nn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var n,s;(s=(n=this.options).onChange)==null||s.call(n,this,t)},this.maybeNotify=Z(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const s=new Map,a=new Map;for(let l=n-1;l>=0;l--){const o=t[l];if(s.has(o.lane))continue;const c=a.get(o.lane);if(c==null||o.end>c.end?a.set(o.lane,o):o.end<c.end&&s.set(o.lane,!0),s.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((l,o)=>l.end===o.end?l.index-o.index:l.end-o.end)[0]:void 0},this.getMeasurementOptions=Z(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,n,s,a,l)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:s,getItemKey:a,enabled:l}),{key:!1}),this.getMeasurements=Z(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:s,getItemKey:a,enabled:l},o)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(f=>{this.itemSizeCache.set(f.key,f.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const m=this.measurementsCache.slice(0,c);for(let f=c;f<t;f++){const g=a(f),O=this.options.lanes===1?m[f-1]:this.getFurthestMeasurement(m,f),w=O?O.end+this.options.gap:n+s,p=o.get(g),T=typeof p=="number"?p:this.options.estimateSize(f),R=w+T,x=O?O.lane:f%this.options.lanes;m[f]={index:f,start:w,size:T,end:R,key:g,lane:x}}return this.measurementsCache=m,m},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Z(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,n,s,a)=>this.range=t.length>0&&n>0?En({measurements:t,outerSize:n,scrollOffset:s,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Z(()=>{let t=null,n=null;const s=this.calculateRange();return s&&(t=s.startIndex,n=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,n]},(t,n,s,a,l)=>a===null||l===null?[]:t({startIndex:a,endIndex:l,overscan:n,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,s=t.getAttribute(n);return s?parseInt(s,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const s=this.indexFromElement(t),a=this.measurementsCache[s];if(!a)return;const l=a.key,o=this.elementsCache.get(l);o!==t&&(o&&this.observer.unobserve(o),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(s,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const s=this.measurementsCache[t];if(!s)return;const a=this.itemSizeCache.get(s.key)??s.size,l=n-a;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,l,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,n)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((n,s)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(s))});return}this._measureElement(t,void 0)},this.getVirtualItems=Z(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,n)=>{const s=[];for(let a=0,l=t.length;a<l;a++){const o=t[a],c=n[o];s.push(c)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return Qe(n[yt(0,n.length-1,s=>Qe(n[s]).start,t)])},this.getOffsetForAlignment=(t,n,s=0)=>{const a=this.getSize(),l=this.getScrollOffset();n==="auto"&&(n=t>=l+a?"end":"start"),n==="center"?t+=(s-a)/2:n==="end"&&(t-=a);const o=this.getTotalSize()-a;return Math.max(Math.min(o,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=this.measurementsCache[t];if(!s)return;const a=this.getSize(),l=this.getScrollOffset();if(n==="auto")if(s.end>=l+a-this.options.scrollPaddingEnd)n="end";else if(s.start<=l+this.options.scrollPaddingStart)n="start";else return[l,n];const o=n==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,n,s.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:n="start",behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:n="auto",behavior:s}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const a=this.getOffsetForIndex(t,n);if(!a)return;const[l,o]=a;this._scrollToOffset(l,{adjustments:void 0,behavior:s}),s!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const m=this.getOffsetForIndex(t,o);if(!m)return;const[f]=m,g=this.getScrollOffset();Tn(f,g)||this.scrollToIndex(t,{align:o,behavior:s})}else this.scrollToIndex(t,{align:o,behavior:s})}))},this.scrollBy=(t,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let s;if(n.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((t=n[n.length-1])==null?void 0:t.end)??0;else{const a=Array(this.options.lanes).fill(null);let l=n.length-1;for(;l>=0&&a.some(o=>o===null);){const o=n[l];a[o.lane]===null&&(a[o.lane]=o.end),l--}s=Math.max(...a.filter(o=>o!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:n,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(r)}}const yt=(e,r,t,n)=>{for(;e<=r;){const s=(e+r)/2|0,a=t(s);if(a<n)e=s+1;else if(a>n)r=s-1;else return s}return e>0?e-1:0};function En({measurements:e,outerSize:r,scrollOffset:t,lanes:n}){const s=e.length-1,a=c=>e[c].start;if(e.length<=n)return{startIndex:0,endIndex:s};let l=yt(0,s,a,t),o=l;if(n===1)for(;o<s&&e[o].end<t+r;)o++;else if(n>1){const c=Array(n).fill(0);for(;o<s&&c.some(f=>f<t+r);){const f=e[o];c[f.lane]=f.end,o++}const m=Array(n).fill(t+r);for(;l>=0&&m.some(f=>f>=t);){const f=e[l];m[f.lane]=f.start,l--}l=Math.max(0,l-l%n),o=Math.min(s,o+(n-1-o%n))}return{startIndex:l,endIndex:o}}const nt=typeof document<"u"?d.useLayoutEffect:d.useEffect;function An(e){const r=d.useReducer(()=>({}),{})[1],t={...e,onChange:(s,a)=>{var l;a?Tt.flushSync(r):r(),(l=e.onChange)==null||l.call(e,s,a)}},[n]=d.useState(()=>new Cn(t));return n.setOptions(t),nt(()=>n._didMount(),[]),nt(()=>n._willUpdate()),n}function ue(e){return An({observeElementRect:kn,observeElementOffset:qn,scrollToFn:On,...e})}const Sn=(e,r)=>{var w;const[t,n]=d.useReducer((p,T)=>{var x,y;T.type==="updateState"&&(p.checked=T.checked),T.type==="expand"&&(p.expanded.includes(T.key)?p.expanded.splice(p.expanded.indexOf(T.key),1):p.expanded.push(T.key)),T.type==="check"&&(p.checked.includes(T.key)?p.checked.splice(p.checked.indexOf(T.key),1):p.checked.push(T.key),(x=r.onCheckChanged)==null||x.call(r,p.checked)),T.type==="checkall"&&(p.allChecked!==0?p.checked=[]:r.keyProperty&&(p.checked=p.data.map(N=>N[r.keyProperty])),(y=r.onCheckChanged)==null||y.call(r,p.checked));const R=p.data.filter(N=>p.checked.includes(N[r.keyProperty]));if(T.type==="groupExpand"){const N=p.groups.find(h=>h.key===T.key);N&&(N.open=!N.open,p.groups=p.groups.slice(),p.items=p.groups.map(h=>[h,h.open?p.grouped[h.key]:void 0]).flat(2).filter(Boolean))}return T.type==="reset"&&(p.data=T.data,T.key?(p.grouped=ot(p.data,T.key),p.groups=Object.keys(p.grouped).sort(je("asc")).map(N=>({__GROUP__:!0,open:!0,key:N,items:p.grouped[N],itemCount:p.grouped[N].length})),p.items=p.groups.map(N=>[N,...p.grouped[N.key]]).flat()):p.items=p.data),{...p,allChecked:R.length===p.data.length?1:p.checked.length?2:0}},{data:e,items:[],grouped:{},groups:[],checked:[],expanded:[],allChecked:0}),s=d.useRef(0),a=d.useMemo(()=>t.items.map((p,T)=>"__GROUP__"in p?T:void 0).filter(Boolean),[t.items]),l=p=>s.current===p,[o,c]=d.useState(!1),m=d.useRef(null),f=ue({count:t.items.length,getScrollElement:()=>m.current,estimateSize:()=>32,rangeExtractor:d.useCallback(p=>(s.current=[...a].reverse().find(R=>p.startIndex>R)??0,c(p.startIndex!==s.current),[...new Set([s.current,...gt(p)])]),[a])}),g=f.getVirtualItems(),O=d.useCallback(p=>t.items[p],[t.items]);return d.useEffect(()=>{n({type:"reset",key:r.groupProperty,data:e})},[e,r.groupProperty]),d.useEffect(()=>{n({type:"updateState",checked:r.checked??[]})},[r.checked]),{scrollerRef:m,items:g,checkState:t,getData:O,virtualizer:f,hasActiveSticky:o,isActiveSticky:l,top:(w=f.range)==null?void 0:w.startIndex,totalSize:f.getTotalSize,measureElement:f.measureElement,toggleGroupExpand:p=>n({type:"groupExpand",key:p}),toggleExpand:p=>n({type:"expand",key:p}),toggleChecked:p=>n({type:"check",key:p}),toggleAllChecked:()=>n({type:"checkall"})}},Mn=({ref:e,data:r,columns:t,keyProperty:n="id",groupProperty:s,checkableRows:a,initialScroll:l,hideableColumns:o,sort:c,loading:m,checked:f,emptyDisplay:g,groupRenderer:O,canExpand:w,children:p,onSort:T,onFilter:R,onScroll:x,onRowClick:y,onCheckedChanged:N})=>{var X,Re,Pe,De,Le,Ve,_e;const{t:h}=ne("data"),k=re(z=>N==null?void 0:N(z),[]),{state:S,onHide:P}=xn(t),{scrollerRef:v,items:u,top:j,checkState:M,virtualizer:L,hasActiveSticky:B,toggleExpand:$,toggleChecked:I,toggleAllChecked:b,toggleGroupExpand:q,getData:E,totalSize:D,isActiveSticky:V,measureElement:_}=Sn(r,{checked:f,keyProperty:n,groupProperty:s,onCheckChanged:k}),Q=d.useRef(null),J=d.useMemo(()=>"bg-inherit sticky start-0 flex flex-nowrap z-1",[]),F=d.useMemo(()=>"bg-inherit sticky end-0 flex flex-nowrap z-1 border-s -ms-px",[]);return d.useLayoutEffect(()=>{setTimeout(()=>{l&&L.scrollToIndex(l,{align:"start"})},100)},[]),d.useImperativeHandle(e,()=>({scrollTo:z=>{L.scrollToIndex(z,{align:"start"})},hilight(z){var H,G;(G=(H=v.current)==null?void 0:H.querySelector(".hilight"))==null||G.classList.remove("hilight","ring-1"),L.scrollToIndex(Math.floor(z),{align:"start"}),setTimeout(()=>{var We,Be;(Be=(We=v.current)==null?void 0:We.querySelector(`[data-index="${z}"]`))==null||Be.classList.add("hilight","ring-1")},100)},unhilight(){var z,H;(H=(z=v.current)==null?void 0:z.querySelector(".hilight"))==null||H.classList.remove("hilight","ring-1")}}),[]),d.useEffect(()=>{const z=ke(H=>{x==null||x(H??0)});return z(j),()=>{z.cancel()}},[j]),i.jsx(ft,{children:i.jsxs("div",{className:"grid area-content overflow-auto relative",style:{gridTemplate:'"head" auto "loader" auto "content" 1fr "foot" auto/1fr'},"data-ref":"tableScroller",ref:v,children:[i.jsxs("div",{"data-ref":"tableHeader",className:"bg-base font-medium sticky top-0 h-8 area-head border-b select-none flex flex-nowrap z-5",children:[i.jsxs("div",{className:J,children:[w&&i.jsx("div",{className:"w-6"}),a&&i.jsx(Ee,{state:M.allChecked,onClick:b}),(X=S.start)==null?void 0:X.map((z,H)=>i.jsx(ae,{...z,sort:c,onSort:T,onFilter:R},H))]}),(Re=S.cols)==null?void 0:Re.map((z,H)=>i.jsx(ae,{...z,sort:c,onSort:T,onFilter:R},H)),i.jsxs("div",{className:F,children:[(Pe=S.end)==null?void 0:Pe.map((z,H)=>i.jsx(ae,{...z,sort:c,onSort:T,onFilter:R},H)),o&&i.jsx(mt,{onClick:P,columns:S.columns.filter(z=>z.hideable!==!1)})]})]}),m&&i.jsx(Nt,{}),r.length>0&&i.jsxs("div",{className:"area-content flex flex-col flex-nowrap min-h-full",style:{height:D()},ref:Q,children:[i.jsx("div",{style:{height:(De=u[B?1:0])==null?void 0:De.start}}),u.map(({index:z,key:H})=>{const G=E(z);return"__GROUP__"in G?i.jsxs("div",{ref:_,"data-index":z,className:A("px-2 py-1 text-md bg-base border-y border-tint-100 cursor-pointer flex items-center gap-1 z-3",V(z)&&"sticky top-8"),role:"none",onClick:()=>q(G.key),children:[i.jsx(W,{rtlFlip:!0,icon:G.open?C.chevronDown:C.chevronRight}),(O==null?void 0:O(G))??i.jsxs("div",{className:"flex gap-1 items-center",children:[i.jsx("span",{children:G.key}),i.jsxs("span",{className:"text-sm",children:["(",G.itemCount,")"]})]})]},H):i.jsx(ht,{rowKey:H.toString(),index:z,checkableRows:a,checked:n&&M.checked.includes(G[n])?1:0,expanded:!!n&&M.expanded.includes(G[n]),data:G,hideableColumns:o,keyProperty:n,measureElement:_,onRowClick:y,state:S,canExpand:w,toggleExpand:$,expandRow:p,toggleChecked:I,wrapperEnd:F,wrapperStart:J},H)}),i.jsxs("div",{className:"flex-1 flex flex-nowrap",children:[i.jsxs("div",{className:J,children:[w&&i.jsx("div",{className:"w-6"}),a&&i.jsx("div",{className:"w-6"}),(Le=S.start)==null?void 0:Le.map(z=>i.jsx(ie,{...z},String(z.id)))]}),(Ve=S.cols)==null?void 0:Ve.map(z=>i.jsx(ie,{...z},String(z.id))),i.jsxs("div",{className:F,children:[(_e=S.end)==null?void 0:_e.map(z=>i.jsx(ie,{...z},String(z.id))),o&&i.jsx("div",{className:"w-6"})]})]})]}),!m&&r.length===0&&(g??i.jsx(we,{size:"sm",className:"bg-dimmed",message:h("datagrid.empty")}))]})})};Mn.__docgenInfo={description:"",methods:[{name:"scrollTo",docblock:null,modifiers:[],params:[{name:"row",optional:!1,type:{name:"number"}}],returns:null},{name:"hilight",docblock:null,modifiers:[],params:[{name:"row",optional:!1,type:null}],returns:null},{name:"unhilight",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Table",props:{columns:{required:!0,tsType:{name:"Array",elements:[{name:"TableColumn",elements:[{name:"T"}],raw:"TableColumn<T>"}],raw:"Array<TableColumn<T>>"},description:""},data:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},keyProperty:{required:!1,tsType:{name:"T"},description:"",defaultValue:{value:'"id"',computed:!1}},groupProperty:{required:!1,tsType:{name:"T"},description:""},groupRenderer:{required:!1,tsType:{name:"signature",type:"function",raw:"(key: AnyObject) => ReactElement",signature:{arguments:[{type:{name:"AnyObject"},name:"key"}],return:{name:"ReactElement"}}},description:""},emptyDisplay:{required:!1,tsType:{name:"ReactElement"},description:""},checked:{required:!1,tsType:{name:"Array",elements:[{name:"AnyObject"}],raw:"AnyObject[]"},description:"checkable rows"},checkableRows:{required:!1,tsType:{name:"boolean"},description:""},onCheckedChanged:{required:!1,tsType:{name:"signature",type:"function",raw:"(rows: AnyObject[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"AnyObject"}],raw:"AnyObject[]"},name:"rows"}],return:{name:"void"}}},description:""},sort:{required:!1,tsType:{name:"signature",type:"object",raw:'{ id: string; order: "asc" | "desc" }',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"order",value:{name:"union",raw:'"asc" | "desc"',elements:[{name:"literal",value:'"asc"'},{name:"literal",value:'"desc"'}],required:!0}}]}},description:"sorting"},onSort:{required:!1,tsType:{name:"signature",type:"function",raw:'(sort: { id: string; order: "asc" | "desc" }) => void',signature:{arguments:[{type:{name:"signature",type:"object",raw:'{ id: string; order: "asc" | "desc" }',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"order",value:{name:"union",raw:'"asc" | "desc"',elements:[{name:"literal",value:'"asc"'},{name:"literal",value:'"desc"'}],required:!0}}]}},name:"sort"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},hideableColumns:{required:!1,tsType:{name:"boolean"},description:""},onRowClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: T) => void",signature:{arguments:[{type:{name:"T"},name:"data"}],return:{name:"void"}}},description:""},initialScroll:{required:!1,tsType:{name:"number"},description:""},onScroll:{required:!1,tsType:{name:"signature",type:"function",raw:"(firstItem: number) => void",signature:{arguments:[{type:{name:"number"},name:"firstItem"}],return:{name:"void"}}},description:""},canExpand:{required:!1,tsType:{name:"signature",type:"function",raw:"(record: T) => boolean",signature:{arguments:[{type:{name:"T"},name:"record"}],return:{name:"boolean"}}},description:""},children:{required:!1,tsType:{name:"signature",type:"function",raw:"(record: T) => Elements<AnyObject>",signature:{arguments:[{type:{name:"T"},name:"record"}],return:{name:"Elements",elements:[{name:"AnyObject"}],raw:"Elements<AnyObject>"}}},description:""},onFilter:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: keyof T | string, value?: AnyObject) => void",signature:{arguments:[{type:{name:"union",raw:"keyof T | string",elements:[{name:"T"},{name:"string"}]},name:"id"},{type:{name:"AnyObject"},name:"value"}],return:{name:"void"}}},description:""}},composes:["RefProp"]};const bt=({node:e,noLines:r,expanders:t,checkable:n,selectable:s,defaultLeafIcon:a,defaultNodeIcon:l,onToggle:o,onClick:c,onSelect:m,onChecked:f,children:g,leafClassName:O,nodeClassName:w})=>{const{t:p}=ne("data"),T=d.useMemo(()=>Ot(e.badge),[e.badge]),R=d.useMemo(()=>e.lines.slice(1).map((h,k)=>i.jsx("div",{className:A("flex-initial self-stretch flex items-center w-6 relative",!r&&h>0&&"before:absolute before:top-0 before:start-[7px] before:bg-tint-200 before:min-h-[50%] before:w-[2px] before:scale-x-[.625]",!r&&h!==2&&"before:h-full"),children:i.jsxs("svg",{viewBox:"0 0 24 24",className:"fill-tint-200 rtl:-scale-x-100",children:[h===0&&i.jsx("path",{d:""}),!r&&h===1&&i.jsx("path",{d:"M7.45 26.1v-28.2h1.1v28.2h-1.1z"}),!r&&h===2&&i.jsx("path",{d:"M14.989 12.389l0.161-0.389-0.161-0.389-0.389-0.161h-6.050v-13.55h-1.1v14.1l0.161 0.389 0.389 0.161h6.6z"}),!r&&h===3&&i.jsx("path",{d:"M8.55 12.55h6.050l0.389-0.161 0.161-0.389-0.161-0.389-0.389-0.161h-6.050v-13.55h-1.1v28.2h1.1z"})]})},k)),[r,e.lines]),x=d.useMemo(()=>e.icon?e.icon:e.leaf?a:l,[a,l,e.icon]),y=d.useMemo(()=>n===!0||n==="leafOnly"&&e.leaf,[e.leaf,n]),N=d.useMemo(()=>!e.disabled&&(s===!0||s==="leafOnly"&&e.leaf),[e.leaf,e.disabled,s]);return i.jsxs("div",{role:"treeitem","aria-selected":e.selected,className:A("flex flex-nowrap items-center",e.className,e.leaf?O:w),"data-testid":e["data-testid"],"data-test-value":e["data-test-value"],children:[R,e.loading&&i.jsx("div",{className:"flex-initial w-6",children:i.jsx(W,{icon:C.spinner,className:"animate-spin text-muted"})}),!e.leaf&&!e.childFiltered&&!e.loading&&i.jsx("div",{className:"flex-initial w-6",children:i.jsx(W,{rtlFlip:!0,onClick:()=>!e.leaf&&o(e.id),icon:e.open?t[1]:t[0],className:"text-tint-600 hover:text-primary-600"})}),y&&i.jsx("div",{className:"flex-initial w-6",children:i.jsx(W,{onClick:()=>!e.disabled&&f(e.id),icon:e.checked===2?C.checkboxInt:e.checked===1?C.checkboxOn:C.checkboxOff,className:A(e.disabled?"text-muted":"text-primary-500 hover:text-primary-600")})}),!e.empty&&i.jsxs("div",{role:"none",className:A("group/tool data-[selected]:bg-primary-100 flex flex-nowrap flex-1 overflow-hidden select-none",e.childSelected&&"font-medium",e.disabled&&"text-muted opacity-65",!e.disabled&&(N||c)&&"hover:bg-primary-50 cursor-pointer"),"data-selected":e.selected,onClick:e.disabled?void 0:()=>{c==null||c(e.id,e.data),N?m(e.id):y?f(e.id):o(e.id)},children:[x&&i.jsxs("div",{className:"flex-content w-6 self-center leading-none",children:[d.isValidElement(x)&&x,le(x)&&i.jsx(W,{icon:x,bg:e.iconBg,color:e.iconColor,rtlFlip:e.rtlFlip})]}),e.childSelected&&!e.open&&i.jsx("span",{className:" flex-content text-primary-500",children:"•"}),i.jsx("div",{role:"none",className:"flex-1 truncate",children:g}),!ee(e.badge)&&i.jsx(Ct,{...T,className:A("me-1 self-center flex-content bg-opacity-50",T.className)})]}),e.empty&&i.jsx("div",{className:"text-muted text-sm select-none",children:p("tree.noItems")})]})};bt.__docgenInfo={description:"",methods:[],displayName:"TreeNode",props:{node:{required:!0,tsType:{name:"InternalNode"},description:""},expanders:{required:!0,tsType:{name:"tuple",raw:"[string, string]",elements:[{name:"string"},{name:"string"}]},description:""},defaultNodeIcon:{required:!1,tsType:{name:"string"},description:""},defaultLeafIcon:{required:!1,tsType:{name:"string"},description:""},noLines:{required:!1,tsType:{name:"boolean"},description:""},selectable:{required:!1,tsType:{name:"union",raw:'true | "leafOnly"',elements:[{name:"literal",value:"true"},{name:"literal",value:'"leafOnly"'}]},description:""},checkable:{required:!1,tsType:{name:"union",raw:'true | "leafOnly"',elements:[{name:"literal",value:"true"},{name:"literal",value:'"leafOnly"'}]},description:""},leafClassName:{required:!1,tsType:{name:"string"},description:""},nodeClassName:{required:!1,tsType:{name:"string"},description:""},onToggle:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},onChecked:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string, node: any) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"any"},name:"node"}],return:{name:"void"}}},description:""}},composes:["ChildProp"]};const In="M12.984 9v6h3l-3.984 3.984-3.984-3.984h3v-6h-3l3.984-3.984 3.984 3.984h-3zM3.984 2.016h16.031v1.969h-16.031v-1.969zM3.984 20.016h16.031v1.969h-16.031v-1.969z",zn="M3.984 11.016h16.031v1.969h-16.031v-1.969zM15.984 5.016l-3.984 3.984-3.984-3.984h3v-4.031h1.969v4.031h3zM8.016 18.984l3.984-3.984 3.984 3.984h-3v4.031h-1.969v-4.031h-3z";var rt=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function Rn(e,r){return!!(e===r||rt(e)&&rt(r))}function Pn(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!Rn(e[t],r[t]))return!1;return!0}function Ae(e,r){r===void 0&&(r=Pn);var t=null;function n(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(t&&t.lastThis===this&&r(s,t.lastArgs))return t.lastResult;var l=e.apply(this,s);return t={lastResult:l,lastArgs:s,lastThis:this},l}return n.clear=function(){t=null},n}const Dn=(e,r)=>!!e.leaf!=!!r.leaf?e.leaf?1:-1:je()(e.label,r.label),Se=(e=[])=>e.map(r=>[r,...Se(r.children)]).flat(99).filter(Boolean),Ln=(e=[])=>{const r=e.map(a=>a.checked),t=r.includes(0),n=r.includes(2),s=r.includes(1);return t&&s||n?2:s?1:0},ve=(e,{sorter:r=Dn,defaultExpanded:t=[]},n={level:0,parent:void 0})=>{const s=[];return r!==!1&&(e=e.sort(r)),e.forEach(a=>{var l;s.push({open:t.includes(a.id)&&!!((l=a.children)!=null&&l.length),level:n.level,parent:n.parent,checked:0,loaded:!1,loading:!1,filtered:!1,lines:[],...a,leaf:!!a.leaf,children:a.children&&ve(a.children,{sorter:r,defaultExpanded:t},{level:n.level+1,parent:a.id})})}),s},xe=(e,r=new Map)=>(e.forEach(t=>{if(r.has(t.id))throw new Error(`Node with id [${t.id}] already exists, please make sure all ids are unique`);r.set(t.id,t),t.children&&xe(t.children,r)}),r),Y=(e,r=[])=>{const t=[],n=e.filter(s=>!s.filtered);return n.forEach((s,a)=>{var l;s.lines=[...r,a===n.length-1?2:3],t.push(s),(s.open||s.childFiltered)&&s.children&&t.push(...Y(s.children.filter(o=>!o.filtered),[...r,a===n.length-1?0:1])),s.open&&((l=s.children)==null?void 0:l.length)===0&&t.push({empty:!0,leaf:!0,lines:[...r,a===n.length-1?0:1,2]})}),t},me=(e,r,t)=>{const n=e.get(r);if(n){n.selected=t;let s=n.parent;for(;s;){const a=e.get(s);a&&(a.childSelected=t),t&&a&&(a.open=!0),s=a==null?void 0:a.parent}}},st=(e,r)=>{const t=e.get(r);if(t){t.checked=t.checked===1?0:1,t.children&&Se(t.children).forEach(s=>s.checked=t.checked);let n=t.parent;for(;n;){const s=e.get(n);s&&(s.checked=Ln(s.children)),n=s==null?void 0:s.parent}}},Vn=(e,r,t)=>{e.forEach(n=>{if(r){if(n.parentFiltered)return;if(n.filtered=!(t?t(n.data,r):le(n.queryable)?oe(n.queryable,r):le(n.label)&&oe(n.label,r)),!n.filtered){let s=n.parent;for(;s;){const a=e.get(s);a&&(a.filtered=!1),a&&(a.childFiltered=!0),s=a==null?void 0:a.parent}n.children&&Se(n.children).forEach(a=>{a.parentFiltered=!0,a.filtered=!1})}}else n.filtered=!1,n.childFiltered=void 0,n.parentFiltered=void 0})},_n=Ae(e=>e),Wn=({items:e=te,checked:r=te,selected:t,sorter:n,matcher:s,onLoad:a,onQuery:l,onSelect:o,onChecked:c,defaultExpanded:m,onExpandToggle:f})=>{const g=d.useRef({onSelect:o,onChecked:c}),O=d.useRef(m??te),w=_n(e),p=d.useCallback(u=>{const j=u.filter(M=>M.open).map(M=>M.id);setTimeout(()=>f==null?void 0:f(j),100)},[f]),T=d.useCallback(u=>{var j,M;u.open&&!u.leaf&&!((j=u.children)!=null&&j.length)?(u.loading=!0,Promise.resolve(a==null?void 0:a(u.id)).then((L=te)=>{u.children=ve(L,{sorter:n,defaultExpanded:m},{level:u.level+1,parent:u.id})}).finally(()=>{var L;u.loading=!1,x({type:"loaded"}),((L=O.current)==null?void 0:L.length)>0&&x({type:"expand",id:O.current.shift()})})):(x({type:"loaded"}),((M=O.current)==null?void 0:M.length)>0&&x({type:"expand",id:O.current.shift()}))},[a]),[R,x]=d.useReducer((u,j)=>{var M,L,B,$,I;if(j.type==="load")return u.items=ve(j.items,{sorter:n,defaultExpanded:m}),u.itemMap=xe(u.items),u.tree=Y(u.items),{...u};if(j.type==="toggleExpand"){const b=u.itemMap.get(j.id);if(b&&!b.leaf)return b&&(b.open=!b.open),T(b),{...u}}if(j.type==="loaded")return u.itemMap=xe(u.items),p(Array.from(u.itemMap.values())),u.tree=Y(u.items),u.selected&&me(u.itemMap,u.selected,!0),{...u};if(j.type==="expand"){const b=u.itemMap.get(j.id);if(b&&!b.leaf){b.open=!0;let q=b.parent;for(;q;){const E=u.itemMap.get(q);E&&(E.open=!0),q=E==null?void 0:E.parent}return T(b),{...u}}}if(j.type==="expandAll")return u.itemMap.forEach(b=>{var q;!b.leaf&&((q=b.children)!=null&&q.length)&&(b.open=!0)}),p(Array.from(u.itemMap.values())),u.tree=Y(u.items),{...u};if(j.type==="collapseAll")return u.itemMap.forEach(b=>{!b.leaf&&(b.open=!1)}),p([]),u.tree=Y(u.items),{...u};if(j.type==="filter")if(l)l(j.query??"");else return Vn(u.itemMap,j.query,s),u.tree=Y(u.items),{...u};if(j.type==="select")return u.selected&&me(u.itemMap,u.selected),me(u.itemMap,j.id,!0),u.tree=Y(u.items),(B=(L=g.current).onSelect)==null||B.call(L,j.id,(M=u.itemMap.get(j.id))==null?void 0:M.data),{...u,selected:j.id};if(j.type==="toggleCheck"){st(u.itemMap,j.id);const b=[[],[]];return Array.from(u.itemMap.values()).filter(q=>q.checked===1).forEach(q=>b[q.leaf?0:1].push(q.id)),(I=($=g.current).onChecked)==null||I.call($,b[0],b[1]),{...u}}return j.type==="checked"?(j.id.forEach(b=>st(u.itemMap,b)),{...u,checked:j.id}):u},{itemMap:new Map,items:[],tree:[],checked:[]});d.useEffect(()=>{g.current={onSelect:o,onChecked:c}},[o,c]),d.useEffect(()=>{var u;x({type:"load",items:w}),w.length&&((u=O.current)==null?void 0:u.length)>0&&x({type:"expand",id:O.current.shift()})},[w]),d.useEffect(()=>{t&&x({type:"select",id:t})},[t]),d.useEffect(()=>{r&&x({type:"checked",id:r})},[r]);const y=d.useCallback(u=>{x({type:"toggleExpand",id:u})},[]),N=d.useCallback(u=>{x({type:"toggleCheck",id:u})},[]),h=d.useCallback(u=>{x({type:"select",id:u})},[]),k=d.useCallback(u=>{x({type:"expand",id:u})},[]),S=d.useCallback(()=>{x({type:"expandAll"})},[]),P=d.useCallback(()=>{x({type:"collapseAll"})},[]),v=re(u=>{x({type:"filter",query:u})},[],300);return{tree:R.tree,toggleExpand:y,expandAll:S,collapseAll:P,toggleCheck:N,select:h,expand:k,onFilter:v}},Bn=({ref:e,items:r,selected:t,checked:n,checkable:s,noLines:a,renderer:l,searchable:o,selectable:c,matcher:m,filterPlaceholder:f,defaultLeafIcon:g,defaultNodeIcon:O,expander:w="box",onChecked:p,onLoad:T,onQuery:R,onSelect:x,onClick:y,sorter:N,makeLabel:h,makeIcon:k,defaultExpanded:S,onExpandToggle:P,leafClassName:v,nodeClassName:u,...j})=>{var J;const{tree:M,toggleExpand:L,toggleCheck:B,expandAll:$,collapseAll:I,select:b,expand:q,onFilter:E}=Wn({items:r,checked:n,selected:t,matcher:m,sorter:N,onLoad:T,onQuery:R,onSelect:x,onChecked:p,defaultExpanded:S,onExpandToggle:P}),D=d.useRef(null),V=ue({count:M.length,getScrollElement:()=>D.current,estimateSize:()=>24}),_=V.getVirtualItems(),Q=d.useMemo(()=>w==="caret"?[C.caretRight,C.caretDown]:w==="chevron"?[C.chevronRight,C.chevronDown]:w==="folder"?[C.folderClosed,C.folderOpen]:[C.expand,C.collapse],[w]);return d.useImperativeHandle(e,()=>({open:F=>q(F),select:F=>b(F)}),[]),i.jsxs(Vt,{children:[i.jsxs(Lt,{flex:!0,className:"items-center p-px justify-end overflow-hidden border-b",children:[o&&i.jsx(dt,{onSearch:E,allowClear:!0,placeholder:f,noBorder:!0,decorateStart:i.jsx(W,{icon:C.filter,className:"p-1"})}),i.jsxs(Te,{variant:"link",className:"m-0",children:[i.jsx(K,{size:"sm","aria-label":"expand all",icon:In,onClick:$}),i.jsx(K,{size:"sm","aria-label":"collapse all",icon:zn,onClick:I})]})]}),i.jsx("div",{ref:D,role:"tree",className:"area-content overflow-auto p-1",...j,children:i.jsxs("div",{style:{height:V.getTotalSize()},children:[i.jsx("div",{style:{height:(J=_[0])==null?void 0:J.start}}),_.map(({index:F,key:X})=>i.jsx("div",{"data-index":F,ref:V.measureElement,children:i.jsx(bt,{node:M[F],noLines:a,expanders:Q,checkable:s,selectable:c,defaultLeafIcon:g,defaultNodeIcon:(k==null?void 0:k(M[F].data))??O,onToggle:L,onChecked:B,onSelect:b,onClick:y,leafClassName:v,nodeClassName:u,children:(M[F].data&&(l==null?void 0:l(M[F].data)))??(h==null?void 0:h(M[F].data))??M[F].label})},X))]})})]})};Bn.__docgenInfo={description:"",methods:[{name:"open",docblock:null,modifiers:[],params:[{name:"id",optional:!1,type:{name:"string"}}],returns:null},{name:"select",docblock:null,modifiers:[],params:[{name:"id",optional:!1,type:{name:"string"}}],returns:null}],displayName:"TreePanel",props:{items:{required:!1,tsType:{name:"Array",elements:[{name:"intersection",raw:`TreeBaseNode<T> &
(
  | { leaf: true; children?: never }
  | {
      leaf?: boolean;
      children?: Array<TreeNodeType<T>>;
      open?: boolean;
      iconOpen?: string;
    }
)`,elements:[{name:"TreeBaseNode",elements:[{name:"T"}],raw:"TreeBaseNode<T>"},{name:"unknown"}]}],raw:"Array<TreeNodeType<T>>"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:"make tree searchable"},filterPlaceholder:{required:!1,tsType:{name:"string"},description:"filter input placeholder"},selectable:{required:!1,tsType:{name:"union",raw:'true | "leafOnly"',elements:[{name:"literal",value:"true"},{name:"literal",value:'"leafOnly"'}]},description:"enable select"},checkable:{required:!1,tsType:{name:"union",raw:'true | "leafOnly"',elements:[{name:"literal",value:"true"},{name:"literal",value:'"leafOnly"'}]},description:"enable checkable"},selected:{required:!1,tsType:{name:"string"},description:"selected item id"},checked:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"checked items"},defaultNodeIcon:{required:!1,tsType:{name:"string"},description:"default node icon"},defaultLeafIcon:{required:!1,tsType:{name:"string"},description:"default leaf icon"},noLines:{required:!1,tsType:{name:"boolean"},description:"hide level indicator lines"},expander:{required:!1,tsType:{name:"union",raw:'"box" | "caret" | "chevron" | "folder"',elements:[{name:"literal",value:'"box"'},{name:"literal",value:'"caret"'},{name:"literal",value:'"chevron"'},{name:"literal",value:'"folder"'}]},description:"expander icons",defaultValue:{value:'"box"',computed:!1}},onLoad:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  id: string,
) =>
  | Promise<Array<TreeNodeType<T>> | undefined>
  | Array<TreeNodeType<T>>
  | undefined`,signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"union",raw:`| Promise<Array<TreeNodeType<T>> | undefined>
| Array<TreeNodeType<T>>
| undefined`,elements:[{name:"Promise",elements:[{name:"union",raw:"Array<TreeNodeType<T>> | undefined",elements:[{name:"Array",elements:[{name:"intersection",raw:`TreeBaseNode<T> &
(
  | { leaf: true; children?: never }
  | {
      leaf?: boolean;
      children?: Array<TreeNodeType<T>>;
      open?: boolean;
      iconOpen?: string;
    }
)`,elements:[{name:"TreeBaseNode",elements:[{name:"T"}],raw:"TreeBaseNode<T>"},{name:"unknown"}]}],raw:"Array<TreeNodeType<T>>"},{name:"undefined"}]}],raw:"Promise<Array<TreeNodeType<T>> | undefined>"},{name:"Array",elements:[{name:"intersection",raw:`TreeBaseNode<T> &
(
  | { leaf: true; children?: never }
  | {
      leaf?: boolean;
      children?: Array<TreeNodeType<T>>;
      open?: boolean;
      iconOpen?: string;
    }
)`,elements:[{name:"TreeBaseNode",elements:[{name:"T"}],raw:"TreeBaseNode<T>"},{name:"unknown"}]}],raw:"Array<TreeNodeType<T>>"},{name:"undefined"}]}}},description:"callback for lazy loading tree items"},onQuery:{required:!1,tsType:{name:"signature",type:"function",raw:"(query: string) => void",signature:{arguments:[{type:{name:"string"},name:"query"}],return:{name:"void"}}},description:"callback to load tree using search query"},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string, data: T) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"T"},name:"data"}],return:{name:"void"}}},description:"callback on click of tree node"},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string, data: T) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"T"},name:"data"}],return:{name:"void"}}},description:"callback on selection of tree node"},onChecked:{required:!1,tsType:{name:"signature",type:"function",raw:"(leafs: string[], nodes: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"leafs"},{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"nodes"}],return:{name:"void"}}},description:"callback on change of checked list"},renderer:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: T) => JSX.Element",signature:{arguments:[{type:{name:"T"},name:"data"}],return:{name:"JSX.Element"}}},description:"item label renderer"},matcher:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: T, query: string) => boolean",signature:{arguments:[{type:{name:"T"},name:"data"},{type:{name:"string"},name:"query"}],return:{name:"boolean"}}},description:"item filter matcher"},sorter:{required:!1,tsType:{name:"union",raw:"false | ((a: T, b: T) => number)",elements:[{name:"literal",value:"false"},{name:"unknown"}]},description:""},makeLabel:{required:!1,tsType:{name:"signature",type:"function",raw:"(node: T) => string",signature:{arguments:[{type:{name:"T"},name:"node"}],return:{name:"string"}}},description:""},makeIcon:{required:!1,tsType:{name:"signature",type:"function",raw:"(node: T) => string",signature:{arguments:[{type:{name:"T"},name:"node"}],return:{name:"string"}}},description:""},defaultExpanded:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onExpandToggle:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"id"}],return:{name:"void"}}},description:""},leafClassName:{required:!1,tsType:{name:"string"},description:""},nodeClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["TestProps","RefProp"]};const Me=({vertical:e=!0,scrollActive:r,onStart:t,onEnd:n,onPrevious:s,onNext:a})=>i.jsxs(Te,{vertical:e,variant:"link",className:"outline",children:[i.jsx(K,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll to top",icon:e?C.chevronsUp:C.chevronsLeft,disabled:(r&2)===0,onClick:t}),i.jsx(K,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll up",icon:e?C.chevronUp:C.chevronLeft,disabled:(r&2)===0,onClick:s}),i.jsx(K,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll down",icon:e?C.chevronDown:C.chevronRight,disabled:r%2===0,onClick:a}),i.jsx(K,{rtlFlip:!0,size:"sm",variant:"link","aria-label":"scroll to bottom",icon:e?C.chevronsDown:C.chevronsRight,disabled:r%2===0,onClick:n})]});Me.__docgenInfo={description:"",methods:[],displayName:"Scroller",props:{scrollActive:{required:!0,tsType:{name:"number"},description:""},vertical:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},onStart:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onEnd:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onPrevious:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onNext:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const $n=Ae(e=>e),Ie=({items:e,children:r,columns:t,fullWidth:n,maxWidth:s,minWidth:a,total:l=0,padding:o="md",defaultHeight:c=48,defaultWidth:m=48,hideScroller:f,initialScroll:g,loading:O,onLoadMore:w,onScroll:p,galleryRef:T,...R})=>{var b;const x=d.useDeferredValue(e.length),y=d.useMemo(()=>w?8:0,[w]),N=$n(e.map((q,E)=>({index:E,item:q,isLast:E+1===e.length}))),h=d.useRef(null),[k,S]=d.useState(1),P=d.useMemo(()=>new Array(k).fill(0).map((q,E)=>E),[k]);kt(()=>{if(h.current){const q=h.current,E=()=>{var _;const V=parseInt(getComputedStyle((_=q.firstElementChild)==null?void 0:_.firstElementChild).padding??8);S(t??Math.max(1,Math.floor((((q==null?void 0:q.offsetWidth)??800)-32-(isNaN(V)?8:V)*2)/m)))},D=new ResizeObserver(E);return E(),D.observe(q),()=>{D.unobserve(q),D.disconnect()}}},[h.current,t,m],"virtualGallery recalculate view count");const v=ue({count:Math.ceil(x/k),getScrollElement:()=>h.current,estimateSize:()=>c,overscan:2}),u=v.getVirtualItems(),j=d.useRef(0);d.useEffect(()=>{var q;j.current=((q=u[1])==null?void 0:q.index)??0,h.current&&u[0]&&h.current.scrollTop<u[0].size&&(j.current=0)},[u]);const M=d.useCallback(()=>{const{scrollTop:q=0,scrollHeight:E=0,offsetHeight:D=0}=h.current??{};return E===D?0:q===0?1:q>=E-D-y*2?2:3},[]),[L,B]=d.useState(0),$=re(q=>p==null?void 0:p(j.current*q),[p]),I=d.useCallback(()=>{B(M()),$(k)},[k,w]);return d.useEffect(()=>{B(M())},[x,M]),d.useEffect(()=>{var q,E;if(w){const D=(q=u[0])==null?void 0:q.index,V=(E=u==null?void 0:u.slice(-1).pop())==null?void 0:E.index,_=D*k,Q=(V??0)*k+k,J=D!==void 0&&e[_]===null,F=V!==void 0&&Q>=x-1&&x<l,X=ke(w);return J?X(_):!O&&F&&X(Q+1),()=>X.cancel()}},[w,u]),d.useLayoutEffect(()=>{setTimeout(()=>{g&&v.scrollToIndex(Math.floor(g/k),{align:"start"})},100)},[k]),d.useImperativeHandle(T,()=>({scrollToItem(q){v.scrollToIndex(Math.floor(q/k),{align:"auto"})},hilight(q){var E,D;(D=(E=h.current)==null?void 0:E.querySelector(".hilight"))==null||D.classList.remove("hilight","ring-1"),v.scrollToIndex(Math.floor(q/k),{align:"auto"}),setTimeout(()=>{var V,_;(_=(V=h.current)==null?void 0:V.querySelector(`[data-index="${q}"]`))==null||_.classList.add("hilight","ring-1")},100)},unhilight(){var q,E;(E=(q=h.current)==null?void 0:q.querySelector(".hilight"))==null||E.classList.remove("hilight","ring-1")}}),[v,k]),i.jsx("div",{ref:h,onScroll:I,className:A("area-content bg-base overflow-auto"),...R,children:i.jsxs("div",{className:A("inline-flex flex-nowrap gap-2 justify-center min-h-full min-w-full"),children:[i.jsx("div",{className:A("box-content",n&&"flex-1",o==="sm"&&"p-1",o==="md"&&"p-2",o==="lg"&&"p-4"),style:{minWidth:a,maxWidth:s},children:i.jsxs("div",{style:{height:v.getTotalSize()+y},children:[i.jsx("div",{style:{height:(b=u[0])==null?void 0:b.start}}),u.map(({key:q,index:E})=>i.jsx("div",{className:"flex justify-center","data-index":E,ref:v.measureElement,children:P.map(D=>i.jsx("div",{"data-index":E*k+D,className:A("grid rounded-capped"),children:N[E*k+D]&&r(N[E*k+D])},`${q}:${D}`))},q)),w&&i.jsx("div",{className:"h-16",children:O&&i.jsx(lt,{})})]})}),!f&&i.jsx("div",{className:A("self-end sticky bottom-2"),children:i.jsx(Me,{vertical:!0,scrollActive:L,onStart:()=>v.scrollToIndex(0),onPrevious:()=>h.current&&v.scrollBy(-h.current.offsetHeight),onNext:()=>h.current&&v.scrollBy(h.current.offsetHeight),onEnd:()=>v.scrollToIndex(x-1)})})]})})};Ie.displayName="VirtualGallery";const Fn=d.memo,yr=Fn(Ie);Ie.__docgenInfo={description:"",methods:[{name:"scrollToItem",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"hilight",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"unhilight",docblock:null,modifiers:[],params:[],returns:null}],displayName:"VirtualGallery",props:{children:{required:!0,tsType:{name:"signature",type:"function",raw:`(props: {
  item: T;
  index: number;
  isLast: boolean;
}) => ReactElement`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  item: T;
  index: number;
  isLast: boolean;
}`,signature:{properties:[{key:"item",value:{name:"T",required:!0}},{key:"index",value:{name:"number",required:!0}},{key:"isLast",value:{name:"boolean",required:!0}}]}},name:"props"}],return:{name:"ReactElement"}}},description:""},galleryRef:{required:!1,tsType:{name:"Ref",elements:[{name:"union",raw:"VirtualGalleryRef | undefined",elements:[{name:"VirtualGalleryRef"},{name:"undefined"}]}],raw:"Ref<VirtualGalleryRef | undefined>"},description:""},columns:{required:!1,tsType:{name:"number"},description:"fixed columns"},defaultHeight:{required:!1,tsType:{name:"number"},description:"default item height",defaultValue:{value:"48",computed:!1}},defaultWidth:{required:!1,tsType:{name:"number"},description:"default item width",defaultValue:{value:"48",computed:!1}},fullWidth:{required:!1,tsType:{name:"boolean"},description:"full width list"},maxWidth:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},minWidth:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},padding:{required:!1,tsType:{name:"union",raw:'"sm" | "md" | "lg" | "none"',elements:[{name:"literal",value:'"sm"'},{name:"literal",value:'"md"'},{name:"literal",value:'"lg"'},{name:"literal",value:'"none"'}]},description:"padding",defaultValue:{value:'"md"',computed:!1}},items:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:"data list"},total:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},loading:{required:!1,tsType:{name:"boolean"},description:"loading state"},initialScroll:{required:!1,tsType:{name:"number"},description:""},hideScroller:{required:!1,tsType:{name:"boolean"},description:"hide scroll buttons"},onLoadMore:{required:!1,tsType:{name:"signature",type:"function",raw:"(lastIndex?: number) => void",signature:{arguments:[{type:{name:"number"},name:"lastIndex"}],return:{name:"void"}}},description:"load more callback"},onScroll:{required:!1,tsType:{name:"signature",type:"function",raw:"(top: number) => void",signature:{arguments:[{type:{name:"number"},name:"top"}],return:{name:"void"}}},description:"scroll handler"}},composes:["TestProps"]};const Hn=Ae(e=>e),ze=({items:e,total:r=0,children:t,fullWidth:n,maxWidth:s,minWidth:a,padding:l="md",orientation:o="vertical",defaultHeight:c=48,defaultWidth:m=48,hideScroller:f,initialScroll:g,loading:O,onLoadMore:w,onScroll:p,listRef:T,...R})=>{var B,$;const x=d.useDeferredValue(e.length),y=d.useMemo(()=>w?8:0,[w]),N=Hn(e.map((I,b)=>({index:b,item:I,isLast:b+1===e.length}))),h=d.useRef(null),k=ue({count:x,overscan:2,horizontal:o==="horizontal",getScrollElement:()=>h.current,estimateSize:()=>o==="horizontal"?m:c}),S=k.getVirtualItems(),P=d.useRef(0);d.useEffect(()=>{var I;P.current=((I=S[1])==null?void 0:I.index)??0,h.current&&S[0]&&h.current.scrollTop<S[0].size&&(P.current=0)},[S]);const v=d.useCallback(()=>{const{scrollTop:I=0,scrollLeft:b=0,scrollWidth:q=0,scrollHeight:E=0,offsetWidth:D=0,offsetHeight:V=0}=h.current??{};if(o==="vertical"){if(E===V)return 0;if(I===0)return 1;if(I>=E-V-y*2)return 2}if(o==="horizontal"){if(q===D)return 0;if(Math.abs(b)===0)return 1;if(Math.abs(b)>=q-D-y*2)return 2}return 3},[o]),[u,j]=d.useState(0),M=re(()=>p==null?void 0:p(P.current),[p]),L=d.useCallback(()=>{j(v()),M()},[o,w]);return d.useEffect(()=>{j(v())},[N,v]),d.useEffect(()=>{var I,b;if(w){const q=(I=S[0])==null?void 0:I.index,E=(b=S==null?void 0:S.slice(-1).pop())==null?void 0:b.index,D=q!==void 0&&e[q]===null,V=E!==void 0&&E===x-1&&x<r,_=ke(w);return D?_(q):!O&&V&&_(E+1),()=>_.cancel()}},[w,S]),d.useLayoutEffect(()=>{setTimeout(()=>{g&&k.scrollToIndex(g,{align:"start"})},100)},[]),d.useImperativeHandle(T,()=>({scrollToItem(I){k.scrollToIndex(I,{align:"auto"})},hilight(I){var b,q;(q=(b=h.current)==null?void 0:b.querySelector(".hilight"))==null||q.classList.remove("hilight","ring-1"),k.scrollToIndex(Math.floor(I),{align:"auto"}),setTimeout(()=>{var E,D;(D=(E=h.current)==null?void 0:E.querySelector(`[data-index="${I}"]`))==null||D.classList.add("hilight","ring-1")},100)},unhilight(){var I,b;(b=(I=h.current)==null?void 0:I.querySelector(".hilight"))==null||b.classList.remove("hilight","ring-1")}}),[k]),i.jsx("div",{ref:h,onScroll:L,className:A("area-content bg-base overflow-auto"),...R,children:i.jsxs("div",{className:A("inline-flex flex-nowrap gap-2 justify-center min-h-full min-w-full",o==="horizontal"&&"flex-col"),children:[i.jsxs("div",{className:A("box-content inline-flex flex-nowrap",o==="vertical"&&"flex-col",o==="horizontal"&&"flex-row",n&&"flex-1",l==="sm"&&"p-1",l==="md"&&"p-2",l==="lg"&&"p-4"),style:{minWidth:a,maxWidth:s},children:[i.jsxs("div",{style:o==="vertical"?{height:k.getTotalSize()+y}:{width:k.getTotalSize()+y},children:[i.jsx("div",{style:o==="vertical"?{height:(B=S[0])==null?void 0:B.start}:{width:($=S[0])==null?void 0:$.start,display:"inline-block"}}),S.map(({key:I,index:b})=>i.jsx("div",{"data-index":b,ref:k.measureElement,className:A("rounded-capped",o==="horizontal"?"inline-grid":"grid"),children:t(N[b])},I))]}),O&&i.jsx("div",{className:o==="horizontal"?"min-w-16":"",children:i.jsx(lt,{})})]}),!f&&i.jsx("div",{className:A(o==="vertical"&&"self-end sticky bottom-2",o==="horizontal"&&"self-end sticky end-2"),children:i.jsx(Me,{vertical:o==="vertical",scrollActive:u,onStart:()=>k.scrollToIndex(0),onPrevious:()=>h.current&&k.scrollBy(-(o==="vertical"?h.current.offsetHeight:h.current.offsetWidth)),onNext:()=>h.current&&k.scrollBy(o==="vertical"?h.current.offsetHeight:h.current.offsetWidth),onEnd:()=>k.scrollToIndex(x-1)})})]})})};ze.displayName="VirtualList";const Kn=d.memo,br=Kn(ze);ze.__docgenInfo={description:"",methods:[{name:"scrollToItem",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"hilight",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"unhilight",docblock:null,modifiers:[],params:[],returns:null}],displayName:"VirtualList",props:{children:{required:!0,tsType:{name:"signature",type:"function",raw:`(props: {
  item: T;
  index: number;
  isLast: boolean;
}) => ReactElement`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  item: T;
  index: number;
  isLast: boolean;
}`,signature:{properties:[{key:"item",value:{name:"T",required:!0}},{key:"index",value:{name:"number",required:!0}},{key:"isLast",value:{name:"boolean",required:!0}}]}},name:"props"}],return:{name:"ReactElement"}}},description:""},listRef:{required:!1,tsType:{name:"Ref",elements:[{name:"union",raw:"VirtualListRef | undefined",elements:[{name:"VirtualListRef"},{name:"undefined"}]}],raw:"Ref<VirtualListRef | undefined>"},description:""},defaultHeight:{required:!1,tsType:{name:"number"},description:"default item height",defaultValue:{value:"48",computed:!1}},defaultWidth:{required:!1,tsType:{name:"number"},description:"default item width",defaultValue:{value:"48",computed:!1}},fullWidth:{required:!1,tsType:{name:"boolean"},description:"full width list"},maxWidth:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},minWidth:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},padding:{required:!1,tsType:{name:"union",raw:'"sm" | "md" | "lg" | "none"',elements:[{name:"literal",value:'"sm"'},{name:"literal",value:'"md"'},{name:"literal",value:'"lg"'},{name:"literal",value:'"none"'}]},description:"padding",defaultValue:{value:'"md"',computed:!1}},orientation:{required:!1,tsType:{name:"union",raw:'"vertical" | "horizontal"',elements:[{name:"literal",value:'"vertical"'},{name:"literal",value:'"horizontal"'}]},description:"list orientation",defaultValue:{value:'"vertical"',computed:!1}},items:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:"data list"},total:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},initialScroll:{required:!1,tsType:{name:"number"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"loading state"},hideScroller:{required:!1,tsType:{name:"boolean"},description:"hide scroll buttons"},onLoadMore:{required:!1,tsType:{name:"signature",type:"function",raw:"(lastIndex?: number) => void",signature:{arguments:[{type:{name:"number"},name:"lastIndex"}],return:{name:"void"}}},description:"load more callback"},onScroll:{required:!1,tsType:{name:"signature",type:"function",raw:"(top: number) => void",signature:{arguments:[{type:{name:"number"},name:"top"}],return:{name:"void"}}},description:"scroll handler"}},composes:["TestProps"]};export{fn as H,hn as J,dt as S,Bn as T,yr as V,br as a,Mn as b,bn as u};
