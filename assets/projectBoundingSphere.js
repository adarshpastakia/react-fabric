import{eN as h,eO as U,eP as l,eQ as p,bJ as $,eR as b,eS as m,eT as I,eU as j}from"./ShadowCastClear.glsl.js";function N(e,c,r,u){if(c==null||u==null)return!1;const t=h(c,u);if((t==null?void 0:t.projector)==null)return!1;if(t.projector===U)return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3]),!0;const{source:s,dest:f,projector:R}=t;if(f.spatialReferenceId===3){const n=l[s.spatialReferenceId][2];if(n==null)return!1;n(p(e),0,d,0),b(d,0,a,0);const o=M(d[1],e[2],e[3],m.radius);return I(r,a,o),!0}if(s.spatialReferenceId!==2&&s.spatialReferenceId!==5||f.spatialReferenceId!==11){R(p(e),0,a,0);const n=s.metersPerUnit??1,o=f.metersPerUnit??1,i=e[3]*n/o;I(r,a,i)}else{const n=l[s.spatialReferenceId][1],o=l[1][11];let i=e[3];n!=null&&o!=null&&(i=M(e[1],e[2],e[3],m.radius)),R(p(e),0,a,0),I(r,a,i)}return!0}function M(e,c,r,u){const t=u+c;if(t<u/2||r>t)return Number.MAX_VALUE;const s=Math.abs(A*e)+Math.asin(r/t);return s>=Math.PI/2?Number.MAX_VALUE:r/Math.cos(s)}const d=$(),a=$(),A=j(1);export{N as l};
