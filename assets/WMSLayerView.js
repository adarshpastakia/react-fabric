import{E as r,F as a,V as f,bl as g,b as p,ar as d}from"./ShadowCastClear.glsl.js";import{a as P}from"./ExportWMSImageParameters.js";import{i as E}from"./timeSupport.js";const b=u=>{const c=u;let t=class extends c{initialize(){this.exportImageParameters=new P({layer:this.layer})}destroy(){this.exportImageParameters=g(this.exportImageParameters)}get exportImageVersion(){var e;return(e=this.exportImageParameters)==null||e.commitProperty("version"),this.commitProperty("timeExtent"),(this._get("exportImageVersion")||0)+1}get timeExtent(){var e;return E(this.layer,(e=this.view)==null?void 0:e.timeExtent,this._get("timeExtent"))}async fetchPopupFeaturesAtLocation(e,l){const{layer:o}=this;if(!e)throw new p("wmslayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:o});const{popupEnabled:m}=o;if(!m)throw new p("wmslayerview:fetchPopupFeatures","popupEnabled should be true",{popupEnabled:m});const h=this.createFetchPopupFeaturesQuery(e);if(!h)return[];const{extent:s,width:i,height:n,x:y,y:w}=h;if(!(s&&i&&n))throw new p("wmslayerview:fetchPopupFeatures","WMSLayer does not support fetching features.",{extent:s,width:i,height:n});const x=await o.fetchFeatureInfo(s,i,n,y,w);return d(l),x}};return r([a()],t.prototype,"exportImageParameters",void 0),r([a({readOnly:!0})],t.prototype,"exportImageVersion",null),r([a()],t.prototype,"layer",void 0),r([a({readOnly:!0})],t.prototype,"timeExtent",null),t=r([f("esri.views.layers.WMSLayerView")],t),t};export{b as m};
