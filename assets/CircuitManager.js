const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./createCircuit.js","./ShadowCastClear.glsl.js","./iframe-DwvN93Ge.js","./iframe-CGchYWp9.css","./index.js","./Viewport.js","./Section.js","./ErrorBoundary.js","./createClass.js","./Global.js","./useIsDark.js","./debounce.js","./index2.js","./ShadowCastClear-Cq39gfL_.css","./EditCircuitsResult.js","./utils10.js","./applyEditsUtils.js","./MeshTransform.js","./editingSupport.js","./CreateAlterCircuitParameters.js","./alterCircuit.js","./deleteCircuits.js","./DeleteCircuitsParameters.js","./exportCircuits.js","./ExportCircuitsParameters.js","./verifyCircuits.js","./VerifyCircuitsParameters.js","./queryCircuits.js","./QueryCircuitsParameters.js"])))=>i.map(i=>d[i]);
import{b8 as l}from"./iframe-DwvN93Ge.js";import{D as g,bj as f,b as _,cm as p,dW as T,dX as d,dY as m,dZ as h,g as b,E as n,F as c,d_ as v,V as N}from"./ShadowCastClear.glsl.js";import"./index.js";import"./Viewport.js";import"./Section.js";import"./ErrorBoundary.js";import"./createClass.js";import"./Global.js";import"./useIsDark.js";import"./debounce.js";import"./index2.js";let a=class extends g{constructor(e){super(e),this._circuitTable=null,this._circuitSectionTable=null,this._subcircuitTable=null,this.telecomDomainNetwork=null,this.utilityNetwork=null}initialize(){this.addHandles([f(()=>[this.gdbVersion,this.historicMoment],()=>{this._setLayerVersionAndMoment(this._circuitTable),this._setLayerVersionAndMoment(this._circuitSectionTable),this._setLayerVersionAndMoment(this._subcircuitTable)})])}get _circuitTableUrl(){var i,r;if(this.telecomDomainNetwork==null)return null;const e=((r=(i=this.telecomDomainNetwork.circuitSources)==null?void 0:i.find(t=>t.utilityNetworkFeatureClassUsageType==="esriUNFCUTCircuit"))==null?void 0:r.layerId)??null;return e==null?null:`${this.featureServiceUrl}/${e}`}get _circuitSectionTableUrl(){var i,r;if(this.telecomDomainNetwork==null)return null;const e=((r=(i=this.telecomDomainNetwork.circuitSources)==null?void 0:i.find(t=>t.utilityNetworkFeatureClassUsageType==="esriUNFCUTCircuitSection"))==null?void 0:r.layerId)??null;return e==null?null:`${this.featureServiceUrl}/${e}`}get _subcircuitTableUrl(){var i,r;if(this.telecomDomainNetwork==null)return null;const e=((r=(i=this.telecomDomainNetwork.circuitSources)==null?void 0:i.find(t=>t.utilityNetworkFeatureClassUsageType==="esriUNFCUTSubcircuit"))==null?void 0:r.layerId)??null;return e==null?null:`${this.featureServiceUrl}/${e}`}get networkServiceUrl(){var e;return((e=this.utilityNetwork)==null?void 0:e.networkServiceUrl)??null}get featureServiceUrl(){var e;return((e=this.utilityNetwork)==null?void 0:e.featureServiceUrl)??null}get gdbVersion(){var e;return((e=this.utilityNetwork)==null?void 0:e.gdbVersion)??null}get historicMoment(){var e;return((e=this.utilityNetwork)==null?void 0:e.historicMoment)??null}get telecomDomainNetworkName(){var e;return((e=this.telecomDomainNetwork)==null?void 0:e.domainNetworkName)??null}get circuitTable(){if(this._circuitTable!=null)return this._circuitTable;if(this._circuitTableUrl==null)throw new _("circuit-manager:missing-circuit-table-url","Unable to load the circuit table; cannot get layer url from `telecomDomainNetwork.","Ensure `telecomDomainNetwork` was provided to the circuit manager.");return this._circuitTable=new p({url:this._circuitTableUrl,gdbVersion:this.gdbVersion,historicMoment:this.historicMoment}),this._circuitTable}get circuitSectionTable(){if(this._circuitSectionTable!=null)return this._circuitSectionTable;if(this._circuitSectionTableUrl==null)throw new _("circuit-manager:missing-circuit-section-table-url","Unable to load the circuit section table; cannot get layer url from `telecomDomainNetwork.","Ensure `telecomDomainNetwork` was provided to the circuit manager.");return this._circuitSectionTable=new p({url:this._circuitSectionTableUrl,gdbVersion:this.gdbVersion,historicMoment:this.historicMoment}),this._circuitSectionTable}get subcircuitTable(){if(this._subcircuitTable!=null)return this._subcircuitTable;if(this._subcircuitTableUrl==null)throw new _("circuit-manager:missing-subcircuit-table-url","Unable to load the subcircuit table; cannot get layer url from `telecomDomainNetwork.","Ensure `telecomDomainNetwork` was provided to the circuit manager.");return this._subcircuitTable=new p({url:this._subcircuitTableUrl,gdbVersion:this.gdbVersion,historicMoment:this.historicMoment}),this._subcircuitTable}async loadCircuitTable(){return this.circuitTable.load()}async loadCircuitSectionTable(){return this.circuitSectionTable.load()}async loadSubcircuitTable(){return this.subcircuitTable.load()}getCircuit(e,i=!1){return new T({circuitManager:this,name:e,sections:i?new Map:null})}async create(e){const[{createCircuit:i},{default:r}]=await Promise.all([l(()=>import("./createCircuit.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]),import.meta.url),l(()=>import("./CreateAlterCircuitParameters.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)]),t=r.from({circuit:e,domainNetworkName:this.telecomDomainNetworkName});d(this.featureServiceUrl,this.gdbVersion||null)?(t.sessionId=m,await h(this.featureServiceUrl,this.gdbVersion,!0)):t.sessionId=null,t.gdbVersion=this.gdbVersion;const o=b(this.featureServiceUrl,null,this.gdbVersion,!1),s=await i(this.networkServiceUrl,t);e.circuitManager=this,o.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:s.exceededTransferLimit,historicMoment:s.moment,editedFeatures:s.serviceEdits||void 0})}async alter(e){if(e.globalId==null)throw new _("circuit-manager:alter-without-globalid","A circuit being altered must have a globalId","To ensure the circuit has a globalId, query the circuit first");const[{alterCircuit:i},{default:r}]=await Promise.all([l(()=>import("./alterCircuit.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]),import.meta.url),l(()=>import("./CreateAlterCircuitParameters.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)]),t=r.from({circuit:e,domainNetworkName:this.telecomDomainNetworkName});d(this.featureServiceUrl,this.gdbVersion||null)?(t.sessionId=m,await h(this.featureServiceUrl,this.gdbVersion,!0)):t.sessionId=null,t.gdbVersion=this.gdbVersion;const o=b(this.featureServiceUrl,null,this.gdbVersion,!1),s=await i(this.networkServiceUrl,t);e.circuitManager=this,o.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:s.exceededTransferLimit,historicMoment:s.moment,editedFeatures:s.serviceEdits||void 0})}async delete(e){const[{deleteCircuits:i},{default:r}]=await Promise.all([l(()=>import("./deleteCircuits.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]),import.meta.url),l(()=>import("./DeleteCircuitsParameters.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)]),t=r.from({circuits:e,domainNetworkName:this.telecomDomainNetworkName});d(this.featureServiceUrl,this.gdbVersion||null)?(t.sessionId=m,await h(this.featureServiceUrl,this.gdbVersion,!0)):t.sessionId=null,t.gdbVersion=this.gdbVersion;const o=b(this.featureServiceUrl,null,this.gdbVersion,!1),s=await i(this.networkServiceUrl,t);o.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:s.exceededTransferLimit,historicMoment:s.moment,editedFeatures:s.serviceEdits||void 0})}async export(e){const[{exportCircuits:i},{default:r}]=await Promise.all([l(()=>import("./exportCircuits.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18]),import.meta.url),l(()=>import("./ExportCircuitsParameters.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)]),t=r.from(e);d(this.featureServiceUrl,this.gdbVersion||null)?(t.sessionId=m,await h(this.featureServiceUrl,this.gdbVersion,!0)):t.sessionId=null,t.domainNetworkName=this.telecomDomainNetworkName,t.gdbVersion=this.gdbVersion,t.moment=this.historicMoment;const o=b(this.featureServiceUrl,null,this.gdbVersion,!1),s=await i(this.networkServiceUrl,t);return o.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:s.exceededTransferLimit,historicMoment:s.moment,editedFeatures:s.serviceEdits||void 0}),s.circuits}async verify(e,i=!1){const[{verifyCircuits:r},{default:t}]=await Promise.all([l(()=>import("./verifyCircuits.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,13,15,16,17,18]),import.meta.url),l(()=>import("./VerifyCircuitsParameters.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)]),o=t.from({circuits:e,synthesizeGeometries:i,domainNetworkName:this.telecomDomainNetworkName});d(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionId=m,await h(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionId=null,o.gdbVersion=this.gdbVersion;const s=b(this.featureServiceUrl,null,this.gdbVersion,!1),u=await r(this.networkServiceUrl,o);return s.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:u.exceededTransferLimit,historicMoment:u.moment,editedFeatures:u.serviceEdits||void 0}),u.circuits}async queryCircuits(e){var u;const[{queryCircuits:i},{default:r}]=await Promise.all([l(()=>import("./queryCircuits.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url),l(()=>import("./QueryCircuitsParameters.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)]),t=Array.isArray(e)?{circuits:e}:e,o=r.from(t);d(this.featureServiceUrl,this.gdbVersion||null)?o.sessionId=m:o.sessionId=null,o.domainNetworkName=this.telecomDomainNetworkName,o.resultTypes=["circuit"],o.gdbVersion=this.gdbVersion,o.moment=this.historicMoment;const s=await i(this.networkServiceUrl,o);return(u=s.circuits)==null||u.forEach(w=>w.circuitManager=this),s.circuits||[]}async queryCircuitNames(e){const[{queryCircuits:i},{default:r}]=await Promise.all([l(()=>import("./queryCircuits.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url),l(()=>import("./QueryCircuitsParameters.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)]),t=r.from(e);return d(this.featureServiceUrl,this.gdbVersion||null)?t.sessionId=m:t.sessionId=null,t.domainNetworkName=this.telecomDomainNetworkName,t.resultTypes=["name"],t.gdbVersion=this.gdbVersion,t.moment=this.historicMoment,(await i(this.networkServiceUrl,t)).circuitNames||[]}_setLayerVersionAndMoment(e){e!=null&&(e.gdbVersion!==this.gdbVersion&&(e.gdbVersion=this.gdbVersion),e.historicMoment!==this.historicMoment&&(e.historicMoment=this.historicMoment))}};n([c()],a.prototype,"_circuitTable",void 0),n([c()],a.prototype,"_circuitSectionTable",void 0),n([c()],a.prototype,"_subcircuitTable",void 0),n([c({constructOnly:!0})],a.prototype,"telecomDomainNetwork",void 0),n([c({type:v,constructOnly:!0})],a.prototype,"utilityNetwork",void 0),n([c()],a.prototype,"networkServiceUrl",null),n([c()],a.prototype,"featureServiceUrl",null),n([c()],a.prototype,"gdbVersion",null),n([c()],a.prototype,"historicMoment",null),n([c()],a.prototype,"telecomDomainNetworkName",null),n([c()],a.prototype,"circuitTable",null),n([c()],a.prototype,"circuitSectionTable",null),n([c()],a.prototype,"subcircuitTable",null),a=n([N("esri.networks.CircuitManager")],a);const F=a;export{F as default};
