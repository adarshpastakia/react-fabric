import{ay as m,P as p,kF as u,H as c,hZ as y,nX as f,e5 as v,cl as P}from"./ShadowCastClear.glsl.js";import{v as g}from"./PivotQuery.js";import"./iframe-qDaPDssc.js";import"./index.js";import"./Viewport.js";import"./debounce.js";import"./index2.js";import"./Section.js";import"./ErrorBoundary.js";import"./createClass.js";import"./Global.js";import"./useIsDark.js";function l(r){const t=f(r),o=t.outPivots;if(o!=null&&o.length){for(const i of o)i.pivotType==="Pivot"&&i.pivotParameters.outStatistic?i.pivotParameters.outStatistic=JSON.stringify(i.pivotParameters.outStatistic):i.pivotType==="Unpivot"&&(i.unPivotParameters.sourceFields=i.unPivotParameters.sourceFields.join(","));t.outPivots=JSON.stringify(o)}return t}async function S(r,t,o){return await q(r,t,o)}async function q(r,t,o={}){const i=typeof r=="string"?m(r):r,a=t.geometry?[t.geometry]:[],e=await p(a,null,{signal:o.signal}),n=e==null?void 0:e[0];n!=null&&((t=t.clone()).geometry=n);const s=u({...i.query,f:"json",...l(t)});return c(y(i.path,"queryPivot"),{...o,query:{...s,...o.query}})}async function k(r,t,o){const i=v(r),a={...o},{data:e}=await S(i,g.from(t),a);return P.fromJSON(e)}export{k as executePivotQuery};
