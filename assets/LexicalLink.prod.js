var pa=Object.defineProperty;var _a=(n,e,t)=>e in n?pa(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var _e=(n,e,t)=>_a(n,typeof e!="symbol"?e+"":e,t);import{r as K,j as de,bC as fs}from"./iframe-DpfJK_wQ.js";function E(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Ne=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,ma=Ne&&"documentMode"in document?document.documentMode:null,Me=Ne&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),lt=Ne&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Bn=!(!Ne||!("InputEvent"in window)||ma)&&"getTargetRanges"in new window.InputEvent("input"),en=Ne&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),It=Ne&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ya=Ne&&/Android/.test(navigator.userAgent),$o=Ne&&/^(?=.*Chrome).*/i.test(navigator.userAgent),ds=Ne&&ya&&$o,zn=Ne&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!$o;function Io(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}const xa=1,Ca=3,va=9,Sa=11,at=0,Ro=1,Rt=2,ba=0,Ta=1,ka=2,Wn=4,Un=8,vi=128,Na=1792|(112|(3|Wn|Un)|vi),Si=1,bi=2,Ti=3,ki=4,Ni=5,wi=6,ir=en||It||zn?" ":"​",Ue=`

`,wa=lt?" ":ir,ct={bold:1,capitalize:1024,code:16,highlight:vi,italic:2,lowercase:256,strikethrough:Wn,subscript:32,superscript:64,underline:Un,uppercase:512},Ea={directionless:1,unmergeable:2},hs={center:bi,end:wi,justify:ki,left:Si,right:Ti,start:Ni},Oa={[bi]:"center",[wi]:"end",[ki]:"justify",[Si]:"left",[Ti]:"right",[Ni]:"start"},Ma={normal:0,segmented:2,token:1},Aa={[ba]:"normal",[ka]:"segmented",[Ta]:"token"},gs="$config";function Ko(n,e,t,r,i,s){let o=n.getFirstChild();for(;o!==null;){const l=o.__key;o.__parent===e&&(C(o)&&Ko(o,l,t,r,i,s),t.has(l)||s.delete(l),i.push(l)),o=o.getNextSibling()}}const Pa=100;let Wr=!1,Ei=0;function Da(n){Ei=n.timeStamp}function kr(n,e,t){const r=n.nodeName==="BR",i=e.__lexicalLineBreak;return i&&(n===i||r&&n.previousSibling===i)||r&&hr(n,t)!==void 0}function La(n,e,t){const r=ke(Ce(t));let i=null,s=null;r!==null&&r.anchorNode===n&&(i=r.anchorOffset,s=r.focusOffset);const o=n.nodeValue;o!==null&&Xi(e,o,i,s,!1)}function Fa(n,e,t){if(k(n)){const r=n.anchor.getNode();if(r.is(t)&&n.format!==r.getFormat())return!1}return Ve(e)&&t.isAttached()}function $a(n,e,t,r){for(let i=n;i&&!Fc(i);i=mn(i)){const s=hr(i,e);if(s!==void 0){const o=G(s,t);if(o)return B(o)||!j(i)?void 0:[i,o]}else if(i===r)return[r,Pl(t)]}}function Bo(n,e,t){Wr=!0;const r=performance.now()-Ei>Pa;try{fe(n,()=>{const i=M()||function(f){return f.getEditorState().read(()=>{const g=M();return g!==null?g.clone():null})}(n),s=new Map,o=n.getRootElement(),l=n._editorState,a=n._blockCursorElement;let c=!1,u="";for(let f=0;f<e.length;f++){const g=e[f],h=g.type,p=g.target,_=$a(p,n,l,o);if(!_)continue;const[y,m]=_;if(h==="characterData")r&&O(m)&&Ve(p)&&Fa(i,p,m)&&La(p,m,n);else if(h==="childList"){c=!0;const x=g.addedNodes;for(let v=0;v<x.length;v++){const N=x[v],T=Ml(N),b=N.parentNode;if(b!=null&&N!==a&&T===null&&!kr(N,b,n)){if(lt){const P=(j(N)?N.innerText:null)||N.nodeValue;P&&(u+=P)}b.removeChild(N)}}const S=g.removedNodes,w=S.length;if(w>0){let v=0;for(let N=0;N<w;N++){const T=S[N];(kr(T,p,n)||a===T)&&(p.appendChild(T),v++)}w!==v&&s.set(y,m)}}}if(s.size>0)for(const[f,g]of s)g.reconcileObservedMutation(f,n);const d=t.takeRecords();if(d.length>0){for(let f=0;f<d.length;f++){const g=d[f],h=g.addedNodes,p=g.target;for(let _=0;_<h.length;_++){const y=h[_],m=y.parentNode;m==null||y.nodeName!=="BR"||kr(y,p,n)||m.removeChild(y)}}t.takeRecords()}i!==null&&(c&&oe(i),lt&&$l(n)&&i.insertRawText(u))})}finally{Wr=!1}}function zo(n){const e=n._observer;e!==null&&Bo(n,e.takeRecords(),e)}function Wo(n){(function(e){Ei===0&&Ce(e).addEventListener("textInput",Da,!0)})(n),n._observer=new MutationObserver((e,t)=>{Bo(n,e,t)})}function Ia(n){const e=new Map,t=new Set;for(let r=typeof n=="function"?n:n.replace;r.prototype&&r.prototype.getType!==void 0;r=Object.getPrototypeOf(r)){const{ownNodeConfig:i}=ns(r);if(i&&i.stateConfigs)for(const s of i.stateConfigs){let o;"stateConfig"in s?(o=s.stateConfig,s.flat&&t.add(o.key)):o=s,e.set(o.key,o)}}return{flatKeys:t,sharedConfigMap:e}}let Ra=class Uo{constructor(e,t,r=void 0,i=new Map,s=void 0){this.node=e,this.sharedNodeState=t,this.unknownState=r,this.knownState=i;const{sharedConfigMap:o}=this.sharedNodeState,l=s!==void 0?s:function(a,c,u){let d=u.size;if(c)for(const f in c){const g=a.get(f);g&&u.has(g)||d++}return d}(o,r,i);this.size=l}getValue(e){const t=this.knownState.get(e);if(t!==void 0)return t;this.sharedNodeState.sharedConfigMap.set(e.key,e);let r=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){const i=this.unknownState[e.key];i!==void 0&&(r=e.parse(i)),this.updateFromKnown(e,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const e={...this.unknownState},t={};for(const[r,i]of this.knownState)r.isEqual(i,r.defaultValue)?delete e[r.key]:e[r.key]=r.unparse(i);for(const r of this.sharedNodeState.flatKeys)r in e&&(t[r]=e[r],delete e[r]);return ps(e)&&(t.$=e),t}getWritable(e){if(this.node===e)return this;const{sharedNodeState:t,unknownState:r}=this,i=new Map(this.knownState);return new Uo(e,t,function(s,o,l){let a;if(l)for(const[c,u]of Object.entries(l)){const d=s.get(c);d?o.has(d)||o.set(d,d.parse(u)):(a=a||{},a[c]=u)}return a}(t.sharedConfigMap,i,r),i,this.size)}updateFromKnown(e,t){const r=e.key;this.sharedNodeState.sharedConfigMap.set(r,e);const{knownState:i,unknownState:s}=this;i.has(e)||s&&r in s||(s&&(delete s[r],this.unknownState=ps(s)),this.size++),i.set(e,t)}updateFromUnknown(e,t){const r=this.sharedNodeState.sharedConfigMap.get(e);r?this.updateFromKnown(r,r.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){const{knownState:t}=this;for(const r of t.keys())t.set(r,r.defaultValue);if(this.size=t.size,this.unknownState=void 0,e)for(const[r,i]of Object.entries(e))this.updateFromUnknown(r,i)}};function Ka(n){const e=n.getWritable(),t=e.__state?e.__state.getWritable(e):new Ra(e,Jo(e));return e.__state=t,t}function Jo(n){return n.__state?n.__state.sharedNodeState:wl(pr(),n.getType()).sharedNodeState}function ps(n){if(n)for(const e in n)return n}function _s(n,e,t){for(const[r,i]of e.knownState){if(n.has(r.key))continue;n.add(r.key);const s=t?t.getValue(r):r.defaultValue;if(s!==i&&!r.isEqual(s,i))return!0}return!1}function ms(n,e,t){const{unknownState:r}=e,i=t?t.unknownState:void 0;if(r){for(const[s,o]of Object.entries(r))if(!n.has(s)&&(n.add(s),o!==(i?i[s]:void 0)))return!0}return!1}function ys(n,e){const t=n.__state;return t&&t.node===n?t.getWritable(e):t}function xs(n,e){const t=n.__mode,r=n.__format,i=n.__style,s=e.__mode,o=e.__format,l=e.__style,a=n.__state,c=e.__state;return(t===null||t===s)&&(r===null||r===o)&&(i===null||i===l)&&(n.__state===null||a===c||function(u,d){if(u===d)return!0;if(u&&d&&u.size!==d.size)return!1;const f=new Set;return!(u&&_s(f,u,d)||d&&_s(f,d,u)||u&&ms(f,u,d)||d&&ms(f,d,u))}(a,c))}function Cs(n,e){const t=n.mergeWithSibling(e),r=J()._normalizedNodes;return r.add(n.__key),r.add(e.__key),t}function vs(n){let e,t,r=n;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(e=r.getPreviousSibling())!==null&&O(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(xs(e,r)){r=Cs(e,r);break}break}e.remove()}for(;(t=r.getNextSibling())!==null&&O(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(xs(r,t)){r=Cs(r,t);break}break}t.remove()}}else r.remove()}function Kt(n){return Ss(n.anchor),Ss(n.focus),n}function Ss(n){for(;n.type==="element";){const e=n.getNode(),t=n.offset;let r,i;if(t===e.getChildrenSize()?(r=e.getChildAtIndex(t-1),i=!0):(r=e.getChildAtIndex(t),i=!1),O(r)){n.set(r.__key,i?r.getTextContentSize():0,"text",!0);break}if(!C(r))break;n.set(r.__key,i?r.getChildrenSize():0,"element",!0)}}let ut,se,tn,sr,Ur,Jr,ft,Te,jr,nn,Y="",we=null,Ee="",ze="",Ot=!1,Jn=!1;function jn(n,e){const t=ft.get(n);if(e!==null){const r=Yr(n);r.parentNode===e&&e.removeChild(r)}if(Te.has(n)||se._keyToDOMMap.delete(n),C(t)){const r=Hn(t,ft);Vr(r,0,r.length-1,null)}t!==void 0&&Qi(nn,tn,sr,t,"destroyed")}function Vr(n,e,t,r){let i=e;for(;i<=t;++i){const s=n[i];s!==void 0&&jn(s,r)}}function et(n,e){n.setProperty("text-align",e)}const Ba="40px";function jo(n,e){const t=ut.theme.indent;if(typeof t=="string"){const i=n.classList.contains(t);e>0&&!i?n.classList.add(t):e<1&&i&&n.classList.remove(t)}const r=getComputedStyle(n).getPropertyValue("--lexical-indent-base-value")||Ba;n.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${r})`)}function Vo(n,e){const t=n.style;e===0?et(t,""):e===Si?et(t,"left"):e===bi?et(t,"center"):e===Ti?et(t,"right"):e===ki?et(t,"justify"):e===Ni?et(t,"start"):e===wi&&et(t,"end")}function Hr(n,e){const t=function(r){const i=r.__dir;if(i!==null)return i;if(X(r))return null;const s=r.getParentOrThrow();return X(s)&&s.__dir===null?"auto":null}(e);t!==null?n.dir=t:n.removeAttribute("dir")}function Vn(n,e){const t=Te.get(n);t===void 0&&E(60);const r=t.createDOM(ut,se);if(function(i,s,o){const l=o._keyToDOMMap;(function(a,c,u){const d=`__lexicalKey_${c._key}`;a[d]=u})(s,o,i),l.set(i,s)}(n,r,se),O(t)?r.setAttribute("data-lexical-text","true"):B(t)&&r.setAttribute("data-lexical-decorator","true"),C(t)){const i=t.__indent,s=t.__size;if(Hr(r,t),i!==0&&jo(r,i),s!==0){const l=s-1;qr(Hn(t,Te),t,0,l,t.getDOMSlot(r))}const o=t.__format;o!==0&&Vo(r,o),t.isInline()||Ho(null,t,r),gr(t)&&(Y+=Ue,ze+=Ue)}else{const i=t.getTextContent();if(B(t)){const s=t.decorate(se,ut);s!==null&&qo(n,s),r.contentEditable="false"}Y+=i,ze+=i}return e!==null&&e.insertChild(r),Qi(nn,tn,sr,t,"created"),r}function qr(n,e,t,r,i){const s=Y;Y="";let o=t;for(;o<=r;++o){Vn(n[o],i);const l=Te.get(n[o]);l!==null&&O(l)&&(we===null&&(we=l.getFormat()),Ee===""&&(Ee=l.getStyle()))}gr(e)&&(Y+=Ue),i.element.__lexicalTextContent=Y,Y=s+Y}function bs(n,e){if(n){const t=n.__last;if(t){const r=e.get(t);if(r)return Ft(r)?"line-break":B(r)&&r.isInline()?"decorator":null}return"empty"}return null}function Ho(n,e,t){const r=bs(n,ft),i=bs(e,Te);r!==i&&e.getDOMSlot(t).setManagedLineBreak(i)}function za(n,e,t){var r;we=null,Ee="",function(i,s,o){const l=Y,a=i.__size,c=s.__size;Y="";const u=o.element;if(a===1&&c===1){const d=i.__first,f=s.__first;if(d===f)qt(d,u);else{const h=Yr(d),p=Vn(f,null);try{u.replaceChild(p,h)}catch(_){if(typeof _=="object"&&_!=null){const y=`${_.toString()} Parent: ${u.tagName}, new child: {tag: ${p.tagName} key: ${f}}, old child: {tag: ${h.tagName}, key: ${d}}.`;throw new Error(y)}throw _}jn(d,null)}const g=Te.get(f);O(g)&&(we===null&&(we=g.getFormat()),Ee===""&&(Ee=g.getStyle()))}else{const d=Hn(i,ft),f=Hn(s,Te);if(d.length!==a&&E(227),f.length!==c&&E(228),a===0)c!==0&&qr(f,s,0,c-1,o);else if(c===0){if(a!==0){const g=o.after==null&&o.before==null&&o.element.__lexicalLineBreak==null;Vr(d,0,a-1,g?null:u),g&&(u.textContent="")}}else(function(g,h,p,_,y,m){const x=_-1,S=y-1;let w,v,N=m.getFirstChild(),T=0,b=0;for(;T<=x&&b<=S;){const z=h[T],$=p[b];if(z===$)N=Nr(qt($,m.element)),T++,b++;else{w===void 0&&(w=new Set(h)),v===void 0&&(v=new Set(p));const V=v.has(z),ie=w.has($);if(V)if(ie){const ue=ht(se,$);ue===N?N=Nr(qt($,m.element)):(m.withBefore(N).insertChild(ue),qt($,m.element)),T++,b++}else Vn($,m.withBefore(N)),b++;else N=Nr(Yr(z)),jn(z,m.element),T++}const W=Te.get($);W!==null&&O(W)&&(we===null&&(we=W.getFormat()),Ee===""&&(Ee=W.getStyle()))}const P=T>x,L=b>S;if(P&&!L){const z=p[S+1],$=z===void 0?null:se.getElementByKey(z);qr(p,g,b,S,m.withBefore($))}else L&&!P&&Vr(h,T,x,m.element)})(s,d,f,a,c,o)}gr(s)&&(Y+=Ue),u.__lexicalTextContent=Y,Y=l+Y}(n,e,e.getDOMSlot(t)),r=e,we==null||we===r.__textFormat||Jn||r.setTextFormat(we),function(i){Ee===""||Ee===i.__textStyle||Jn||i.setTextStyle(Ee)}(e)}function Hn(n,e){const t=[];let r=n.__first;for(;r!==null;){const i=e.get(r);i===void 0&&E(101),t.push(r),r=i.__next}return t}function qt(n,e){const t=ft.get(n);let r=Te.get(n);t!==void 0&&r!==void 0||E(61);const i=Ot||Jr.has(n)||Ur.has(n),s=ht(se,n);if(t===r&&!i){if(C(t)){const o=s.__lexicalTextContent;o!==void 0&&(Y+=o,ze+=o)}else{const o=t.getTextContent();ze+=o,Y+=o}return s}if(t!==r&&i&&Qi(nn,tn,sr,r,"updated"),r.updateDOM(t,s,ut)){const o=Vn(n,null);return e===null&&E(62),e.replaceChild(o,s),jn(n,null),o}if(C(t)&&C(r)){const o=r.__indent;(Ot||o!==t.__indent)&&jo(s,o);const l=r.__format;if((Ot||l!==t.__format)&&Vo(s,l),i&&(za(t,r,s),X(r)||r.isInline()||Ho(t,r,s)),gr(r)&&(Y+=Ue,ze+=Ue),(Ot||r.__dir!==t.__dir)&&(Hr(s,r),X(r)&&!Ot))for(const a of r.getChildren())C(a)&&Hr(ht(se,a.getKey()),a)}else{const o=r.getTextContent();if(B(r)){const l=r.decorate(se,ut);l!==null&&qo(n,l)}Y+=o,ze+=o}if(!Jn&&X(r)&&r.__cachedText!==ze){const o=r.getWritable();o.__cachedText=ze,r=o}return s}function qo(n,e){let t=se._pendingDecorators;const r=se._decorators;if(t===null){if(r[n]===e)return;t=Al(se)}t[n]=e}function Nr(n){let e=n.nextSibling;return e!==null&&e===se._blockCursorElement&&(e=e.nextSibling),e}function Wa(n,e,t,r,i,s){Y="",ze="",Ot=r===Rt,se=t,ut=t._config,tn=t._nodes,sr=se._listeners.mutation,Ur=i,Jr=s,ft=n._nodeMap,Te=e._nodeMap,Jn=e._readOnly,jr=new Map(t._keyToDOMMap);const o=new Map;return nn=o,qt("root",null),se=void 0,tn=void 0,Ur=void 0,Jr=void 0,ft=void 0,Te=void 0,ut=void 0,jr=void 0,nn=void 0,o}function Yr(n){const e=jr.get(n);return e===void 0&&E(75,n),e}function D(n){return{type:n}}const Yo=D("SELECTION_CHANGE_COMMAND"),Ua=D("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),Go=D("CLICK_COMMAND"),it=D("DELETE_CHARACTER_COMMAND"),Pt=D("INSERT_LINE_BREAK_COMMAND"),rn=D("INSERT_PARAGRAPH_COMMAND"),Dt=D("CONTROLLED_TEXT_INSERTION_COMMAND"),Oi=D("PASTE_COMMAND"),Gr=D("REMOVE_TEXT_COMMAND"),sn=D("DELETE_WORD_COMMAND"),on=D("DELETE_LINE_COMMAND"),qe=D("FORMAT_TEXT_COMMAND"),Mi=D("UNDO_COMMAND"),Ai=D("REDO_COMMAND"),Ja=D("KEYDOWN_COMMAND"),Xo=D("KEY_ARROW_RIGHT_COMMAND"),ja=D("MOVE_TO_END"),Pi=D("KEY_ARROW_LEFT_COMMAND"),Va=D("MOVE_TO_START"),Di=D("KEY_ARROW_UP_COMMAND"),Li=D("KEY_ARROW_DOWN_COMMAND"),qn=D("KEY_ENTER_COMMAND"),Fi=D("KEY_SPACE_COMMAND"),Qo=D("KEY_BACKSPACE_COMMAND"),$i=D("KEY_ESCAPE_COMMAND"),Zo=D("KEY_DELETE_COMMAND"),el=D("KEY_TAB_COMMAND"),Ha=D("INSERT_TAB_COMMAND"),qa=D("INDENT_CONTENT_COMMAND"),Ts=D("OUTDENT_CONTENT_COMMAND"),tl=D("DROP_COMMAND"),Ya=D("FORMAT_ELEMENT_COMMAND"),nl=D("DRAGSTART_COMMAND"),rl=D("DRAGOVER_COMMAND"),Ga=D("DRAGEND_COMMAND"),or=D("COPY_COMMAND"),Ii=D("CUT_COMMAND"),Xr=D("SELECT_ALL_COMMAND"),Xa=D("CLEAR_EDITOR_COMMAND"),Qa=D("CLEAR_HISTORY_COMMAND"),kn=D("CAN_REDO_COMMAND"),Nn=D("CAN_UNDO_COMMAND"),Za=D("FOCUS_COMMAND"),ec=D("BLUR_COMMAND"),tc=D("KEY_MODIFIER_COMMAND"),Re=Object.freeze({}),Qr=30,Zr=[["keydown",function(n,e){if(Gt=n.timeStamp,il=n.key,!e.isComposing()&&!A(e,Ja,n)&&n.key!=null){if(wr&&Qs(n))return fe(e,()=>{wn(e,Er)}),wr=!1,void(Er="");if(function(t){return U(t,"ArrowRight",{shiftKey:"any"})}(n))A(e,Xo,n);else if(function(t){return U(t,"ArrowRight",Be)}(n))A(e,ja,n);else if(function(t){return U(t,"ArrowLeft",{shiftKey:"any"})}(n))A(e,Pi,n);else if(function(t){return U(t,"ArrowLeft",Be)}(n))A(e,Va,n);else if(function(t){return U(t,"ArrowUp",{altKey:"any",shiftKey:"any"})}(n))A(e,Di,n);else if(function(t){return U(t,"ArrowDown",{altKey:"any",shiftKey:"any"})}(n))A(e,Li,n);else if(function(t){return U(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(n))Xt=!0,A(e,qn,n);else if(function(t){return t.key===" "}(n))A(e,Fi,n);else if(function(t){return Me&&U(t,"o",{ctrlKey:!0})}(n))n.preventDefault(),Xt=!0,A(e,Pt,!0);else if(function(t){return U(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(n))Xt=!1,A(e,qn,n);else if(function(t){return U(t,"Backspace",{shiftKey:"any"})||Me&&U(t,"h",{ctrlKey:!0})}(n))Qs(n)?A(e,Qo,n):(n.preventDefault(),A(e,it,!0));else if(function(t){return t.key==="Escape"}(n))A(e,$i,n);else if(function(t){return U(t,"Delete",{})||Me&&U(t,"d",{ctrlKey:!0})}(n))(function(t){return t.key==="Delete"})(n)?A(e,Zo,n):(n.preventDefault(),A(e,it,!1));else if(function(t){return U(t,"Backspace",Xs)}(n))n.preventDefault(),A(e,sn,!0);else if(function(t){return U(t,"Delete",Xs)}(n))n.preventDefault(),A(e,sn,!1);else if(function(t){return Me&&U(t,"Backspace",{metaKey:!0})}(n))n.preventDefault(),A(e,on,!0);else if(function(t){return Me&&(U(t,"Delete",{metaKey:!0})||U(t,"k",{ctrlKey:!0}))}(n))n.preventDefault(),A(e,on,!1);else if(function(t){return U(t,"b",Be)}(n))n.preventDefault(),A(e,qe,"bold");else if(function(t){return U(t,"u",Be)}(n))n.preventDefault(),A(e,qe,"underline");else if(function(t){return U(t,"i",Be)}(n))n.preventDefault(),A(e,qe,"italic");else if(function(t){return U(t,"Tab",{shiftKey:"any"})}(n))A(e,el,n);else if(function(t){return U(t,"z",Be)}(n))n.preventDefault(),A(e,Mi,void 0);else if(function(t){return Me?U(t,"z",{metaKey:!0,shiftKey:!0}):U(t,"y",{ctrlKey:!0})||U(t,"z",{ctrlKey:!0,shiftKey:!0})}(n))n.preventDefault(),A(e,Ai,void 0);else{const t=e._editorState._selection;t===null||k(t)?Zs(n)&&(n.preventDefault(),A(e,Xr,n)):function(r){return U(r,"c",Be)}(n)?(n.preventDefault(),A(e,or,n)):function(r){return U(r,"x",Be)}(n)?(n.preventDefault(),A(e,Ii,n)):Zs(n)&&(n.preventDefault(),A(e,Xr,n))}(function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey})(n)&&A(e,tc,n)}}],["pointerdown",function(n,e){const t=n.target,r=n.pointerType;Wt(t)&&r!=="touch"&&r!=="pen"&&n.button===0&&fe(e,()=>{qs(t)||(ti=!0)})}],["compositionstart",function(n,e){fe(e,()=>{const t=M();if(k(t)&&!e.isComposing()){const r=t.anchor,i=t.anchor.getNode();re(r.key),(n.timeStamp<Gt+Qr||r.type==="element"||!t.isCollapsed()||i.getFormat()!==t.format||O(i)&&i.getStyle()!==t.style)&&A(e,Dt,wa)}})}],["compositionend",function(n,e){lt?Vt=!0:It||!en&&!zn?fe(e,()=>{wn(e,n.data)}):(wr=!0,Er=n.data)}],["input",function(n,e){n.stopPropagation(),fe(e,()=>{if(j(n.target)&&qs(n.target))return;const t=M(),r=n.data,i=cl(n);if(r!=null&&k(t)&&ll(t,i,r,n.timeStamp,!1)){Vt&&(wn(e,r),Vt=!1);const s=t.anchor.getNode(),o=ke(Ce(e));if(o===null)return;const l=t.isBackward(),a=l?t.anchor.offset:t.focus.offset,c=l?t.focus.offset:t.anchor.offset;Bn&&!t.isCollapsed()&&O(s)&&o.anchorNode!==null&&s.getTextContent().slice(0,a)+r+s.getTextContent().slice(a+c)===Fl(o.anchorNode)||A(e,Dt,r);const u=r.length;lt&&u>1&&n.inputType==="insertCompositionText"&&!e.isComposing()&&(t.anchor.offset-=u),en||It||zn||!e.isComposing()||(Gt=0,re(null))}else Gi(!1,e,r!==null?r:void 0),Vt&&(wn(e,r||void 0),Vt=!1);(function(){ne();const s=J();zo(s)})()},{event:n}),Mt=null}],["click",function(n,e){fe(e,()=>{const t=M(),r=ke(Ce(e)),i=St();if(r){if(k(t)){const s=t.anchor,o=s.getNode();if(s.type==="element"&&s.offset===0&&t.isCollapsed()&&!X(o)&&H().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&i!==null&&t.is(i))r.removeAllRanges(),t.dirty=!0;else if(n.detail===3&&!t.isCollapsed()&&o!==t.focus.getNode()){const l=function(a,c){let u=a;for(;u!==H()&&u!=null;){if(c(u))return u;u=u.getParent()}return null}(o,a=>C(a)&&!a.isInline());C(l)&&l.select(0)}}else if(n.pointerType==="touch"||n.pointerType==="pen"){const s=r.anchorNode;(j(s)||Ve(s))&&oe(ar(i,r,e,n))}}A(e,Go,n)})}],["cut",Re],["copy",Re],["dragstart",Re],["dragover",Re],["dragend",Re],["paste",Re],["focus",Re],["blur",Re],["drop",Re]];Bn&&Zr.push(["beforeinput",(n,e)=>function(t,r){const i=t.inputType,s=cl(t);i==="deleteCompositionText"||lt&&$l(r)||i!=="insertCompositionText"&&fe(r,()=>{const o=M();if(i==="deleteContentBackward"){if(o===null){const g=St();if(!k(g))return;oe(g.clone())}if(k(o)){const g=o.anchor.key===o.focus.key;if(l=t.timeStamp,il==="MediaLast"&&l<Gt+Qr&&r.isComposing()&&g){if(re(null),Gt=0,setTimeout(()=>{fe(r,()=>{re(null)})},Qr),k(o)){const h=o.anchor.getNode();h.markDirty(),O(h)||E(142),al(o,h)}}else{re(null),t.preventDefault();const h=o.anchor.getNode(),p=h.getTextContent(),_=h.canInsertTextAfter(),y=o.anchor.offset===0&&o.focus.offset===p.length;let m=ds&&g&&!y&&_;if(m&&o.isCollapsed()&&(m=!B(li(o.anchor,!0))),!m){A(r,it,!0);const x=M();ds&&k(x)&&x.isCollapsed()&&(nt=x,setTimeout(()=>nt=null))}}return}}var l;if(!k(o))return;const a=t.data;Mt!==null&&Gi(!1,r,Mt),o.dirty&&Mt===null||!o.isCollapsed()||X(o.anchor.getNode())||s===null||o.applyDOMRange(s),Mt=null;const c=o.anchor,u=o.focus,d=c.getNode(),f=u.getNode();if(i!=="insertText"&&i!=="insertTranspose")switch(t.preventDefault(),i){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":A(r,Dt,t);break;case"insertFromComposition":re(null),A(r,Dt,t);break;case"insertLineBreak":re(null),A(r,Pt,!1);break;case"insertParagraph":re(null),Xt&&!It?(Xt=!1,A(r,Pt,!1)):A(r,rn,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":A(r,Oi,t);break;case"deleteByComposition":(function(g,h){return g!==h||C(g)||C(h)||!st(g)||!st(h)})(d,f)&&A(r,Gr,t);break;case"deleteByDrag":case"deleteByCut":A(r,Gr,t);break;case"deleteContent":A(r,it,!1);break;case"deleteWordBackward":A(r,sn,!0);break;case"deleteWordForward":A(r,sn,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":A(r,on,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":A(r,on,!1);break;case"formatStrikeThrough":A(r,qe,"strikethrough");break;case"formatBold":A(r,qe,"bold");break;case"formatItalic":A(r,qe,"italic");break;case"formatUnderline":A(r,qe,"underline");break;case"historyUndo":A(r,Mi,void 0);break;case"historyRedo":A(r,Ai,void 0)}else{if(a===`
`)t.preventDefault(),A(r,Pt,!1);else if(a===Ue)t.preventDefault(),A(r,rn,void 0);else if(a==null&&t.dataTransfer){const g=t.dataTransfer.getData("text/plain");t.preventDefault(),o.insertRawText(g)}else a!=null&&ll(o,s,a,t.timeStamp,!0)?(t.preventDefault(),A(r,Dt,a)):Mt=a;sl=t.timeStamp}})}(n,e)]);let Gt=0,il=null,sl=0,Mt=null;const Yn=new WeakMap;let ei=!1,ti=!1,Xt=!1,Vt=!1,wr=!1,Er="",nt=null,ol=[0,"",0,"root",0];function ll(n,e,t,r,i){const s=n.anchor,o=n.focus,l=s.getNode(),a=J(),c=ke(Ce(a)),u=c!==null?c.anchorNode:null,d=s.key,f=a.getElementByKey(d),g=t.length;return d!==o.key||!O(l)||(!i&&(!Bn||sl<r+50)||l.isDirty()&&g<2||Dl(t))&&s.offset!==o.offset&&!l.isComposing()||Oe(l)||l.isDirty()&&g>1||(i||!Bn)&&f!==null&&!l.isComposing()&&u!==Bt(f)||c!==null&&e!==null&&(!e.collapsed||e.startContainer!==c.anchorNode||e.startOffset!==c.anchorOffset)||l.getFormat()!==n.format||l.getStyle()!==n.style||function(h,p){if(p.isSegmented())return!0;if(!h.isCollapsed())return!1;const _=h.anchor.offset,y=p.getParentOrThrow(),m=st(p);return _===0?!p.canInsertTextBefore()||!y.canInsertTextBefore()&&!p.isComposing()||m||function(x){const S=x.getPreviousSibling();return(O(S)||C(S)&&S.isInline())&&!S.canInsertTextAfter()}(p):_===p.getTextContentSize()&&(!p.canInsertTextAfter()||!y.canInsertTextAfter()&&!p.isComposing()||m)}(n,l)}function ks(n,e){return Ve(n)&&n.nodeValue!==null&&e!==0&&e!==n.nodeValue.length}function Ns(n,e,t){const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}=n;ei&&(ei=!1,ks(r,i)&&ks(s,o)&&!nt)||fe(e,()=>{if(!t)return void oe(null);if(!_n(e,r,s))return;let l=M();if(nt&&k(l)&&l.isCollapsed()){const a=l.anchor,c=nt.anchor;(a.key===c.key&&a.offset===c.offset+1||a.offset===1&&c.getNode().is(a.getNode().getPreviousSibling()))&&(l=nt.clone(),oe(l))}if(nt=null,k(l)){const a=l.anchor,c=a.getNode();if(l.isCollapsed()){n.type==="Range"&&n.anchorNode===n.focusNode&&(l.dirty=!0);const u=Ce(e).event,d=u?u.timeStamp:performance.now(),[f,g,h,p,_]=ol,y=H(),m=e.isComposing()===!1&&y.getTextContent()==="";if(d<_+200&&a.offset===h&&a.key===p)Fn(l,f,g);else if(a.type==="text")O(c)||E(141),al(l,c);else if(a.type==="element"&&!m){C(c)||E(259);const x=a.getNode();x.isEmpty()?function(S,w){const v=w.getTextFormat(),N=w.getTextStyle();Fn(S,v,N)}(l,x):Fn(l,0,"")}}else{const u=a.key,d=l.focus.key,f=l.getNodes(),g=f.length,h=l.isBackward(),p=h?o:i,_=h?i:o,y=h?d:u,m=h?u:d;let x=Na,S=!1;for(let w=0;w<g;w++){const v=f[w],N=v.getTextContentSize();if(O(v)&&N!==0&&!(w===0&&v.__key===y&&p===N||w===g-1&&v.__key===m&&_===0)&&(S=!0,x&=v.getFormat(),x===0))break}l.format=S?x:0}}A(e,Yo,void 0)})}function Fn(n,e,t){n.format===e&&n.style===t||(n.format=e,n.style=t,n.dirty=!0)}function al(n,e){Fn(n,e.getFormat(),e.getStyle())}function cl(n){if(!n.getTargetRanges)return null;const e=n.getTargetRanges();return e.length===0?null:e[0]}function wn(n,e){const t=n._compositionKey;if(re(null),t!==null&&e!=null){if(e===""){const r=G(t),i=Bt(n.getElementByKey(t));return void(i!==null&&i.nodeValue!==null&&O(r)&&Xi(r,i.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const r=M();if(k(r)){const i=r.focus;return r.anchor.set(i.key,i.offset,i.type),void A(n,qn,null)}}}Gi(!0,n,e)}function ul(n){let e=n.__lexicalEventHandles;return e===void 0&&(e=[],n.__lexicalEventHandles=e),e}const Lt=new Map;function fl(n){const e=Dc(n.target);if(e===null)return;const t=qi(e.anchorNode);if(t===null)return;ti&&(ti=!1,fe(t,()=>{const a=St(),c=e.anchorNode;(j(c)||Ve(c))&&oe(ar(a,e,t,n))}));const r=Yi(t),i=r[r.length-1],s=i._key,o=Lt.get(s),l=o||i;l!==t&&Ns(e,l,!1),Ns(e,t,!0),t!==i?Lt.set(s,t):o&&Lt.delete(s)}function ws(n){n._lexicalHandled=!0}function Es(n){return n._lexicalHandled===!0}function nc(n){const e=n.ownerDocument,t=Yn.get(e);if(t===void 0)return;const r=t-1;r>=0||E(164),Yn.set(e,r),r===0&&e.removeEventListener("selectionchange",fl);const i=dr(n);Hi(i)?(function(o){if(o._parentEditor!==null){const l=Yi(o),a=l[l.length-1]._key;Lt.get(a)===o&&Lt.delete(a)}else Lt.delete(o._key)}(i),n.__lexicalEditor=null):i&&E(198);const s=ul(n);for(let o=0;o<s.length;o++)s[o]();n.__lexicalEventHandles=[]}function ni(n,e,t){ne();const r=n.__key,i=n.getParent();if(i===null)return;const s=function(l){const a=M();if(!k(a)||!C(l))return a;const{anchor:c,focus:u}=a,d=c.getNode(),f=u.getNode();return ai(d,l)&&c.set(l.__key,0,"element"),ai(f,l)&&u.set(l.__key,0,"element"),a}(n);let o=!1;if(k(s)&&e){const l=s.anchor,a=s.focus;l.key===r&&(Xn(l,n,i,n.getPreviousSibling(),n.getNextSibling()),o=!0),a.key===r&&(Xn(a,n,i,n.getPreviousSibling(),n.getNextSibling()),o=!0)}else le(s)&&e&&n.isSelected()&&n.selectPrevious();if(k(s)&&e&&!o){const l=n.getIndexWithinParent();ot(n),Gn(s,i,l,-1)}else ot(n);t||ge(i)||i.canBeEmpty()||!i.isEmpty()||ni(i,e),e&&s&&X(i)&&i.isEmpty()&&i.selectEnd()}class zt{static getType(){const{ownNodeType:e}=ns(this);return e===void 0&&E(64,this.name),e}static clone(e){E(65,this.name)}$config(){return{}}config(e,t){const r=t.extends||Object.getPrototypeOf(this.constructor);return Object.assign(t,{extends:r,type:e}),{[e]:t}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Ol(this,e)}getType(){return this.__type}isInline(){E(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const t=G(e);if(t===null)break;e=t.__parent}return!1}isSelected(e){const t=e||M();if(t==null)return!1;const r=t.getNodes().some(i=>i.__key===this.__key);if(O(this))return r;if(k(t)&&t.anchor.type==="element"&&t.focus.type==="element"){if(t.isCollapsed())return!1;const i=this.getParent();if(B(this)&&this.isInline()&&i){const s=t.isBackward()?t.focus:t.anchor;if(i.is(s.getNode())&&s.offset===i.getChildrenSize()&&this.is(i.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let t=e.getFirstChild(),r=0;for(;t!==null;){if(this.is(t))return r;r++,t=t.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:G(e)}getParentOrThrow(){const e=this.getParent();return e===null&&E(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const t=e.getParent();if(ge(t))return C(e)||e===this&&B(e)||E(194),e;e=t}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&E(67,this.__key),e}getParents(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t),t=t.getParent();return e}getParentKeys(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:G(e)}getPreviousSiblings(){const e=[],t=this.getParent();if(t===null)return e;let r=t.getFirstChild();for(;r!==null&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:G(e)}getNextSiblings(){const e=[];let t=this.getNextSibling();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){const t=C(this)?this:this.getParent(),r=C(e)?e:e.getParent(),i=t&&r?Rn(t,r):null;return i?i.commonAncestor:null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){const t=Rn(this,e);return t!==null&&(t.type==="descendant"||(t.type==="branch"?zl(t)===-1:(t.type!=="same"&&t.type!=="ancestor"&&E(279),!1)))}isParentOf(e){const t=Rn(this,e);return t!==null&&t.type==="ancestor"}getNodesBetween(e){const t=this.isBefore(e),r=[],i=new Set;let s=this;for(;s!==null;){const o=s.__key;if(i.has(o)||(i.add(o),r.push(s)),s===e)break;const l=C(s)?t?s.getFirstChild():s.getLastChild():null;if(l!==null){s=l;continue}const a=t?s.getNextSibling():s.getPreviousSibling();if(a!==null){s=a;continue}const c=s.getParentOrThrow();if(i.has(c.__key)||r.push(c),c===e)break;let u=null,d=c;do{if(d===null&&E(68),u=t?d.getNextSibling():d.getPreviousSibling(),d=d.getParent(),d===null)break;u!==null||i.has(d.__key)||r.push(d)}while(u===null);s=u}return t||r.reverse(),r}isDirty(){const e=J()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){const e=G(this.__key);return e===null&&E(113),e}getWritable(){ne();const e=Ze(),t=J(),r=e._nodeMap,i=this.__key,s=this.getLatest(),o=t._cloneNotNeeded,l=M();if(l!==null&&l.setCachedNodes(null),o.has(i))return Zn(s),s;const a=es(s);return o.add(i),Zn(a),r.set(i,a),a}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){E(70)}updateDOM(e,t,r){E(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){const e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){E(18,this.name)}updateFromJSON(e){return function(t,r){const i=t.getWritable(),s=r.$;let o=s;for(const l of Jo(i).flatKeys)l in r&&(o!==void 0&&o!==s||(o={...s}),o[l]=r[l]);return(i.__state||o)&&Ka(t).updateFromJSON(o),i}(this,e)}static transform(){return null}remove(e){ni(this,!0,e)}replace(e,t){ne();let r=M();r!==null&&(r=r.clone()),Lr(this,e);const i=this.getLatest(),s=this.__key,o=e.__key,l=e.getWritable(),a=this.getParentOrThrow().getWritable(),c=a.__size;ot(l);const u=i.getPreviousSibling(),d=i.getNextSibling(),f=i.__prev,g=i.__next,h=i.__parent;if(ni(i,!1,!0),u===null?a.__first=o:u.getWritable().__next=o,l.__prev=f,d===null?a.__last=o:d.getWritable().__prev=o,l.__next=g,l.__parent=h,a.__size=c,t&&(C(this)&&C(l)||E(139),this.getChildren().forEach(p=>{l.append(p)})),k(r)){oe(r);const p=r.anchor,_=r.focus;p.key===s&&Ps(p,l),_.key===s&&Ps(_,l)}return Ye()===s&&re(o),l}insertAfter(e,t=!0){ne(),Lr(this,e);const r=this.getWritable(),i=e.getWritable(),s=i.getParent(),o=M();let l=!1,a=!1;if(s!==null){const g=e.getIndexWithinParent();if(ot(i),k(o)){const h=s.__key,p=o.anchor,_=o.focus;l=p.type==="element"&&p.key===h&&p.offset===g+1,a=_.type==="element"&&_.key===h&&_.offset===g+1}}const c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),d=i.__key,f=r.__next;if(c===null?u.__last=d:c.getWritable().__prev=d,u.__size++,r.__next=d,i.__next=f,i.__prev=r.__key,i.__parent=r.__parent,t&&k(o)){const g=this.getIndexWithinParent();Gn(o,u,g+1);const h=u.__key;l&&o.anchor.set(h,g+2,"element"),a&&o.focus.set(h,g+2,"element")}return e}insertBefore(e,t=!0){ne(),Lr(this,e);const r=this.getWritable(),i=e.getWritable(),s=i.__key;ot(i);const o=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),a=r.__prev,c=this.getIndexWithinParent();o===null?l.__first=s:o.getWritable().__next=s,l.__size++,r.__prev=s,i.__prev=a,i.__next=r.__key,i.__parent=r.__parent;const u=M();return t&&k(u)&&Gn(u,this.getParentOrThrow(),c),e}isParentRequired(){return!1}createParentElementNode(){return q()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){ne();const r=this.getPreviousSibling(),i=this.getParentOrThrow();if(r===null)return i.select(0,0);if(C(r))return r.select();if(!O(r)){const s=r.getIndexWithinParent()+1;return i.select(s,s)}return r.select(e,t)}selectNext(e,t){ne();const r=this.getNextSibling(),i=this.getParentOrThrow();if(r===null)return i.select();if(C(r))return r.select(0,0);if(!O(r)){const s=r.getIndexWithinParent();return i.select(s,s)}return r.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}class un extends zt{static getType(){return"linebreak"}static clone(e){return new un(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>function(t){const r=t.parentElement;if(r!==null&&er(r)){const i=r.firstChild;if(i===t||i.nextSibling===t&&En(i)){const s=r.lastChild;if(s===t||s.previousSibling===t&&En(s))return!0}}return!1}(e)||function(t){const r=t.parentElement;if(r!==null&&er(r)){const i=r.firstChild;if(i===t||i.nextSibling===t&&En(i))return!1;const s=r.lastChild;if(s===t||s.previousSibling===t&&En(s))return!0}return!1}(e)?null:{conversion:rc,priority:0}}}static importJSON(e){return dt().updateFromJSON(e)}}function rc(n){return{node:dt()}}function dt(){return $e(new un)}function Ft(n){return n instanceof un}function En(n){return Ve(n)&&/^( |\t|\r?\n)+$/.test(n.textContent||"")}function Or(n,e){return 16&e?"code":e&vi?"mark":32&e?"sub":64&e?"sup":null}function Mr(n,e){return 1&e?"strong":2&e?"em":"span"}function dl(n,e,t,r,i){const s=r.classList;let o=$t(i,"base");o!==void 0&&s.add(...o),o=$t(i,"underlineStrikethrough");let l=!1;const a=e&Un&&e&Wn;o!==void 0&&(t&Un&&t&Wn?(l=!0,a||s.add(...o)):a&&s.remove(...o));for(const c in ct){const u=ct[c];if(o=$t(i,c),o!==void 0)if(t&u){if(l&&(c==="underline"||c==="strikethrough")){e&u&&s.remove(...o);continue}e&u&&(!a||c!=="underline")&&c!=="strikethrough"||s.add(...o)}else e&u&&s.remove(...o)}}function hl(n,e,t){const r=e.firstChild,i=t.isComposing(),s=n+(i?ir:"");if(r==null)e.textContent=s;else{const o=r.nodeValue;if(o!==s)if(i||lt){const[l,a,c]=function(u,d){const f=u.length,g=d.length;let h=0,p=0;for(;h<f&&h<g&&u[h]===d[h];)h++;for(;p+h<f&&p+h<g&&u[f-p-1]===d[g-p-1];)p++;return[h,f-h-p,d.slice(h,g-p)]}(o,s);a!==0&&r.deleteData(l,a),r.insertData(l,c)}else r.nodeValue=s}}function Os(n,e,t,r,i,s){hl(i,n,e);const o=s.theme.text;o!==void 0&&dl(0,0,r,n,o)}function On(n,e){const t=document.createElement(e);return t.appendChild(n),t}class Ct extends zt{static getType(){return"text"}static clone(e){return new Ct(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return Aa[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Ye()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){const t=ct[e];return!!(this.getFormat()&t)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return Qn(this.getLatest().__format,e,t)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,t){const r=this.__format,i=Or(0,r),s=Mr(0,r),o=i===null?s:i,l=document.createElement(o);let a=l;this.hasFormat("code")&&l.setAttribute("spellcheck","false"),i!==null&&(a=document.createElement(s),l.appendChild(a)),Os(a,this,0,r,this.__text,e);const c=this.__style;return c!==""&&(l.style.cssText=c),l}updateDOM(e,t,r){const i=this.__text,s=e.__format,o=this.__format,l=Or(0,s),a=Or(0,o),c=Mr(0,s),u=Mr(0,o);if((l===null?c:l)!==(a===null?u:a))return!0;if(l===a&&c!==u){const p=t.firstChild;p==null&&E(48);const _=document.createElement(u);return Os(_,this,0,o,i,r),t.replaceChild(_,p),!1}let d=t;a!==null&&l!==null&&(d=t.firstChild,d==null&&E(49)),hl(i,d,this);const f=r.theme.text;f!==void 0&&s!==o&&dl(0,s,o,d,f);const g=e.__style,h=this.__style;return g!==h&&(t.style.cssText=h),!1}static importDOM(){return{"#text":()=>({conversion:lc,priority:0}),b:()=>({conversion:sc,priority:0}),code:()=>({conversion:Ke,priority:0}),em:()=>({conversion:Ke,priority:0}),i:()=>({conversion:Ke,priority:0}),mark:()=>({conversion:Ke,priority:0}),s:()=>({conversion:Ke,priority:0}),span:()=>({conversion:ic,priority:0}),strong:()=>({conversion:Ke,priority:0}),sub:()=>({conversion:Ke,priority:0}),sup:()=>({conversion:Ke,priority:0}),u:()=>({conversion:Ke,priority:0})}}static importJSON(e){return Z().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:t}=super.exportDOM(e);return j(t)||E(132),t.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?t.style.textTransform="lowercase":this.hasFormat("uppercase")?t.style.textTransform="uppercase":this.hasFormat("capitalize")&&(t.style.textTransform="capitalize"),this.hasFormat("bold")&&(t=On(t,"b")),this.hasFormat("italic")&&(t=On(t,"i")),this.hasFormat("strikethrough")&&(t=On(t,"s")),this.hasFormat("underline")&&(t=On(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){const t=this.getWritable();return t.__format=typeof e=="string"?ct[e]:e,t}setDetail(e){const t=this.getWritable();return t.__detail=typeof e=="string"?Ea[e]:e,t}setStyle(e){const t=this.getWritable();return t.__style=e,t}toggleFormat(e){const t=Qn(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const t=Ma[e];if(this.__mode===t)return this;const r=this.getWritable();return r.__mode=t,r}setTextContent(e){if(this.__text===e)return this;const t=this.getWritable();return t.__text=e,t}select(e,t){ne();let r=e,i=t;const s=M(),o=this.getTextContent(),l=this.__key;if(typeof o=="string"){const a=o.length;r===void 0&&(r=a),i===void 0&&(i=a)}else r=0,i=0;if(!k(s))return ml(l,r,l,i,"text","text");{const a=Ye();a!==s.anchor.key&&a!==s.focus.key||re(l),s.setTextNodeRange(this,r,this,i)}return s}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,r,i){const s=this.getWritable(),o=s.__text,l=r.length;let a=e;a<0&&(a=l+a,a<0&&(a=0));const c=M();if(i&&k(c)){const d=e+l;c.setTextNodeRange(s,d,s,d)}const u=o.slice(0,a)+r+o.slice(a+t);return s.__text=u,s}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){ne();const t=this.getLatest(),r=t.getTextContent();if(r==="")return[];const i=t.__key,s=Ye(),o=r.length;e.sort((T,b)=>T-b),e.push(o);const l=[],a=e.length;for(let T=0,b=0;T<o&&b<=a;b++){const P=e[b];P>T&&(l.push(r.slice(T,P)),T=P)}const c=l.length;if(c===1)return[t];const u=l[0],d=t.getParent();let f;const g=t.getFormat(),h=t.getStyle(),p=t.__detail;let _=!1,y=null,m=null;const x=M();if(k(x)){const[T,b]=x.isBackward()?[x.focus,x.anchor]:[x.anchor,x.focus];T.type==="text"&&T.key===i&&(y=T),b.type==="text"&&b.key===i&&(m=b)}t.isSegmented()?(f=Z(u),f.__format=g,f.__style=h,f.__detail=p,f.__state=ys(t,f),_=!0):f=t.setTextContent(u);const S=[f];for(let T=1;T<c;T++){const b=Z(l[T]);b.__format=g,b.__style=h,b.__detail=p,b.__state=ys(t,b);const P=b.__key;s===i&&re(P),S.push(b)}const w=y?y.offset:null,v=m?m.offset:null;let N=0;for(const T of S){if(!y&&!m)break;const b=N+T.getTextContentSize();if(y!==null&&w!==null&&w<=b&&w>=N&&(y.set(T.getKey(),w-N,"text"),w<b&&(y=null)),m!==null&&v!==null&&v<=b&&v>=N){m.set(T.getKey(),v-N,"text");break}N=b}if(d!==null){(function(P){const L=P.getPreviousSibling(),z=P.getNextSibling();L!==null&&Zn(L),z!==null&&Zn(z)})(this);const T=d.getWritable(),b=this.getIndexWithinParent();_?(T.splice(b,0,S),this.remove()):T.splice(b,1,S),k(x)&&Gn(x,d,b,c-1)}return S}mergeWithSibling(e){const t=e===this.getPreviousSibling();t||e===this.getNextSibling()||E(50);const r=this.__key,i=e.__key,s=this.__text,o=s.length;Ye()===i&&re(r);const l=M();if(k(l)){const d=l.anchor,f=l.focus;d!==null&&d.key===i&&Ks(d,t,r,e,o),f!==null&&f.key===i&&Ks(f,t,r,e,o)}const a=e.__text,c=t?a+s:s+a;this.setTextContent(c);const u=this.getWritable();return e.remove(),u}isTextEntity(){return!1}}function ic(n){return{forChild:Ri(n.style),node:null}}function sc(n){const e=n,t=e.style.fontWeight==="normal";return{forChild:Ri(e.style,t?void 0:"bold"),node:null}}const Ms=new WeakMap;function oc(n){if(!j(n))return!1;if(n.nodeName==="PRE")return!0;const e=n.style.whiteSpace;return typeof e=="string"&&e.startsWith("pre")}function lc(n){const e=n;n.parentElement===null&&E(129);let t=e.textContent||"";if(function(r){let i,s=r.parentNode;const o=[r];for(;s!==null&&(i=Ms.get(s))===void 0&&!oc(s);)o.push(s),s=s.parentNode;const l=i===void 0?s:i;for(let a=0;a<o.length;a++)Ms.set(o[a],l);return l}(e)!==null){const r=t.split(/(\r?\n|\t)/),i=[],s=r.length;for(let o=0;o<s;o++){const l=r[o];l===`
`||l===`\r
`?i.push(dt()):l==="	"?i.push(dn()):l!==""&&i.push(Z(l))}return{node:i}}if(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," "),t==="")return{node:null};if(t[0]===" "){let r=e,i=!0;for(;r!==null&&(r=As(r,!1))!==null;){const s=r.textContent||"";if(s.length>0){/[ \t\n]$/.test(s)&&(t=t.slice(1)),i=!1;break}}i&&(t=t.slice(1))}if(t[t.length-1]===" "){let r=e,i=!0;for(;r!==null&&(r=As(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(t=t.slice(0,t.length-1))}return t===""?{node:null}:{node:Z(t)}}function As(n,e){let t=n;for(;;){let r;for(;(r=e?t.nextSibling:t.previousSibling)===null;){const s=t.parentElement;if(s===null)return null;t=s}if(t=r,j(t)){const s=t.style.display;if(s===""&&!fi(t)||s!==""&&!s.startsWith("inline"))return null}let i=t;for(;(i=e?t.firstChild:t.lastChild)!==null;)t=i;if(Ve(t))return t;if(t.nodeName==="BR")return null}}const ac={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Ke(n){const e=ac[n.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:Ri(n.style,e),node:null}}function Z(n=""){return $e(new Ct(n))}function O(n){return n instanceof Ct}function Ri(n,e){const t=n.fontWeight,r=n.textDecoration.split(" "),i=t==="700"||t==="bold",s=r.includes("line-through"),o=n.fontStyle==="italic",l=r.includes("underline"),a=n.verticalAlign;return c=>(O(c)&&(i&&!c.hasFormat("bold")&&c.toggleFormat("bold"),s&&!c.hasFormat("strikethrough")&&c.toggleFormat("strikethrough"),o&&!c.hasFormat("italic")&&c.toggleFormat("italic"),l&&!c.hasFormat("underline")&&c.toggleFormat("underline"),a!=="sub"||c.hasFormat("subscript")||c.toggleFormat("subscript"),a!=="super"||c.hasFormat("superscript")||c.toggleFormat("superscript"),e&&!c.hasFormat(e)&&c.toggleFormat(e)),c)}class fn extends Ct{static getType(){return"tab"}static clone(e){return new fn(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){const t=super.createDOM(e),r=$t(e.theme,"tab");return r!==void 0&&t.classList.add(...r),t}static importJSON(e){return dn().updateFromJSON(e)}setTextContent(e){return e!=="	"&&e!==""&&E(126),super.setTextContent("	")}spliceText(e,t,r,i){return r===""&&t===0||r==="	"&&t===1||E(286),this}setDetail(e){return e!==2&&E(127),this}setMode(e){return e!=="normal"&&E(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function dn(){return $e(new fn)}function gl(n){return n instanceof fn}class cc{constructor(e,t,r){this._selection=null,this.key=e,this.offset=t,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:Bl(he(Fe(this,"next")),he(Fe(e,"next")))<0}getNode(){const e=G(this.key);return e===null&&E(20),e}set(e,t,r,i){const s=this._selection,o=this.key;i&&this.key===e&&this.offset===t&&this.type===r||(this.key=e,this.offset=t,this.type=r,hn()||(Ye()===o&&re(e),s!==null&&(s.setCachedNodes(null),s.dirty=!0)))}}function Le(n,e,t){return new cc(n,e,t)}function Ar(n,e){let t=e.__key,r=n.offset,i="element";if(O(e)){i="text";const s=e.getTextContentSize();r>s&&(r=s)}else if(!C(e)){const s=e.getNextSibling();if(O(s))t=s.__key,r=0,i="text";else{const o=e.getParent();o&&(t=o.__key,r=e.getIndexWithinParent()+1)}}n.set(t,r,i)}function Ps(n,e){if(C(e)){const t=e.getLastDescendant();C(t)||O(t)?Ar(n,t):Ar(n,e)}else Ar(n,e)}class lr{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!le(e))return!1;const t=this._nodes,r=e._nodes;return t.size===r.size&&Array.from(t).every(i=>r.has(i))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new lr(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.getNodes(),r=t.length,i=t[r-1];let s;if(O(i))s=i.select();else{const o=i.getIndexWithinParent()+1;s=i.getParentOrThrow().select(o,o)}s.insertNodes(e);for(let o=0;o<r;o++)t[o].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=this._nodes,r=[];for(const i of t){const s=G(i);s!==null&&r.push(s)}return hn()||(this._cachedNodes=r),r}getTextContent(){const e=this.getNodes();let t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}deleteNodes(){const e=this.getNodes();if((M()||St())===this&&e[0]){const t=Q(e[0],"next");Wl(Qe(t,t))}for(const t of e)t.remove()}}function k(n){return n instanceof vt}class vt{constructor(e,t,r,i){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=r,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!k(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=function(r){const i=[],[s,o]=r.getTextSlices();s&&i.push(s.caret.origin);const l=new Set,a=new Set;for(const c of r)if(ye(c)){const{origin:u}=c;i.length===0?l.add(u):(a.add(u),i.push(u))}else{const{origin:u}=c;C(u)&&a.has(u)||i.push(u)}if(o&&i.push(o.caret.origin),_t(r.focus)&&C(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let c=ce(r.focus.origin,"previous");ye(c)&&l.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(i[i.length-1]);c=_r(c))l.delete(c.origin),i.pop();for(;i.length>1;){const c=i[i.length-1];if(!C(c)||a.has(c)||c.isEmpty()||l.has(c))break;i.pop()}if(i.length===0&&r.isCollapsed()){const c=he(r.anchor),u=he(r.anchor.getFlipped()),d=g=>Pe(g)?g.origin:g.getNodeAtCaret(),f=d(c)||d(u)||(r.anchor.getNodeAtCaret()?c.origin:u.origin);i.push(f)}return i}(Jl(di(this),"next"));return hn()||(this._cachedNodes=t),t}setTextNodeRange(e,t,r,i){this.anchor.set(e.__key,t,"text"),this.focus.set(r.__key,i,"text")}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const t=e[0],r=e[e.length-1],i=this.anchor,s=this.focus,o=i.isBefore(s),[l,a]=ri(this);let c="",u=!0;for(let d=0;d<e.length;d++){const f=e[d];if(C(f)&&!f.isInline())u||(c+=`
`),u=!f.isEmpty();else if(u=!1,O(f)){let g=f.getTextContent();f===t?f===r?i.type==="element"&&s.type==="element"&&s.offset!==i.offset||(g=l<a?g.slice(l,a):g.slice(a,l)):g=o?g.slice(l):g.slice(a):f===r&&(g=o?g.slice(0,a):g.slice(0,l)),c+=g}else!B(f)&&!Ft(f)||f===r&&this.isCollapsed()||(c+=f.getTextContent())}return c}applyDOMRange(e){const t=J(),r=t.getEditorState()._selection,i=_l(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,r);if(i===null)return;const[s,o]=i;this.anchor.set(s.key,s.offset,s.type,!0),this.focus.set(o.key,o.offset,o.type,!0),Kt(this)}clone(){const e=this.anchor,t=this.focus;return new vt(Le(e.key,e.offset,e.type),Le(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=Qn(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const t=ct[e];return!!(this.format&t)}insertRawText(e){const t=e.split(/(\r?\n|\t)/),r=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];o===`
`||o===`\r
`?r.push(dt()):o==="	"?r.push(dn()):r.push(Z(o))}this.insertNodes(r)}insertText(e){const t=this.anchor,r=this.focus,i=this.format,s=this.style;let o=t,l=r;!this.isCollapsed()&&r.isBefore(t)&&(o=r,l=t),o.type==="element"&&function(_,y,m,x){const S=_.getNode(),w=S.getChildAtIndex(_.offset),v=Z();if(v.setFormat(m),v.setStyle(x),Ui(w))w.splice(0,0,[v]);else{const N=X(S)?q().append(v):v;w===null?S.append(N):w.insertBefore(N)}_.is(y)&&y.set(v.__key,0,"text"),_.set(v.__key,0,"text")}(o,l,i,s),l.type==="element"&&yt(l,he(Fe(l,"next")));const a=o.offset;let c=l.offset;const u=this.getNodes(),d=u.length;let f=u[0];O(f)||E(26);const g=f.getTextContent().length,h=f.getParentOrThrow();let p=u[d-1];if(d===1&&l.type==="element"&&(c=g,l.set(o.key,c,"text")),this.isCollapsed()&&a===g&&(Oe(f)||!f.canInsertTextAfter()||!h.canInsertTextAfter()&&f.getNextSibling()===null)){let _=f.getNextSibling();if(O(_)&&_.canInsertTextBefore()&&!Oe(_)||(_=Z(),_.setFormat(i),_.setStyle(s),h.canInsertTextAfter()?f.insertAfter(_):h.insertAfter(_)),_.select(0,0),f=_,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&a===0&&(Oe(f)||!f.canInsertTextBefore()||!h.canInsertTextBefore()&&f.getPreviousSibling()===null)){let _=f.getPreviousSibling();if(O(_)&&!Oe(_)||(_=Z(),_.setFormat(i),h.canInsertTextBefore()?f.insertBefore(_):h.insertBefore(_)),_.select(),f=_,e!=="")return void this.insertText(e)}else if(f.isSegmented()&&a!==g){const _=Z(f.getTextContent());_.setFormat(i),f.replace(_),f=_}else if(!this.isCollapsed()&&e!==""){const _=p.getParent();if(!h.canInsertTextBefore()||!h.canInsertTextAfter()||C(_)&&(!_.canInsertTextBefore()||!_.canInsertTextAfter()))return this.insertText(""),pl(this.anchor,this.focus,null),void this.insertText(e)}if(d===1){if(st(f)){const x=Z(e);return x.select(),void f.replace(x)}const _=f.getFormat(),y=f.getStyle();if(a!==c||_===i&&y===s){if(gl(f)){const x=Z(e);return x.setFormat(i),x.setStyle(s),x.select(),void f.replace(x)}}else{if(f.getTextContent()!==""){const x=Z(e);if(x.setFormat(i),x.setStyle(s),x.select(),a===0)f.insertBefore(x,!1);else{const[S]=f.splitText(a);S.insertAfter(x,!1)}return void(x.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}f.setFormat(i),f.setStyle(s)}const m=c-a;f=f.spliceText(a,m,e,!0),f.getTextContent()===""?f.remove():this.anchor.type==="text"&&(f.isComposing()?this.anchor.offset-=e.length:(this.format=_,this.style=y))}else{const _=new Set([...f.getParentKeys(),...p.getParentKeys()]),y=C(f)?f:f.getParentOrThrow();let m=C(p)?p:p.getParentOrThrow(),x=p;if(!y.is(m)&&m.isInline())do x=m,m=m.getParentOrThrow();while(m.isInline());if(l.type==="text"&&(c!==0||p.getTextContent()==="")||l.type==="element"&&p.getIndexWithinParent()<c)if(O(p)&&!st(p)&&c!==p.getTextContentSize()){if(p.isSegmented()){const T=Z(p.getTextContent());p.replace(T),p=T}X(l.getNode())||l.type!=="text"||(p=p.spliceText(0,c,"")),_.add(p.__key)}else{const T=p.getParentOrThrow();T.canBeEmpty()||T.getChildrenSize()!==1?p.remove():T.remove()}else _.add(p.__key);const S=m.getChildren(),w=new Set(u),v=y.is(m),N=y.isInline()&&f.getNextSibling()===null?y:f;for(let T=S.length-1;T>=0;T--){const b=S[T];if(b.is(f)||C(b)&&b.isParentOf(f))break;b.isAttached()&&(!w.has(b)||b.is(x)?v||N.insertAfter(b,!1):b.remove())}if(!v){let T=m,b=null;for(;T!==null;){const P=T.getChildren(),L=P.length;(L===0||P[L-1].is(b))&&(_.delete(T.__key),b=T),T=T.getParent()}}if(st(f))if(a===g)f.select();else{const T=Z(e);T.select(),f.replace(T)}else f=f.spliceText(a,g-a,e,!0),f.getTextContent()===""?f.remove():f.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);for(let T=1;T<d;T++){const b=u[T],P=b.__key;_.has(P)||b.remove()}}}removeText(){const e=M()===this;Kn(this,Uc(di(this))),e&&M()!==this&&oe(this)}formatText(e,t=null){if(this.isCollapsed())return this.toggleFormat(e),void re(null);const r=this.getNodes(),i=[];for(const S of r)O(S)&&i.push(S);const s=S=>{r.forEach(w=>{if(C(w)){const v=w.getFormatFlags(e,S);w.setTextFormat(v)}})},o=i.length;if(o===0)return this.toggleFormat(e),re(null),void s(t);const l=this.anchor,a=this.focus,c=this.isBackward(),u=c?a:l,d=c?l:a;let f=0,g=i[0],h=u.type==="element"?0:u.offset;if(u.type==="text"&&h===g.getTextContentSize()&&(f=1,g=i[1],h=0),g==null)return;const p=g.getFormatFlags(e,t);s(p);const _=o-1;let y=i[_];const m=d.type==="text"?d.offset:y.getTextContentSize();if(g.is(y)){if(h===m)return;if(Oe(g)||h===0&&m===g.getTextContentSize())g.setFormat(p);else{const S=g.splitText(h,m),w=h===0?S[0]:S[1];w.setFormat(p),u.type==="text"&&u.set(w.__key,0,"text"),d.type==="text"&&d.set(w.__key,m-h,"text")}return void(this.format=p)}h===0||Oe(g)||([,g]=g.splitText(h),h=0),g.setFormat(p);const x=y.getFormatFlags(e,p);m>0&&(m===y.getTextContentSize()||Oe(y)||([y]=y.splitText(m)),y.setFormat(x));for(let S=f+1;S<_;S++){const w=i[S],v=w.getFormatFlags(e,x);w.setFormat(v)}u.type==="text"&&u.set(g.__key,h,"text"),d.type==="text"&&d.set(y.__key,m,"text"),this.format=p|x}insertNodes(e){if(e.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const h=M();return k(h)||E(134),h.insertNodes(e)}const t=(this.isBackward()?this.focus:this.anchor).getNode(),r=$r(t,me),i=e[e.length-1];if(C(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const h=Pr(this);r.splice(h,0,e),i.selectEnd()}return}if(!e.some(h=>(C(h)||B(h))&&!h.isInline())){C(r)||E(211,t.constructor.name,t.getType());const h=Pr(this);return r.splice(h,0,e),void i.selectEnd()}const s=function(h){const p=q();let _=null;for(let y=0;y<h.length;y++){const m=h[y],x=Ft(m);if(x||B(m)&&m.isInline()||C(m)&&m.isInline()||O(m)||m.isParentRequired()){if(_===null&&(_=m.createParentElementNode(),p.append(_),x))continue;_!==null&&_.append(m)}else p.append(m),_=null}return p}(e),o=s.getLastDescendant(),l=s.getChildren(),a=!C(r)||!r.isEmpty()?this.insertParagraph():null,c=l[l.length-1];let u=l[0];var d;C(d=u)&&me(d)&&!d.isEmpty()&&C(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(C(r)||E(211,t.constructor.name,t.getType()),r.append(...u.getChildren()),u=l[1]),u&&(r===null&&E(212,t.constructor.name,t.getType()),function(h,p,_){const y=p.getParentOrThrow().getLastChild();let m=p;const x=[p];for(;m!==y;)m.getNextSibling()||E(140),m=m.getNextSibling(),x.push(m);let S=h;for(const w of x)S=S.insertAfter(w)}(r,u));const f=$r(o,me);a&&C(f)&&(a.canMergeWhenEmpty()||me(c))&&(f.append(...a.getChildren()),a.remove()),C(r)&&r.isEmpty()&&r.remove(),o.selectEnd();const g=C(r)?r.getLastChild():null;Ft(g)&&f!==r&&g.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=q();return H().splice(this.anchor.offset,0,[o]),o.select(),o}const e=Pr(this),t=$r(this.anchor.getNode(),me);C(t)||E(213);const r=t.getChildAtIndex(e),i=r?[r,...r.getNextSiblings()]:[],s=t.insertNewAfter(this,!1);return s?(s.append(...i),s.selectStart(),s):null}insertLineBreak(e){const t=dt();if(this.insertNodes([t]),e){const r=t.getParentOrThrow(),i=t.getIndexWithinParent();r.select(i,i)}}extract(){const e=this.getNodes(),t=e.length,r=t-1,i=this.anchor,s=this.focus;let o=e[0],l=e[r];const[a,c]=ri(this);if(t===0)return[];if(t===1){if(O(o)&&!this.isCollapsed()){const d=a>c?c:a,f=a>c?a:c,g=o.splitText(d,f),h=d===0?g[0]:g[1];return h!=null?[h]:[]}return[o]}const u=i.isBefore(s);if(O(o)){const d=u?a:c;d===o.getTextContentSize()?e.shift():d!==0&&([,o]=o.splitText(d),e[0]=o)}if(O(l)){const d=l.getTextContent().length,f=u?c:a;f===0?e.pop():f!==d&&([l]=l.splitText(f),e[r]=l)}return e}modify(e,t,r){if(Bs(this,e,t,r))return;const i=e==="move",s=J(),o=ke(Ce(s));if(!o)return;const l=s._blockCursorElement,a=s._rootElement,c=this.focus.getNode();if(a===null||l===null||!C(c)||c.isInline()||c.canBeEmpty()||ci(l,s,a),this.dirty){let u=ht(s,this.anchor.key),d=ht(s,this.focus.key);this.anchor.type==="text"&&(u=Bt(u)),this.focus.type==="text"&&(d=Bt(d)),u&&d&&xl(o,u,this.anchor.offset,d,this.focus.offset)}if(function(u,d,f,g){u.modify(d,f,g)}(o,e,t?"backward":"forward",r),o.rangeCount>0){const u=o.getRangeAt(0),d=this.anchor.getNode(),f=X(d)?d:Mc(d);if(this.applyDOMRange(u),this.dirty=!0,!i){const g=this.getNodes(),h=[];let p=!1;for(let _=0;_<g.length;_++){const y=g[_];ai(y,f)?h.push(y):p=!0}if(p&&h.length>0)if(t){const _=h[0];C(_)?_.selectStart():_.getParentOrThrow().selectStart()}else{const _=h[h.length-1];C(_)?_.selectEnd():_.getParentOrThrow().selectEnd()}o.anchorNode===u.startContainer&&o.anchorOffset===u.startOffset||function(_){const y=_.focus,m=_.anchor,x=m.key,S=m.offset,w=m.type;m.set(y.key,y.offset,y.type,!0),y.set(x,S,w,!0)}(this)}}r==="lineboundary"&&Bs(this,e,t,r,"decorators")}forwardDeletion(e,t,r){if(!r&&(e.type==="element"&&C(t)&&e.offset===t.getChildrenSize()||e.type==="text"&&e.offset===t.getTextContentSize())){const i=t.getParent(),s=t.getNextSibling()||(i===null?null:i.getNextSibling());if(C(s)&&s.isShadowRoot())return!0}return!1}deleteCharacter(e){const t=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let i=r.getNode();if(this.forwardDeletion(r,i,e))return;const s=os(Fe(r,e?"previous":"next"));if(s.getTextSlices().every(l=>l===null||l.distance===0)){let l={type:"initial"};for(const a of s.iterNodeCarets("shadowRoot"))if(ye(a)){if(!a.origin.isInline()){if(a.origin.isShadowRoot()){if(l.type==="merge-block")break;if(C(s.anchor.origin)&&s.anchor.origin.isEmpty()){const c=he(a);Kn(this,Qe(c,c)),s.anchor.origin.remove()}return}l.type!=="merge-next-block"&&l.type!=="merge-block"||(l={block:l.block,caret:a,type:"merge-block"})}}else{if(l.type==="merge-block")break;if(_t(a)){if(C(a.origin)){if(a.origin.isInline()){if(!a.origin.isParentOf(s.anchor.origin))break}else l={block:a.origin,type:"merge-next-block"};continue}if(B(a.origin)){if(!a.origin.isIsolated())if(l.type==="merge-next-block"&&(a.origin.isKeyboardSelectable()||!a.origin.isInline())&&C(s.anchor.origin)&&s.anchor.origin.isEmpty()){s.anchor.origin.remove();const c=yl();c.add(a.origin.getKey()),oe(c)}else a.origin.remove();return}break}}if(l.type==="merge-block"){const{caret:a,block:c}=l;return Kn(this,Qe(!a.origin.isEmpty()&&c.isEmpty()?yn(Q(c,a.direction)):s.anchor,a)),this.removeText()}}const o=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&r.offset===0&&Ls(this,r.getNode()))return}else{const l=o.type==="text"?o.getNode():null;if(i=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){const a=o.offset,c=l.getTextContentSize();if(l.is(i)||e&&a!==c||!e&&a!==0)return void Fs(l,e,a)}else if(i!==null&&i.isSegmented()){const a=r.offset,c=i.getTextContentSize();if(i.is(l)||e&&a!==0||!e&&a!==c)return void Fs(i,e,a)}(function(a,c){const u=a.anchor,d=a.focus,f=u.getNode(),g=d.getNode();if(f===g&&u.type==="text"&&d.type==="text"){const h=u.offset,p=d.offset,_=h<p,y=_?h:p,m=_?p:h,x=m-1;y!==x&&function(S){return!(Dl(S)||uc(S))}(f.getTextContent().slice(y,m))&&(c?d.set(d.key,x,d.type):u.set(u.key,x,u.type))}})(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&X(r.getParent())&&r.getPreviousSibling()===null&&Ls(this,r)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){const t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function le(n){return n instanceof lr}function Ds(n){const e=n.offset;if(n.type==="text")return e;const t=n.getNode();return e===t.getChildrenSize()?t.getTextContent().length:0}function ri(n){const e=n.getStartEndPoints();if(e===null)return[0,0];const[t,r]=e;return t.type==="element"&&r.type==="element"&&t.key===r.key&&t.offset===r.offset?[0,0]:[Ds(t),Ds(r)]}function Ls(n,e){for(let t=e;t;t=t.getParent()){if(C(t)){if(t.collapseAtStart(n))return!0;if(ge(t))break}if(t.getPreviousSibling())break}return!1}const uc=(()=>{try{const n=new RegExp("\\p{Emoji}","u"),e=n.test.bind(n);if(e("❤️")&&e("#️⃣")&&e("👍"))return e}catch{}return()=>!1})();function Fs(n,e,t){const r=n,i=r.getTextContent().split(/(?=\s)/g),s=i.length;let o=0,l=0;for(let c=0;c<s;c++){const u=c===s-1;if(l=o,o+=i[c].length,e&&o===t||o>t||u){i.splice(c,1),u&&(l=void 0);break}}const a=i.join("").trim();a===""?r.remove():(r.setTextContent(a),r.select(l,l))}function $s(n,e,t,r){let i,s=e;if(j(n)){let o=!1;const l=n.childNodes,a=l.length,c=r._blockCursorElement;s===a&&(o=!0,s=a-1);let u=l[s],d=!1;if(u===c)u=l[s+1],d=!0;else if(c!==null){const f=c.parentNode;n===f&&e>Array.prototype.indexOf.call(f.children,c)&&s--}if(i=At(u),O(i))s=De(i,o?"next":"previous");else{let f=At(n);if(f===null)return null;if(C(f)){const g=r.getElementByKey(f.getKey());g===null&&E(214),[f,s]=f.getDOMSlot(g).resolveChildIndex(f,g,n,e),C(f)||E(215),o&&s>=f.getChildrenSize()&&(s=Math.max(0,f.getChildrenSize()-1));let p=f.getChildAtIndex(s);if(C(p)&&function(_,y,m){const x=_.getParent();return m===null||x===null||!x.canBeEmpty()||x!==m.getNode()}(p,0,t)){const _=o?p.getLastDescendant():p.getFirstDescendant();_===null?f=p:(p=_,f=C(p)?p:p.getParentOrThrow()),s=0}O(p)?(i=p,f=null,s=De(p,o?"next":"previous")):p!==f&&o&&!d&&(C(f)||E(216),s=Math.min(f.getChildrenSize(),s+1))}else{const g=f.getIndexWithinParent();s=e===0&&B(f)&&At(n)===f?g:g+1,f=f.getParentOrThrow()}if(C(f))return Le(f.__key,s,"element")}}else i=At(n);return O(i)?Le(i.__key,De(i,s,"clamp"),"text"):null}function Is(n,e,t){const r=n.offset,i=n.getNode();if(r===0){const s=i.getPreviousSibling(),o=i.getParent();if(e){if((t||!e)&&s===null&&C(o)&&o.isInline()){const l=o.getPreviousSibling();O(l)&&n.set(l.__key,l.getTextContent().length,"text")}}else C(s)&&!t&&s.isInline()?n.set(s.__key,s.getChildrenSize(),"element"):O(s)&&n.set(s.__key,s.getTextContent().length,"text")}else if(r===i.getTextContent().length){const s=i.getNextSibling(),o=i.getParent();if(e&&C(s)&&s.isInline())n.set(s.__key,0,"element");else if((t||e)&&s===null&&C(o)&&o.isInline()&&!o.canInsertTextAfter()){const l=o.getNextSibling();O(l)&&n.set(l.__key,0,"text")}}}function pl(n,e,t){if(n.type==="text"&&e.type==="text"){const r=n.isBefore(e),i=n.is(e);Is(n,r,i),Is(e,!r,i),i&&e.set(n.key,n.offset,n.type);const s=J();if(s.isComposing()&&s._compositionKey!==n.key&&k(t)){const o=t.anchor,l=t.focus;n.set(o.key,o.offset,o.type,!0),e.set(l.key,l.offset,l.type,!0)}}}function _l(n,e,t,r,i,s){if(n===null||t===null||!_n(i,n,t))return null;const o=$s(n,e,k(s)?s.anchor:null,i);if(o===null)return null;const l=$s(t,r,k(s)?s.focus:null,i);if(l===null)return null;if(o.type==="element"&&l.type==="element"){const a=At(n),c=At(t);if(B(a)&&B(c))return null}return pl(o,l,s),[o,l]}function ii(n){return C(n)&&!n.isInline()}function ml(n,e,t,r,i,s){const o=Ze(),l=new vt(Le(n,e,i),Le(t,r,s),0,"");return l.dirty=!0,o._selection=l,l}function Ki(){const n=Le("root",0,"element"),e=Le("root",0,"element");return new vt(n,e,0,"")}function yl(){return new lr(new Set)}function _f(n,e){return ar(null,n,e,null)}function ar(n,e,t,r){const i=t._window;if(i===null)return null;const s=r||i.event,o=s?s.type:void 0,l=o==="selectionchange",a=!Wr&&(l||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&s&&s.detail===3||o==="drop"||o===void 0);let c,u,d,f;if(k(n)&&!a)return n.clone();if(e===null)return null;if(c=e.anchorNode,u=e.focusNode,d=e.anchorOffset,f=e.focusOffset,l&&k(n)&&!_n(t,c,u))return n.clone();const g=_l(c,d,u,f,t,n);if(g===null)return null;const[h,p]=g;return new vt(h,p,k(n)?n.format:0,k(n)?n.style:"")}function M(){return Ze()._selection}function St(){return J()._editorState._selection}function Gn(n,e,t,r=1){const i=n.anchor,s=n.focus,o=i.getNode(),l=s.getNode();if(!e.is(o)&&!e.is(l))return;const a=e.__key;if(n.isCollapsed()){const c=i.offset;if(t<=c&&r>0||t<c&&r<0){const u=Math.max(0,c+r);i.set(a,u,"element"),s.set(a,u,"element"),Rs(n)}}else{const c=n.isBackward(),u=c?s:i,d=u.getNode(),f=c?i:s,g=f.getNode();if(e.is(d)){const h=u.offset;(t<=h&&r>0||t<h&&r<0)&&u.set(a,Math.max(0,h+r),"element")}if(e.is(g)){const h=f.offset;(t<=h&&r>0||t<h&&r<0)&&f.set(a,Math.max(0,h+r),"element")}}Rs(n)}function Rs(n){const e=n.anchor,t=e.offset,r=n.focus,i=r.offset,s=e.getNode(),o=r.getNode();if(n.isCollapsed()){if(!C(s))return;const l=s.getChildrenSize(),a=t>=l,c=a?s.getChildAtIndex(l-1):s.getChildAtIndex(t);if(O(c)){let u=0;a&&(u=c.getTextContentSize()),e.set(c.__key,u,"text"),r.set(c.__key,u,"text")}}else{if(C(s)){const l=s.getChildrenSize(),a=t>=l,c=a?s.getChildAtIndex(l-1):s.getChildAtIndex(t);if(O(c)){let u=0;a&&(u=c.getTextContentSize()),e.set(c.__key,u,"text")}}if(C(o)){const l=o.getChildrenSize(),a=i>=l,c=a?o.getChildAtIndex(l-1):o.getChildAtIndex(i);if(O(c)){let u=0;a&&(u=c.getTextContentSize()),r.set(c.__key,u,"text")}}}}function Xn(n,e,t,r,i){let s=null,o=0,l=null;r!==null?(s=r.__key,O(r)?(o=r.getTextContentSize(),l="text"):C(r)&&(o=r.getChildrenSize(),l="element")):i!==null&&(s=i.__key,O(i)?l="text":C(i)&&(l="element")),s!==null&&l!==null?n.set(s,o,l):(o=e.getIndexWithinParent(),o===-1&&(o=t.getChildrenSize()),n.set(t.__key,o,"element"))}function Ks(n,e,t,r,i){n.type==="text"?n.set(t,n.offset+(e?0:i),"text"):n.offset>r.getIndexWithinParent()&&n.set(n.key,n.offset-1,"element")}function xl(n,e,t,r,i){try{n.setBaseAndExtent(e,t,r,i)}catch{}}function fc(n,e,t,r,i,s,o){const l=r.anchorNode,a=r.focusNode,c=r.anchorOffset,u=r.focusOffset,d=document.activeElement;if(i.has(yc)&&d!==s||d!==null&&Vi(d))return;if(!k(e))return void(n!==null&&_n(t,l,a)&&r.removeAllRanges());const f=e.anchor,g=e.focus,h=f.key,p=g.key,_=ht(t,h),y=ht(t,p),m=f.offset,x=g.offset,S=e.format,w=e.style,v=e.isCollapsed();let N=_,T=y,b=!1;if(f.type==="text"){N=Bt(_);const V=f.getNode();b=V.getFormat()!==S||V.getStyle()!==w}else k(n)&&n.anchor.type==="text"&&(b=!0);var P,L,z,$,W;if(g.type==="text"&&(T=Bt(y)),N!==null&&T!==null&&(v&&(n===null||b||k(n)&&(n.format!==S||n.style!==w))&&(P=S,L=w,z=m,$=h,W=performance.now(),ol=[P,L,z,$,W]),c!==m||u!==x||l!==N||a!==T||r.type==="Range"&&v||(d!==null&&s.contains(d)||s.focus({preventScroll:!0}),f.type==="element"))){if(xl(r,N,m,T,x),!i.has(xc)&&e.isCollapsed()&&s!==null&&s===document.activeElement){const V=k(e)&&e.anchor.type==="element"?N.childNodes[m]||null:r.rangeCount>0?r.getRangeAt(0):null;if(V!==null){let ie;if(V instanceof Text){const ue=document.createRange();ue.selectNode(V),ie=ue.getBoundingClientRect()}else ie=V.getBoundingClientRect();(function(ue,Nt,Ie){const Jt=Il(Ie),cs=Zi(Jt);if(Jt===null||cs===null)return;let{top:Sr,bottom:br}=Nt,Sn=0,bn=0,He=Ie;for(;He!==null;){const Tr=He===Jt.body;if(Tr)Sn=0,bn=Ce(ue).innerHeight;else{const Tn=He.getBoundingClientRect();Sn=Tn.top,bn=Tn.bottom}let jt=0;if(Sr<Sn?jt=-(Sn-Sr):br>bn&&(jt=br-bn),jt!==0)if(Tr)cs.scrollBy(0,jt);else{const Tn=He.scrollTop;He.scrollTop+=jt;const us=He.scrollTop-Tn;Sr-=us,br-=us}if(Tr)break;He=mn(He)}})(t,ie,s)}}ei=!0}}function dc(n){let e=M()||St();e===null&&(e=H().selectEnd()),e.insertNodes(n)}function Pr(n){let e=n;n.isCollapsed()||e.removeText();const t=M();k(t)&&(e=t),k(e)||E(161);const r=e.anchor;let i=r.getNode(),s=r.offset;for(;!me(i);){const o=i;if([i,s]=hc(i,s),o.is(i))break}return s}function hc(n,e){const t=n.getParent();if(!t){const i=q();return H().append(i),i.select(),[H(),0]}if(O(n)){const i=n.splitText(e);if(i.length===0)return[t,n.getIndexWithinParent()];const s=e===0?0:1;return[t,i[0].getIndexWithinParent()+s]}if(!C(n)||e===0)return[t,n.getIndexWithinParent()];const r=n.getChildAtIndex(e);if(r){const i=new vt(Le(n.__key,e,"element"),Le(n.__key,e,"element"),0,""),s=n.insertNewAfter(i);s&&s.append(r,...r.getNextSiblings())}return[t,n.getIndexWithinParent()+1]}function Bs(n,e,t,r,i="decorators-and-blocks"){if(e==="move"&&r==="character"&&!n.isCollapsed()){const[u,d]=t===n.isBackward()?[n.focus,n.anchor]:[n.anchor,n.focus];return d.set(u.key,u.offset,u.type),!0}const s=Fe(n.focus,t?"previous":"next"),o=r==="lineboundary",l=e==="move";let a=s,c=i==="decorators-and-blocks";if(!Ul(a)){for(const u of a){c=!1;const{origin:d}=u;if(!B(d)||d.isIsolated()||(a=u,!o||!d.isInline()))break}if(c)for(const u of os(s).iterNodeCarets(e==="extend"?"shadowRoot":"root")){if(ye(u))u.origin.isInline()||(a=u);else{if(C(u.origin))continue;B(u.origin)&&!u.origin.isInline()&&(a=u)}break}}if(a===s)return!1;if(l&&!o&&B(a.origin)&&a.origin.isKeyboardSelectable()){const u=yl();return u.add(a.origin.getKey()),oe(u),!0}return a=he(a),l&&yt(n.anchor,a),yt(n.focus,a),c||!o}let ee=null,te=null,ae=!1,Dr=!1,$n=0;const zs={characterData:!0,childList:!0,subtree:!0};function hn(){return ae||ee!==null&&ee._readOnly}function ne(){ae&&E(13)}function Cl(){$n>99&&E(14)}function Ze(){return ee===null&&E(195,vl()),ee}function J(){return te===null&&E(196,vl()),te}function vl(){let n=0;const e=new Set,t=fr.version;if(typeof window<"u")for(const i of document.querySelectorAll("[contenteditable]")){const s=dr(i);if(Hi(s))n++;else if(s){let o=String(s.constructor.version||"<0.17.1");o===t&&(o+=" (separately built, likely a bundler configuration issue)"),e.add(o)}}let r=` Detected on the page: ${n} compatible editor(s) with version ${t}`;return e.size&&(r+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),r}function gc(){return te}function Ws(n,e,t){const r=e.__type,i=wl(n,r);let s=t.get(r);s===void 0&&(s=Array.from(i.transforms),t.set(r,s));const o=s.length;for(let l=0;l<o&&(s[l](e),e.isAttached());l++);}function Us(n,e){return n!==void 0&&n.__key!==e&&n.isAttached()}function Sl(n,e){if(!e)return;const t=n._updateTags;let r=e;Array.isArray(e)||(r=[e]);for(const i of r)t.add(i)}function pc(n){return Bi(n,J()._nodes)}function Bi(n,e){const t=n.type,r=e.get(t);r===void 0&&E(17,t);const i=r.klass;n.type!==i.getType()&&E(18,i.name);const s=i.importJSON(n),o=n.children;if(C(s)&&Array.isArray(o))for(let l=0;l<o.length;l++){const a=Bi(o[l],e);s.append(a)}return s}function Js(n,e,t){const r=ee,i=ae,s=te;ee=e,ae=!0,te=n;try{return t()}finally{ee=r,ae=i,te=s}}function We(n,e){const t=n._pendingEditorState,r=n._rootElement,i=n._headless||r===null;if(t===null)return;const s=n._editorState,o=s._selection,l=t._selection,a=n._dirtyType!==at,c=ee,u=ae,d=te,f=n._updating,g=n._observer;let h=null;if(n._pendingEditorState=null,n._editorState=t,!i&&a&&g!==null){te=n,ee=t,ae=!1,n._updating=!0;try{const v=n._dirtyType,N=n._dirtyElements,T=n._dirtyLeaves;g.disconnect(),h=Wa(s,t,n,v,N,T)}catch(v){if(v instanceof Error&&n._onError(v),Dr)throw v;return Nl(n,null,r,t),Wo(n),n._dirtyType=Rt,Dr=!0,We(n,s),void(Dr=!1)}finally{g.observe(r,zs),n._updating=f,ee=c,ae=u,te=d}}t._readOnly||(t._readOnly=!0);const p=n._dirtyLeaves,_=n._dirtyElements,y=n._normalizedNodes,m=n._updateTags,x=n._deferred;a&&(n._dirtyType=at,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements=new Map,n._normalizedNodes=new Set,n._updateTags=new Set),function(v,N){const T=v._decorators;let b=v._pendingDecorators||T;const P=N._nodeMap;let L;for(L in b)P.has(L)||(b===T&&(b=Al(v)),delete b[L])}(n,t);const S=i?null:ke(Ce(n));if(n._editable&&S!==null&&(a||l===null||l.dirty)&&r!==null&&!m.has(Cc)){te=n,ee=t;try{if(g!==null&&g.disconnect(),a||l===null||l.dirty){const v=n._blockCursorElement;v!==null&&ci(v,n,r),fc(o,l,n,S,m,r)}(function(v,N,T){let b=v._blockCursorElement;if(k(T)&&T.isCollapsed()&&T.anchor.type==="element"&&N.contains(document.activeElement)){const P=T.anchor,L=P.getNode(),z=P.offset;let $=!1,W=null;if(z===L.getChildrenSize())Fr(L.getChildAtIndex(z-1))&&($=!0);else{const V=L.getChildAtIndex(z);if(V!==null&&Fr(V)){const ie=V.getPreviousSibling();(ie===null||Fr(ie))&&($=!0,W=v.getElementByKey(V.__key))}}if($){const V=v.getElementByKey(L.__key);return b===null&&(v._blockCursorElement=b=function(ie){const ue=ie.theme,Nt=document.createElement("div");Nt.contentEditable="false",Nt.setAttribute("data-lexical-cursor","true");let Ie=ue.blockCursor;if(Ie!==void 0){if(typeof Ie=="string"){const Jt=Io(Ie);Ie=ue.blockCursor=Jt}Ie!==void 0&&Nt.classList.add(...Ie)}return Nt}(v._config)),N.style.caretColor="transparent",void(W===null?V.appendChild(b):V.insertBefore(b,W))}}b!==null&&ci(b,v,N)})(n,r,l)}finally{g!==null&&g.observe(r,zs),te=d,ee=c}}h!==null&&function(v,N,T,b,P){const L=Array.from(v._listeners.mutation),z=L.length;for(let $=0;$<z;$++){const[W,V]=L[$];for(const ie of V){const ue=N.get(ie);ue!==void 0&&W(ue,{dirtyLeaves:b,prevEditorState:P,updateTags:T})}}}(n,h,m,p,s),k(l)||l===null||o!==null&&o.is(l)||n.dispatchCommand(Yo,void 0);const w=n._pendingDecorators;w!==null&&(n._decorators=w,n._pendingDecorators=null,Qt("decorator",n,!0,w)),function(v,N,T){const b=Ys(N),P=Ys(T);b!==P&&Qt("textcontent",v,!0,P)}(n,e||s,t),Qt("update",n,!0,{dirtyElements:_,dirtyLeaves:p,editorState:t,mutatedNodes:h,normalizedNodes:y,prevEditorState:e||s,tags:m}),function(v,N){if(v._deferred=[],N.length!==0){const T=v._updating;v._updating=!0;try{for(let b=0;b<N.length;b++)N[b]()}finally{v._updating=T}}}(n,x),function(v){const N=v._updates;if(N.length!==0){const T=N.shift();if(T){const[b,P]=T;cr(v,b,P)}}}(n)}function Qt(n,e,t,...r){const i=e._updating;e._updating=t;try{const s=Array.from(e._listeners[n]);for(let o=0;o<s.length;o++)s[o].apply(null,r)}finally{e._updating=i}}function js(n,e){const t=n._updates;let r=e||!1;for(;t.length!==0;){const i=t.shift();if(i){const[s,o]=i,l=n._pendingEditorState;let a;o!==void 0&&(a=o.onUpdate,o.skipTransforms&&(r=!0),o.discrete&&(l===null&&E(191),l._flushSync=!0),a&&n._deferred.push(a),Sl(n,o.tag)),l==null?cr(n,s,o):s()}}return r}function cr(n,e,t){const r=n._updateTags;let i,s=!1,o=!1;t!==void 0&&(i=t.onUpdate,Sl(n,t.tag),s=t.skipTransforms||!1,o=t.discrete||!1),i&&n._deferred.push(i);const l=n._editorState;let a=n._pendingEditorState,c=!1;(a===null||a._readOnly)&&(a=n._pendingEditorState=Tl(a||l),c=!0),a._flushSync=o;const u=ee,d=ae,f=te,g=n._updating;ee=a,ae=!1,n._updating=!0,te=n;const h=n._headless||n.getRootElement()===null;Ji(null);try{c&&(h?l._selection!==null&&(a._selection=l._selection.clone()):a._selection=function(m,x){const S=m.getEditorState()._selection,w=ke(Ce(m));return k(S)||S==null?ar(S,w,m,x):S.clone()}(n,t&&t.event||null));const _=n._compositionKey;e(),s=js(n,s),function(m,x){const S=x.getEditorState()._selection,w=m._selection;if(k(w)){const v=w.anchor,N=w.focus;let T;if(v.type==="text"&&(T=v.getNode(),T.selectionTransform(S,w)),N.type==="text"){const b=N.getNode();T!==b&&b.selectionTransform(S,w)}}}(a,n),n._dirtyType!==at&&(s?function(m,x){const S=x._dirtyLeaves,w=m._nodeMap;for(const v of S){const N=w.get(v);O(N)&&N.isAttached()&&N.isSimpleText()&&!N.isUnmergeable()&&vs(N)}}(a,n):function(m,x){const S=x._dirtyLeaves,w=x._dirtyElements,v=m._nodeMap,N=Ye(),T=new Map;let b=S,P=b.size,L=w,z=L.size;for(;P>0||z>0;){if(P>0){x._dirtyLeaves=new Set;for(const $ of b){const W=v.get($);O(W)&&W.isAttached()&&W.isSimpleText()&&!W.isUnmergeable()&&vs(W),W!==void 0&&Us(W,N)&&Ws(x,W,T),S.add($)}if(b=x._dirtyLeaves,P=b.size,P>0){$n++;continue}}x._dirtyLeaves=new Set,x._dirtyElements=new Map,L.delete("root")&&L.set("root",!0);for(const $ of L){const W=$[0],V=$[1];if(w.set(W,V),!V)continue;const ie=v.get(W);ie!==void 0&&Us(ie,N)&&Ws(x,ie,T)}b=x._dirtyLeaves,P=b.size,L=x._dirtyElements,z=L.size,$n++}x._dirtyLeaves=S,x._dirtyElements=w}(a,n),js(n),function(m,x,S,w){const v=m._nodeMap,N=x._nodeMap,T=[];for(const[b]of w){const P=N.get(b);P!==void 0&&(P.isAttached()||(C(P)&&Ko(P,b,v,N,T,w),v.has(b)||w.delete(b),T.push(b)))}for(const b of T)N.delete(b);for(const b of S){const P=N.get(b);P===void 0||P.isAttached()||(v.has(b)||S.delete(b),N.delete(b))}}(l,a,n._dirtyLeaves,n._dirtyElements)),_!==n._compositionKey&&(a._flushSync=!0);const y=a._selection;if(k(y)){const m=a._nodeMap,x=y.anchor.key,S=y.focus.key;m.get(x)!==void 0&&m.get(S)!==void 0||E(19)}else le(y)&&y._nodes.size===0&&(a._selection=null)}catch(_){return _ instanceof Error&&n._onError(_),n._pendingEditorState=l,n._dirtyType=Rt,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),void We(n)}finally{ee=u,ae=d,te=f,n._updating=g,$n=0}n._dirtyType!==at||n._deferred.length>0||function(_,y){const m=y.getEditorState()._selection,x=_._selection;if(x!==null){if(x.dirty||!x.is(m))return!0}else if(m!==null)return!0;return!1}(a,n)?a._flushSync?(a._flushSync=!1,We(n)):c&&Tc(()=>{We(n)}):(a._flushSync=!1,c&&(r.clear(),n._deferred=[],n._pendingEditorState=null))}function fe(n,e,t){te===n&&t===void 0?e():cr(n,e,t)}class Zt{constructor(e,t,r){this.element=e,this.before=t||null,this.after=r||null}withBefore(e){return new Zt(this.element,e,this.after)}withAfter(e){return new Zt(this.element,this.before,e)}withElement(e){return this.element===e?this:new Zt(e,this.before,this.after)}insertChild(e){const t=this.before||this.getManagedLineBreak();return t!==null&&t.parentElement!==this.element&&E(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&E(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&E(224),this.element.replaceChild(e,t),this}getFirstChild(){const e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){if(e===null)this.removeManagedLineBreak();else{const t=e==="decorator"&&(It||en);this.insertManagedLineBreak(t)}}removeManagedLineBreak(){const e=this.getManagedLineBreak();if(e){const t=this.element,r=e.nodeName==="IMG"?e.nextSibling:null;r&&t.removeChild(r),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){const t=this.getManagedLineBreak();if(t){if(e===(t.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,i=this.before,s=document.createElement("br");if(r.insertBefore(s,i),e){const o=document.createElement("img");o.setAttribute("data-lexical-linebreak","true"),o.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",o.alt="",r.insertBefore(o,s),r.__lexicalLineBreak=o}else r.__lexicalLineBreak=s}getFirstChildOffset(){let e=0;for(let t=this.after;t!==null;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,r,i){if(r===this.element){const a=this.getFirstChildOffset();return[e,Math.min(a+e.getChildrenSize(),Math.max(a,i))]}const s=Vs(t,r);s.push(i);const o=Vs(t,this.element);let l=e.getIndexWithinParent();for(let a=0;a<o.length;a++){const c=s[a],u=o[a];if(c===void 0||c<u)break;if(c>u){l+=1;break}}return[e.getParentOrThrow(),l]}}function Vs(n,e){const t=[];let r=e;for(;r!==n&&r!==null;r=r.parentNode){let i=0;for(let s=r.previousSibling;s!==null;s=s.previousSibling)i++;t.push(i)}return r!==n&&E(225),t.reverse()}class xe extends zt{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return Oa[e]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const e=J()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return t!==null&&t.is(e)}getAllTextNodes(){const e=[];let t=this.getFirstChild();for(;t!==null;){if(O(t)&&e.push(t),C(t)){const r=t.getAllTextNodes();e.push(...r)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;C(e);){const t=e.getFirstChild();if(t===null)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;C(e);){const t=e.getLastChild();if(t===null)break;e=t}return e}getDescendantByIndex(e){const t=this.getChildren(),r=t.length;if(e>=r){const s=t[r-1];return C(s)&&s.getLastDescendant()||s||null}const i=t[e];return C(i)&&i.getFirstDescendant()||i||null}getFirstChild(){const e=this.getLatest().__first;return e===null?null:G(e)}getFirstChildOrThrow(){const e=this.getFirstChild();return e===null&&E(45,this.__key),e}getLastChild(){const e=this.getLatest().__last;return e===null?null:G(e)}getLastChildOrThrow(){const e=this.getLastChild();return e===null&&E(96,this.__key),e}getChildAtIndex(e){const t=this.getChildrenSize();let r,i;if(e<t/2){for(r=this.getFirstChild(),i=0;r!==null&&i<=e;){if(i===e)return r;r=r.getNextSibling(),i++}return null}for(r=this.getLastChild(),i=t-1;r!==null&&i>=e;){if(i===e)return r;r=r.getPreviousSibling(),i--}return null}getTextContent(){let e="";const t=this.getChildren(),r=t.length;for(let i=0;i<r;i++){const s=t[i];e+=s.getTextContent(),C(s)&&i!==r-1&&!s.isInline()&&(e+=Ue)}return e}getTextContentSize(){let e=0;const t=this.getChildren(),r=t.length;for(let i=0;i<r;i++){const s=t[i];e+=s.getTextContentSize(),C(s)&&i!==r-1&&!s.isInline()&&(e+=Ue.length)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(e!==""){const t=hs[e];return!!(this.getFormat()&t)}return!1}hasTextFormat(e){const t=ct[e];return!!(this.getTextFormat()&t)}getFormatFlags(e,t){return Qn(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){ne();const r=M();let i=e,s=t;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&t===0){const a=this.getFirstChild();if(O(a)||C(a))return a.select(0,0)}else if(!(e!==void 0&&e!==o||t!==void 0&&t!==o)){const a=this.getLastChild();if(O(a)||C(a))return a.select()}}i===void 0&&(i=o),s===void 0&&(s=o);const l=this.__key;return k(r)?(r.anchor.set(l,i,"element"),r.focus.set(l,s,"element"),r.dirty=!0,r):ml(l,i,l,s,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach(t=>t.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=e!==""?hs[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){const t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){const t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,r){const i=r.length,s=this.getChildrenSize(),o=this.getWritable();e+t<=s||E(226,String(e),String(t),String(s));const l=o.__key,a=[],c=[],u=this.getChildAtIndex(e+t);let d=null,f=s-t+i;if(e!==0)if(e===s)d=this.getLastChild();else{const h=this.getChildAtIndex(e);h!==null&&(d=h.getPreviousSibling())}if(t>0){let h=d===null?this.getFirstChild():d.getNextSibling();for(let p=0;p<t;p++){h===null&&E(100);const _=h.getNextSibling(),y=h.__key;ot(h.getWritable()),c.push(y),h=_}}let g=d;for(let h=0;h<i;h++){const p=r[h];g!==null&&p.is(g)&&(d=g=g.getPreviousSibling());const _=p.getWritable();_.__parent===l&&f--,ot(_);const y=p.__key;if(g===null)o.__first=y,_.__prev=null;else{const m=g.getWritable();m.__next=y,_.__prev=m.__key}p.__key===l&&E(76),_.__parent=l,a.push(y),g=p}if(e+t===s)g!==null&&(g.getWritable().__next=null,o.__last=g.__key);else if(u!==null){const h=u.getWritable();if(g!==null){const p=g.getWritable();h.__prev=g.__key,p.__next=u.__key}else h.__prev=null}if(o.__size=f,c.length){const h=M();if(k(h)){const p=new Set(c),_=new Set(a),{anchor:y,focus:m}=h;Hs(y,p,_)&&Xn(y,y.getNode(),this,d,u),Hs(m,p,_)&&Xn(m,m.getNode(),this,d,u),f!==0||this.canBeEmpty()||ge(this)||this.remove()}}return o}getDOMSlot(e){return new Zt(e)}exportDOM(e){const{element:t}=super.exportDOM(e);if(j(t)){const r=this.getIndent();r>0&&(t.style.paddingInlineStart=40*r+"px");const i=this.getDirection();i&&(t.dir=i)}return{element:t}}exportJSON(){const e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),r=this.getTextStyle();return t!==0&&(e.textFormat=t),r!==""&&(e.textStyle=r),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){const r=this.getDOMSlot(e);let i=r.getFirstChild();for(let s=this.getFirstChild();s;s=s.getNextSibling()){const o=t.getElementByKey(s.getKey());o!==null&&(i==null?(r.insertChild(o),i=o):i!==o&&r.replaceChild(o,i),i=i.nextSibling)}}}function C(n){return n instanceof xe}function Hs(n,e,t){let r=n.getNode();for(;r;){const i=r.__key;if(e.has(i)&&!t.has(i))return!0;r=r.getParent()}return!1}class bl extends zt{decorate(e,t){E(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function B(n){return n instanceof bl}class gn extends xe{static getType(){return"root"}static clone(){return new gn}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){E(51)}getTextContent(){const e=this.__cachedText;return!hn()&&J()._dirtyType!==at||e===null?super.getTextContent():e}remove(){E(52)}replace(e){E(53)}insertBefore(e){E(54)}insertAfter(e){E(55)}updateDOM(e,t){return!1}splice(e,t,r){for(const i of r)C(i)||B(i)||E(282);return super.splice(e,t,r)}static importJSON(e){return H().updateFromJSON(e)}collapseAtStart(){return!0}}function X(n){return n instanceof gn}function Tl(n){return new ur(new Map(n._nodeMap))}function zi(){return new ur(new Map([["root",new gn]]))}function kl(n){const e=n.exportJSON(),t=n.constructor;if(e.type!==t.getType()&&E(130,t.name),C(n)){const r=e.children;Array.isArray(r)||E(59,t.name);const i=n.getChildren();for(let s=0;s<i.length;s++){const o=kl(i[s]);r.push(o)}}return e}class ur{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e,t){return Js(t&&t.editor||null,this,e)}clone(e){const t=new ur(this._nodeMap,e===void 0?this._selection:e);return t._readOnly=!0,t}toJSON(){return Js(null,this,()=>({root:kl(H())}))}}const si="historic",_c="history-push",In="history-merge",mc="paste",yc="collaboration",xc="skip-scroll-into-view",Cc="skip-dom-selection";class Wi extends xe{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class pn extends xe{static getType(){return"paragraph"}static clone(e){return new pn(e.__key)}createDOM(e){const t=document.createElement("p"),r=$t(e.theme,"paragraph");return r!==void 0&&t.classList.add(...r),t}updateDOM(e,t,r){return!1}static importDOM(){return{p:e=>({conversion:vc,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(j(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();r&&(t.style.textAlign=r)}return{element:t}}static importJSON(e){return q().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(e,t){const r=q();r.setTextFormat(e.format),r.setTextStyle(e.style);const i=this.getDirection();return r.setDirection(i),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,t),r}collapseAtStart(){const e=this.getChildren();if(e.length===0||O(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function vc(n){const e=q();return n.style&&(e.setFormat(n.style.textAlign),ts(n,e)),{node:e}}function q(){return $e(new pn)}function Ui(n){return n instanceof pn}const R=0,be=1,mf=3,Sc=4;function Nl(n,e,t,r){const i=n._keyToDOMMap;i.clear(),n._editorState=zi(),n._pendingEditorState=r,n._compositionKey=null,n._dirtyType=at,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),n._normalizedNodes=new Set,n._updateTags=new Set,n._updates=[],n._blockCursorElement=null;const s=n._observer;s!==null&&(s.disconnect(),n._observer=null),e!==null&&(e.textContent=""),t!==null&&(t.textContent="",i.set("root",t))}function yf(n){const e=n||{},t=gc(),r=e.theme||{},i=n===void 0?t:e.parentEditor||null,s=e.disableEvents||!1,o=zi(),l=e.namespace||(i!==null?i._config.namespace:Ll()),a=e.editorState,c=[gn,Ct,un,fn,pn,Wi,...e.nodes||[]],{onError:u,html:d}=e,f=e.editable===void 0||e.editable;let g;if(n===void 0&&t!==null)g=t._nodes;else{g=new Map;for(let p=0;p<c.length;p++){let _=c[p],y=null,m=null;if(typeof _!="function"){const N=_;_=N.replace,y=N.with,m=N.withKlass||null}const{ownNodeConfig:x}=ns(_),S=_.getType(),w=_.transform(),v=new Set;x&&x.$transform&&v.add(x.$transform),w!==null&&v.add(w),g.set(S,{exportDOM:d&&d.export?d.export.get(_):void 0,klass:_,replace:y,replaceWithKlass:m,sharedNodeState:Ia(c[p]),transforms:v})}}const h=new fr(o,i,g,{disableEvents:s,namespace:l,theme:r},u||console.error,function(p,_){const y=new Map,m=new Set,x=S=>{Object.keys(S).forEach(w=>{let v=y.get(w);v===void 0&&(v=[],y.set(w,v)),v.push(S[w])})};return p.forEach(S=>{const w=S.klass.importDOM;if(w==null||m.has(w))return;m.add(w);const v=w.call(S.klass);v!==null&&x(v)}),_&&x(_),y}(g,d?d.import:void 0),f,n);return a!==void 0&&(h._pendingEditorState=a,h._dirtyType=Rt),h}class fr{constructor(e,t,r,i,s,o,l,a){this._createEditorArgs=a,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=at,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Ll(),this._onError=s,this._htmlConversions=o,this._editable=l,this._headless=t!==null&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){const t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){const t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){const t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){const t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,r){r===void 0&&E(35);const i=this._commands;i.has(e)||i.set(e,[new Set,new Set,new Set,new Set,new Set]);const s=i.get(e);s===void 0&&E(36,String(e));const o=s[r];return o.add(t),()=>{o.delete(t),s.every(l=>l.size===0)&&i.delete(e)}}registerMutationListener(e,t,r){const i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,s=this._listeners.mutation;let o=s.get(t);o===void 0&&(o=new Set,s.set(t,o)),o.add(i);const l=r&&r.skipInitialization;return l!==void 0&&l||this.initializeMutationListener(t,i),()=>{o.delete(i),o.size===0&&s.delete(t)}}getRegisteredNode(e){const t=this._nodes.get(e.getType());return t===void 0&&E(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){const r=this._editorState,i=no(r).get(t.getType());if(!i)return;const s=new Map;for(const o of i.keys())s.set(o,"created");s.size>0&&e(s,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){const r=this.getRegisteredNode(e);return r.transforms.add(t),r}registerNodeTransform(e,t){const r=this.registerNodeTransformToKlass(e,t),i=[r],s=r.replaceWithKlass;if(s!=null){const o=this.registerNodeTransformToKlass(s,t);i.push(o)}return function(o,l){const a=no(o.getEditorState()),c=[];for(const u of l){const d=a.get(u);d&&c.push(d)}c.length!==0&&o.update(()=>{for(const u of c)for(const d of u.keys()){const f=G(d);f&&f.markDirty()}},o._pendingEditorState===null?{tag:In}:void 0)}(this,i.map(o=>o.klass.getType())),()=>{i.forEach(o=>o.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return A(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const t=this._rootElement;if(e!==t){const r=$t(this._config.theme,"root"),i=this._pendingEditorState||this._editorState;if(this._rootElement=e,Nl(this,t,e,i),t!==null&&(this._config.disableEvents||nc(t),r!=null&&t.classList.remove(...r)),e!==null){const s=Zi(e),o=e.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=s,this._dirtyType=Rt,Wo(this),this._updateTags.add(In),We(this),this._config.disableEvents||function(l,a){const c=l.ownerDocument,u=Yn.get(c);(u===void 0||u<1)&&c.addEventListener("selectionchange",fl),Yn.set(c,(u||0)+1),l.__lexicalEditor=a;const d=ul(l);for(let f=0;f<Zr.length;f++){const[g,h]=Zr[f],p=typeof h=="function"?_=>{Es(_)||(ws(_),(a.isEditable()||g==="click")&&h(_,a))}:_=>{if(Es(_))return;ws(_);const y=a.isEditable();switch(g){case"cut":return y&&A(a,Ii,_);case"copy":return A(a,or,_);case"paste":return y&&A(a,Oi,_);case"dragstart":return y&&A(a,nl,_);case"dragover":return y&&A(a,rl,_);case"dragend":return y&&A(a,Ga,_);case"focus":return y&&A(a,Za,_);case"blur":return y&&A(a,ec,_);case"drop":return y&&A(a,tl,_)}};l.addEventListener(g,p),d.push(()=>{l.removeEventListener(g,p)})}}(e,this),r!=null&&e.classList.add(...r)}else this._window=null,this._updateTags.add(In),We(this);Qt("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&E(38);let r=e;r._readOnly&&(r=Tl(e),r._selection=e._selection?e._selection.clone():null),zo(this);const i=this._pendingEditorState,s=this._updateTags,o=t!==void 0?t.tag:null;i===null||i.isEmpty()||(o!=null&&s.add(o),We(this)),this._pendingEditorState=r,this._dirtyType=Rt,this._dirtyElements.set("root",!1),this._compositionKey=null,o!=null&&s.add(o),this._updating||We(this)}parseEditorState(e,t){return function(r,i,s){const o=zi(),l=ee,a=ae,c=te,u=i._dirtyElements,d=i._dirtyLeaves,f=i._cloneNotNeeded,g=i._dirtyType;i._dirtyElements=new Map,i._dirtyLeaves=new Set,i._cloneNotNeeded=new Set,i._dirtyType=0,ee=o,ae=!1,te=i,Ji(null);try{const h=i._nodes;Bi(r.root,h),s&&s(),o._readOnly=!0}catch(h){h instanceof Error&&i._onError(h)}finally{i._dirtyElements=u,i._dirtyLeaves=d,i._cloneNotNeeded=f,i._dirtyType=g,ee=l,ae=a,te=c}return o}(typeof e=="string"?JSON.parse(e):e,this,t)}read(e){return We(this),this.getEditorState().read(e,{editor:this})}update(e,t){(function(r,i,s){r._updating?r._updates.push([i,s]):cr(r,i,s)})(this,e,t)}focus(e,t={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),fe(this,()=>{const i=M(),s=H();i!==null?i.dirty||oe(i.clone()):s.getChildrenSize()!==0&&(t.defaultSelection==="rootStart"?s.selectStart():s.selectEnd()),Ec("focus"),Oc(()=>{r.removeAttribute("autocapitalize"),e&&e()})}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const t=ke(this._window);t!==null&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,Qt("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}fr.version="0.35.0+prod.esm";let oi=null;function Ji(n){oi=n}let bc=1;function wl(n,e){const t=ji(n,e);return t===void 0&&E(30,e),t}function ji(n,e){return n._nodes.get(e)}const Tc=typeof queueMicrotask=="function"?queueMicrotask:n=>{Promise.resolve().then(n)};function qs(n){return B(Je(n))}function Vi(n){const e=document.activeElement;if(!j(e))return!1;const t=e.nodeName;return B(Je(n))&&(t==="INPUT"||t==="TEXTAREA"||e.contentEditable==="true"&&dr(e)==null)}function _n(n,e,t){const r=n.getRootElement();try{return r!==null&&r.contains(e)&&r.contains(t)&&e!==null&&!Vi(e)&&qi(e)===n}catch{return!1}}function Hi(n){return n instanceof fr}function qi(n){let e=n;for(;e!=null;){const t=dr(e);if(Hi(t))return t;e=mn(e)}return null}function dr(n){return n?n.__lexicalEditor:null}function st(n){return gl(n)||n.isToken()}function Oe(n){return st(n)||n.isSegmented()}function Ve(n){return Wt(n)&&n.nodeType===Ca}function kc(n){return Wt(n)&&n.nodeType===va}function Bt(n){let e=n;for(;e!=null;){if(Ve(e))return e;e=e.firstChild}return null}function Qn(n,e,t){const r=ct[e];if(t!==null&&(n&r)==(t&r))return n;let i=n^r;return e==="subscript"?i&=-65:e==="superscript"?i&=-33:e==="lowercase"?(i&=-513,i&=-1025):e==="uppercase"?(i&=-257,i&=-1025):e==="capitalize"&&(i&=-257,i&=-513),i}function El(n){return O(n)||Ft(n)||B(n)}function Ol(n,e){const t=function(){const o=oi;return oi=null,o}();if((e=e||t&&t.__key)!=null)return void(n.__key=e);ne(),Cl();const r=J(),i=Ze(),s=""+bc++;i._nodeMap.set(s,n),C(n)?r._dirtyElements.set(s,!0):r._dirtyLeaves.add(s),r._cloneNotNeeded.add(s),r._dirtyType=Ro,n.__key=s}function ot(n){const e=n.getParent();if(e!==null){const t=n.getWritable(),r=e.getWritable(),i=n.getPreviousSibling(),s=n.getNextSibling(),o=s!==null?s.__key:null,l=i!==null?i.__key:null,a=i!==null?i.getWritable():null,c=s!==null?s.getWritable():null;i===null&&(r.__first=o),s===null&&(r.__last=l),a!==null&&(a.__next=o),c!==null&&(c.__prev=l),t.__prev=null,t.__next=null,t.__parent=null,r.__size--}}function Zn(n){Cl();const e=n.getLatest(),t=e.__parent,r=Ze(),i=J(),s=r._nodeMap,o=i._dirtyElements;t!==null&&function(a,c,u){let d=a;for(;d!==null;){if(u.has(d))return;const f=c.get(d);if(f===void 0)break;u.set(d,!1),d=f.__parent}}(t,s,o);const l=e.__key;i._dirtyType=Ro,C(n)?o.set(l,!0):i._dirtyLeaves.add(l)}function re(n){ne();const e=J(),t=e._compositionKey;if(n!==t){if(e._compositionKey=n,t!==null){const r=G(t);r!==null&&r.getWritable()}if(n!==null){const r=G(n);r!==null&&r.getWritable()}}}function Ye(){return hn()?null:J()._compositionKey}function G(n,e){const t=(e||Ze())._nodeMap.get(n);return t===void 0?null:t}function Ml(n,e){const t=hr(n,J());return t!==void 0?G(t,e):null}function hr(n,e){return n[`__lexicalKey_${e._key}`]}function Je(n,e){let t=n;for(;t!=null;){const r=Ml(t,e);if(r!==null)return r;t=mn(t)}return null}function Al(n){const e=n._decorators,t=Object.assign({},e);return n._pendingDecorators=t,t}function Ys(n){return n.read(()=>H().getTextContent())}function H(){return Pl(Ze())}function Pl(n){return n._nodeMap.get("root")}function oe(n){ne();const e=Ze();n!==null&&(n.dirty=!0,n.setCachedNodes(null)),e._selection=n}function At(n){const e=J(),t=function(r,i){let s=r;for(;s!=null;){const o=hr(s,i);if(o!==void 0)return o;s=mn(s)}return null}(n,e);return t===null?n===e.getRootElement()?G("root"):null:G(t)}function Dl(n){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(n)}function Yi(n){const e=[];let t=n;for(;t!==null;)e.push(t),t=t._parentEditor;return e}function Ll(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function Fl(n){return Ve(n)?n.nodeValue:null}function Gi(n,e,t){const r=ke(Ce(e));if(r===null)return;const i=r.anchorNode;let{anchorOffset:s,focusOffset:o}=r;if(i!==null){let l=Fl(i);const a=Je(i);if(l!==null&&O(a)){if(l===ir&&t){const c=t.length;l=t,s=c,o=c}l!==null&&Xi(a,l,s,o,n)}}}function Xi(n,e,t,r,i){let s=n;if(s.isAttached()&&(i||!s.isDirty())){const o=s.isComposing();let l=e;(o||i)&&e[e.length-1]===ir&&(l=e.slice(0,-1));const a=s.getTextContent();if(i||l!==a){if(l===""){if(re(null),en||It||zn)s.remove();else{const p=J();setTimeout(()=>{p.update(()=>{s.isAttached()&&s.remove()})},20)}return}const c=s.getParent(),u=St(),d=s.getTextContentSize(),f=Ye(),g=s.getKey();if(s.isToken()||f!==null&&g===f&&!o||k(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===n.__key&&u.anchor.offset===0&&!s.canInsertTextBefore()&&!o||u.focus.key===n.__key&&u.focus.offset===d&&!s.canInsertTextAfter()&&!o))return void s.markDirty();const h=M();if(!k(h)||t===null||r===null)return void Gs(s,l,h);if(h.setTextNodeRange(s,t,s,r),s.isSegmented()){const p=Z(s.getTextContent());s.replace(p),s=p}Gs(s,l,h)}}}function Gs(n,e,t){if(n.setTextContent(e),k(t)){const r=n.getKey();for(const i of["anchor","focus"]){const s=t[i];s.type==="text"&&s.key===r&&(s.offset=De(n,s.offset,"clamp"))}}}function Mn(n,e,t){const r=e[t]||!1;return r==="any"||r===n[t]}function Nc(n,e){return Mn(n,e,"altKey")&&Mn(n,e,"ctrlKey")&&Mn(n,e,"shiftKey")&&Mn(n,e,"metaKey")}function U(n,e,t){return Nc(n,t)&&n.key.toLowerCase()===e.toLowerCase()}const Be={ctrlKey:!Me,metaKey:Me},Xs={altKey:Me,ctrlKey:!Me};function Qs(n){return n.key==="Backspace"}function Zs(n){return U(n,"a",Be)}function wc(n){const e=H();if(k(n)){const t=n.anchor,r=n.focus,i=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();return t.set(i.getKey(),0,"element"),r.set(i.getKey(),i.getChildrenSize(),"element"),Kt(n),n}{const t=e.select(0,e.getChildrenSize());return oe(Kt(t)),t}}function $t(n,e){n.__lexicalClassNameCache===void 0&&(n.__lexicalClassNameCache={});const t=n.__lexicalClassNameCache,r=t[e];if(r!==void 0)return r;const i=n[e];if(typeof i=="string"){const s=Io(i);return t[e]=s,s}return i}function Qi(n,e,t,r,i){if(t.size===0)return;const s=r.__type,o=r.__key,l=e.get(s);l===void 0&&E(33,s);const a=l.klass;let c=n.get(a);c===void 0&&(c=new Map,n.set(a,c));const u=c.get(o),d=u==="destroyed"&&i==="created";(u===void 0||d)&&c.set(o,d?"updated":i)}function eo(n,e,t){const r=n.getParent();let i=t,s=n;return r!==null&&(e&&t===0?(i=s.getIndexWithinParent(),s=r):e||t!==s.getChildrenSize()||(i=s.getIndexWithinParent()+1,s=r)),s.getChildAtIndex(e?i-1:i)}function li(n,e){const t=n.offset;if(n.type==="element")return eo(n.getNode(),e,t);{const r=n.getNode();if(e&&t===0||!e&&t===r.getTextContentSize()){const i=e?r.getPreviousSibling():r.getNextSibling();return i===null?eo(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):i}}return null}function $l(n){const e=Ce(n).event,t=e&&e.inputType;return t==="insertFromPaste"||t==="insertFromPasteAsQuotation"}function A(n,e,t){return function(r,i,s){const o=Yi(r);for(let l=4;l>=0;l--)for(let a=0;a<o.length;a++){const c=o[a],u=c._commands.get(i);if(u!==void 0){const d=u[l];if(d!==void 0){const f=Array.from(d),g=f.length;let h=!1;if(fe(c,()=>{for(let p=0;p<g;p++)if(f[p](s,r))return void(h=!0)}),h)return h}}}return!1}(n,e,t)}function gr(n){return!X(n)&&!n.isLastChild()&&!n.isInline()}function ht(n,e){const t=n._keyToDOMMap.get(e);return t===void 0&&E(75,e),t}function mn(n){const e=n.assignedSlot||n.parentElement;return ui(e)?e.host:e}function Il(n){return kc(n)?n:j(n)?n.ownerDocument:null}function Ec(n){ne(),J()._updateTags.add(n)}function Oc(n){ne(),J()._deferred.push(n)}function ai(n,e){let t=n.getParent();for(;t!==null;){if(t.is(e))return!0;t=t.getParent()}return!1}function Zi(n){const e=Il(n);return e?e.defaultView:null}function Ce(n){const e=n._window;return e===null&&E(78),e}function xf(n){return C(n)&&n.isInline()||B(n)&&n.isInline()}function Mc(n){let e=n.getParentOrThrow();for(;e!==null;){if(ge(e))return e;e=e.getParentOrThrow()}return e}function ge(n){return X(n)||C(n)&&n.isShadowRoot()}function Ac(n){const e=n.constructor.clone(n);return Ol(e,null),e.afterCloneFrom(n),e}function $e(n){const e=J(),t=n.getType(),r=ji(e,t);r===void 0&&E(200,n.constructor.name,t);const{replace:i,replaceWithKlass:s}=r;if(i!==null){const o=i(n),l=o.constructor;return s!==null?o instanceof s||E(201,s.name,s.getType(),l.name,l.getType(),n.constructor.name,t):o instanceof n.constructor&&l!==n.constructor||E(202,l.name,l.getType(),n.constructor.name,t),o.__key===n.__key&&E(203,n.constructor.name,t,l.name,l.getType()),o}return n}function Lr(n,e){!X(n.getParent())||C(e)||B(e)||E(99)}function Pc(n){const e=G(n);return e===null&&E(63,n),e}function Fr(n){return(B(n)||C(n)&&!n.canBeEmpty())&&!n.isInline()}function ci(n,e,t){t.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=n.parentElement;r!==null&&r.removeChild(n)}function ke(n){return Ne?(n||window).getSelection():null}function Dc(n){const e=Zi(n);return e?e.getSelection():null}function Rl(n){return j(n)&&n.tagName==="A"}function j(n){return Wt(n)&&n.nodeType===xa}function Wt(n){return typeof n=="object"&&n!==null&&"nodeType"in n&&typeof n.nodeType=="number"}function ui(n){return Wt(n)&&n.nodeType===Sa}function fi(n){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return n.nodeName.match(e)!==null}function er(n){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return n.nodeName.match(e)!==null}function me(n){if(B(n)&&!n.isInline())return!0;if(!C(n)||ge(n))return!1;const e=n.getFirstChild(),t=e===null||Ft(e)||O(e)||e.isInline();return!n.isInline()&&n.canBeEmpty()!==!1&&t}function $r(n,e){let t=n;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function pr(){return J()}const to=new WeakMap,Lc=new Map;function no(n){if(!n._readOnly&&n.isEmpty())return Lc;n._readOnly||E(192);let e=to.get(n);return e||(e=function(t){const r=new Map;for(const[i,s]of t._nodeMap){const o=s.__type;let l=r.get(o);l||(l=new Map,r.set(o,l)),l.set(i,s)}return r}(n),to.set(n,e)),e}function es(n){const e=n.constructor.clone(n);return e.afterCloneFrom(n),e}function ts(n,e){const t=parseInt(n.style.paddingInlineStart,10)||0,r=Math.round(t/40);e.setIndent(r)}function Cf(n){n.__lexicalUnmanaged=!0}function Fc(n){return n.__lexicalUnmanaged===!0}function Ht(n,e){return function(t,r){return Object.prototype.hasOwnProperty.call(t,r)}(n,e)&&n[e]!==zt[e]}function ns(n){const e=gs in n.prototype?n.prototype[gs]():void 0,t=function(o){return o===bl||o===xe||o===zt}(n),r=!t&&Ht(n,"getType")?n.getType():void 0;let i,s=r;if(e)if(r)i=e[r];else for(const[o,l]of Object.entries(e))s=o,i=l;if(!t&&s&&(Ht(n,"getType")||(n.getType=()=>s),Ht(n,"clone")||(n.clone=o=>(Ji(o),new n)),Ht(n,"importJSON")||(n.importJSON=i&&i.$importJSON||(o=>new n().updateFromJSON(o))),!Ht(n,"importDOM")&&i)){const{importDOM:o}=i;o&&(n.importDOM=()=>o)}return{ownNodeConfig:i,ownNodeType:s}}function vf(n){const e=pr();return ne(),new(e.resolveRegisteredNodeAfterReplacements(e.getRegisteredNode(n))).klass}const $c={next:"previous",previous:"next"};class rs{constructor(e){this.origin=e}[Symbol.iterator](){return ls({hasNext:_t,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return Q(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Q(this.origin,this.direction)}remove(){const e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){const r=this.getNodeAtCaret();return e.is(this.origin)||e.is(r)||(r===null?this.insert(e):r.replace(e,t)),this}splice(e,t,r="next"){const i=r===this.direction?t:Array.from(t).reverse();let s=this;const o=this.getParentAtCaret(),l=new Map;for(let a=s.getAdjacentCaret();a!==null&&l.size<e;a=a.getAdjacentCaret()){const c=a.origin.getWritable();l.set(c.getKey(),c)}for(const a of i){if(l.size>0){const c=s.getNodeAtCaret();if(c){if(l.delete(c.getKey()),l.delete(a.getKey()),!(c.is(a)||s.origin.is(a))){const u=a.getParent();u&&u.is(o)&&a.remove(),c.replace(a)}}else c===null&&E(263,Array.from(l).join(" "))}else s.insert(a);s=Q(a,this.direction)}for(const a of l.values())a.remove();return this}}class ln extends rs{constructor(){super(...arguments);_e(this,"type","child")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:ce(t,this.direction)}getParentCaret(t="root"){return Q(is(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=bt(this.direction);return Q(this.getNodeAtCaret(),t)||ce(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof ln&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const Ic={root:X,shadowRoot:ge};function bt(n){return $c[n]}function is(n,e="root"){return Ic[e](n)?null:n}class gt extends rs{constructor(){super(...arguments);_e(this,"type","sibling")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Q(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return C(this.origin)?ce(this.origin,this.direction):null}getParentCaret(t="root"){return Q(is(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=bt(this.direction);return Q(this.getNodeAtCaret(),t)||ce(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof gt&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof gt||t instanceof pt)&&this.direction===t.direction&&this.origin.is(t.origin)}}class pt extends rs{constructor(t,r){super(t);_e(this,"type","text");this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:mt(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return Q(is(this.getParentAtCaret(),t),this.direction)}getFlipped(){return mt(this.origin,bt(this.direction),this.offset)}isSamePointCaret(t){return t instanceof pt&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof gt||t instanceof pt)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return Q(this.origin,this.direction)}}function Pe(n){return n instanceof pt}function _t(n){return n instanceof gt}function ye(n){return n instanceof ln}const Rc={next:class extends pt{constructor(){super(...arguments);_e(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends pt{constructor(){super(...arguments);_e(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Kc={next:class extends gt{constructor(){super(...arguments);_e(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends gt{constructor(){super(...arguments);_e(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Bc={next:class extends ln{constructor(){super(...arguments);_e(this,"direction","next")}getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends ln{constructor(){super(...arguments);_e(this,"direction","previous")}getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function Q(n,e){return n?new Kc[e](n):null}function mt(n,e,t){return n?new Rc[e](n,De(n,t)):null}function De(n,e,t="error"){const r=n.getTextContentSize();let i=e==="next"?r:e==="previous"?0:e;return(i<0||i>r)&&(t!=="clamp"&&function(s,...o){const l=new URL("https://lexical.dev/docs/error"),a=new URLSearchParams;a.append("code",s);for(const c of o)a.append("v",c);l.search=a.toString(),console.warn(`Minified Lexical warning #${s}; visit ${l.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(284,String(e),String(r),n.getKey()),i=i<0?0:r),i}function ro(n,e){return new Wc(n,e)}function ce(n,e){return C(n)?new Bc[e](n):null}function zc(n){return n&&n.getChildCaret()||n}function _r(n){return n&&zc(n.getAdjacentCaret())}class ss{constructor(e,t,r){_e(this,"type","node-caret-range");this.anchor=e,this.focus=t,this.direction=r}getLatest(){const e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new ss(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const e=i=>{const s=this[i].getLatest();return Pe(s)?function(o,l){const{direction:a,origin:c}=o,u=De(c,l==="focus"?bt(a):a);return ro(o,u-o.offset)}(s,i):null},t=e("anchor"),r=e("focus");if(t&&r){const{caret:i}=t,{caret:s}=r;if(i.isSameNodeCaret(s))return[ro(i,s.offset-i.offset),null]}return[t,r]}iterNodeCarets(e="root"){const t=Pe(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),i=Pe(r),s=o=>o.isSameNodeCaret(r)?null:_r(o)||o.getParentCaret(e);return ls({hasNext:o=>o!==null&&!(i&&r.isSameNodeCaret(o)),initial:t.isSameNodeCaret(r)?null:s(t),map:o=>o,step:s})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class Wc{constructor(e,t){_e(this,"type","slice");this.caret=e,this.distance=t}getSliceIndices(){const{distance:e,caret:{offset:t}}=this,r=t+e;return r<t?[r,t]:[t,r]}getTextContent(){const[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:e,direction:t}}=this,[r,i]=this.getSliceIndices(),s=e.getTextContent();return mt(e.setTextContent(s.slice(0,r)+s.slice(i)),t,r)}}function os(n){return Qe(n,Q(H(),n.direction))}function Kl(n){return Qe(n,n)}function Qe(n,e){return n.direction!==e.direction&&E(265),new ss(n,e,n.direction)}function ls(n){const{initial:e,hasNext:t,step:r,map:i}=n;let s=e;return{[Symbol.iterator](){return this},next(){if(!t(s))return{done:!0,value:void 0};const o={done:!1,value:i(s)};return s=r(s),o}}}function Bl(n,e){const t=Rn(n.origin,e.origin);switch(t===null&&E(275,n.origin.getKey(),e.origin.getKey()),t.type){case"same":{const r=n.type==="text",i=e.type==="text";return r&&i?function(s,o){return Math.sign(s-o)}(n.offset,e.offset):n.type===e.type?0:r?-1:i?1:n.type==="child"?-1:1}case"ancestor":return n.type==="child"?-1:1;case"descendant":return e.type==="child"?1:-1;case"branch":return zl(t)}}function zl(n){const{a:e,b:t}=n,r=e.__key,i=t.__key;let s=e,o=t;for(;s&&o;s=s.getNextSibling(),o=o.getNextSibling()){if(s.__key===i)return-1;if(o.__key===r)return 1}return s===null?1:-1}function An(n,e){return e.is(n)}function io(n){return C(n)?[n.getLatest(),null]:[n.getParent(),n.getLatest()]}function Rn(n,e){if(n.is(e))return{commonAncestor:n,type:"same"};const t=new Map;for(let[r,i]=io(n);r;i=r,r=r.getParent())t.set(r,i);for(let[r,i]=io(e);r;i=r,r=r.getParent()){const s=t.get(r);if(s!==void 0)return s===null?(An(n,r)||E(276),{commonAncestor:r,type:"ancestor"}):i===null?(An(e,r)||E(277),{commonAncestor:r,type:"descendant"}):((C(s)||An(n,s))&&(C(i)||An(e,i))&&r.is(s.getParent())&&r.is(i.getParent())||E(278),{a:s,b:i,commonAncestor:r,type:"branch"})}return null}function Fe(n,e){const{type:t,key:r,offset:i}=n,s=Pc(n.key);return t==="text"?(O(s)||E(266,s.getType(),r),mt(s,e,i)):(C(s)||E(267,s.getType(),r),Jc(s,n.offset,e))}function yt(n,e){const{origin:t,direction:r}=e,i=r==="next";Pe(e)?n.set(t.getKey(),e.offset,"text"):_t(e)?O(t)?n.set(t.getKey(),De(t,r),"text"):n.set(t.getParentOrThrow().getKey(),t.getIndexWithinParent()+(i?1:0),"element"):(ye(e)&&C(t)||E(268),n.set(t.getKey(),i?0:t.getChildrenSize(),"element"))}function Wl(n){const e=M(),t=k(e)?e:Ki();return Kn(t,n),oe(t),t}function Kn(n,e){yt(n.anchor,e.anchor),yt(n.focus,e.focus)}function di(n){const{anchor:e,focus:t}=n,r=Fe(e,"next"),i=Fe(t,"next"),s=Bl(r,i)<=0?"next":"previous";return Qe(je(r,s),je(i,s))}function yn(n){const{direction:e,origin:t}=n,r=Q(t,bt(e)).getNodeAtCaret();return r?Q(r,e):ce(t.getParentOrThrow(),e)}function so(n,e="root"){const t=[n];for(let r=ye(n)?n.getParentCaret(e):n.getSiblingCaret();r!==null;r=r.getParentCaret(e))t.push(yn(r));return t}function Ir(n){return!!n&&n.origin.isAttached()}function Uc(n,e="removeEmptySlices"){if(n.isCollapsed())return n;const t="root",r="next";let i=e;const s=Jl(n,r),o=so(s.anchor,t),l=so(s.focus.getFlipped(),t),a=new Set,c=[];for(const h of s.iterNodeCarets(t))if(ye(h))a.add(h.origin.getKey());else if(_t(h)){const{origin:p}=h;C(p)&&!a.has(p.getKey())||c.push(p)}for(const h of c)h.remove();for(const h of s.getTextSlices()){if(!h)continue;const{origin:p}=h.caret,_=p.getTextContentSize(),y=yn(Q(p,r)),m=p.getMode();if(Math.abs(h.distance)===_&&i==="removeEmptySlices"||m==="token"&&h.distance!==0)y.remove();else if(h.distance!==0){i="removeEmptySlices";let x=h.removeTextSlice();const S=h.caret.origin;if(m==="segmented"){const w=x.origin,v=Z(w.getTextContent()).setStyle(w.getStyle()).setFormat(w.getFormat());y.replaceOrInsert(v),x=mt(v,r,x.offset)}S.is(o[0].origin)&&(o[0]=x),S.is(l[0].origin)&&(l[0]=x.getFlipped())}}let u,d;for(const h of o)if(Ir(h)){u=he(h);break}for(const h of l)if(Ir(h)){d=he(h);break}const f=function(h,p,_){if(!h||!p)return null;const y=h.getParentAtCaret(),m=p.getParentAtCaret();if(!y||!m)return null;const x=y.getParents().reverse();x.push(y);const S=m.getParents().reverse();S.push(m);const w=Math.min(x.length,S.length);let v;for(v=0;v<w&&x[v]===S[v];v++);const N=(P,L)=>{let z;for(let $=v;$<P.length;$++){const W=P[$];if(ge(W))return;!z&&L(W)&&(z=W)}return z},T=N(x,me),b=T&&N(S,P=>_.has(P.getKey())&&me(P));return T&&b?[T,b]:null}(u,d,a);if(f){const[h,p]=f;ce(h,"previous").splice(0,p.getChildren()),p.remove()}const g=[u,d,...o,...l].find(Ir);if(g)return Kl(je(he(g),n.direction));E(269,JSON.stringify(o.map(h=>h.origin.__key)))}function he(n){const e=function(i){let s=i;for(;ye(s);){const o=_r(s);if(!ye(o))break;s=o}return s}(n.getLatest()),{direction:t}=e;if(O(e.origin))return Pe(e)?e:mt(e.origin,t,t);const r=e.getAdjacentCaret();return _t(r)&&O(r.origin)?mt(r.origin,t,bt(t)):e}function Ul(n){return Pe(n)&&n.offset!==De(n.origin,n.direction)}function je(n,e){return n.direction===e?n:n.getFlipped()}function Jl(n,e){return n.direction===e?n:Qe(je(n.focus,e),je(n.anchor,e))}function Jc(n,e,t){let r=ce(n,"next");for(let i=0;i<e;i++){const s=r.getAdjacentCaret();if(s===null)break;r=s}return je(r,t)}function jc(n){const{origin:e,offset:t,direction:r}=n;if(t===De(e,r))return n.getSiblingCaret();if(t===De(e,bt(r)))return yn(n.getSiblingCaret());const[i]=e.splitText(t);return O(i)||E(281),je(Q(i,"next"),r)}function Vc(n,e){return!0}function Hc(n,{$copyElementNode:e=Ac,$splitTextPointCaretNext:t=jc,rootMode:r="shadowRoot",$shouldSplit:i=Vc}={}){if(Pe(n))return t(n);const s=n.getParentCaret(r);if(s){const{origin:o}=s;if(ye(n)&&(!o.canBeEmpty()||!i(o,"first")))return yn(s);const l=function(a){const c=[];for(let u=a.getAdjacentCaret();u;u=u.getAdjacentCaret())c.push(u.origin);return c}(n);(l.length>0||o.canBeEmpty()&&i(o,"last"))&&s.insert(e(o).splice(0,0,l))}return s}function jl(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const tr=new Map;function Vl(n){const e={};if(!n)return e;const t=n.split(";");for(const r of t)if(r!==""){const[i,s]=r.split(/:([^]+)/);i&&s&&(e[i.trim()]=s.trim())}return e}function an(n){let e=tr.get(n);return e===void 0&&(e=Vl(n),tr.set(n,e)),e}function qc(n){let e="";for(const t in n)t&&(e+=`${t}: ${n[t]};`);return e}function Hl(n){const e=pr().getElementByKey(n.getKey());if(e===null)return null;const t=e.ownerDocument.defaultView;return t===null?null:t.getComputedStyle(e)}function ql(n){return Hl(X(n)?n:n.getParentOrThrow())}function oo(n){const e=ql(n);return e!==null&&e.direction==="rtl"}function Yl(n,e){const t=n.getStartEndPoints();if(e.isSelected(n)&&!Oe(e)&&t!==null){const[r,i]=t,s=n.isBackward(),o=r.getNode(),l=i.getNode(),a=e.is(o),c=e.is(l);if(a||c){const[u,d]=ri(n),f=o.is(l),g=e.is(s?l:o),h=e.is(s?o:l);let p,_=0;f?(_=u>d?d:u,p=u>d?u:d):g?(_=s?d:u,p=void 0):h&&(_=0,p=s?u:d),e.__text=e.__text.slice(_,p)}}return e}function Sf(n){if(n.type==="text")return n.offset===n.getNode().getTextContentSize();const e=n.getNode();return C(e)||jl(177),n.offset===e.getChildrenSize()}function Yc(n){const e=n.getStyle(),t=Vl(e);tr.set(e,t)}function Rr(n,e){(k(n)?n.isCollapsed():O(n)||C(n))||jl(280);const t=an(k(n)?n.style:O(n)?n.getStyle():n.getTextStyle()),r=Object.entries(e).reduce((s,[o,l])=>(typeof l=="function"?s[o]=l(t[o],n):l===null?delete s[o]:s[o]=l,s),{...t}),i=qc(r);k(n)||O(n)?n.setStyle(i):n.setTextStyle(i),tr.set(i,r)}function bf(n,e){if(k(n)&&n.isCollapsed()){Rr(n,e);const t=n.anchor.getNode();C(t)&&t.isEmpty()&&Rr(t,e)}Gc(t=>{Rr(t,e)})}function Gc(n){const e=M();if(!e)return;const t=new Map;if(k(e))for(const s of di(e).getTextSlices())s&&t.set(s.caret.origin.getKey(),s.getSliceIndices());const r=e.getNodes();for(const s of r){if(!O(s)||!s.canHaveFormat())continue;const[o,l]=(i=s,t.get(i.getKey())||[0,i.getTextContentSize()]);l!==o&&(Oe(s)||o===0&&l===s.getTextContentSize()?n(s):n(s.splitText(o,l)[o===0?0:1]))}var i;k(e)&&e.anchor.type==="text"&&e.focus.type==="text"&&e.anchor.key===e.focus.key&&Xc(e)}function Xc(n){if(n.isBackward()){const{anchor:e,focus:t}=n,{key:r,offset:i,type:s}=e;e.set(t.key,t.offset,t.type),t.set(r,i,s)}}function Qc(n,e){const t=n.getFormatType(),r=n.getIndent();t!==e.getFormatType()&&e.setFormat(t),r!==e.getIndent()&&e.setIndent(r)}function Tf(n,e,t=Qc){if(n===null)return;const r=n.getStartEndPoints(),i=new Map;let s=null;if(r){const[o,l]=r;s=Ki(),s.anchor.set(o.key,o.offset,o.type),s.focus.set(l.key,l.offset,l.type);const a=Kr(o.getNode(),me),c=Kr(l.getNode(),me);C(a)&&i.set(a.getKey(),a),C(c)&&i.set(c.getKey(),c)}for(const o of n.getNodes())if(C(o)&&me(o))i.set(o.getKey(),o);else if(r===null){const l=Kr(o,me);C(l)&&i.set(l.getKey(),l)}for(const[o,l]of i){const a=e();t(l,a),l.replace(a,!0),s&&(o===s.anchor.key&&s.anchor.set(a.getKey(),s.anchor.offset,s.anchor.type),o===s.focus.key&&s.focus.set(a.getKey(),s.focus.offset,s.focus.type))}s&&n.is(M())&&oe(s)}function Gl(n){const e=Xl(n);return e!==null&&e.writingMode==="vertical-rl"}function Xl(n){const e=n.anchor.getNode();return C(e)?Hl(e):ql(e)}function lo(n,e){let t=Gl(n)?!e:e;Ql(n)&&(t=!t);const r=Fe(n.focus,t?"previous":"next");if(Ul(r))return!1;for(const i of os(r)){if(ye(i))return!i.origin.isInline();if(!C(i.origin)){if(B(i.origin))return!0;break}}return!1}function Zc(n,e,t,r){n.modify(e?"extend":"move",t,r)}function Ql(n){const e=Xl(n);return e!==null&&e.direction==="rtl"}function ao(n,e,t){const r=Ql(n);let i;i=Gl(n)||r?!t:t,Zc(n,e,i,"character")}function eu(n,e,t){const r=an(n.getStyle());return r!==null&&r[e]||t}function kf(n,e,t=""){let r=null;const i=n.getNodes(),s=n.anchor,o=n.focus,l=n.isBackward(),a=l?o.offset:s.offset,c=l?o.getNode():s.getNode();if(k(n)&&n.isCollapsed()&&n.style!==""){const u=an(n.style);if(u!==null&&e in u)return u[e]}for(let u=0;u<i.length;u++){const d=i[u];if((u===0||a!==0||!d.is(c))&&O(d)){const f=eu(d,e,t);if(r===null)r=f;else if(r!==f){r="";break}}}return r===null?t:r}function Kr(n,e){let t=n;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function Zl(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const mr=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,tu=mr&&"documentMode"in document?document.documentMode:null,nu=mr&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);!(!mr||!("InputEvent"in window)||tu)&&"getTargetRanges"in new window.InputEvent("input");function ea(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}function Tt(...n){return()=>{for(let e=n.length-1;e>=0;e--)n[e]();n.length=0}}const ru=mr,iu=nu;function xn(n,...e){const t=ea(...e);t.length>0&&n.classList.add(...t)}function ta(n,...e){const t=ea(...e);t.length>0&&n.classList.remove(...t)}function Nf(n){return n?n.getAdjacentCaret():null}function su(n,e){let t=n;for(;t!=null;){if(t instanceof e)return t;t=t.getParent()}return null}function ou(n){const e=Xe(n,t=>C(t)&&!t.isInline());return C(e)||Zl(4,n.__key),e}const Xe=(n,e)=>{let t=n;for(;t!==H()&&t!=null;){if(e(t))return t;t=t.getParent()}return null};function wf(n){const e=M()||St();let t;if(k(e))t=Fe(e.focus,"next");else{if(e!=null){const o=e.getNodes(),l=o[o.length-1];l&&(t=Q(l,"next"))}t=t||ce(H(),"previous").getFlipped().insert(q())}const r=lu(n,t),i=_r(r),s=ye(i)?he(i):r;return Wl(Kl(s)),n.getLatest()}function lu(n,e,t){let r=je(e,"next");for(let i=r;i;i=Hc(i,t))r=i;return Pe(r)&&Zl(283),r.insert(n.isInline()?q().append(n):n),je(Q(n.getLatest(),"next"),e.direction)}function Ef(n,e){const t=e();return n.replace(t),t.append(n),t}function rt(n,e){return n!==null&&Object.getPrototypeOf(n).constructor.name===e.name}function Of(n,e){const t=[];for(let r=0;r<n.length;r++){const i=e(n[r]);i!==null&&t.push(i)}return t}function Mf(n,e){ce(n,"next").insert(e)}let Br=!(iu||!ru)&&void 0;function au(n){let e=1;if(function(){if(Br===void 0){const t=document.createElement("div");t.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(t);const r=t.getBoundingClientRect();t.style.setProperty("zoom","2"),Br=t.getBoundingClientRect().width===r.width,document.body.removeChild(t)}return Br}())for(;n;)e*=Number(window.getComputedStyle(n).getPropertyValue("zoom")),n=n.parentElement;return e}function Af(n,e){return na(n,e,null)}function na(n,e,t){let r=!1;for(const i of ra(n))e(i)?t!==null&&t(i):(r=!0,C(i)&&na(i,e,t||(s=>i.insertAfter(s))),i.remove());return r}function Pf(n,e){const t=[],r=Array.from(n).reverse();for(let i=r.pop();i!==void 0;i=r.pop())if(e(i))t.push(i);else if(C(i))for(const s of ra(i))r.push(s);return t}function ra(n){return cu(ce(n,"previous"))}function cu(n){return ls({hasNext:_t,initial:n.getAdjacentCaret(),map:e=>e.origin.getLatest(),step:e=>e.getAdjacentCaret()})}function Ge(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function hi(n){let e=1,t=n.getParent();for(;t!=null;){if(I(t)){const r=t.getParent();if(F(r)){e++,t=r.getParent();continue}Ge(40)}return e}return e}function gi(n){let e=n.getParent();F(e)||Ge(40);let t=e;for(;t!==null;)t=t.getParent(),F(t)&&(e=t);return e}function ia(n){let e=[];const t=n.getChildren().filter(I);for(let r=0;r<t.length;r++){const i=t[r],s=i.getFirstChild();F(s)?e=e.concat(ia(s)):e.push(i)}return e}function Ae(n){return I(n)&&F(n.getFirstChild())}function co(n){return ve().append(n)}function sa(n,e){return I(n)&&(e.length===0||e.length===1&&n.is(e[0])&&n.getChildrenSize()===0)}function pi(n){const e=M();if(e!==null){let t=e.getNodes();if(k(e)){const i=e.getStartEndPoints();i===null&&Ge(143);const[s]=i,o=s.getNode(),l=o.getParent();if(ge(o)){const a=o.getFirstChild();if(a)t=a.selectStart().getNodes();else{const c=q();o.append(c),t=c.select().getNodes()}}else if(sa(o,t)){const a=pe(n);if(ge(l)){o.replace(a);const c=ve();C(o)&&(c.setFormat(o.getFormatType()),c.setIndent(o.getIndent())),a.append(c)}else if(I(o)){const c=o.getParentOrThrow();xt(a,c.getChildren()),c.replace(a)}return}}const r=new Set;for(let i=0;i<t.length;i++){const s=t[i];if(C(s)&&s.isEmpty()&&!I(s)&&!r.has(s.getKey())){uo(s,n);continue}let o=El(s)?s.getParent():I(s)&&s.isEmpty()?s:null;for(;o!=null;){const l=o.getKey();if(F(o)){if(!r.has(l)){const a=pe(n);xt(a,o.getChildren()),o.replace(a),r.add(l)}break}{const a=o.getParent();if(ge(a)&&!r.has(l)){r.add(l),uo(o,n);break}o=a}}}}}function xt(n,e){n.splice(n.getChildrenSize(),0,e)}function uo(n,e){if(F(n))return n;const t=n.getPreviousSibling(),r=n.getNextSibling(),i=ve();let s;if(xt(i,n.getChildren()),F(t)&&e===t.getListType())t.append(i),F(r)&&e===r.getListType()&&(xt(t,r.getChildren()),r.remove()),s=t;else if(F(r)&&e===r.getListType())r.getFirstChildOrThrow().insertBefore(i),s=r;else{const o=pe(e);o.append(i),n.replace(o),s=o}return i.setFormat(n.getFormatType()),i.setIndent(n.getIndent()),n.remove(),s}function as(n,e){const t=n.getLastChild(),r=e.getFirstChild();t&&r&&Ae(t)&&Ae(r)&&(as(t.getFirstChild(),r.getFirstChild()),r.remove());const i=e.getChildren();i.length>0&&n.append(...i),e.remove()}function uu(){const n=M();if(k(n)){const e=new Set,t=n.getNodes(),r=n.anchor.getNode();if(sa(r,t))e.add(gi(r));else for(let i=0;i<t.length;i++){const s=t[i];if(El(s)){const o=su(s,Cn);o!=null&&e.add(gi(o))}}for(const i of e){let s=i;const o=ia(i);for(const l of o){const a=q().setTextStyle(n.style).setTextFormat(n.format);xt(a,l.getChildren()),s.insertAfter(a),s=a,l.__key===n.anchor.key&&yt(n.anchor,he(ce(a,"next"))),l.__key===n.focus.key&&yt(n.focus,he(ce(a,"next"))),l.remove()}i.remove()}}}function oa(n){const e=n.getListType()!=="check";let t=n.getStart();for(const r of n.getChildren())I(r)&&(r.getValue()!==t&&r.setValue(t),e&&r.getLatest().__checked!=null&&r.setChecked(void 0),F(r.getFirstChild())||t++)}function fu(n){const e=new Set;if(Ae(n)||e.has(n.getKey()))return;const t=n.getParent(),r=n.getNextSibling(),i=n.getPreviousSibling();if(Ae(r)&&Ae(i)){const s=i.getFirstChild();if(F(s)){s.append(n);const o=r.getFirstChild();F(o)&&(xt(s,o.getChildren()),r.remove(),e.add(r.getKey()))}}else if(Ae(r)){const s=r.getFirstChild();if(F(s)){const o=s.getFirstChild();o!==null&&o.insertBefore(n)}}else if(Ae(i)){const s=i.getFirstChild();F(s)&&s.append(n)}else if(F(t)){const s=ve().setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle()),o=pe(t.getListType()).setTextFormat(t.getTextFormat()).setTextStyle(t.getTextStyle());s.append(o),o.append(n),i?i.insertAfter(s):r?r.insertBefore(s):t.append(s)}}function du(n){if(Ae(n))return;const e=n.getParent(),t=e?e.getParent():void 0;if(F(t?t.getParent():void 0)&&I(t)&&F(e)){const r=e?e.getFirstChild():void 0,i=e?e.getLastChild():void 0;if(n.is(r))t.insertBefore(n),e.isEmpty()&&t.remove();else if(n.is(i))t.insertAfter(n),e.isEmpty()&&t.remove();else{const s=e.getListType(),o=ve(),l=pe(s);o.append(l),n.getPreviousSiblings().forEach(u=>l.append(u));const a=ve(),c=pe(s);a.append(c),xt(c,n.getNextSiblings()),t.insertBefore(o),t.insertAfter(a),t.replace(n)}}}function hu(){const n=M();if(!k(n)||!n.isCollapsed())return!1;const e=n.anchor.getNode();if(!I(e)||e.getChildrenSize()!==0)return!1;const t=gi(e),r=e.getParent();F(r)||Ge(40);const i=r.getParent();let s;if(ge(i))s=q(),t.insertAfter(s);else{if(!I(i))return!1;s=ve(),i.insertAfter(s)}s.setTextStyle(n.style).setTextFormat(n.format).select();const o=e.getNextSiblings();if(o.length>0){const l=pe(r.getListType());if(I(s)){const a=ve();a.append(l),s.insertAfter(a)}else s.insertAfter(l);l.append(...o)}return function(l){let a=l;for(;a.getNextSibling()==null&&a.getPreviousSibling()==null;){const c=a.getParent();if(c==null||!I(c)&&!F(c))break;a=c}a.remove()}(e),!0}function nr(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}class Cn extends xe{$config(){return this.config("listitem",{$transform:e=>{if(e.__checked==null)return;const t=e.getParent();F(t)&&t.getListType()!=="check"&&e.getChecked()!=null&&e.setChecked(void 0)},extends:xe,importDOM:{li:()=>({conversion:gu,priority:0})}})}constructor(e=1,t=void 0,r){super(r),this.__value=e===void 0?1:e,this.__checked=t}afterCloneFrom(e){super.afterCloneFrom(e),this.__value=e.__value,this.__checked=e.__checked}createDOM(e){const t=document.createElement("li");return this.updateListItemDOM(null,t,e),t}updateListItemDOM(e,t,r){const i=this.getParent();F(i)&&i.getListType()==="check"&&function(l,a,c,u){F(a.getFirstChild())?(l.removeAttribute("role"),l.removeAttribute("tabIndex"),l.removeAttribute("aria-checked")):(l.setAttribute("role","checkbox"),l.setAttribute("tabIndex","-1"),c&&a.__checked===c.__checked||l.setAttribute("aria-checked",a.getChecked()?"true":"false"))}(t,this,e),t.value=this.__value,function(l,a,c){const u=[],d=[],f=a.list,g=f?f.listitem:void 0;let h;if(f&&f.nested&&(h=f.nested.listitem),g!==void 0&&u.push(...nr(g)),f){const p=c.getParent(),_=F(p)&&p.getListType()==="check",y=c.getChecked();_&&!y||d.push(f.listitemUnchecked),_&&y||d.push(f.listitemChecked),_&&u.push(y?f.listitemChecked:f.listitemUnchecked)}if(h!==void 0){const p=nr(h);c.getChildren().some(_=>F(_))?u.push(...p):d.push(...p)}d.length>0&&ta(l,...d),u.length>0&&xn(l,...u)}(t,r.theme,this);const s=e?e.__style:"",o=this.__style;s!==o&&(o===""?t.removeAttribute("style"):t.style.cssText=o),function(l,a,c){const u=an(a.__textStyle);for(const d in u)l.style.setProperty(`--listitem-marker-${d}`,u[d]);if(c)for(const d in an(c.__textStyle))d in u||l.style.removeProperty(`--listitem-marker-${d}`)}(t,this,e)}updateDOM(e,t,r){const i=t;return this.updateListItemDOM(e,i,r),!1}updateFromJSON(e){return super.updateFromJSON(e).setValue(e.value).setChecked(e.checked)}exportDOM(e){const t=this.createDOM(e._config),r=this.getFormatType();r&&(t.style.textAlign=r);const i=this.getDirection();return i&&(t.dir=i),{element:t}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...e){for(let t=0;t<e.length;t++){const r=e[t];if(C(r)&&this.canMergeWith(r)){const i=r.getChildren();this.append(...i),r.remove()}else super.append(r)}return this}replace(e,t){if(I(e))return super.replace(e);this.setIndent(0);const r=this.getParentOrThrow();if(!F(r))return e;if(r.__first===this.getKey())r.insertBefore(e);else if(r.__last===this.getKey())r.insertAfter(e);else{const i=pe(r.getListType());let s=this.getNextSibling();for(;s;){const o=s;s=s.getNextSibling(),i.append(o)}r.insertAfter(e),e.insertAfter(i)}return t&&(C(e)||Ge(139),this.getChildren().forEach(i=>{e.append(i)})),this.remove(),r.getChildrenSize()===0&&r.remove(),e}insertAfter(e,t=!0){const r=this.getParentOrThrow();if(F(r)||Ge(39),I(e))return super.insertAfter(e,t);const i=this.getNextSiblings();if(r.insertAfter(e,t),i.length!==0){const s=pe(r.getListType());i.forEach(o=>s.append(o)),e.insertAfter(s,t)}return e}remove(e){const t=this.getPreviousSibling(),r=this.getNextSibling();super.remove(e),t&&r&&Ae(t)&&Ae(r)&&(as(t.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(e,t=!0){const r=ve().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,t),r}collapseAtStart(e){const t=q();this.getChildren().forEach(o=>t.append(o));const r=this.getParentOrThrow(),i=r.getParentOrThrow(),s=I(i);if(r.getChildrenSize()===1)if(s)r.remove(),i.select();else{r.insertBefore(t),r.remove();const o=e.anchor,l=e.focus,a=t.getKey();o.type==="element"&&o.getNode().is(this)&&o.set(a,o.offset,"element"),l.type==="element"&&l.getNode().is(this)&&l.set(a,l.offset,"element")}else r.insertBefore(t),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){const t=this.getWritable();return t.__value=e,t}getChecked(){const e=this.getLatest();let t;const r=this.getParent();return F(r)&&(t=r.getListType()),t==="check"?!!e.__checked:void 0}setChecked(e){const t=this.getWritable();return t.__checked=e,t}toggleChecked(){const e=this.getWritable();return e.setChecked(!e.__checked)}getIndent(){const e=this.getParent();if(e===null||!this.isAttached())return this.getLatest().__indent;let t=e.getParentOrThrow(),r=0;for(;I(t);)t=t.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(e){typeof e!="number"&&Ge(117),(e=Math.floor(e))>=0||Ge(199);let t=this.getIndent();for(;t!==e;)t<e?(fu(this),t++):(du(this),t--);return this}canInsertAfter(e){return I(e)}canReplaceWith(e){return I(e)}canMergeWith(e){return I(e)||Ui(e)}extractWithChild(e,t){if(!k(t))return!1;const r=t.anchor.getNode(),i=t.focus.getNode();return this.isParentOf(r)&&this.isParentOf(i)&&this.getTextContent().length===t.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return pe("bullet")}canMergeWhenEmpty(){return!0}}function gu(n){if(n.classList.contains("task-list-item")){for(const t of n.children)if(t.tagName==="INPUT")return pu(t)}const e=n.getAttribute("aria-checked");return{node:ve(e==="true"||e!=="false"&&void 0)}}function pu(n){return n.getAttribute("type")!=="checkbox"?{node:null}:{node:ve(n.hasAttribute("checked"))}}function ve(n){return $e(new Cn(void 0,n))}function I(n){return n instanceof Cn}class yr extends xe{$config(){return this.config("list",{$transform:e=>{(function(t){const r=t.getNextSibling();F(r)&&t.getListType()===r.getListType()&&as(t,r)})(e),oa(e)},extends:xe,importDOM:{ol:()=>({conversion:ho,priority:0}),ul:()=>({conversion:ho,priority:0})}})}constructor(e="number",t=1,r){super(r);const i=mu[e]||e;this.__listType=i,this.__tag=i==="number"?"ol":"ul",this.__start=t}afterCloneFrom(e){super.afterCloneFrom(e),this.__listType=e.__listType,this.__tag=e.__tag,this.__start=e.__start}getTag(){return this.getLatest().__tag}setListType(e){const t=this.getWritable();return t.__listType=e,t.__tag=e==="number"?"ol":"ul",t}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(e){const t=this.getWritable();return t.__start=e,t}createDOM(e,t){const r=this.__tag,i=document.createElement(r);return this.__start!==1&&i.setAttribute("start",String(this.__start)),i.__lexicalListType=this.__listType,fo(i,e.theme,this),i}updateDOM(e,t,r){return e.__tag!==this.__tag||(fo(t,r.theme,this),!1)}updateFromJSON(e){return super.updateFromJSON(e).setListType(e.listType).setStart(e.start)}exportDOM(e){const t=this.createDOM(e._config,e);return j(t)&&(this.__start!==1&&t.setAttribute("start",String(this.__start)),this.__listType==="check"&&t.setAttribute("__lexicalListType","check")),{element:t}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(e,t,r){let i=r;for(let s=0;s<r.length;s++){const o=r[s];I(o)||(i===r&&(i=[...r]),i[s]=ve().append(!C(o)||F(o)||o.isInline()?o:Z(o.getTextContent())))}return super.splice(e,t,i)}extractWithChild(e){return I(e)}}function fo(n,e,t){const r=[],i=[],s=e.list;if(s!==void 0){const o=s[`${t.__tag}Depth`]||[],l=hi(t)-1,a=l%o.length,c=o[a],u=s[t.__tag];let d;const f=s.nested,g=s.checklist;if(f!==void 0&&f.list&&(d=f.list),u!==void 0&&r.push(u),g!==void 0&&t.__listType==="check"&&r.push(g),c!==void 0){r.push(...nr(c));for(let h=0;h<o.length;h++)h!==a&&i.push(t.__tag+h)}if(d!==void 0){const h=nr(d);l>1?r.push(...h):i.push(...h)}}i.length>0&&ta(n,...i),r.length>0&&xn(n,...r)}function _u(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t];if(I(r)){e.push(r);const i=r.getChildren();i.length>1&&i.forEach(s=>{F(s)&&e.push(co(s))})}else e.push(co(r))}return e}function ho(n){const e=n.nodeName.toLowerCase();let t=null;return e==="ol"?t=pe("number",n.start):e==="ul"&&(t=function(r){if(r.getAttribute("__lexicallisttype")==="check"||r.classList.contains("contains-task-list"))return!0;for(const i of r.childNodes)if(j(i)&&i.hasAttribute("aria-checked"))return!0;return!1}(n)?pe("check"):pe("bullet")),{after:_u,node:t}}const mu={ol:"number",ul:"bullet"};function pe(n="number",e=1){return $e(new yr(n,e))}function F(n){return n instanceof yr}const yu=D("INSERT_CHECK_LIST_COMMAND");function xu(n){return Tt(n.registerCommand(yu,()=>(pi("check"),!0),be),n.registerCommand(Li,e=>_o(e,n,!1),be),n.registerCommand(Di,e=>_o(e,n,!0),be),n.registerCommand($i,()=>{if(_i()!=null){const e=n.getRootElement();return e!=null&&e.focus(),!0}return!1},be),n.registerCommand(Fi,e=>{const t=_i();return!(t==null||!n.isEditable())&&(n.update(()=>{const r=Je(t);I(r)&&(e.preventDefault(),r.toggleChecked())}),!0)},be),n.registerCommand(Pi,e=>n.getEditorState().read(()=>{const t=M();if(k(t)&&t.isCollapsed()){const{anchor:r}=t,i=r.type==="element";if(i||r.offset===0){const s=r.getNode(),o=Xe(s,l=>C(l)&&!l.isInline());if(I(o)){const l=o.getParent();if(F(l)&&l.getListType()==="check"&&(i||o.getFirstDescendant()===s)){const a=n.getElementByKey(o.__key);if(a!=null&&document.activeElement!==a)return a.focus(),e.preventDefault(),!0}}}}return!1}),be),n.registerRootListener((e,t)=>{e!==null&&(e.addEventListener("click",go),e.addEventListener("pointerdown",po)),t!==null&&(t.removeEventListener("click",go),t.removeEventListener("pointerdown",po))}))}function la(n,e){const t=n.target;if(!j(t))return;const r=t.firstChild;if(j(r)&&(r.tagName==="UL"||r.tagName==="OL"))return;const i=t.parentNode;if(!i||i.__lexicalListType!=="check")return;const s=t.getBoundingClientRect(),o=au(t),l=n.clientX/o,a=window.getComputedStyle?window.getComputedStyle(t,"::before"):{width:"0px"},c=parseFloat(a.width),u=n.pointerType==="touch"?32:0;(t.dir==="rtl"?l<s.right+u&&l>s.right-c-u:l>s.left-u&&l<s.left+c+u)&&e()}function go(n){la(n,()=>{if(j(n.target)){const e=n.target,t=qi(e);t!=null&&t.isEditable()&&t.update(()=>{const r=Je(e);I(r)&&(e.focus(),r.toggleChecked())})}})}function po(n){la(n,()=>{n.preventDefault()})}function _i(){const n=document.activeElement;return j(n)&&n.tagName==="LI"&&n.parentNode!=null&&n.parentNode.__lexicalListType==="check"?n:null}function _o(n,e,t){const r=_i();return r!=null&&e.update(()=>{const i=Je(r);if(!I(i))return;const s=function(o,l){let a=l?o.getPreviousSibling():o.getNextSibling(),c=o;for(;a==null&&I(c);)c=c.getParentOrThrow().getParent(),c!=null&&(a=l?c.getPreviousSibling():c.getNextSibling());for(;I(a);){const u=l?a.getLastChild():a.getFirstChild();if(!F(u))return a;a=l?u.getLastChild():u.getFirstChild()}return null}(i,t);if(s!=null){s.selectStart();const o=e.getElementByKey(s.__key);o!=null&&(n.preventDefault(),setTimeout(()=>{o.focus()},0))}}),!1}const Cu=D("UPDATE_LIST_START_COMMAND"),vu=D("INSERT_UNORDERED_LIST_COMMAND"),Su=D("INSERT_ORDERED_LIST_COMMAND"),bu=D("REMOVE_LIST_COMMAND");function Tu(n){return Tt(n.registerCommand(Su,()=>(pi("number"),!0),be),n.registerCommand(Cu,e=>{const{listNodeKey:t,newStart:r}=e,i=G(t);return!!F(i)&&(i.getListType()==="number"&&(i.setStart(r),oa(i)),!0)},be),n.registerCommand(vu,()=>(pi("bullet"),!0),be),n.registerCommand(bu,()=>(uu(),!0),be),n.registerCommand(rn,()=>hu(),be),n.registerNodeTransform(Cn,e=>{const t=e.getFirstChild();if(t){if(O(t)){const r=t.getStyle(),i=t.getFormat();e.getTextStyle()!==r&&e.setTextStyle(r),e.getTextFormat()!==i&&e.setTextFormat(i)}}else{const r=M();k(r)&&(r.style!==e.getTextStyle()||r.format!==e.getTextFormat())&&r.isCollapsed()&&e.is(r.anchor.getNode())&&e.setTextStyle(r.style).setTextFormat(r.format)}}),n.registerNodeTransform(Ct,e=>{const t=e.getParent();if(I(t)&&e.is(t.getFirstChild())){const r=e.getStyle(),i=e.getFormat();r===t.getTextStyle()&&i===t.getTextFormat()||t.setTextStyle(r).setTextFormat(i)}}))}function ku(n){const e=t=>{const r=t.getParent();if(F(t.getFirstChild())||!F(r))return;const i=Xe(t,s=>I(s)&&F(s.getParent())&&I(s.getPreviousSibling()));if(i===null&&t.getIndent()>0)t.setIndent(0);else if(I(i)){const s=i.getPreviousSibling();if(I(s)){const o=function(a){let c=a,u=c.getFirstChild();for(;F(u);){const d=u.getLastChild();if(!I(d))break;c=d,u=c.getFirstChild()}return c}(s),l=o.getParent();if(F(l)){const a=hi(l);a+1<hi(r)&&t.setIndent(a)}}}};return n.registerNodeTransform(yr,t=>{const r=[t];for(;r.length>0;){const i=r.shift();if(F(i)){for(const s of i.getChildren())if(I(s)){e(s);const o=s.getFirstChild();F(o)&&r.push(o)}}}})}const Nu=K.createContext(null);function Df(n,e){let t=null;return n!=null&&(t=n[1]),{getTheme:function(){return e??(t!=null?t.getTheme():null)}}}function kt(){const n=K.useContext(Nu);return n==null&&function(e,...t){const r=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",e);for(const s of t)i.append("v",s);throw r.search=i.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),n}function Lf(){const[n]=kt();return K.useEffect(()=>xu(n),[n]),null}function wu(){return H().getTextContent()}function Eu(n,e=!0){if(n)return!1;let t=wu();return e&&(t=t.trim()),t===""}function Ou(n){if(!Eu(n,!1))return!1;const e=H().getChildren(),t=e.length;if(t>1)return!1;for(let r=0;r<t;r++){const i=e[r];if(B(i))return!1;if(C(i)){if(!Ui(i)||i.__indent!==0)return!1;const s=i.getChildren(),o=s.length;for(let l=0;l<o;l++){const a=s[r];if(!O(a))return!1}}}return!0}function aa(n){return()=>Ou(n)}const ca=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?K.useLayoutEffect:K.useEffect;function Mu({editor:n,ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:r,ariaDescribedBy:i,ariaErrorMessage:s,ariaExpanded:o,ariaInvalid:l,ariaLabel:a,ariaLabelledBy:c,ariaMultiline:u,ariaOwns:d,ariaRequired:f,autoCapitalize:g,className:h,id:p,role:_="textbox",spellCheck:y=!0,style:m,tabIndex:x,"data-testid":S,...w},v){const[N,T]=K.useState(n.isEditable()),b=K.useCallback(L=>{L&&L.ownerDocument&&L.ownerDocument.defaultView?n.setRootElement(L):n.setRootElement(null)},[n]),P=K.useMemo(()=>function(...L){return z=>{L.forEach($=>{typeof $=="function"?$(z):$!=null&&($.current=z)})}}(v,b),[b,v]);return ca(()=>(T(n.isEditable()),n.registerEditableListener(L=>{T(L)})),[n]),de.jsx("div",{"aria-activedescendant":N?e:void 0,"aria-autocomplete":N?t:"none","aria-controls":N?r:void 0,"aria-describedby":i,...s!=null?{"aria-errormessage":s}:{},"aria-expanded":N&&_==="combobox"?!!o:void 0,...l!=null?{"aria-invalid":l}:{},"aria-label":a,"aria-labelledby":c,"aria-multiline":u,"aria-owns":N?d:void 0,"aria-readonly":!N||void 0,"aria-required":f,autoCapitalize:g,className:h,contentEditable:N,"data-testid":S,id:p,ref:P,role:_,spellCheck:y,style:m,tabIndex:x,...w})}const Au=K.forwardRef(Mu);function mo(n){return n.getEditorState().read(aa(n.isComposing()))}const Ff=K.forwardRef(Pu);function Pu(n,e){const{placeholder:t,...r}=n,[i]=kt();return de.jsxs(de.Fragment,{children:[de.jsx(Au,{editor:i,...r,ref:e}),t!=null&&de.jsx(Du,{editor:i,content:t})]})}function Du({content:n,editor:e}){const t=function(o){const[l,a]=K.useState(()=>mo(o));return ca(()=>{function c(){const u=mo(o);a(u)}return c(),Tt(o.registerUpdateListener(()=>{c()}),o.registerEditableListener(()=>{c()}))},[o]),l}(e),[r,i]=K.useState(e.isEditable());if(K.useLayoutEffect(()=>(i(e.isEditable()),e.registerEditableListener(o=>{i(o)})),[e]),!t)return null;let s=null;return typeof n=="function"?s=n(r):n!==null&&(s=n),s===null?null:de.jsx("div",{"aria-hidden":!0,children:s})}function mi(n,e){return mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},mi(n,e)}var yo={error:null},Lu=function(n){var e,t;function r(){for(var s,o=arguments.length,l=new Array(o),a=0;a<o;a++)l[a]=arguments[a];return(s=n.call.apply(n,[this].concat(l))||this).state=yo,s.resetErrorBoundary=function(){for(var c,u=arguments.length,d=new Array(u),f=0;f<u;f++)d[f]=arguments[f];s.props.onReset==null||(c=s.props).onReset.apply(c,d),s.reset()},s}t=n,(e=r).prototype=Object.create(t.prototype),e.prototype.constructor=e,mi(e,t),r.getDerivedStateFromError=function(s){return{error:s}};var i=r.prototype;return i.reset=function(){this.setState(yo)},i.componentDidCatch=function(s,o){var l,a;(l=(a=this.props).onError)==null||l.call(a,s,o)},i.componentDidUpdate=function(s,o){var l,a,c,u,d=this.state.error,f=this.props.resetKeys;d!==null&&o.error!==null&&((c=s.resetKeys)===void 0&&(c=[]),(u=f)===void 0&&(u=[]),c.length!==u.length||c.some(function(g,h){return!Object.is(g,u[h])}))&&((l=(a=this.props).onResetKeysChange)==null||l.call(a,s.resetKeys,f),this.reset())},i.render=function(){var s=this.state.error,o=this.props,l=o.fallbackRender,a=o.FallbackComponent,c=o.fallback;if(s!==null){var u={error:s,resetErrorBoundary:this.resetErrorBoundary};if(K.isValidElement(c))return c;if(typeof l=="function")return l(u);if(a)return K.createElement(a,u);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},r}(K.Component);function $f({children:n,onError:e}){return de.jsx(Lu,{fallback:de.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:n})}const Pn=0,yi=1,xi=2,Se=0,Fu=1,xo=2,$u=3,Iu=4;function Ru(n,e,t,r,i){if(n===null||t.size===0&&r.size===0&&!i)return Se;const s=e._selection,o=n._selection;if(i)return Fu;if(!(k(s)&&k(o)&&o.isCollapsed()&&s.isCollapsed()))return Se;const l=function(y,m,x){const S=y._nodeMap,w=[];for(const v of m){const N=S.get(v);N!==void 0&&w.push(N)}for(const[v,N]of x){if(!N)continue;const T=S.get(v);T===void 0||X(T)||w.push(T)}return w}(e,t,r);if(l.length===0)return Se;if(l.length>1){const y=e._nodeMap,m=y.get(s.anchor.key),x=y.get(o.anchor.key);return m&&x&&!n._nodeMap.has(m.__key)&&O(m)&&m.__text.length===1&&s.anchor.offset===1?xo:Se}const a=l[0],c=n._nodeMap.get(a.__key);if(!O(c)||!O(a)||c.__mode!==a.__mode)return Se;const u=c.__text,d=a.__text;if(u===d)return Se;const f=s.anchor,g=o.anchor;if(f.key!==g.key||f.type!=="text")return Se;const h=f.offset,p=g.offset,_=d.length-u.length;return _===1&&p===h-1?xo:_===-1&&p===h+1?$u:_===-1&&p===h?Iu:Se}function Ku(n,e){let t=Date.now(),r=Se;return(i,s,o,l,a,c)=>{const u=Date.now();if(c.has(si))return r=Se,t=u,xi;const d=Ru(i,s,l,a,n.isComposing()),f=(()=>{const g=o===null||o.editor===n,h=c.has(_c);if(!h&&g&&c.has(In))return Pn;if(i===null)return yi;const p=s._selection;return l.size>0||a.size>0?h===!1&&d!==Se&&d===r&&u<t+e&&g||l.size===1&&function(_,y,m){const x=y._nodeMap.get(_),S=m._nodeMap.get(_),w=y._selection,v=m._selection;return!(k(w)&&k(v)&&w.anchor.type==="element"&&w.focus.type==="element"&&v.anchor.type==="text"&&v.focus.type==="text"||!O(x)||!O(S)||x.__parent!==S.__parent)&&JSON.stringify(y.read(()=>x.exportJSON()))===JSON.stringify(m.read(()=>S.exportJSON()))}(Array.from(l)[0],i,s)?Pn:yi:p!==null?Pn:xi})();return t=u,r=d,f}}function Co(n){n.undoStack=[],n.redoStack=[],n.current=null}function Bu(n,e,t){const r=Ku(n,t);return Tt(n.registerCommand(Mi,()=>(function(s,o){const l=o.redoStack,a=o.undoStack;if(a.length!==0){const c=o.current,u=a.pop();c!==null&&(l.push(c),s.dispatchCommand(kn,!0)),a.length===0&&s.dispatchCommand(Nn,!1),o.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:si})}}(n,e),!0),R),n.registerCommand(Ai,()=>(function(s,o){const l=o.redoStack,a=o.undoStack;if(l.length!==0){const c=o.current;c!==null&&(a.push(c),s.dispatchCommand(Nn,!0));const u=l.pop();l.length===0&&s.dispatchCommand(kn,!1),o.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:si})}}(n,e),!0),R),n.registerCommand(Xa,()=>(Co(e),!1),R),n.registerCommand(Qa,()=>(Co(e),n.dispatchCommand(kn,!1),n.dispatchCommand(Nn,!1),!0),R),n.registerUpdateListener(({editorState:s,prevEditorState:o,dirtyLeaves:l,dirtyElements:a,tags:c})=>{const u=e.current,d=e.redoStack,f=e.undoStack,g=u===null?null:u.editorState;if(u!==null&&s===g)return;const h=r(o,s,u,l,a,c);if(h===yi)d.length!==0&&(e.redoStack=[],n.dispatchCommand(kn,!1)),u!==null&&(f.push({...u}),n.dispatchCommand(Nn,!0));else if(h===xi)return;e.current={editor:n,editorState:s}}))}function zu(){return{current:null,redoStack:[],undoStack:[]}}function If({delay:n,externalHistoryState:e}){const[t]=kt();return function(r,i,s=1e3){const o=K.useMemo(()=>i||zu(),[i]);K.useEffect(()=>Bu(r,o,s),[s,r,o])}(t,e,n),null}function Rf({hasStrictIndent:n=!1}){const[e]=kt();return K.useEffect(()=>{if(!e.hasNodes([yr,Cn]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")},[e]),K.useEffect(()=>{if(n)return ku(e)},[e,n]),function(t){K.useEffect(()=>Tu(t),[t])}(e),null}const Wu=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?K.useLayoutEffect:K.useEffect;function Uu(n){return{initialValueFn:()=>n.isEditable(),subscribe:e=>n.registerEditableListener(e)}}function Ju(){return function(n){const[e]=kt(),t=K.useMemo(()=>n(e),[e,n]),[r,i]=K.useState(()=>t.initialValueFn()),s=K.useRef(r);return Wu(()=>{const{initialValueFn:o,subscribe:l}=t,a=o();return s.current!==a&&(s.current=a,i(a)),l(c=>{s.current=c,i(c)})},[t,n]),r}(Uu)}function ju(n){const e=window.location.origin,t=r=>{if(r.origin!==e)return;const i=n.getRootElement();if(document.activeElement!==i)return;const s=r.data;if(typeof s=="string"){let o;try{o=JSON.parse(s)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){const l=o.payload;if(l&&l.functionId==="makeChanges"){const a=l.args;if(a){const[c,u,d,f,g,h]=a;n.update(()=>{const p=M();if(k(p)){const _=p.anchor;let y=_.getNode(),m=0,x=0;if(O(y)&&c>=0&&u>=0&&(m=c,x=c+u,p.setTextNodeRange(y,m,y,x)),m===x&&d===""||(p.insertRawText(d),y=_.getNode()),O(y)){m=f,x=f+g;const S=y.getTextContentSize();m=m>S?S:m,x=x>S?S:x,p.setTextNodeRange(y,m,y,x)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}}function Vu(n,e){const t=e.body?e.body.childNodes:[];let r=[];const i=[];for(let s=0;s<t.length;s++){const o=t[s];if(!fa.has(o.nodeName)){const l=da(o,n,i,!1);l!==null&&(r=r.concat(l))}}return function(s){for(const o of s)o.getNextSibling()instanceof Wi&&o.insertAfter(dt());for(const o of s){const l=o.getChildren();for(const a of l)o.insertBefore(a);o.remove()}}(i),r}function Hu(n,e){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const t=document.createElement("div"),r=H().getChildren();for(let i=0;i<r.length;i++)ua(n,r[i],t,e);return t.innerHTML}function ua(n,e,t,r=null){let i=r===null||e.isSelected(r);const s=C(e)&&e.excludeFromCopy("html");let o=e;if(r!==null){let g=es(e);g=O(g)&&r!==null?Yl(r,g):g,o=g}const l=C(o)?o.getChildren():[],a=ji(n,o.getType());let c;c=a&&a.exportDOM!==void 0?a.exportDOM(n,o):o.exportDOM(n);const{element:u,after:d}=c;if(!u)return!1;const f=document.createDocumentFragment();for(let g=0;g<l.length;g++){const h=l[g],p=ua(n,h,f,r);!i&&C(e)&&p&&e.extractWithChild(h,r,"html")&&(i=!0)}if(i&&!s){if((j(u)||ui(u))&&u.append(f),t.append(u),d){const g=d.call(o,u);g&&(ui(u)?u.replaceChildren(g):u.replaceWith(g))}}else t.append(f);return i}const fa=new Set(["STYLE","SCRIPT"]);function da(n,e,t,r,i=new Map,s){let o=[];if(fa.has(n.nodeName))return o;let l=null;const a=function(h,p){const{nodeName:_}=h,y=p._htmlConversions.get(_.toLowerCase());let m=null;if(y!==void 0)for(const x of y){const S=x(h);S!==null&&(m===null||(m.priority||0)<=(S.priority||0))&&(m=S)}return m!==null?m.conversion:null}(n,e),c=a?a(n):null;let u=null;if(c!==null){u=c.after;const h=c.node;if(l=Array.isArray(h)?h[h.length-1]:h,l!==null){for(const[,p]of i)if(l=p(l,s),!l)break;l&&o.push(...Array.isArray(h)?h:[l])}c.forChild!=null&&i.set(n.nodeName,c.forChild)}const d=n.childNodes;let f=[];const g=(l==null||!ge(l))&&(l!=null&&ii(l)||r);for(let h=0;h<d.length;h++)f.push(...da(d[h],e,t,g,new Map(i),l));return u!=null&&(f=u(f)),er(n)&&(f=qu(n,f,g?()=>{const h=new Wi;return t.push(h),h}:q)),l==null?f.length>0?o=o.concat(f):er(n)&&function(h){return h.nextSibling==null||h.previousSibling==null?!1:fi(h.nextSibling)&&fi(h.previousSibling)}(n)&&(o=o.concat(dt())):C(l)&&l.append(...f),o}function qu(n,e,t){const r=n.style.textAlign,i=[];let s=[];for(let o=0;o<e.length;o++){const l=e[o];if(ii(l))r&&!l.getFormat()&&l.setFormat(r),i.push(l);else if(s.push(l),o===e.length-1||o<e.length-1&&ii(e[o+1])){const a=t();a.setFormat(r),a.append(...s),i.push(a),s=[]}}return i}function rr(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Yu(n,e=M()){return e==null&&rr(166),k(e)&&e.isCollapsed()||e.getNodes().length===0?"":Hu(n,e)}function Gu(n,e=M()){return e==null&&rr(166),k(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(Xu(n,e))}function vo(n,e,t){const r=n.getData("application/x-lexical-editor");if(r)try{const l=JSON.parse(r);if(l.namespace===t._config.namespace&&Array.isArray(l.nodes))return So(t,Qu(l.nodes),e)}catch{}const i=n.getData("text/html"),s=n.getData("text/plain");if(i&&s!==i)try{const l=new DOMParser().parseFromString(function(a){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:c=>c}).createHTML(a):a}(i),"text/html");return So(t,Vu(t,l),e)}catch{}const o=s||n.getData("text/uri-list");if(o!=null)if(k(e)){const l=o.split(/(\r?\n|\t)/);l[l.length-1]===""&&l.pop();for(let a=0;a<l.length;a++){const c=M();if(k(c)){const u=l[a];u===`
`||u===`\r
`?c.insertParagraph():u==="	"?c.insertNodes([dn()]):c.insertText(u)}}}else e.insertRawText(o)}function So(n,e,t){n.dispatchCommand(Ua,{nodes:e,selection:t})||(t.insertNodes(e),function(r){if(k(r)&&r.isCollapsed()){const i=r.anchor;let s=null;const o=Fe(i,"previous");if(o)if(Pe(o))s=o.origin;else{const l=Qe(o,ce(H(),"next").getFlipped());for(const a of l){if(O(a.origin)){s=a.origin;break}if(C(a.origin)&&!a.origin.isInline())break}}if(s&&O(s)){const l=s.getFormat(),a=s.getStyle();r.format===l&&r.style===a||(r.format=l,r.style=a,r.dirty=!0)}}}(t))}function ha(n,e,t,r=[]){let i=e===null||t.isSelected(e);const s=C(t)&&t.excludeFromCopy("html");let o=t;if(e!==null){let c=es(t);c=O(c)&&e!==null?Yl(e,c):c,o=c}const l=C(o)?o.getChildren():[],a=function(c){const u=c.exportJSON(),d=c.constructor;if(u.type!==d.getType()&&rr(58,d.name),C(c)){const f=u.children;Array.isArray(f)||rr(59,d.name)}return u}(o);if(O(o)){const c=o.__text;c.length>0?a.text=c:i=!1}for(let c=0;c<l.length;c++){const u=l[c],d=ha(n,e,u,a.children);!i&&C(t)&&d&&t.extractWithChild(u,e,"clone")&&(i=!0)}if(i&&!s)r.push(a);else if(Array.isArray(a.children))for(let c=0;c<a.children.length;c++){const u=a.children[c];r.push(u)}return i}function Xu(n,e){const t=[],r=H().getChildren();for(let i=0;i<r.length;i++)ha(n,e,r[i],t);return{namespace:n._config.namespace,nodes:t}}function Qu(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t],i=pc(r);O(i)&&Yc(i),e.push(i)}return e}let wt=null;async function bo(n,e,t){if(wt!==null)return!1;if(e!==null)return new Promise((c,u)=>{n.update(()=>{c(To(n,e,t))})});const r=n.getRootElement(),i=n._window||window,s=window.document,o=ke(i);if(r===null||o===null)return!1;const l=s.createElement("span");l.style.cssText="position: fixed; top: -1000px;",l.append(s.createTextNode("#")),r.append(l);const a=new Range;return a.setStart(l,0),a.setEnd(l,1),o.removeAllRanges(),o.addRange(a),new Promise((c,u)=>{const d=n.registerCommand(or,f=>(rt(f,ClipboardEvent)&&(d(),wt!==null&&(window.clearTimeout(wt),wt=null),c(To(n,f,t))),!0),Sc);wt=window.setTimeout(()=>{d(),wt=null,c(!1)},50),s.execCommand("copy"),l.remove()})}function To(n,e,t){if(t===void 0){const i=ke(n._window);if(!i)return!1;const s=i.anchorNode,o=i.focusNode;if(s!==null&&o!==null&&!_n(n,s,o))return!1;const l=M();if(l===null)return!1;t=ef(l)}e.preventDefault();const r=e.clipboardData;return r!==null&&(tf(r,t),!0)}const Zu=[["text/html",Yu],["application/x-lexical-editor",Gu]];function ef(n=M()){const e={"text/plain":n?n.getTextContent():""};if(n){const t=pr();for(const[r,i]of Zu){const s=i(t,n);s!==null&&(e[r]=s)}}return e}function tf(n,e){for(const t in e){const r=e[t];r!==void 0&&n.setData(t,r)}}function ko(n,e){if(document.caretRangeFromPoint!==void 0){const t=document.caretRangeFromPoint(n,e);return t===null?null:{node:t.startContainer,offset:t.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const t=document.caretPositionFromPoint(n,e);return t===null?null:{node:t.offsetNode,offset:t.offset}}return null}const Ut=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,nf=Ut&&"documentMode"in document?document.documentMode:null,rf=!(!Ut||!("InputEvent"in window)||nf)&&"getTargetRanges"in new window.InputEvent("input"),sf=Ut&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),No=Ut&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,of=Ut&&/^(?=.*Chrome).*/i.test(navigator.userAgent),lf=Ut&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!of,wo=D("DRAG_DROP_PASTE_FILE");class xr extends xe{static getType(){return"quote"}static clone(e){return new xr(e.__key)}createDOM(e){const t=document.createElement("blockquote");return xn(t,e.theme.quote),t}updateDOM(e,t){return!1}static importDOM(){return{blockquote:e=>({conversion:af,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(j(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();r&&(t.style.textAlign=r);const i=this.getDirection();i&&(t.dir=i)}return{element:t}}static importJSON(e){return ga().updateFromJSON(e)}insertNewAfter(e,t){const r=q(),i=this.getDirection();return r.setDirection(i),this.insertAfter(r,t),r}collapseAtStart(){const e=q();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}canMergeWhenEmpty(){return!0}}function ga(){return $e(new xr)}function Kf(n){return n instanceof xr}class Cr extends xe{static getType(){return"heading"}static clone(e){return new Cr(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}setTag(e){const t=this.getWritable();return this.__tag=e,t}createDOM(e){const t=this.__tag,r=document.createElement(t),i=e.theme.heading;if(i!==void 0){const s=i[t];xn(r,s)}return r}updateDOM(e,t,r){return e.__tag!==this.__tag}static importDOM(){return{h1:e=>({conversion:Et,priority:0}),h2:e=>({conversion:Et,priority:0}),h3:e=>({conversion:Et,priority:0}),h4:e=>({conversion:Et,priority:0}),h5:e=>({conversion:Et,priority:0}),h6:e=>({conversion:Et,priority:0}),p:e=>{const t=e.firstChild;return t!==null&&Eo(t)?{conversion:()=>({node:null}),priority:3}:null},span:e=>Eo(e)?{conversion:t=>({node:Yt("h1")}),priority:3}:null}}exportDOM(e){const{element:t}=super.exportDOM(e);if(j(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();r&&(t.style.textAlign=r);const i=this.getDirection();i&&(t.dir=i)}return{element:t}}static importJSON(e){return Yt(e.tag).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(e,t=!0){const r=e?e.anchor.offset:0,i=this.getLastDescendant(),s=!i||e&&e.anchor.key===i.getKey()&&r===i.getTextContentSize()||!e?q():Yt(this.getTag()),o=this.getDirection();if(s.setDirection(o),this.insertAfter(s,t),r===0&&!this.isEmpty()&&e){const l=q();l.select(),this.replace(l,!0)}return s}collapseAtStart(){const e=this.isEmpty()?q():Yt(this.getTag());return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}extractWithChild(){return!0}}function Eo(n){return n.nodeName.toLowerCase()==="span"&&n.style.fontSize==="26pt"}function Et(n){const e=n.nodeName.toLowerCase();let t=null;return e!=="h1"&&e!=="h2"&&e!=="h3"&&e!=="h4"&&e!=="h5"&&e!=="h6"||(t=Yt(e),n.style!==null&&(ts(n,t),t.setFormat(n.style.textAlign))),{node:t}}function af(n){const e=ga();return n.style!==null&&(e.setFormat(n.style.textAlign),ts(n,e)),{node:e}}function Yt(n="h1"){return $e(new Cr(n))}function Bf(n){return n instanceof Cr}function Dn(n){let e=null;if(rt(n,DragEvent)?e=n.dataTransfer:rt(n,ClipboardEvent)&&(e=n.clipboardData),e===null)return[!1,[],!1];const t=e.types,r=t.includes("Files"),i=t.includes("text/html")||t.includes("text/plain");return[r,Array.from(e.files),i]}function Oo(n){const e=M();if(!k(e))return!1;const t=new Set,r=e.getNodes();for(let i=0;i<r.length;i++){const s=r[i],o=s.getKey();if(t.has(o))continue;const l=Xe(s,c=>C(c)&&!c.isInline());if(l===null)continue;const a=l.getKey();l.canIndent()&&!t.has(a)&&(t.add(a),n(l))}return t.size>0}function Mo(n){const e=Je(n);return B(e)}function zr(n){for(const e of["lowercase","uppercase","capitalize"])n.hasFormat(e)&&n.toggleFormat(e)}function cf(n){return Tt(n.registerCommand(Go,e=>{const t=M();return!!le(t)&&(t.clear(),!0)},R),n.registerCommand(it,e=>{const t=M();return k(t)?(t.deleteCharacter(e),!0):!!le(t)&&(t.deleteNodes(),!0)},R),n.registerCommand(sn,e=>{const t=M();return!!k(t)&&(t.deleteWord(e),!0)},R),n.registerCommand(on,e=>{const t=M();return!!k(t)&&(t.deleteLine(e),!0)},R),n.registerCommand(Dt,e=>{const t=M();if(typeof e=="string")t!==null&&t.insertText(e);else{if(t===null)return!1;const r=e.dataTransfer;if(r!=null)vo(r,t,n);else if(k(t)){const i=e.data;return i&&t.insertText(i),!0}}return!0},R),n.registerCommand(Gr,()=>{const e=M();return!!k(e)&&(e.removeText(),!0)},R),n.registerCommand(qe,e=>{const t=M();return!!k(t)&&(t.formatText(e),!0)},R),n.registerCommand(Ya,e=>{const t=M();if(!k(t)&&!le(t))return!1;const r=t.getNodes();for(const i of r){const s=Xe(i,o=>C(o)&&!o.isInline());s!==null&&s.setFormat(e)}return!0},R),n.registerCommand(Pt,e=>{const t=M();return!!k(t)&&(t.insertLineBreak(e),!0)},R),n.registerCommand(rn,()=>{const e=M();return!!k(e)&&(e.insertParagraph(),!0)},R),n.registerCommand(Ha,()=>(dc([dn()]),!0),R),n.registerCommand(qa,()=>Oo(e=>{const t=e.getIndent();e.setIndent(t+1)}),R),n.registerCommand(Ts,()=>Oo(e=>{const t=e.getIndent();t>0&&e.setIndent(Math.max(0,t-1))}),R),n.registerCommand(Di,e=>{const t=M();if(le(t)){const r=t.getNodes();if(r.length>0)return r[0].selectPrevious(),!0}else if(k(t)){const r=li(t.focus,!0);if(!e.shiftKey&&B(r)&&!r.isIsolated()&&!r.isInline())return r.selectPrevious(),e.preventDefault(),!0}return!1},R),n.registerCommand(Li,e=>{const t=M();if(le(t)){const r=t.getNodes();if(r.length>0)return r[0].selectNext(0,0),!0}else if(k(t)){if(function(i){const s=i.focus;return s.key==="root"&&s.offset===H().getChildrenSize()}(t))return e.preventDefault(),!0;const r=li(t.focus,!1);if(!e.shiftKey&&B(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),e.preventDefault(),!0}return!1},R),n.registerCommand(Pi,e=>{const t=M();if(le(t)){const r=t.getNodes();if(r.length>0)return e.preventDefault(),oo(r[0])?r[0].selectNext(0,0):r[0].selectPrevious(),!0}if(!k(t))return!1;if(lo(t,!0)){const r=e.shiftKey;return e.preventDefault(),ao(t,r,!0),!0}return!1},R),n.registerCommand(Xo,e=>{const t=M();if(le(t)){const i=t.getNodes();if(i.length>0)return e.preventDefault(),oo(i[0])?i[0].selectPrevious():i[0].selectNext(0,0),!0}if(!k(t))return!1;const r=e.shiftKey;return!!lo(t,!1)&&(e.preventDefault(),ao(t,r,!1),!0)},R),n.registerCommand(Qo,e=>{if(Mo(e.target))return!1;const t=M();if(k(t)){if(function(r){if(!r.isCollapsed())return!1;const{anchor:i}=r;if(i.offset!==0)return!1;const s=i.getNode();if(X(s))return!1;const o=ou(s);return o.getIndent()>0&&(o.is(s)||s.is(o.getFirstDescendant()))}(t))return e.preventDefault(),n.dispatchCommand(Ts,void 0);if(No&&navigator.language==="ko-KR")return!1}else if(!le(t))return!1;return e.preventDefault(),n.dispatchCommand(it,!0)},R),n.registerCommand(Zo,e=>{if(Mo(e.target))return!1;const t=M();return!(!k(t)&&!le(t))&&(e.preventDefault(),n.dispatchCommand(it,!1))},R),n.registerCommand(qn,e=>{const t=M();if(!k(t))return!1;if(zr(t),e!==null){if((No||sf||lf)&&rf)return!1;if(e.preventDefault(),e.shiftKey)return n.dispatchCommand(Pt,!1)}return n.dispatchCommand(rn,void 0)},R),n.registerCommand($i,()=>{const e=M();return!!k(e)&&(n.blur(),!0)},R),n.registerCommand(tl,e=>{const[,t]=Dn(e);if(t.length>0){const i=ko(e.clientX,e.clientY);if(i!==null){const{offset:s,node:o}=i,l=Je(o);if(l!==null){const a=Ki();if(O(l))a.anchor.set(l.getKey(),s,"text"),a.focus.set(l.getKey(),s,"text");else{const u=l.getParentOrThrow().getKey(),d=l.getIndexWithinParent()+1;a.anchor.set(u,d,"element"),a.focus.set(u,d,"element")}const c=Kt(a);oe(c)}n.dispatchCommand(wo,t)}return e.preventDefault(),!0}const r=M();return!!k(r)},R),n.registerCommand(nl,e=>{const[t]=Dn(e),r=M();return!(t&&!k(r))},R),n.registerCommand(rl,e=>{const[t]=Dn(e),r=M();if(t&&!k(r))return!1;const i=ko(e.clientX,e.clientY);if(i!==null){const s=Je(i.node);B(s)&&e.preventDefault()}return!0},R),n.registerCommand(Xr,()=>(wc(),!0),R),n.registerCommand(or,e=>(bo(n,rt(e,ClipboardEvent)?e:null),!0),R),n.registerCommand(Ii,e=>(async function(t,r){await bo(r,rt(t,ClipboardEvent)?t:null),r.update(()=>{const i=M();k(i)?i.removeText():le(i)&&i.getNodes().forEach(s=>s.remove())})}(e,n),!0),R),n.registerCommand(Oi,e=>{const[,t,r]=Dn(e);return t.length>0&&!r?(n.dispatchCommand(wo,t),!0):Wt(e.target)&&Vi(e.target)?!1:M()!==null&&(function(i,s){i.preventDefault(),s.update(()=>{const o=M(),l=rt(i,InputEvent)||rt(i,KeyboardEvent)?null:i.clipboardData;l!=null&&o!==null&&vo(l,o,s)},{tag:mc})}(e,n),!0)},R),n.registerCommand(Fi,e=>{const t=M();return k(t)&&zr(t),!1},R),n.registerCommand(el,e=>{const t=M();return k(t)&&zr(t),!1},R))}const Ci=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?K.useLayoutEffect:K.useEffect;function Ao(n){return n.getEditorState().read(aa(n.isComposing()))}function zf({contentEditable:n,placeholder:e=null,ErrorBoundary:t}){const[r]=kt(),i=function(s,o){const[l,a]=K.useState(()=>s.getDecorators());return Ci(()=>s.registerDecoratorListener(c=>{fs.flushSync(()=>{a(c)})}),[s]),K.useEffect(()=>{a(s.getDecorators())},[s]),K.useMemo(()=>{const c=[],u=Object.keys(l);for(let d=0;d<u.length;d++){const f=u[d],g=de.jsx(o,{onError:p=>s._onError(p),children:de.jsx(K.Suspense,{fallback:null,children:l[f]})}),h=s.getElementByKey(f);h!==null&&c.push(fs.createPortal(g,h,f))}return c},[o,l,s])}(r,t);return function(s){Ci(()=>Tt(cf(s),ju(s)),[s])}(r),de.jsxs(de.Fragment,{children:[n,de.jsx(uf,{content:e}),i]})}function uf({content:n}){const[e]=kt(),t=function(i){const[s,o]=K.useState(()=>Ao(i));return Ci(()=>{function l(){const a=Ao(i);o(a)}return l(),Tt(i.registerUpdateListener(()=>{l()}),i.registerEditableListener(()=>{l()}))},[i]),s}(e),r=Ju();return t?typeof n=="function"?n(r):n:null}const ff=new Set(["http:","https:","mailto:","sms:","tel:"]);class vn extends xe{static getType(){return"link"}static clone(e){return new vn(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e="",t={},r){super(r);const{target:i=null,rel:s=null,title:o=null}=t;this.__url=e,this.__target=i,this.__rel=s,this.__title=o}createDOM(e){const t=document.createElement("a");return this.updateLinkDOM(null,t,e),xn(t,e.theme.link),t}updateLinkDOM(e,t,r){if(Rl(t)){e&&e.__url===this.__url||(t.href=this.sanitizeUrl(this.__url));for(const i of["target","rel","title"]){const s=`__${i}`,o=this[s];e&&e[s]===o||(o?t[i]=o:t.removeAttribute(i))}}}updateDOM(e,t,r){return this.updateLinkDOM(e,t,r),!1}static importDOM(){return{a:e=>({conversion:df,priority:1})}}static importJSON(e){return cn().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){e=Fo(e);try{const t=new URL(Fo(e));if(!ff.has(t.protocol))return"about:blank"}catch{return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){const t=this.getWritable();return t.__url=e,t}getTarget(){return this.getLatest().__target}setTarget(e){const t=this.getWritable();return t.__target=e,t}getRel(){return this.getLatest().__rel}setRel(e){const t=this.getWritable();return t.__rel=e,t}getTitle(){return this.getLatest().__title}setTitle(e){const t=this.getWritable();return t.__title=e,t}insertNewAfter(e,t=!0){const r=cn(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,t),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,r){if(!k(t))return!1;const i=t.anchor.getNode(),s=t.focus.getNode();return this.isParentOf(i)&&this.isParentOf(s)&&t.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function df(n){let e=null;if(Rl(n)){const t=n.textContent;(t!==null&&t!==""||n.children.length>0)&&(e=cn(n.getAttribute("href")||"",{rel:n.getAttribute("rel"),target:n.getAttribute("target"),title:n.getAttribute("title")}))}return{node:e}}function cn(n="",e){return $e(new vn(n,e))}function tt(n){return n instanceof vn}class vr extends vn{constructor(e="",t={},r){super(e,t,r),this.__isUnlinked=t.isUnlinked!==void 0&&t.isUnlinked!==null&&t.isUnlinked}static getType(){return"autolink"}static clone(e){return new vr(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){const t=this.getWritable();return t.__isUnlinked=e,t}createDOM(e){return this.__isUnlinked?document.createElement("span"):super.createDOM(e)}updateDOM(e,t,r){return super.updateDOM(e,t,r)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){return Po().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIsUnlinked(e.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(e,t=!0){const r=this.getParentOrThrow().insertNewAfter(e,t);if(C(r)){const i=Po(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(i),i}return null}}function Po(n="",e){return $e(new vr(n,e))}function Ln(n){return n instanceof vr}const Wf=D("TOGGLE_LINK_COMMAND");function Do(n,e){if(n.type==="element"){const t=n.getNode();return C(t)||function(r,...i){const s=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams;o.append("code",r);for(const l of i)o.append("v",l);throw s.search=o.toString(),Error(`Minified Lexical error #${r}; visit ${s.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),t.getChildren()[n.offset+e]||null}return null}function Uf(n,e={}){const{target:t,title:r}=e,i=e.rel===void 0?"noreferrer":e.rel,s=M();if(s===null||!k(s)&&!le(s))return;if(le(s)){const c=s.getNodes();return c.length===0?void 0:void c.forEach(u=>{if(n===null){const d=Xe(u,f=>!Ln(f)&&tt(f));d&&(d.insertBefore(u),d.getChildren().length===0&&d.remove())}else{const d=Xe(u,f=>!Ln(f)&&tt(f));if(d)d.setURL(n),t!==void 0&&d.setTarget(t),i!==void 0&&d.setRel(i);else{const f=cn(n,{rel:i,target:t});u.insertBefore(f),f.append(u)}}})}const o=s.extract();if(n===null)return void o.forEach(c=>{const u=Xe(c,d=>!Ln(d)&&tt(d));if(u){const d=u.getChildren();for(let f=0;f<d.length;f++)u.insertBefore(d[f]);u.remove()}});const l=new Set,a=c=>{l.has(c.getKey())||(l.add(c.getKey()),c.setURL(n),t!==void 0&&c.setTarget(t),i!==void 0&&c.setRel(i),r!==void 0&&c.setTitle(r))};if(o.length===1){const c=Lo(o[0],tt);if(c!==null)return a(c)}(function(c){const u=M();if(!k(u))return c();const d=Kt(u),f=d.isBackward(),g=Do(d.anchor,f?-1:0),h=Do(d.focus,f?0:-1);if(c(),g||h){const p=M();if(k(p)){const _=p.clone();if(g){const y=g.getParent();y&&_.anchor.set(y.getKey(),g.getIndexWithinParent()+(f?1:0),"element")}if(h){const y=h.getParent();y&&_.focus.set(y.getKey(),h.getIndexWithinParent()+(f?0:1),"element")}oe(Kt(_))}}})(()=>{let c=null;for(const u of o){if(!u.isAttached())continue;const d=Lo(u,tt);if(d){a(d);continue}if(C(u)){if(!u.isInline())continue;if(tt(u)){if(!(Ln(u)||c!==null&&c.getParentOrThrow().isParentOf(u))){a(u),c=u;continue}for(const g of u.getChildren())u.insertBefore(g);u.remove();continue}}const f=u.getPreviousSibling();tt(f)&&f.is(c)?f.append(u):(c=cn(n,{rel:i,target:t,title:r}),u.insertAfter(c),c.append(u))}})}function Lo(n,e){let t=n;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}const hf=/^\+?[0-9\s()-]{5,}$/;function Fo(n){return n.match(/^[a-z][a-z0-9+.-]*:/i)||n.match(/^[/#.]/)?n:n.includes("@")?`mailto:${n}`:hf.test(n)?`tel:${n}`:`https://${n}`}export{Ct as $,D as A,Mf as B,Af as C,ns as D,Wt as E,q as F,Q as G,Xe as H,R as I,yf as J,C as K,Ft as L,Cf as M,In as N,St as O,wf as P,Z as Q,Li as R,H as S,pr as T,Di as U,Pi as V,Xo as W,mf as X,$i as Y,O as Z,G as _,$f as a,ga as a$,sn as a0,on as a1,it as a2,Sc as a3,Qo as a4,Zo as a5,Ii as a6,bo as a7,ef as a8,rt as a9,ct as aA,bl as aB,tl as aC,rl as aD,be as aE,Dn as aF,Ql as aG,tt as aH,F as aI,su as aJ,Bf as aK,kf as aL,kn as aM,Nn as aN,bf as aO,Tf as aP,qa as aQ,Ts as aR,ou as aS,Kf as aT,Sf as aU,yr as aV,Su as aW,bu as aX,yu as aY,vu as aZ,Yt as a_,qe as aa,Ya as ab,Dt as ac,el as ad,Za as ae,Yo as af,oe as ag,ke as ah,_f as ai,rn as aj,Ki as ak,Ui as al,X as am,ge as an,Le as ao,Fe as ap,Ul as aq,os as ar,_t as as,ye as at,ce as au,he as av,yt as aw,_r as ax,Kt as ay,hn as az,xn as b,xr as b0,Cr as b1,Cn as b2,Rf as b3,Lf as b4,If as b5,pn as b6,dc as b7,Ef as b8,ec as b9,zu as ba,Ja as bb,le as bc,yl as bd,pe as be,I as bf,ve as bg,B as bh,Of as bi,Ha as bj,ii as bk,hi as bl,qn as bm,cn as bn,vn as bo,Oi as bp,Wf as bq,Uf as br,vr as bs,Ln as bt,Po as bu,Ec as bv,tc as bw,Mi as bx,Ai as by,xe as c,Ia as d,gl as e,dt as f,vf as g,zf as h,ta as i,Nf as j,xf as k,$e as l,Je as m,dn as n,kt as o,Pf as p,ji as q,Nu as r,Tt as s,Df as t,Go as u,Ua as v,M as w,Ff as x,j as y,k as z};
