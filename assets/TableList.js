const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ShadowCastClear.glsl.js","./iframe-DwvN93Ge.js","./iframe-CGchYWp9.css","./index.js","./Viewport.js","./Section.js","./ErrorBoundary.js","./createClass.js","./Global.js","./useIsDark.js","./debounce.js","./index2.js","./ShadowCastClear-Cq39gfL_.css"])))=>i.map(i=>d[i]);
import{b8 as L}from"./iframe-DwvN93Ge.js";import{et as H,pZ as j,q3 as h,vG as q,E as i,F as l,V as P,b6 as K,O as E,bj as _,b5 as C,X as Q,vH as V,vI as ee,bx as te,pY as R,vJ as ie,vK as se,vL as le,vM as oe,he as ne,ev as re,vN as ae,p_ as de,vO as G,ew as he,q0 as ce,q1 as pe,q2 as ue,q4 as A,q5 as J,q6 as me,q7 as ye,q8 as W,q9 as be}from"./ShadowCastClear.glsl.js";import"./index.js";import"./Viewport.js";import"./Section.js";import"./ErrorBoundary.js";import"./createClass.js";import"./Global.js";import"./useIsDark.js";import"./debounce.js";import"./index2.js";const I="esri-table-list",w=`${I}__item`,$={base:I,actionMenu:`${I}__action-menu`,actionGroup:`${I}__action-group`,filterNoResults:`${I}__filter-no-results`,item:w,itemContentBottom:`${w}-content-bottom`,itemMessage:`${w}-message`,itemActionIcon:`${w}-action-icon`,itemActionImage:`${w}-action-image`,itemTemporaryIcon:`${w}-temporary-icon`,publishing:`${I}__publishing`,statusIndicator:`${I}__status-indicator`};let p=class extends H(j){constructor(t,s){super(t,s),this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}get disabled(){return!(this.content&&this.listItem)}set disabled(t){this._overrideIfSome("disabled",t)}get icon(){const{image:t}=this,s=this._getFirstWidget();return this._get("icon")??(!t&&s?s.icon:null)}set icon(t){this._overrideIfSome("icon",t)}get title(){var t;return this._get("title")||(((t=this._getFirstWidget())==null?void 0:t.label)??"")}set title(t){this._override("title",t)}render(){return h("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(t){const{disabled:s,open:o}=this;return t&&!s&&o?typeof t=="string"?h("div",{innerHTML:t,key:t}):q(t)?h("div",{key:"content-widget"},t.render()):t instanceof HTMLElement?h("div",{afterCreate:this._attachToNode,bind:t,key:"content-element"}):null:null}_renderContents(){const{content:t,open:s}=this;return s?Array.isArray(t)?t.map(o=>this._renderContent(o)):this._renderContent(t):null}_attachToNode(t){t.appendChild(this)}_getWidget(t){return q(t)?t:null}_getFirstWidget(){const{content:t}=this;return Array.isArray(t)?t.map(s=>this._getWidget(s)).find(s=>s):this._getWidget(t)}};i([l()],p.prototype,"content",void 0),i([l()],p.prototype,"disabled",null),i([l()],p.prototype,"flowEnabled",void 0),i([l()],p.prototype,"icon",null),i([l()],p.prototype,"image",void 0),i([l()],p.prototype,"listItem",void 0),i([l()],p.prototype,"open",void 0),i([l()],p.prototype,"title",null),i([l()],p.prototype,"visible",void 0),p=i([P("esri.widgets.TableList.ListItemPanel")],p);var M;const x="layer",O="child-list-mode",_e="hide",ge=E.ofType({key:"type",defaultKeyValue:"button",base:oe,typeMap:{button:le,toggle:se}}),X=E.ofType(ge);let a=M=class extends H(K){constructor(e){super(e),this.actionsSections=new X,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(E.ofType(M)),this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.parent=null,this.sortable=!0}initialize(){if(this.addHandles([_(()=>{var e;return[(e=this.layer)==null?void 0:e.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),C),_(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),C),_(()=>this.panel,e=>this._setListItemOnPanel(e),C)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){var e;(e=this.panel)==null||e.destroy(),this.children.destroyAll()}get error(){var e;return(e=this.layer)==null?void 0:e.loadError}set panel(e){const t=this._get("panel");e!==t&&e&&(t==null||t.destroy()),this._set("panel",e)}castPanel(e){var t;return(t=this.panel)!=null&&t.open&&!e.hasOwnProperty("open")&&(e.open=!0),Q(p,e)}get publishing(){var s;const{layer:e,checkPublishStatusEnabled:t}=this;return(t&&e&&"publishingInfo"in e&&((s=e.publishingInfo)==null?void 0:s.status)==="publishing")??!1}get title(){var t;const e=V(this,"layer.layer");return(!e||e&&V(this,"layer.layer.loaded")?(t=this.layer)==null?void 0:t.title:null)??""}set title(e){this._overrideIfSome("title",e)}clone(){return new M({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title})}_updateChildrenPublishing(e){var t;(t=this.children)==null||t.forEach(s=>s.checkPublishStatusEnabled=e)}_setListItemOnPanel(e){e&&(e.listItem=this)}_createChildItems(e,t){return e.reverse().map(s=>t||ee(s)?new M({layer:s,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this}):null).filter(te)}_createChildren(e){const{listModeDisabled:t,children:s}=this,o=e.reverse().filter(r=>!s.some(d=>d.layer===r));s.addMany(this._createChildItems(o,t))}_destroyChildren(e){const{children:t}=this,s=t.filter(o=>!!o.layer&&!e.includes(o.layer));t.destroyMany(s)}_sortChildren(e){this.children.sort((t,s)=>e.indexOf(s.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(O),this.children.destroyAll()}_compileChildren(e){const t=this.listModeDisabled?e:e==null?void 0:e.filter(s=>R(s)!==_e);e!=null&&e.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchChildLayerListMode(e){this.removeHandles(O),this.listModeDisabled||this.addHandles(e.toArray().map(t=>_(()=>t.listMode,()=>this._compileChildren(e))),O)}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),x)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_watchLayerProperties(e){if(this.removeHandles(x),this.removeHandles(O),!e)return;if(e.load(),(!this.listModeDisabled&&R(e))==="hide-children")return void this.children.destroyAll();const t=ie(e);t&&this.addHandles(_(()=>e[t],s=>{e.hasOwnProperty(t)&&this._initializeChildLayers(s)},C),x)}};i([l({type:X})],a.prototype,"actionsSections",void 0),i([l()],a.prototype,"actionsOpen",void 0),i([l()],a.prototype,"checkPublishStatusEnabled",void 0),i([l({type:E.ofType(a)})],a.prototype,"children",void 0),i([l({readOnly:!0})],a.prototype,"error",null),i([l()],a.prototype,"hidden",void 0),i([l()],a.prototype,"layer",void 0),i([l()],a.prototype,"listItemCreatedFunction",void 0),i([l({nonNullable:!0})],a.prototype,"listModeDisabled",void 0),i([l()],a.prototype,"open",void 0),i([l({type:p})],a.prototype,"panel",null),i([ne("panel")],a.prototype,"castPanel",null),i([l()],a.prototype,"parent",void 0),i([l({readOnly:!0})],a.prototype,"publishing",null),i([l()],a.prototype,"sortable",void 0),i([l()],a.prototype,"title",null),a=M=i([P("esri.widgets.TableList.ListItem")],a);const B={map:"map",layerListMode:"layer-list-mode"},fe="hide",Y=E.ofType(a);let u=class extends re{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.tableItems=new Y,this.map=null}initialize(){this.addHandles([_(()=>{var e;return[this.tables,(e=this.map)==null?void 0:e.allTables.toArray()]},()=>this._compileList(),C),_(()=>{var e;return[(e=this.map)==null?void 0:e.loaded,this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled]},()=>this._recompileList())],B.map)}destroy(){this._removeAllItems(),this.map=null,this.tables=null}get tables(){var e;return(e=this.map)==null?void 0:e.allTables}set tables(e){this._overrideIfSome("tables",e)}get state(){const{map:e,tables:t}=this;if(!e)return t?"ready":"disabled";const s=e==null?void 0:e.loadStatus;return typeof s=="string"?s==="loaded"?"ready":s==="loading"?"loading":"disabled":"ready"}get totalItems(){return this.tableItems.length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}_removeAllItems(){this.tableItems.destroyAll()}_getViewableTables(e){return e?this.listModeDisabled?e:e.filter(t=>R(t)!==fe):void 0}_watchTablesListMode(e){this.removeHandles(B.layerListMode),e&&!this.listModeDisabled&&this.addHandles(_(()=>e.filter(t=>"listMode"in t).map(t=>t.listMode).toArray(),()=>this._compileList()),B.layerListMode)}_compileList(){const{tables:e}=this;this._watchTablesListMode(e);const t=this._getViewableTables(e);t!=null&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}_createNewItems(e){const{tableItems:t,listItemCreatedFunction:s,checkPublishStatusEnabled:o}=this;e.forEach(r=>{t.some(d=>d.layer===r)||t.add(new a({checkPublishStatusEnabled:o,layer:r,listItemCreatedFunction:s}))})}_removeItems(e){const{tableItems:t}=this;t.forEach(s=>{if(!s)return;(e==null?void 0:e.find(r=>s.layer===r))||(t.remove(s),s.destroy())})}_sortItems(e){const{tableItems:t}=this;t.sort((s,o)=>{const r=e.indexOf(s.layer),d=e.indexOf(o.layer);return r>d?-1:r<d?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}};i([l()],u.prototype,"checkPublishStatusEnabled",void 0),i([l()],u.prototype,"listItemCreatedFunction",void 0),i([l({nonNullable:!0})],u.prototype,"listModeDisabled",void 0),i([l({type:Y,readOnly:!0})],u.prototype,"tableItems",void 0),i([l()],u.prototype,"tables",null),i([l()],u.prototype,"map",void 0),i([l({readOnly:!0})],u.prototype,"state",null),i([l()],u.prototype,"totalItems",null),u=i([P("esri.widgets.TableList.TableListViewModel")],u);let m=class extends K{constructor(){super(...arguments),this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryTableIndicators=!1}};i([l({type:Boolean,nonNullable:!0})],m.prototype,"closeButton",void 0),i([l({type:Boolean,nonNullable:!0})],m.prototype,"collapseButton",void 0),i([l({type:Boolean,nonNullable:!0})],m.prototype,"errors",void 0),i([l({type:Boolean,nonNullable:!0})],m.prototype,"filter",void 0),i([l({type:Boolean,nonNullable:!0})],m.prototype,"flow",void 0),i([l({type:Boolean,nonNullable:!0})],m.prototype,"heading",void 0),i([l({type:Boolean,nonNullable:!0})],m.prototype,"statusIndicators",void 0),i([l({type:Boolean,nonNullable:!0})],m.prototype,"temporaryTableIndicators",void 0),m=i([P("esri.widgets.TableList.TableListVisibleElements")],m);function k(e){return e["data-item"]}function ve(e,t){e==null||e.sort((s,o)=>{const r=t.indexOf(s.uid),d=t.indexOf(o.uid);return r>d?-1:r<d?1:0})}const z="nested",Z=E.ofType(a);let n=class extends H(j){constructor(e,t){super(e,t),this._rootListEl=null,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`table-${this.uid}`,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=ae,this.minFilterItems=de,this.selectedItems=new Z,this.selectionMode="none",this.viewModel=new u,this.visibleElements=new m,this._canMove=({dragEl:s,fromEl:o,toEl:r},d)=>{const f=d==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,y=k(s);if(!(y!=null&&y.sortable))return!1;const v=k(o),g=G(o),b=k(r),F=G(r),D=!!g&&!!F&&g===F,N={selected:y,from:v,to:b},S=o.group,T=r.group;return S&&T&&typeof f=="function"?f.call(null,N):D},this._onCalciteListOrderChange=s=>{var g;const{_lastDragDetail:o}=this,{toEl:r,fromEl:d,dragEl:f,newIndex:y}=s;if(!d||!r||(o==null?void 0:o.newIndex)===y&&(o==null?void 0:o.dragEl)===f&&(o==null?void 0:o.toEl)===r&&(o==null?void 0:o.fromEl)===d)return;this._lastDragDetail=s,this._selectedDragItemLayerUid=f.value;const v=Array.from(d.children).filter(b=>b==null?void 0:b.matches("calcite-list-item")).map(b=>b.value);ve((g=this.map)==null?void 0:g.tables,v)},this._onSelectedDragItemLayerUidChange=s=>{this._selectedDragItemLayerUid=s},this._onTriggerAction=(s,o)=>{this.triggerAction(s,o)},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0}}initialize(){this.addHandles([he(()=>this.viewModel.tableItems,"change",()=>ce(this.selectedItems),C),_(()=>[this.filterPredicate,this._rootListEl],()=>pe(this._rootListEl,this.filterPredicate))])}loadDependencies(){return ue({button:()=>L(()=>import("./ShadowCastClear.glsl.js").then(e=>e.JM),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),flow:()=>L(()=>import("./ShadowCastClear.glsl.js").then(e=>e.JN),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),"flow-item":()=>L(()=>import("./ShadowCastClear.glsl.js").then(e=>e.JL),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),list:()=>L(()=>import("./ShadowCastClear.glsl.js").then(e=>e.JJ),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),notice:()=>L(()=>import("./ShadowCastClear.glsl.js").then(e=>e.JO),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)})}get _dragEnabled(){return this.viewModel.totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this.viewModel.totalItems>=this.minFilterItems&&this.visibleElements.filter}get _visibleItems(){var e;return(e=this.tableItems)==null?void 0:e.filter(t=>!t.hidden&&(this.visibleElements.errors||!t.error))}get _openedPanelItems(){return this._visibleItems.filter(({hidden:e,panel:t})=>!e&&(t==null?void 0:t.open)&&!t.disabled&&t.flowEnabled)}get icon(){return"table"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get tableItems(){return this.viewModel.tableItems}get tables(){return this.viewModel.tables}set tables(e){this.viewModel.tables=e}triggerAction(e,t){return this.viewModel.triggerAction(e,t)}render(){var s;const e=(s=this.viewModel)==null?void 0:s.state,t={[A.hidden]:e==="loading",[A.disabled]:e==="disabled"};return h("div",{class:this.classes($.base,A.widget,A.panel,t)},this._renderItems())}_renderNoItemsMessage(){return h("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return h("div",{class:$.itemMessage,key:"esri-layer-list__no-items"},h("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}_renderPanelFlowItems(){const{_openedPanelItems:e}=this;return e.toArray().map(({title:t,panel:s},o)=>{const r=()=>this._handlePanelFlowItemBack(s);return h("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:t,heading:s.title,headingLevel:this.headingLevel,key:`flow-panel-${s.uid}`,selected:o===e.length-1,onCalciteFlowItemBack:d=>{d.preventDefault(),r()}},s.render(),h("calcite-button",{appearance:"transparent",onclick:r,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,J(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,J(e))}_renderItems(){const{visible:e,collapsed:t,visibleElements:{closeButton:s,collapseButton:o,heading:r,flow:d},_dragEnabled:f,_visibleItems:y,_filterEnabled:v,_rootGroupUid:g,_openedPanelItems:b,selectionMode:F,messages:D,filterPlaceholder:N,filterText:S}=this,T=[h("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:s,closed:!e,collapsed:t,collapsible:o,heading:r?D.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!b.length,onCalciteFlowItemClose:()=>this.visible=!1},y!=null&&y.length?null:this._renderNoItems(),h("calcite-list",{afterCreate:c=>{this._rootListEl=c},afterRemoved:()=>{this._rootListEl=null},canPull:c=>this._canMove(c,"pull"),canPut:c=>this._canMove(c,"put"),"data-layer-type":g,displayMode:z,dragEnabled:f,filterEnabled:v,filterPlaceholder:N,filterProps:me,filterText:v?S:"",group:g,key:"root-list",label:D.widgetLabel,selectionAppearance:"border",selectionMode:F,onCalciteListChange:c=>this._handleCalciteListChange(c),onCalciteListDragEnd:c=>this._handleCalciteListDragEnd(c.detail),onCalciteListFilter:c=>{var U;return this.filterText=((U=c.currentTarget)==null?void 0:U.filterText)??""},onCalciteListOrderChange:c=>this._onCalciteListOrderChange(c.detail)},y.toArray().map(c=>this._renderItem(c)),v?h("div",{class:$.filterNoResults,slot:"filter-no-results"},h("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems()];return e?d?h("calcite-flow",{key:"root-flow"},T):T:null}_handleCalciteListDragEnd(e){const{fromEl:t,dragEl:s,oldIndex:o}=e;t.insertBefore(s,t.children[o])}_renderItem(e){return h(ye,{canMove:this._canMove,css:$,displayMode:z,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${e.layer.uid}`,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange})}_handleCalciteListChange(e){const{selectionMode:t,selectedItems:s}=this;if(t==="none")return;const o=e.target.selectedItems.map(r=>k(r)).filter(Boolean);s.removeAll(),s.addMany(o)}};i([l()],n.prototype,"_rootListEl",void 0),i([l()],n.prototype,"_focusRootFlowItem",void 0),i([l()],n.prototype,"_focusPanelFlowItem",void 0),i([l()],n.prototype,"_dragEnabled",null),i([l()],n.prototype,"_filterEnabled",null),i([l()],n.prototype,"_visibleItems",null),i([l()],n.prototype,"_openedPanelItems",null),i([l()],n.prototype,"collapsed",void 0),i([l()],n.prototype,"dragEnabled",void 0),i([l()],n.prototype,"filterPlaceholder",void 0),i([l()],n.prototype,"filterPredicate",void 0),i([l()],n.prototype,"filterText",void 0),i([l()],n.prototype,"headingLevel",void 0),i([l()],n.prototype,"icon",null),i([l()],n.prototype,"label",null),i([l()],n.prototype,"listItemCanGiveFunction",void 0),i([l()],n.prototype,"listItemCanReceiveFunction",void 0),i([l()],n.prototype,"listItemCreatedFunction",null),i([l()],n.prototype,"map",null),i([l(),W("esri/widgets/TableList/t9n/TableList")],n.prototype,"messages",void 0),i([l(),W("esri/t9n/common")],n.prototype,"messagesCommon",void 0),i([l()],n.prototype,"minDragEnabledItems",void 0),i([l()],n.prototype,"minFilterItems",void 0),i([l({type:Z})],n.prototype,"selectedItems",void 0),i([l()],n.prototype,"selectionMode",void 0),i([l({readOnly:!0})],n.prototype,"tableItems",null),i([l()],n.prototype,"tables",null),i([be("trigger-action"),l({type:u})],n.prototype,"viewModel",void 0),i([l({type:m,nonNullable:!0})],n.prototype,"visibleElements",void 0),n=i([P("esri.widgets.TableList")],n);const Oe=n;export{Oe as default};
