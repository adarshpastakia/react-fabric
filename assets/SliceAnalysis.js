import{D as f,E as t,F as a,V as y,O as x,fl as L,hd as b,mM as w,fm as S,e1 as E,at as g}from"./ShadowCastClear.glsl.js";import{c as v}from"./Analysis.js";import{c as j}from"./SlicePlane.js";import"./iframe-qDaPDssc.js";import"./index.js";import"./Viewport.js";import"./debounce.js";import"./index2.js";import"./Section.js";import"./ErrorBoundary.js";import"./createClass.js";import"./Global.js";import"./useIsDark.js";let l=class extends f{constructor(e){super(e),this.layerId=""}static fromLayer(e){return new this({layerId:e.type==="building-component"?e.layer.id:e.id,sublayerId:e.type==="building-component"?e.id:void 0})}};t([a({type:String,json:{write:{isRequired:!0}}})],l.prototype,"layerId",void 0),t([a({type:Number,json:{write:!0}})],l.prototype,"sublayerId",void 0),l=t([y("esri.analysis.support.SliceAnalysisExcludedLayer")],l);let r=class extends v{constructor(e){super(e),this.type="slice",this.tiltEnabled=!1,this.shape=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get("excludedLayers")||new x}set excludedLayers(e){this._set("excludedLayers",L(e,this._get("excludedLayers")))}writeExcludedLayers(e,n,s,o){e.length!==0&&(n[s]=e.toArray().map(u=>l.fromLayer(u).toJSON(o)))}readExcludedLayers(e,n,s){var u;const o=s==null?void 0:s.initiator;o&&((u=s==null?void 0:s.hooks)==null||u.onAfterLoad(async()=>{for(const c of e){const{layerId:h,sublayerId:p}=l.fromJSON(c,s),d=o.allLayers.find(({id:i})=>i===h);if(d)if(p!=null&&"allSublayers"in d){await d.load();const i=d.allSublayers.find(({id:m})=>m===p);i&&"type"in i&&i.type==="building-component"&&this.excludedLayers.add(i)}else this.excludedLayers.add(d)}}))}get valid(){var e;return((e=this.shape)==null?void 0:e.position)!=null}equals(e){return this===e||super.equals(e)&&b(this.shape,e.shape)&&this.tiltEnabled===e.tiltEnabled&&w(this.excludedLayers.toArray(),e.excludedLayers.toArray())&&this.excludeGroundSurface===e.excludeGroundSurface}clear(){this.shape=null}};t([a({type:["slice"],json:{read:!1,write:{isRequired:!0}}})],r.prototype,"type",void 0),t([a({type:Boolean,nonNullable:!0,json:{write:!0,default:!1}})],r.prototype,"tiltEnabled",void 0),t([a({types:{key:"type",base:null,typeMap:{plane:j},defaultKeyValue:"plane"},json:{write:{isRequired:!0}}})],r.prototype,"shape",void 0),t([a({cast:S,clonable:e=>e.slice(),json:{type:[l],write:!0}})],r.prototype,"excludedLayers",null),t([E("excludedLayers")],r.prototype,"writeExcludedLayers",null),t([g("excludedLayers")],r.prototype,"readExcludedLayers",null),t([a({type:Boolean,nonNullable:!0,json:{write:!0}})],r.prototype,"excludeGroundSurface",void 0),t([a({readOnly:!0})],r.prototype,"valid",null),r=t([y("esri.analysis.SliceAnalysis")],r);const V=r;export{V as default};
