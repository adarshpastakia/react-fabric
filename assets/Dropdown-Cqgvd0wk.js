import{_ as Y}from"./index-Bl9sirez.js";import{j as l,F as Z,r as i,l as S,v as A,w as ee,x as ne,y as oe,z as re,B as te,G as se,I as ae,J as ie,K as le,L as de,N as ce,O as ue,Q as pe,U as fe,W as ve,m as me,X as ge}from"./iframe-DcfUrZ2L.js";function N(a,e){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable})),o.push.apply(o,n)}return o}function p(a){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?N(Object(o),!0).forEach(function(n){Y(a,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):N(Object(o)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(o,n))})}return a}var he=function(e){var o,n,c=e.ref,u=e.children,m=e.showArrow,x=e.closeOnClick,C=e.fitToParent,k=C===void 0?!0:C,D=e.placement,$=D===void 0?"bottom":D,f=e.onClose,I=e.onOpen,y=e.disabled,U=e.plainDropdown,W=e.dropdownEvent,_=e.dropdownClassName,E=i.useRef(null),z=i.useState(!1),F=S(z,2),g=F[0],h=F[1],w=A(),B=i.useMemo(function(){return i.Children.toArray(u)},[u]),R=S(B,2),v=R[0],M=R[1],j=ee({open:g,onOpenChange:function(r,s,O){var P;O!=="reference-press"&&(h(r),(P=r?I:f)===null||P===void 0||P())},strategy:"fixed",placement:$,whileElementsMounted:se,middleware:[ne({padding:8}),oe(),m&&re(9),m&&te({element:E})]}),d=j.refs,G=j.floatingStyles,b=j.context,K=W==="hover"?ae:ie,q=K(b,{enabled:!y,handleClose:le({blockPointerEvents:!0})}),H=de(b,{referencePress:!0}),T=ce([H,q]),J=T.getReferenceProps,L=T.getFloatingProps,Q=i.useMemo(function(){if(k){var t,r,s=(t=(r=d.reference.current)===null||r===void 0?void 0:r.closest('[data-ref="buttonGroup"]'))!==null&&t!==void 0?t:d.reference.current;return s==null?void 0:s.offsetWidth}},[d,g,k]),X=i.useCallback(function(t){var r,s;!((r=d.floating.current)!==null&&r!==void 0&&r.contains(t.target.closest("[data-dropdown-dismiss='false']")))&&(x||(s=d.floating.current)!==null&&s!==void 0&&s.contains(t.target.closest("[data-dropdown-dismiss='true']")))&&setTimeout(function(){h(!1),f==null||f()},100)},[x,f]),V=i.useMemo(function(){return ue(c,v.props.ref,d.setReference)},[c,v.props.ref,d.setReference]);if(i.useEffect(function(){y&&h(!1)},[y]),i.useEffect(function(){if(!w)return;function t(){h(!1)}return w.events.on("close",t),function(){w.events.off("close",t)}},[w]),!v||!M)throw Error("Dropdown requires two elements [Anchor, Panel]");return l.jsxs(i.Fragment,{children:[i.cloneElement(v,p(p({},J({onClick:function(r){var s,O;(s=(O=v.props).onClick)===null||s===void 0||s.call(O,r),r.stopPropagation()}})),{},{"data-inner-clickable":"true","data-dropdown-open":g?!0:void 0,ref:V})),g&&l.jsxs(pe,{root:(o=(n=d.domReference.current)===null||n===void 0?void 0:n.closest(".theme-base"))!==null&&o!==void 0?o:void 0,children:[l.jsx(fe,{}),l.jsx(ve,{context:b,modal:!0,children:l.jsxs("div",p(p({ref:d.setFloating,style:p({minWidth:Q,zIndex:"var(--z-popover)"},G),"data-ref":"dropdownBody"},L({onClick:function(r){return r.stopPropagation()}})),{},{children:[l.jsx("div",{role:"none",className:me("fabric-dropdownBody",_,!U&&"shadow-lg bg-base ring-1 ring-tint-100","rounded-capped overflow-auto scroll-thin grid max-h-[70vh]"),onMouseUpCapture:X,children:M}),m&&l.jsx(ge,{ref:E,context:b,strokeWidth:.5,className:"fill-base stroke-dimmed"})]}))})]})]})},Oe=function(e){return l.jsx(Z,{children:l.jsx(he,p({},e))})},ye=function(e){var o=e.children,n=e.dismiss,c=n===void 0?!0:n,u=A();return l.jsx("div",{role:"none",className:"contents","data-dropdown-dismiss":c,onMouseUp:function(){return c&&setTimeout(function(){return u==null?void 0:u.events.emit("close")},50)},children:o})};export{Oe as D,ye as a};
