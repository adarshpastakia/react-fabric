import{C as B,_ as U}from"./index.js";import{j as t,m as c,_ as V,r as x,l as X,s as R}from"./iframe-qDaPDssc.js";import{I as F}from"./Tooltip.js";import{E as K}from"./ErrorIcon.js";var Y=function(e){var r=e.label,a=e.appendLabel,v=e.width,y=e.labelWidth,m=y===void 0?192:y,f=e.inline,g=e.info,N=e.disabled,k=e.required,s=e.children,E=e.listing,P=e.className,j=e.invalid,C=e.error,S=e["data-inner"];return t.jsxs("div",{className:c("fabric-fieldWrapper",P,f?"flex flex-nowrap gap-1":"block"),"data-ref":"fieldWrapper",style:{width:v,flexBasis:v},children:[!S&&r&&t.jsxs("div",{className:"flex flex-nowrap flex-content items-end gap-1 py-0.5 px-2",style:{width:f?m:void 0},children:[t.jsx("label",{role:"none",className:c("flex-initial truncate text-sm",N&&"text-muted"),onClick:function(q){var o;return(o=q.currentTarget.closest('[data-ref="fieldWrapper"]'))===null||o===void 0||(o=o.querySelector("input,textarea"))===null||o===void 0?void 0:o.focus()},children:r}),k&&t.jsx("span",{className:"text-danger-500 select-none flex-content text-[10px]",children:"âœ½"}),t.jsx(K,{invalid:j,error:C}),t.jsx("div",{className:"flex-1"}),a&&t.jsx("span",{className:"flex-content",children:a})]}),s,E,g&&t.jsx("div",{className:"text-sm text-muted flex-content",children:g})]})},Z=["invalid","error","allowClear","showClear","decorateStart","decorateEnd","decorateEndShowWhenEmpty","decorateEndHideWhenEmpty","children","onClear","noOutline","noBorder","actionButton","textarea","textareaExpandable","data-inner","data-open","floatingExpand","wrapperRef","width"];function H(l,e){var r=Object.keys(l);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(l);e&&(a=a.filter(function(v){return Object.getOwnPropertyDescriptor(l,v).enumerable})),r.push.apply(r,a)}return r}function W(l){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H(Object(r),!0).forEach(function(a){U(l,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(a){Object.defineProperty(l,a,Object.getOwnPropertyDescriptor(r,a))})}return l}var ae=function(e){var r=e.invalid,a=e.error,v=e.allowClear,y=e.showClear,m=e.decorateStart,f=e.decorateEnd,g=e.decorateEndShowWhenEmpty,N=e.decorateEndHideWhenEmpty,k=e.children,s=e.onClear,E=e.noOutline,P=e.noBorder,j=e.actionButton,C=e.textarea,S=C===void 0?!1:C,$=e.textareaExpandable,q=$===void 0?!1:$,o=e["data-inner"];e["data-open"];var z=e.floatingExpand,O=e.wrapperRef,b=e.width,w=V(e,Z),L=x.useRef(null),M=x.useState(!1),T=X(M,2),h=T[0],D=T[1],A=x.useMemo(function(){return o||!w.label?t.Fragment:Y},[o,w.label]),G=x.useMemo(function(){return o||!w.label?{}:W(W({},w),{},{width:b})},[o,w,b]),J=x.useCallback(function(n){var i,p,d=(i=n.currentTarget.parentElement)===null||i===void 0?void 0:i.querySelector("& > :not(.fabric-decorate)"),u=(p=d==null?void 0:d.querySelector("input,textarea,button"))!==null&&p!==void 0?p:d;u==null||u.focus(),s==null||s()},[s]),I=x.useCallback(function(n){var i,p,d=(i=n.currentTarget.parentElement)===null||i===void 0?void 0:i.querySelector("& > :not(.fabric-decorate)"),u=(p=d==null?void 0:d.querySelector("input,textarea,button"))!==null&&p!==void 0?p:d;u==null||u.focus()},[s]);x.useEffect(function(){h&&setTimeout(function(){var n;return O==null||(n=O.current)===null||n===void 0||(n=n.querySelector("textarea"))===null||n===void 0?void 0:n.focus()},50)},[h]);var Q=t.jsxs("div",{role:"none",ref:O,className:c("fabric-inputWrapper",r&&"fabric-invalidWrapper",!E&&!P&&"bg-(--fabric-input) outline overflow-hidden","flex flex-nowrap items-center flex-1",S?"rounded-capped group":"rounded",h?"fixed inset-4 z-99":z?"absolute inset-x-0":"relative",!E&&"after:absolute after:bottom-0 after:h-px after:bg-primary-500 after:mx-auto"),onKeyDown:function(i){return i.key==="Escape"&&h&&(D(!1),i.stopPropagation())},children:[m&&t.jsx("div",{onClickCapture:I,className:c("fabric-decorate","text-muted leading-none flex-content",R(m)&&"px-1"),children:m}),t.jsx(K,{invalid:r,error:a}),k,v&&y&&t.jsx(F,{icon:B.close,onClick:J,className:c("text-tint-500 hover:text-tint-700 p-1 z-1 flex-content","fabric-inputClear",S&&"self-start mt-1 me-1")}),f&&t.jsx("div",{onClickCapture:I,className:c("fabric-decorate","text-muted leading-none flex-content",R(f)&&"px-1",N&&"peer-placeholder-shown:hidden",g&&"hidden peer-placeholder-shown:inline-block"),children:f}),j&&t.jsx("div",{onClickCapture:I,className:c("fabric-decorate","text-muted leading-none flex-content"),children:j}),q&&t.jsx(F,{onClick:function(){return D(!h)},icon:h?B.arrowCollapse:B.arrowExpand,className:"hidden group-hover:block absolute top-0 end-0 bg-base hover:bg-tint-200 p-1 opacity-65 rounded-capped"})]});return t.jsx(A,W(W({},G),{},{children:t.jsx("div",{ref:L,className:c("relative min-h-8 flex flex-col flex-nowrap",b?"flex-auto":"flex-1"),style:{width:b,flexBasis:b},children:Q})}))};export{Y as F,ae as I};
