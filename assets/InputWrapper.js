import{C as $,_ as G}from"./index2.js";import{j as t,m as d,_ as J,r as s,l as Q,s as T}from"./iframe-BTaJxP5y.js";import{I as D}from"./Tooltip.js";import{E as q}from"./ErrorIcon.js";var U=function(e){var r=e.label,n=e.appendLabel,p=e.width,v=e.labelWidth,f=v===void 0?192:v,u=e.inline,b=e.info,O=e.disabled,W=e.required,c=e.children,w=e.listing,N=e.className,g=e.invalid,E=e.error,y=e["data-inner"];return t.jsxs("div",{className:d("fabric-fieldWrapper",N,u?"flex flex-nowrap gap-1":"block"),"data-ref":"fieldWrapper",style:{width:p,flexBasis:p},children:[!y&&r&&t.jsxs("div",{className:"flex flex-nowrap flex-content items-end gap-1 py-0.5 px-2",style:{width:u?f:void 0},children:[t.jsx("label",{role:"none",className:d("flex-initial truncate text-sm",O&&"text-muted"),onClick:function(k){var o;return(o=k.currentTarget.closest('[data-ref="fieldWrapper"]'))===null||o===void 0||(o=o.querySelector("input,textarea"))===null||o===void 0?void 0:o.focus()},children:r}),W&&t.jsx("span",{className:"text-danger-500 select-none flex-content text-[10px]",children:"âœ½"}),t.jsx(q,{invalid:g,error:E}),t.jsx("div",{className:"flex-1"}),n&&t.jsx("span",{className:"flex-content",children:n})]}),c,w,b&&t.jsx("div",{className:"text-sm text-muted flex-content",children:b})]})},V=["invalid","error","allowClear","showClear","decorateStart","decorateEnd","decorateEndShowWhenEmpty","decorateEndHideWhenEmpty","children","onClear","noOutline","noBorder","actionButton","textarea","textareaExpandable","data-inner","data-open","floatingExpand","wrapperRef","width"];function R(i,e){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),r.push.apply(r,n)}return r}function C(i){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R(Object(r),!0).forEach(function(n){G(i,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(r,n))})}return i}var ee=function(e){var r=e.invalid,n=e.error,p=e.allowClear,v=e.showClear,f=e.decorateStart,u=e.decorateEnd,b=e.decorateEndShowWhenEmpty,O=e.decorateEndHideWhenEmpty,W=e.children,c=e.onClear,w=e.noOutline,N=e.noBorder,g=e.actionButton,E=e.textarea,y=E===void 0?!1:E,S=e.textareaExpandable,k=S===void 0?!1:S,o=e["data-inner"];e["data-open"];var F=e.floatingExpand,j=e.wrapperRef,h=e.width,m=J(e,V),H=s.useRef(null),K=s.useState(!1),I=Q(K,2),x=I[0],B=I[1],z=s.useMemo(function(){return o||!m.label?t.Fragment:U},[o,m.label]),L=s.useMemo(function(){return o||!m.label?{}:C(C({},m),{},{width:h})},[o,m,h]),M=s.useCallback(function(l){var a;(a=l.currentTarget.parentElement)===null||a===void 0||(a=a.querySelector("input,textarea,button"))===null||a===void 0||a.focus(),c==null||c()},[c]),P=s.useCallback(function(l){var a;(a=l.currentTarget.parentElement)===null||a===void 0||(a=a.querySelector("input,textarea,button"))===null||a===void 0||a.focus()},[c]);s.useEffect(function(){x&&setTimeout(function(){var l;return j==null||(l=j.current)===null||l===void 0||(l=l.querySelector("textarea"))===null||l===void 0?void 0:l.focus()},50)},[x]);var A=t.jsxs("div",{role:"none",ref:j,className:d("fabric-inputWrapper",r&&"fabric-invalidWrapper",!w&&!N&&"bg-(--fabric-input) outline overflow-hidden","flex flex-nowrap items-center flex-1",y?"rounded-capped group":"rounded",x?"fixed inset-4 z-[99]":F?"absolute inset-x-0":"relative",!w&&"after:absolute after:bottom-0 after:h-px after:bg-primary-500 after:mx-auto"),onKeyDown:function(a){return a.key==="Escape"&&x&&(B(!1),a.stopPropagation())},children:[f&&t.jsx("div",{onClickCapture:P,className:d("fabric-decorate","text-muted leading-none flex-content",T(f)&&"px-1"),children:f}),t.jsx(q,{invalid:r,error:n}),W,p&&v&&t.jsx(D,{icon:$.close,onClick:M,className:d("text-tint-500 hover:text-tint-700 p-1 z-1 flex-content","fabric-inputClear",y&&"self-start mt-1 me-1")}),u&&t.jsx("div",{onClickCapture:P,className:d("fabric-decorate","text-muted leading-none flex-content",T(u)&&"px-1",O&&"peer-placeholder-shown:hidden",b&&"hidden peer-placeholder-shown:inline-block"),children:u}),g&&t.jsx("div",{onClickCapture:P,className:d("fabric-decorate","text-muted leading-none flex-content"),children:g}),k&&t.jsx(D,{onClick:function(){return B(!x)},icon:x?$.arrowCollapse:$.arrowExpand,className:"hidden group-hover:block absolute top-0 end-0 bg-base hover:bg-tint-200 p-1 opacity-65 rounded-capped"})]});return t.jsx(z,C(C({},L),{},{children:t.jsx("div",{ref:H,className:d("relative min-h-8 flex flex-col flex-nowrap",h?"flex-auto":"flex-1"),style:{width:h,flexBasis:h},children:A})}))};export{U as F,ee as I};
