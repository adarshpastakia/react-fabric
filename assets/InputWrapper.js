import{j as t,m as c,_ as Q,r as x,l as U,u as D,n as V}from"./iframe-DpfJK_wQ.js";import{I as R}from"./Tooltip.js";import"./index.js";import{E as H}from"./ErrorIcon.js";var X=function(e){var r=e.label,a=e.appendLabel,v=e.width,y=e.labelWidth,h=y===void 0?192:y,f=e.inline,g=e.info,N=e.disabled,k=e.required,s=e.children,E=e.listing,P=e.className,j=e.invalid,C=e.error,S=e["data-inner"];return t.jsxs("div",{className:c("fabric-fieldWrapper",P,f?"flex flex-nowrap gap-1":"block"),"data-ref":"fieldWrapper",style:{width:v,flexBasis:v},children:[!S&&r&&t.jsxs("div",{className:"flex flex-nowrap flex-content items-end gap-1 py-0.5 px-2",style:{width:f?h:void 0},children:[t.jsx("label",{role:"none",className:c("flex-initial truncate text-sm",N&&"text-muted"),onClick:function(q){var o;return(o=q.currentTarget.closest('[data-ref="fieldWrapper"]'))===null||o===void 0||(o=o.querySelector("input,textarea"))===null||o===void 0?void 0:o.focus()},children:r}),k&&t.jsx("span",{className:"text-danger-500 select-none flex-content text-[10px]",children:"âœ½"}),t.jsx(H,{invalid:j,error:C}),t.jsx("div",{className:"flex-1"}),a&&t.jsx("span",{className:"flex-content",children:a})]}),s,E,g&&t.jsx("div",{className:"text-sm text-muted flex-content",children:g})]})},Y=["invalid","error","allowClear","showClear","decorateStart","decorateEnd","decorateEndShowWhenEmpty","decorateEndHideWhenEmpty","children","onClear","noOutline","noBorder","actionButton","textarea","textareaExpandable","data-inner","data-open","floatingExpand","wrapperRef","width"];function F(l,e){var r=Object.keys(l);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(l);e&&(a=a.filter(function(v){return Object.getOwnPropertyDescriptor(l,v).enumerable})),r.push.apply(r,a)}return r}function W(l){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F(Object(r),!0).forEach(function(a){V(l,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(a){Object.defineProperty(l,a,Object.getOwnPropertyDescriptor(r,a))})}return l}var re=function(e){var r=e.invalid,a=e.error,v=e.allowClear,y=e.showClear,h=e.decorateStart,f=e.decorateEnd,g=e.decorateEndShowWhenEmpty,N=e.decorateEndHideWhenEmpty,k=e.children,s=e.onClear,E=e.noOutline,P=e.noBorder,j=e.actionButton,C=e.textarea,S=C===void 0?!1:C,$=e.textareaExpandable,q=$===void 0?!1:$,o=e["data-inner"];e["data-open"];var K=e.floatingExpand,O=e.wrapperRef,b=e.width,w=Q(e,Y),z=x.useRef(null),L=x.useState(!1),I=U(L,2),m=I[0],T=I[1],M=x.useMemo(function(){return o||!w.label?t.Fragment:X},[o,w.label]),A=x.useMemo(function(){return o||!w.label?{}:W(W({},w),{},{width:b})},[o,w,b]),G=x.useCallback(function(n){var i,p,d=(i=n.currentTarget.parentElement)===null||i===void 0?void 0:i.querySelector("& > :not(.fabric-decorate)"),u=(p=d==null?void 0:d.querySelector("input,textarea,button"))!==null&&p!==void 0?p:d;u==null||u.focus(),s==null||s()},[s]),B=x.useCallback(function(n){var i,p,d=(i=n.currentTarget.parentElement)===null||i===void 0?void 0:i.querySelector("& > :not(.fabric-decorate)"),u=(p=d==null?void 0:d.querySelector("input,textarea,button"))!==null&&p!==void 0?p:d;u==null||u.focus()},[s]);x.useEffect(function(){m&&setTimeout(function(){var n;return O==null||(n=O.current)===null||n===void 0||(n=n.querySelector("textarea"))===null||n===void 0?void 0:n.focus()},50)},[m]);var J=t.jsxs("div",{role:"none",ref:O,className:c("fabric-inputWrapper",r&&"fabric-invalidWrapper",!E&&!P&&"bg-(--fabric-input) outline overflow-hidden","flex flex-nowrap items-center flex-1",S?"rounded-capped group":"rounded",m?"fixed inset-4 z-99":K?"absolute inset-x-0":"relative",!E&&"after:absolute after:bottom-0 after:h-px after:bg-primary-500 after:mx-auto"),onKeyDown:function(i){return i.key==="Escape"&&m&&(T(!1),i.stopPropagation())},children:[h&&t.jsx("div",{onClickCapture:B,className:c("fabric-decorate","text-muted leading-none flex-content",D(h)&&"px-1"),children:h}),t.jsx(H,{invalid:r,error:a}),k,v&&y&&t.jsx(R,{icon:"icon-[mdi--close]",onClick:G,className:c("text-tint-500 hover:text-tint-700 p-1 z-1 flex-content","fabric-inputClear",S&&"self-start mt-1 me-1")}),f&&t.jsx("div",{onClickCapture:B,className:c("fabric-decorate","text-muted leading-none flex-content",D(f)&&"px-1",N&&"peer-placeholder-shown:hidden",g&&"hidden peer-placeholder-shown:inline-block"),children:f}),j&&t.jsx("div",{onClickCapture:B,className:c("fabric-decorate","text-muted leading-none flex-content"),children:j}),q&&t.jsx(R,{onClick:function(){return T(!m)},icon:m?"icon-[mdi--arrow-collapse]":"icon-[mdi--arrow-expand]",className:"hidden group-hover:block absolute top-0 end-0 bg-base hover:bg-tint-200 p-1 opacity-65 rounded-capped"})]});return t.jsx(M,W(W({},A),{},{children:t.jsx("div",{ref:z,className:c("relative min-h-8 flex flex-col flex-nowrap",b?"flex-content":"flex-1"),style:{width:b,flexBasis:b},children:J})}))};export{X as F,re as I};
