import{_ as F}from"./Tooltip-D82JqM4y.js";import{_ as J,aS as L,r as u,l as j,aM as Q,aP as V,j as l,m as X}from"./iframe-CVyMRGSP.js";import{B as w}from"./Button-DAqx1TyP.js";import"./index-D3XXfjI1.js";import{u as Y}from"./Global-BZCLuW51.js";import{u as Z}from"./useDebounce-Bpvok1Zz.js";import{P as m,D as $}from"./Google-DJpRc7c-.js";import{B as ee}from"./BasePanel-9ehr4Bks.js";import{i as E,a as H}from"./zh-CN-FLa9i-pX.js";import{i as ae}from"./getDay-Cl8EDKbu.js";var re=["className","max","min","dateDisabled","onChange","showHijriToggle","value","withTime"];function N(s,n){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);n&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable})),i.push.apply(i,r)}return i}function g(s){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?N(Object(i),!0).forEach(function(r){F(s,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(i,r))})}return s}var pe=function(n){var i=n.className,r=n.max,t=n.min,d=n.dateDisabled,P=n.onChange,A=n.showHijriToggle,T=n.value,M=n.withTime,B=J(n,re),R=L("date"),h=R.t,z=Y(),f=z.currentCalendar,_=u.useState(f==="hijri"),x=j(_,2),D=x[0],C=x[1],G=u.useState(!0),O=j(G,2),I=O[0],K=O[1],y=Z(P,[P]);u.useEffect(function(){C(f==="hijri")},[f]);var U=u.useReducer(function(e,a){if(a.type==="reset")if(Q(a.date))e.selected=void 0,e.pageDate=new Date,e.hour=0,e.minute=0;else{var p=new Date(a.date);e.selected=p,e.pageDate=p,e.hour=p.getHours(),e.minute=p.getMinutes()}if(a.type==="changeDate"&&(a.date.setHours(e.hour),a.date.setMinutes(e.minute),e.selected=a.date,e.pageDate=a.date),a.type==="changeTime"){var b,v;(b=e.selected)===null||b===void 0||b.setHours(a.hour),(v=e.selected)===null||v===void 0||v.setMinutes(a.minute),e.hour=a.hour,e.minute=a.minute}return a.type==="changePage"&&(e.page=a.page),a.type==="changePageDate"&&(e.pageDate=a.date,a.pageChange&&(e.page=Math.max(e.page-1,0))),(a.type==="changeDate"||a.type==="changeTime")&&(t&&e.selected&&E(e.selected,new Date(t))&&(e.selected=new Date(t),e.hour=e.selected.getHours(),e.minute=e.selected.getMinutes()),r&&e.selected&&H(e.selected,new Date(r))&&(e.selected=new Date(r),e.hour=e.selected.getHours(),e.minute=e.selected.getMinutes()),e.selected&&(y==null||y(e.selected.toISOString()))),g({},e)},{page:m.DATE,pageDate:new Date,hour:0,minute:0}),S=j(U,2),o=S[0],c=S[1];u.useEffect(function(){var e=!0;t&&e&&(e=H(new Date,t)),r&&e&&(e=E(new Date,r)),K(e)},[t,r]),u.useEffect(function(){c({type:"reset",date:T})},[T]);var W=u.useCallback(function(e){return o.page===m.DATE&&V(d)?!!d.find(function(a){return ae(new Date(a),e)}):$.isDisabled(e,o.page,t,r)},[o.page,t,r,d]),q=u.useCallback(function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;c({type:"changePageDate",pageChange:a,date:e})},[]),k=u.useCallback(function(e){c({type:"changeDate",date:e})},[]);return l.jsxs("div",g(g({className:X("block overflow-hidden bg-base rounded-capped",i)},B),{},{children:[l.jsx(ee,g(g({},o),{},{max:r,min:t,withTime:M,isHijri:D,selectDate:k,isDateDisabled:W,changeTime:function(a){return c(g({type:"changeTime"},a))},changePage:function(a){return c({type:"changePage",page:a})},changePageDate:q})),l.jsxs("div",{className:"border-t flex flex-nowrap justify-between px-2",children:[l.jsx("span",{children:A&&l.jsx(w,{size:"sm",variant:"link",color:"primary",className:"my-1",onClick:function(){C(!D)},children:h(D?"label.gregorian":"label.hijri")})}),o.page===m.DATE&&I&&l.jsx(w,{size:"sm",variant:"link",color:"primary",className:"my-1",onClick:function(){return k(new Date)},children:h("label.today")}),o.page!==m.DATE&&l.jsx(w,{size:"sm",variant:"link",color:"primary",className:"my-1",onClick:function(){return c({type:"changePage",page:m.DATE})},children:h("core:action.cancel")})]})]}))};export{pe as D};
