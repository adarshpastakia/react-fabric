const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ShadowCastClear.glsl.js","./iframe-DpfJK_wQ.js","./iframe-DPR8S5X3.css","./index.js","./Viewport.js","./debounce.js","./index2.js","./Section.js","./ErrorBoundary.js","./createClass.js","./Global.js","./useIsDark.js","./ShadowCastClear-BxU8WlBI.css","./geodeticLengthOperator.js","./geodeticCurveType.js"])))=>i.map(i=>d[i]);
import{c4 as oe,c5 as se,a5 as re,CO as le,K as zt,fr as kt,b as K,fs as ae,CP as I,pZ as L,q3 as l,E as r,F as c,V as p,vg as Y,hx as Ht,ga as Bt,tR as S,hy as Ut,kP as ce,mD as M,CQ as T,yg as Ct,CR as ue,CS as de,CT as pe,CU as he,tS as $,Ca as fe,q2 as yt,rb as xt,ar as ve,As as me,h$ as _e,BO as Yt,A$ as Et,q8 as Q,bj as E,ev as ge,b4 as ye,er as $e,bo as Tt,Bz as be,bl as It,b5 as Dt,CV as we,bk as ke,CW as At,mI as Xt,i2 as Jt,mU as B,hl as Ce,n$ as xe,bL as Ee,bJ as Nt,f0 as Te,f7 as Ot,bn as Ie,xR as Mt,C2 as Kt,gQ as De,C as Ae,kV as q,Af as Oe,vE as Me,b6 as Pe}from"./ShadowCastClear.glsl.js";import{d as Le}from"./MeshTransform.js";import{b6 as b}from"./iframe-DpfJK_wQ.js";import{E as Se,B as Ve,k as Pt,z as Re,G as Fe,F as $t}from"./quantityFormatUtils.js";import{R as tt,q as ze}from"./angularMeasurementUtils.js";function J(){return se()}function Lt(){return oe()}function P(n,e){const t=Ue(e),i=n.replaceAll(/[\u00B0\u00BA]/g,"^").replaceAll("′","'").replaceAll("″",'"'),o=[];return le.dmsToGeog(t,1,[i],o)?new re(o[0][0],o[0][1],zt.WGS84):null}function He(n){var e,t;return n&&J()?I(n)??((e=P(`0° 0' 0" N | ${n}`))==null?void 0:e.longitude)??((t=P(`0 N | ${n}`))==null?void 0:t.longitude)??null:null}function Be(n){var e,t;return n&&J()?I(n)??((e=P(`${n} | 0° 0' 0" E`))==null?void 0:e.latitude)??((t=P(`${n} | 0 E`))==null?void 0:t.latitude)??null:null}function Ue(n){if(n??(n=zt.WGS84),n.wkid){const t=kt.geogcs(n.wkid);if(!t)throw new K("coordinate-formatter:invalid-spatial-reference","wkid is not valid");return t}const e=n.wkt2??n.wkt;if(e){const t=kt.fromString(ae.PE_TYPE_GEOGCS,e);if(!t)throw new K("coordinate-formatter:invalid-spatial-reference","wkt is not valid");return t}throw new K("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing")}const v="esri-tooltip",Ye=`${v}-content`,Xe=`${v}-content--input`,Je=`${v}-content__header`,Ne=`${v}-content__header__spacer`,St=`${v}-content__header__actions`,qt=`${v}-draw-header-actions`,Ke=`${v}-table`,qe=`${v}-help-message`,Ge=`${v}-help-message__text`,We=`${v}-help-message__icon`,F=`${v}-field`,z={base:F,inputMode:`${F}--input`,title:`${F}__title`,value:`${F}__value`};let f=class extends L{constructor(){super(...arguments),this.hidden=!1,this.mode="feedback"}render(){return l("div",{class:this.classes({[z.base]:!0,[z.inputMode]:this.mode==="input"})},l("div",{class:z.title,key:"title"},this.title),l("div",{class:z.value,key:"value"},this.value))}};r([c()],f.prototype,"hidden",void 0),r([c()],f.prototype,"mode",void 0),r([c()],f.prototype,"title",void 0),r([c()],f.prototype,"value",void 0),f=r([p("esri.views.interactive.tooltip.components.TooltipField")],f);const je={base:`${v}-value-by-value`};let k=class extends L{constructor(){super(...arguments),this.divider="×"}render(){return l("div",{class:je.base},l("span",null,this.left),l("span",null,this.divider),l("span",null,this.right))}};r([c()],k.prototype,"left",void 0),r([c()],k.prototype,"divider",void 0),r([c()],k.prototype,"right",void 0),k=r([p("esri.views.interactive.tooltip.components.ValueByValue")],k);const N=1,Gt=6;function Ze(n,e){return{angleRelative:Qe,direction:tn,directionRelative:en,directionRelativeBilateral:nn,latitudeDecimalDegrees:sn,longitudeDecimalDegrees:on,area:(t,i)=>Fe(n,t,i??e.area),length:(t,i,o)=>Pt(n,t,i??e.length,o),lengthRelative:(t,i)=>Re(n,t,i??e.length),totalLength:(t,i)=>Pt(n,t,i??e.length),verticalLength:(t,i)=>Ve(n,t,i??e.verticalLength),verticalLengthRelative:(t,i)=>Se(n,t,i??e.verticalLength),percentage:rn,scalar:Zt,scale:ln}}function Qe(n){return S(n,{signDisplay:"exceptZero",...bt(N)})}function tn(n){return $t(n,n.rotationType,N)}function en(n){const e=tt(n);return S(e,{style:"unit",unitDisplay:"narrow",unit:"degree",signDisplay:e>0?"never":"exceptZero",...bt(N)})}function nn(n){return $t(n,n.rotationType,N)}function on(n){return Wt(n,te)}function sn(n){return Wt(n,ee)}function Sn(n){return jt(n,te)}function Vn(n){return jt(n,ee)}function Wt(n,e){return $t(Bt(n,"degrees"),"geographic",Gt,e,!1)}function jt(n,e){const i=e.normalize(Bt(n,"degrees").value,void 0,!1);return Zt(Y(i),Gt)}function rn(n){return S(n.value,{style:"percent"})}function ln(n){return S(n,{style:"percent",maximumFractionDigits:0})}function Zt(n,e){return S(n.value,bt(e))}function bt(n){return{minimumFractionDigits:n,maximumFractionDigits:n}}function Rn({createQuantity:n,sanitize:e}){return(t,i)=>{if(t==null)return null;e&&(t=e(t));const o=I(t);return o==null?null:n(o,i)}}function Fn(n){return n.replaceAll(/[*^~°º]/g,"")}const an=n=>{let e=`[-+]?[0-9${n.thousands}]+`;return n.decimal!==""&&(e+=`${n.decimal}[0-9]+`),new RegExp(`^(${e}\\s*)${n.separator}(\\s*${e})$`,"i")},cn=" ",Qt=[];for(const n of[",","\\|","\\s+"])for(const e of["\\.",",",""])for(const t of["",",","\\.",cn,"\\s+"])n!==e&&n!==t&&e!==t&&Qt.push({separator:n,decimal:e,thousands:t,pattern:an({decimal:e,thousands:t,separator:n})});function un(n){for(const{decimal:e,thousands:t,pattern:i}of Qt){i.lastIndex=0;const o=n.match(i);if(!o)continue;const s=I(Vt(o[1],e,t)),a=I(Vt(o[2],e,t));if(s!=null&&a!=null)return{x:Y(s),y:Y(a)}}return null}function Vt(n,e,t){let i=n.replaceAll(/[\s+]/g,"");return t!==""&&(i=i.replaceAll(t,"")),e!==""&&(i=i.replaceAll(e,".")),i}function dn(n){if(!n||I(n)!=null||!J())return null;const e=P(n),t=X(e==null?void 0:e.latitude),i=X(e==null?void 0:e.longitude);return i!=null&&t!=null?{latitude:t,longitude:i}:null}function zn(n){return X(He(n))}function Hn(n){return X(Be(n))}function X(n){return n!=null?Ht(n,"degrees","geographic"):null}const te=new Ut(-180,180),ee=new Ut(-90,90),G=Symbol("dragHandles");let d=class extends L{constructor(){super(...arguments),this._focusAbortController=new AbortController,this._transitionInfo=null,this._mode="feedback",this._getFormatters=ce(Ze),this._onHeaderPointerDown=n=>{var t;const e=n.target;e instanceof HTMLElement&&((t=e==null?void 0:e.tagName)==null?void 0:t.toLowerCase())!=="calcite-button"&&(this.removeHandles(G),n.preventDefault(),n.stopPropagation(),e.setPointerCapture(n.pointerId),this.tooltip.onDragStart(n.clientX,n.clientY),this.addHandles([M(e,"pointermove",({clientX:i,clientY:o})=>{this.tooltip.onDrag(i,o)}),M(e,["pointerup","pointercancel"],i=>{this.removeHandles(G),e.releasePointerCapture(n.pointerId),this.tooltip.onDragEnd()}),M(e,"touchstart",i=>i.preventDefault())],G))},this._onDiscard=()=>{this.destroyed||(this.tooltip.emit("discard"),this.info.clearInputValues(),this.exitInputMode())},this._onCommit=(n,e)=>{if(this.destroyed)return;if(this.tooltip.emit("commit",{type:e}),e==="commit-and-exit")return void this.exitInputMode();if(e==="commit-on-blur")return;const t=this._getFocusableElements(),i=t.length,o=t.indexOf(n);if(o===-1)return void this.exitInputMode();const s=((o+(e==="commit-and-next"?1:-1))%i+i)%i;H(t.at(s))},this._onKeyDown=n=>{switch(n.code){case T.next:return this._onNextKey(n);case T.discard:return n.stopPropagation(),this._onDiscard()}}}get mode(){return this._mode}get _displayUnits(){const{displayUnits:n}=this.info.sketchOptions.values,e=Ct(this.tooltip.view);return{length:n.length??e,verticalLength:n.verticalLength??e,area:n.area??e}}get _inputUnitInfos(){const n=this._messagesUnits,e=u=>({unit:u,abbreviation:ue(n,u,"abbr")}),{inputUnits:t}=this.info.sketchOptions.values,i=Ct(this.tooltip.view),o=t.length??i,s=t.verticalLength??i,a=t.area??i;return{length:e(he(o)),verticalLength:e(pe(s)),area:e(de(a)),angle:e("degrees")}}get _formatters(){return this._getFormatters(this._messagesUnits,this._displayUnits)}get fieldContext(){return{formatters:this._formatters,inputUnitInfos:this._inputUnitInfos,messages:this._messagesTooltip,sketchOptions:this.info.sketchOptions,onCommit:this._onCommit,onDiscard:this._onDiscard}}render(){const{visibleElements:n}=this.info.sketchOptions.tooltips,e=this._renderedContent,t=this._renderedActions,i=this._renderedHelpMessage,o=e.length>0,s=o||!!i,a=this.mode==="input";return l("div",{class:fe(Ye,a&&Xe),onkeydown:this._onKeyDown,tabIndex:-1},a&&s&&n.header?l("div",{class:Je,"data-testid":"tooltip-header",key:"header",onpointerdown:this._onHeaderPointerDown},l("calcite-button",{appearance:"transparent","data-testid":"tooltip-back-button",iconFlipRtl:"both",iconStart:"chevron-left",key:"discard-button",kind:"neutral",onclick:this._onDiscard,scale:"s",tabIndex:-1}),t.length>0?l($,null,l("div",{class:Ne,key:"spacer"}),l("div",{class:St,key:"actions"},t)):null):null,o?l("div",{class:Ke,key:"content"},...e):null,i)}destroy(){var n;this._focusAbortController.abort(),(n=this._transitionInfo)==null||n.transition.skipTransition()}_renderActions(){return null}loadDependencies(){return yt({button:()=>b(()=>import("./ShadowCastClear.glsl.js").then(n=>n.JM),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),icon:()=>b(()=>import("./ShadowCastClear.glsl.js").then(n=>n.Ju),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),input:()=>b(()=>import("./ShadowCastClear.glsl.js").then(n=>n.JI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)})}async enterInputMode(n,e){try{await this._transitionTo("input",e),await this._focusField(n)}catch(t){xt(t)}}async exitInputMode({focusOnView:n=!0}={}){var e;try{const{container:t,info:i}=this;i.clearInputValues();const o=n?(e=t==null?void 0:t.closest(".esri-view"))==null?void 0:e.querySelector(".esri-view-surface"):null;await this._transitionTo("feedback"),o instanceof HTMLElement&&o.focus()}catch(t){xt(t)}}_onNextKey(n){const e=this._getFocusableElements(),t=e.at(0),i=e.at(-1);t&&i&&(n.shiftKey?document.activeElement===t&&(n.preventDefault(),n.stopPropagation(),H(i)):document.activeElement===i&&(n.preventDefault(),n.stopPropagation(),H(t)))}get _renderedContent(){return Rt(this._renderContent())}get _renderedActions(){return Rt(this._renderActions())}get _renderedHelpMessage(){const{sketchOptions:n,visibleElements:e}=this.info;if(!e.helpMessage)return null;const t=n.tooltips.helpMessage??this._defaultHelpMessage;if(!t)return null;const i=n.tooltips.helpMessageIcon??"information";return l("div",{class:qe,key:"help-message"},i?l("calcite-icon",{class:We,icon:i,scale:"s"}):null,l("div",{class:Ge},t))}get _defaultHelpMessage(){var i,o,s;const{helpMessage:n,viewType:e}=this.info;if(n==null)return null;const t=e==="3d"?"helpMessages3d":"helpMessages2d";return(s=(o=(i=this._messagesTooltip)==null?void 0:i.sketch)==null?void 0:o[t])==null?void 0:s[n]}async _focusField(n){var o;(o=this._focusAbortController)==null||o.abort(),this._focusAbortController=new AbortController;const{signal:e}=this._focusAbortController;await this._waitForInputs(),ve(e);const t=this._getFocusableInputs(),i=n?t.find(s=>s.getAttribute("data-field-name")===n):t.at(0);await H(i)}async _transitionTo(n,e){var o,s,a;if(this._mode===n&&!this._transitionInfo)return;if(((o=this._transitionInfo)==null?void 0:o.mode)===n)return this._transitionInfo.transition.finished;(s=this._transitionInfo)==null||s.transition.skipTransition();const t=async()=>{this.destroyed||(this._mode=n,await Et(),this.destroyed||(this.renderNow(),await Et(),this.destroyed||(e==null||e())))};if(!((a=this.domNode)!=null&&a.firstChild)||!document.startViewTransition||me())return void await t();this.autoRenderingEnabled=!1;const i=this._transitionInfo={transition:document.startViewTransition(async()=>{this.destroyed||i!==this._transitionInfo||(this.autoRenderingEnabled=!0,await t())}),mode:n};try{await i.transition.finished}finally{i===this._transitionInfo&&(this._transitionInfo=null)}}async _waitForInputs(){const n=()=>{var e;return Array.from(((e=this.domNode)==null?void 0:e.querySelectorAll("calcite-input"))??[])};for(;n().length===0;)await _e(pn);await Yt()}_getFocusableInputs(){var n;return Array.from(((n=this.domNode)==null?void 0:n.querySelectorAll("calcite-input:not([read-only]):not([disabled])"))??[])}_getFocusableElements(){var e;const n=(e=this.domNode)==null?void 0:e.querySelector(`.${qt}`);return[...Array.from((n==null?void 0:n.querySelectorAll(`.${St} calcite-button:not([disabled])`))??[]),...this._getFocusableInputs()]}};async function H(n){await(n==null?void 0:n.setFocus())}function Rt(n){return(Array.isArray(n)?n:[n]).flat(10).filter(e=>!!e)}r([Q("esri/core/t9n/Units"),c()],d.prototype,"_messagesUnits",void 0),r([Q("esri/views/interactive/tooltip/t9n/Tooltip"),c()],d.prototype,"_messagesTooltip",void 0),r([c()],d.prototype,"info",void 0),r([c()],d.prototype,"tooltip",void 0),r([c()],d.prototype,"_mode",void 0),r([c()],d.prototype,"mode",null),r([c()],d.prototype,"_displayUnits",null),r([c()],d.prototype,"_inputUnitInfos",null),r([c()],d.prototype,"_formatters",null),r([c()],d.prototype,"fieldContext",null),r([c()],d.prototype,"_renderedContent",null),r([c()],d.prototype,"_renderedActions",null),r([c()],d.prototype,"_renderedHelpMessage",null),r([c()],d.prototype,"_defaultHelpMessage",null),d=r([p("esri.views.interactive.tooltip.content.TooltipContent")],d);const pn=20;let et=class extends d{_renderContent(){const{area:e,radius:t,xSize:i,ySize:o,visibleElements:s}=this.info,a=this._messagesTooltip.sketch,u=this._formatters;return l($,null,s.radius&&t!=null?l(f,{title:a.radius,value:u.length(t)}):null,s.size&&i!=null&&o!=null?l(f,{title:a.size,value:l(k,{left:u.length(i),right:u.length(o)})}):null,s.area?l(f,{title:a.area,value:u.area(e)}):null)}};et=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],et);const _=`${v}-editable-field`,m={base:_,inputMode:`${_}--input`,feedbackMode:`${_}--feedback`,readOnly:`${_}--read-only`,locked:`${_}--locked`,title:`${_}__title`,value:`${_}__value`,valueContent:`${_}__value__content`,valueContentReadOnly:`${_}__value__content--read-only`,lockIcon:`${_}__lock-icon`,input:`${_}__input`,inputWrapper:`${_}__input-wrapper`,inputMessage:`${_}__input-message`,inputSuffix:`${_}__input-suffix`,button:`${_}__button`},W={lock:"lock",unlock:"unlock"};let y=class extends L{constructor(){super(...arguments),this._input=null,this._lock=null,this._onLockClick=()=>{this.field.toggleLock(this.context)},this._onLockAfterCreate=e=>{this._lock=e},this._onLockAfterRemoved=()=>{this._lock=null},this._onKeyDown=e=>{e.key===T.discard&&this.mode==="input"&&this._input&&this.context.onDiscard(this._input)},this._onInputKeyDown=e=>{const t=this._input;if(t)switch(e.key){case T.commit:return this.field.onCommit("commit-and-exit",t,this.context);case T.next:{e.preventDefault(),e.stopPropagation();const i=e.shiftKey?"commit-and-previous":"commit-and-next";return this.field.onCommit(i,t,this.context)}}},this._onInput=e=>{this.field.onInput(e.currentTarget.value)},this._onInputBlur=e=>{const t=this._input;t&&e.relatedTarget!==this._lock&&this.field.onCommit("commit-on-blur",t,this.context)},this._selectText=()=>{const e=()=>{var t;this._input===document.activeElement&&((t=this._input)==null||t.selectText())};e(),Yt().then(e)},this._onAfterCreate=e=>{this._input=e,e.addEventListener("paste",this._onPaste),e.addEventListener("beforeinput",this._onBeforeInput)},this._onAfterRemoved=e=>{e.removeEventListener("paste",this._onPaste),e.removeEventListener("beforeinput",this._onBeforeInput)},this._onPaste=e=>{var i;const t=(i=e.clipboardData)==null?void 0:i.getData("text");t&&this.field.parse(t,this.context)!=null&&(e.stopPropagation(),this.field.onInput(t))},this._onBeforeInput=e=>{(e.inputType==="historyUndo"||e.inputType==="historyRedo")&&!this.field.dirty&&e.preventDefault()}}initialize(){this.addHandles(E(()=>this._rawDisplayValue,()=>{const{committed:e,inputValue:t}=this.field;e||t||this._input!==document.activeElement||this._selectText()}))}loadDependencies(){return yt({button:()=>b(()=>import("./ShadowCastClear.glsl.js").then(e=>e.JM),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),icon:()=>b(()=>import("./ShadowCastClear.glsl.js").then(e=>e.Ju),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),input:()=>b(()=>import("./ShadowCastClear.glsl.js").then(e=>e.JI),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),"input-message":()=>b(()=>import("./geodeticLengthOperator.js").then(e=>e.i),__vite__mapDeps([13,0,1,2,3,4,5,6,7,8,9,10,11,12,14]),import.meta.url)})}render(){const{field:e,mode:t}=this,i=t==="input",{locked:o,readOnly:s}=e;return l("div",{class:this.classes({[m.base]:!0,[m.feedbackMode]:t==="feedback",[m.inputMode]:t==="input",[m.locked]:o,[m.readOnly]:s})},l("div",{class:m.title,key:"title"},this._title),l("div",{class:m.value,key:"value",onkeydown:this._onKeyDown},i?this._renderValueInputMode():this._renderValueFeedbackMode()))}get _formattedValue(){return this.field.getFormattedValue(this.context)||Ft}get _rawDisplayValue(){return this.field.getRawDisplayValue(this.context)}get _suffix(){return this.field.getSuffix(this.context)}get _title(){const{title:e}=this.field;return typeof e=="string"?e:e(this.context)}get _messages(){var e;return((e=this.context)==null?void 0:e.messages.sketch)??{}}_renderValueFeedbackMode(){return l($,null,l("div",{class:m.valueContent,key:"value-feedback"},this._formattedValue),this.field.locked&&this.mode!=="input"?l("calcite-icon",{class:m.lockIcon,icon:W.lock,key:"icon",scale:"s"}):null)}_renderValueInputMode(){return this.field.readOnly?this._renderValueReadOnly():this._renderValueWritable()}_renderValueReadOnly(){return l("div",{class:this.classes(m.valueContent,m.valueContentReadOnly),key:"value-read-only"},this._formattedValue)}_renderValueWritable(){const{field:e}=this,t=this._messages,{name:i,invalid:o}=e;return l($,null,l("div",{class:m.inputWrapper,key:"value-input"},l("calcite-input",{afterCreate:this._onAfterCreate,afterRemoved:this._onAfterRemoved,class:m.input,"data-field-name":i,"data-testid":`tooltip-field-${i}`,key:"input",onblur:this._onInputBlur,onfocus:this._selectText,onkeydown:this._onInputKeyDown,scale:"s",status:o?"invalid":"idle",type:"text",value:this._rawDisplayValue??Ft,onCalciteInputInput:this._onInput}),o?l("calcite-input-message",{class:m.inputMessage,scale:"s",status:"invalid"},t.invalidValue):null),l("div",{class:m.inputSuffix,key:"suffix"},this._suffix),this._renderedLockButton)}get _renderedLockButton(){const{name:e,locked:t,lockable:i}=this.field;if(!i)return l("div",{key:"no-lock-button"});const o=this._messages,s=t?o.unlockConstraint:o.lockConstraint;return l("calcite-button",{afterCreate:this._onLockAfterCreate,afterRemoved:this._onLockAfterRemoved,alignment:"center",appearance:"transparent",class:m.button,"data-testid":`tooltip-field-${e}-lock`,iconStart:t?W.lock:W.unlock,key:"lock-button",kind:"neutral",label:s,onclick:this._onLockClick,scale:"s",tabIndex:-1,title:s})}};r([c()],y.prototype,"field",void 0),r([c()],y.prototype,"context",void 0),r([c()],y.prototype,"mode",void 0),r([c()],y.prototype,"_input",void 0),r([c()],y.prototype,"_lock",void 0),r([c()],y.prototype,"_formattedValue",null),r([c()],y.prototype,"_rawDisplayValue",null),r([c()],y.prototype,"_suffix",null),r([c()],y.prototype,"_title",null),r([c()],y.prototype,"_messages",null),r([c()],y.prototype,"_renderedLockButton",null),y=r([p("esri.views.interactive.tooltip.components.TooltipEditableField")],y);const Ft="—";function w(n){const e=n.fields.filter(t=>(t==null?void 0:t.visible)===!0);return e.length===0?null:l($,null,e.map(t=>l(y,{context:n.context,field:t,key:t.id,mode:n.mode})))}let nt=class extends d{_renderContent(){const{fieldContext:e,info:t,mode:i}=this,{visibleElements:o}=t;return l(w,{context:e,fields:[o.coordinates?t.effectiveX:void 0,o.coordinates?t.effectiveY:void 0,o.elevation?t.elevation:void 0,o.orientation?t.orientation:void 0,o.scale?t.scale:void 0],mode:i})}};nt=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],nt);let it=class extends d{_renderContent(){const{fieldContext:e,info:t,mode:i}=this,{elevation:o,visibleElements:s}=t;return l(w,{context:e,fields:[s.coordinates?t.effectiveX:void 0,s.coordinates?t.effectiveY:void 0,s.elevation?o:void 0],mode:i})}};it=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],it);const j={absolute:"absolute-direction",relative:"relative-direction"};let x=class extends L{constructor(n){super(n),this.visibleElements={}}render(){return l("div",{class:qt},this._isElementVisible("direction")?l(hn,{messages:this.messages,sketchOptions:this.sketchOptions}):null)}loadDependencies(){return yt({button:()=>b(()=>import("./ShadowCastClear.glsl.js").then(n=>n.JM),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),dropdown:()=>b(()=>import("./ShadowCastClear.glsl.js").then(n=>n.JE),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),"dropdown-item":()=>b(()=>import("./ShadowCastClear.glsl.js").then(n=>n.JF),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),"dropdown-group":()=>b(()=>import("./ShadowCastClear.glsl.js").then(n=>n.JG),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)})}_isElementVisible(n){var e;return((e=this.visibleElements)==null?void 0:e[n])??this.sketchOptions.tooltips.visibleElements[n]}};function hn(n){var a,u,g,D;const{directionMode:e}=n.sketchOptions.values,t=(a=n.messages)==null?void 0:a.sketch,i=(u=t==null?void 0:t.directionModeSelect)==null?void 0:u.title,o="absolute",s="relative";return l("calcite-dropdown",{key:"direction-mode",placement:"bottom-end",scale:"s",widthScale:"s",onCalciteDropdownSelect:V=>{var A,wt;const R=(wt=(A=V.currentTarget.selectedItems)==null?void 0:A[0])==null?void 0:wt.getAttribute("data-mode");n.sketchOptions.values.directionMode=R??"absolute"}},l("calcite-button",{alignment:"end",appearance:"transparent",iconStart:j[e],kind:"neutral",label:i,scale:"s",slot:"trigger",title:i}),l("calcite-dropdown-group",{selectionMode:"single"},l("calcite-dropdown-item",{"data-mode":s,"data-testid":"tooltip-direction-mode-relative",iconStart:j.relative,key:"relative",selected:e===s},(g=t==null?void 0:t.directionModeSelect)==null?void 0:g.relative),l("calcite-dropdown-item",{"data-mode":o,"data-testid":"tooltip-direction-mode-absolute",iconStart:j.absolute,key:"absolute",selected:e===o},(D=t==null?void 0:t.directionModeSelect)==null?void 0:D.absolute)))}r([Q("esri/views/interactive/tooltip/t9n/Tooltip"),c()],x.prototype,"messages",void 0),r([c()],x.prototype,"sketchOptions",void 0),r([c()],x.prototype,"visibleElements",void 0),x=r([p("esri.views.interactive.tooltip.components.DrawHeaderActions")],x);let ot=class extends d{_renderContent(){const{fieldContext:e,info:t,mode:i}=this,{xyMode:o,visibleElements:s}=t;return l(w,{context:e,fields:[...o==="direction-distance"?[s.direction?t.direction:void 0,s.distance?t.distance:void 0]:[s.coordinates?t.effectiveX:void 0,s.coordinates?t.effectiveY:void 0],s.elevation?t.elevation:void 0,s.area?t.area:void 0],mode:i})}_renderActions(){const{xyMode:e,sketchOptions:t}=this.info;return l(x,{sketchOptions:t,visibleElements:{direction:e==="direction-distance"}})}};ot=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],ot);let st=class extends d{_renderContent(){const{fieldContext:e,info:t,mode:i}=this,{xyMode:o,visibleElements:s}=t;return l(w,{context:e,fields:[...o==="direction-distance"?[s.direction?t.direction:void 0,s.distance?t.distance:void 0]:[s.coordinates?t.effectiveX:void 0,s.coordinates?t.effectiveY:void 0],s.elevation?t.elevation:void 0,s.totalLength?t.totalLength:void 0],mode:i})}_renderActions(){const{xyMode:e,sketchOptions:t}=this.info;return l(x,{sketchOptions:t,visibleElements:{direction:e==="direction-distance"}})}};st=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],st);let rt=class extends d{_renderContent(){const{area:e,xSize:t,ySize:i,visibleElements:o}=this.info,s=this._messagesTooltip.sketch,a=this._formatters;return l($,null,o.size&&t!=null&&i!=null?l(f,{title:s.size,value:l(k,{left:a.length(t),right:a.length(i)})}):null,o.area?l(f,{title:s.area,value:a.area(e)}):null)}};rt=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],rt);let lt=class extends d{_renderContent(){const{fieldContext:e,info:t,mode:i}=this,{visibleElements:o}=t;return l(w,{context:e,fields:[o.elevation?t.elevation:void 0],mode:i})}};lt=r([p("esri.views.interactive.tooltip.content.TooltipContentElevation")],lt);let at=class extends d{_renderContent(){const{angle:e,visibleElements:t}=this.info,i=this._messagesTooltip.sketch;return l($,null,t.rotation?l(f,{title:i.rotation,value:this._formatters.angleRelative(e)}):null)}};at=r([p("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],at);let ct=class extends d{_renderContent(){const e=this.info,{visibleElements:t}=e,i=this._messagesTooltip.sketch,o=this._formatters;return l($,null,t.size?l(f,{title:i.size,value:l(k,{left:o.length(e.xSize),right:o.length(e.ySize)})}):null,t.scale?l(f,{title:i.scale,value:l(k,{left:o.scale(e.xScale),right:o.scale(e.yScale)})}):null)}};ct=r([p("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],ct);let ut=class extends d{_renderContent(){const{fieldContext:e,info:t,mode:i}=this,{visibleElements:o}=t;return l(w,{context:e,fields:[o.coordinates?t.effectiveX:void 0,o.coordinates?t.effectiveY:void 0,o.elevation?t.elevation:void 0],mode:i})}};ut=r([p("esri.views.interactive.tooltip.content.TooltipContentMovePoint")],ut);let dt=class extends d{_renderContent(){const{fieldContext:n,info:e,mode:t}=this,{visibleElements:i}=e;return l(w,{context:n,fields:[i.distance?e.distance:void 0,i.area?e.area:void 0,i.totalLength?e.totalLength:void 0],mode:t})}};dt=r([p("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],dt);let pt=class extends d{_renderContent(){const{fieldContext:e,info:t,mode:i}=this,{visibleElements:o}=t;return l(w,{context:e,fields:[o.coordinates?t.effectiveX:void 0,o.coordinates?t.effectiveY:void 0,o.elevation?t.elevation:void 0,o.area&&t.geometryType==="polygon"?t.area:null,o.totalLength&&t.geometryType==="polyline"?t.totalLength:null],mode:i})}};pt=r([p("esri.views.interactive.tooltip.content.TooltipContentSelectedVertex")],pt);let ht=class extends d{_renderContent(){const{fieldContext:e,info:t,mode:i}=this,{visibleElements:o}=t;return l(w,{context:e,fields:[o.coordinates?t.effectiveX:void 0,o.coordinates?t.effectiveY:void 0,o.elevation?t.elevation:void 0,o.orientation?t.orientation:void 0,o.scale?t.scale:void 0],mode:i})}};ht=r([p("esri.views.interactive.tooltip.content.TooltipContentTransformMesh")],ht);let ft=class extends d{_renderContent(){const{fieldContext:e,info:t,mode:i}=this,{visibleElements:o}=t;return l(w,{context:e,fields:[o.coordinates?t.effectiveX:void 0,o.coordinates?t.effectiveY:void 0,o.elevation?t.elevation:void 0,o.orientation?t.orientation:void 0,o.size?t.size:void 0],mode:i})}};ft=r([p("esri.views.interactive.tooltip.content.TooltipContentTransformPoint")],ft);let vt=class extends d{_renderContent(){const{info:e}=this,{visibleElements:t}=e,i=this._messagesTooltip.sketch,o=this._formatters;return l($,null,t.distance?l(f,{title:i.distance,value:o.length(e.distance)}):null)}};vt=r([p("esri.views.interactive.tooltip.content.TooltipContentTranslate")],vt);let mt=class extends d{_renderContent(){const{distance:n,elevation:e,area:t,totalLength:i,visibleElements:o}=this.info,s=this._messagesTooltip.sketch,a=this._formatters;return l($,null,o.distance?l(f,{title:s.distance,value:a.length(n)}):null,o.elevation&&(e==null?void 0:e.actual)!=null?l(f,{title:s.elevation,value:a.verticalLength(e.actual)}):null,o.area&&t!=null?l(f,{title:s.area,value:a.area(t)}):null,o.totalLength&&i!=null?l(f,{title:s.totalLength,value:a.length(i)}):null)}};mt=r([p("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],mt);let _t=class extends d{_renderContent(){const{info:e}=this,{visibleElements:t}=e,i=this._messagesTooltip.sketch,o=this._formatters;return l($,null,t.distance?l(f,{title:i.distance,value:o.length(e.distance)}):null)}};_t=r([p("esri.views.interactive.tooltip.content.TooltipContentTranslateXY")],_t);let gt=class extends d{_renderContent(){const{info:n}=this,{visibleElements:e}=n,t=this._messagesTooltip.sketch;return l($,null,e.distance?l(f,{title:t.distance,value:this._formatters.verticalLengthRelative(n.distance)}):null)}};gt=r([p("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],gt);function fn(n,e){if(e==null)return null;const t=document.createElement("div");switch(e.type){case"draw-point":case"draw-multipoint":return new it({tooltip:n,info:e,container:t});case"draw-polygon":return new ot({tooltip:n,info:e,container:t});case"draw-polyline":return new st({tooltip:n,info:e,container:t});case"draw-mesh":return new nt({tooltip:n,info:e,container:t});case"draw-rectangle":return new rt({tooltip:n,info:e,container:t});case"draw-circle":return new et({tooltip:n,info:e,container:t});case"elevation":return new lt({tooltip:n,info:e,container:t});case"extent-rotate":return new at({tooltip:n,info:e,container:t});case"extent-scale":return new ct({tooltip:n,info:e,container:t});case"move-point":return new ut({tooltip:n,info:e,container:t});case"selected-vertex":return new pt({tooltip:n,info:e,container:t});case"transform-point":return new ft({tooltip:n,info:e,container:t});case"transform-mesh":return new ht({tooltip:n,info:e,container:t});case"translate":return new vt({tooltip:n,info:e,container:t});case"translate-vertex":return new mt({tooltip:n,info:e,container:t});case"translate-z":return new gt({tooltip:n,info:e,container:t});case"translate-xy":return new _t({tooltip:n,info:e,container:t});case"reshape-edge-offset":return new dt({tooltip:n,info:e,container:t})}}const O={base:`${v}`,ltr:`${v}--ltr`,rtl:`${v}--rtl`,debug:`${v}--debug`},vn=20,mn=16,_n="bottom-end";let h=class extends ge{constructor(e){super(e),this.info=null,this.options=null,this.position=null,this.content=null,this._focused=!1,this.outerContainer=document.createElement("div"),this.debug=!1,this._updatingHandles=new ye,this._lastPosition=null,this._rtl=!1,this._prevXY=[0,0]}initialize(){const{outerContainer:e}=this;this.addHandles([E(()=>{var t;return(t=this.view.overlay)==null?void 0:t.surface},t=>{e.remove(),t==null||t.appendChild(e),this._rtl=be(t)},Tt),E(()=>this.info,(t,i)=>{if(this.content!=null&&t!=null&&i!=null&&t.type===i.type)this.content.info=t;else{It(this.content);const o=fn(this,t);o?(this.content=o,o.container&&e.appendChild(o.container),this.exitInputMode()):this.content=null}},Tt),E(()=>({container:this.outerContainer,style:this._outerContainerStyle}),({container:t,style:i})=>{Object.assign(t.style,i)},Dt),E(()=>({outerContainer:this.outerContainer,placement:this.effectivePlacement,effectiveOffset:this._effectiveOffset,rtl:this._rtl,debug:this.debug}),({outerContainer:t,placement:i,effectiveOffset:o,rtl:s,debug:a})=>{const{classList:u}=t;u.add(O.base),u.toggle(O.rtl,s),u.toggle(O.ltr,!s),u.toggle(O.debug,a),this.outerContainer.style.setProperty("--offset",`${o}px`),we(t),$n(t,i)},Dt),$e(()=>this.mode==="feedback",()=>{this.position=null,this._clearOverride("effectivePlacement")},ke),M(this.outerContainer,"paste",t=>{this.emit("paste",t)}),M(this.outerContainer,["focusin","focusout"],()=>{var t,i;this._focused=((i=(t=this.content)==null?void 0:t.container)==null?void 0:i.contains(document.activeElement))??!1})])}destroy(){this.info=null,this.content=It(this.content),this.outerContainer.remove(),this._updatingHandles.destroy()}get mode(){var e;return((e=this.content)==null?void 0:e.mode)??"feedback"}get focused(){return this._focused}get visible(){return this._outerContainerStyle.display!=="none"}get contentContainer(){var e;return(e=this.content)==null?void 0:e.container}get effectivePlacement(){var t;const e=(t=this.options)==null?void 0:t.placement;return e==="auto"?"bottom-end":e??_n}get updating(){return this._updatingHandles.updating}get _screenPoint(){var t;const{inputManager:e}=this.view;return e!=null&&e.multiTouchActive?null:(t=e==null?void 0:e.latestPointerInfo)==null?void 0:t.location}get _effectiveOffset(){var e;return((e=this.options)==null?void 0:e.offset)??vn}get _outerContainerStyle(){const e=this.position??this._screenPoint;return this._lastPosition=At(e),e!=null&&this.content!=null?{display:"block",transform:`translate(${Math.round(e.x)}px, ${Math.round(e.y)}px)`}:{display:"none",transform:"none"}}clear(){this.info=null}async enterInputMode(e){var a;const t=this.position??this._lastPosition??this._screenPoint,i=this.position=At(t),{effectivePlacement:o}=this;this._override("effectivePlacement",o);const s=()=>{i&&(this.position=gn(this.contentContainer,i,this._effectiveOffset,this.view),Object.assign(this.outerContainer.style,this._outerContainerStyle))};await this._updatingHandles.addPromise((a=this.content)==null?void 0:a.enterInputMode(e,s))}async exitInputMode(e){var t;await this._updatingHandles.addPromise((t=this.content)==null?void 0:t.exitInputMode(e))}onDragStart(e,t){this._prevXY=[e,t]}onDrag(e,t){const i=e-this._prevXY[0],o=t-this._prevXY[1];this._prevXY=[e,t];const{position:s}=this;if(s){const{view:a}=this,u=e-a.position[0],g=t-a.position[1];if(u<0||u>a.width||g<0||g>a.height-mn)return;this.position=Xt(s.x+i,s.y+o)}}onDragEnd(){this._prevXY=[0,0]}};function gn(n,e,t,i){if(!n||!i.container)return e;const o=n.getBoundingClientRect(),{left:s,top:a}=i.container.getBoundingClientRect();let{x:u,y:g}=e;const D=o.left-s-t;D<0&&(u-=D);const V=o.right-s+t-i.width;V>0&&(u-=V);const R=o.top-a-t;R<0&&(g-=R);const A=o.bottom-a+t-i.height;return A>0&&(g-=A),Xt(u,g)}r([c({nonNullable:!0})],h.prototype,"view",void 0),r([c()],h.prototype,"info",void 0),r([c()],h.prototype,"options",void 0),r([c()],h.prototype,"position",void 0),r([c()],h.prototype,"content",void 0),r([c({readOnly:!0})],h.prototype,"mode",null),r([c()],h.prototype,"_focused",void 0),r([c({readOnly:!0})],h.prototype,"focused",null),r([c({readOnly:!0})],h.prototype,"outerContainer",void 0),r([c({readOnly:!0})],h.prototype,"contentContainer",null),r([c({readOnly:!0})],h.prototype,"effectivePlacement",null),r([c()],h.prototype,"debug",void 0),r([c()],h.prototype,"updating",null),r([c()],h.prototype,"_lastPosition",void 0),r([c()],h.prototype,"_screenPoint",null),r([c()],h.prototype,"_rtl",void 0),r([c()],h.prototype,"_effectiveOffset",null),r([c()],h.prototype,"_outerContainerStyle",null),h=r([p("esri.views.interactive.Tooltip")],h);const yn=["top","bottom","leading","trailing"].flatMap(n=>[U(`${n}-start`),U(n),U(`${n}-end`)]);function U(n){return`${O.base}--${n}`}function $n({classList:n},e){yn.forEach(t=>n.remove(t)),n.add(U(e))}const bn=h;function oi(n){const e=new bn(n());return e.addHandles(E(()=>n(),({view:t,options:i,info:o})=>{e.view=t,i!==void 0&&(e.options=i),o!==void 0&&(e.info=o)})),e}function si(n,e){const t=Jt(e.vertexSpace),{scale:i,orientation:o}=n,{transform:s}=e,a=xn(s);t&&a!=null?(o.actual=Ht(a,"degrees","arithmetic"),o.visible=!0):(o.actual=null,o.visible=!1),t?(i.actual=Y(ie(s)),i.visible=!0):(i.actual=null,i.visible=!1)}function ri(n,e,t){if(!e||!Jt(e.vertexSpace))return;const i=e.transform??(e.transform=new Le);wn(n,i,t),kn(n,i,t)}function wn(n,e,t){const i=ze(n.orientation.actual),o=ne(e.rotationAxis);if(i==null||o==null)return;const s=i-90,a=e.rotationAngle,u=s*o,g=u-a;B(a,u)||(t==null||t.onRotateStart(0),e.rotationAngle=u,t==null||t.onRotate(g),t==null||t.onRotateStop(g))}function kn(n,e,t){var u;const i=(u=n.scale.actual)==null?void 0:u.value,o=ie(e);if(i==null||i===o)return;const{scale:s}=e;let a;if(o===0)a=Ce(xe);else{const g=i/o;a=Ee(Nt(),s,g)}t==null||t.onScaleStart(s[0],s[1],s[2]),e.scale=a,t==null||t.onScale(a[0],a[1],a[2]),t==null||t.onScaleStop(a[0],a[1],a[2])}function li(n,e){const{x:t,y:i,z:o}=e,{x:s,y:a,z:u}=Cn(n,e.spatialReference);return{dx:s==null||B(s,t)?0:s-t,dy:a==null||B(a,i)?0:a-i,dz:u==null||o==null||B(u,o)?0:u-o}}function Cn(n,e){var a,u;let t,i;n.geographic?(t=tt(n.longitude.actual),i=tt(n.latitude.actual),Ae(e)&&(t!=null&&i!=null?[t,i]=q(t,i,Z):t!=null?t=q(t,0,Z)[0]:i!=null&&(i=q(0,i,Z)[1]))):(t=(a=n.x.actual)==null?void 0:a.value,i=(u=n.y.actual)==null?void 0:u.value);const o=n.elevation.actual,s=Oe(e);return{x:t,y:i,z:s!=null&&o!=null?Me(o,s):void 0}}const Z=[0,0];function xn(n){if(!n)return 90;const t=ne(n.rotationAxis)??1;return t!=null?90+t*n.rotationAngle:null}function ne(n){return Mt(n,Kt)?1:Mt(n,En)?-1:null}const En=De(Nt(),Kt);function ie(n){return n?Math.max(...n.scale):1}function ai(n,e){return!(n.type!=="key-down"||n.key!==T.enterInputMode||!e||!Tn(e.info))&&(e.enterInputMode(),n.preventDefault(),n.stopPropagation(),!0)}function Tn(n){const e=n==null?void 0:n.sketchOptions;if(!e)return!1;const{inputEnabled:t,visibleElements:i}=e.tooltips;return t&&n.editableFields.some(({name:o})=>o==="x"||o==="y"?i.coordinates:i[o])===!0}function ci(n,e){let t=null;return Te([n.on("paste",i=>{t==null||t.abort(),t=Ot(async()=>{J()||await Lt(),In(i,n.info,e)})}),Ot(()=>Lt()),Ie(()=>t==null?void 0:t.abort())])}function In(n,e,t){var s;if(!e||!("geographic"in e))return;const i=(s=n.clipboardData)==null?void 0:s.getData("text");if(!i)return;const o=a=>{n.stopPropagation(),n.preventDefault(),t==null||t.onBeforePaste(),a(),t==null||t.onAfterPaste()};if(e.geographic){const a=dn(i);a&&o(()=>{e.longitude.applyValue(a.longitude),e.latitude.applyValue(a.latitude)})}else{const a=un(i);a&&o(()=>{e.x.applyValue(a.x),e.y.applyValue(a.y)})}}let C=class extends Pe{constructor(n){super(n),this.helpMessage=void 0,this.viewType=void 0}get visibleElements(){return this.sketchOptions.tooltips.visibleElements}get allFields(){return[]}get editableFields(){return this.allFields.filter(n=>n.visible&&!n.readOnly)}clearInputValues(){this.allFields.forEach(n=>n.clearInputValue())}};r([c()],C.prototype,"sketchOptions",void 0),r([c()],C.prototype,"visibleElements",null),r([c()],C.prototype,"helpMessage",void 0),r([c()],C.prototype,"viewType",void 0),r([c()],C.prototype,"allFields",null),r([c()],C.prototype,"editableFields",null),C=r([p("esri.views.interactive.tooltip.infos.SketchTooltipInfo")],C);export{Vn as A,Rn as B,ci as C,Lt as E,li as F,ai as H,Hn as J,X as K,oi as R,si as V,Fn as a,zn as b,In as c,C as r,Sn as w,ri as z};
