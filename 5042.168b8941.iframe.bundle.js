"use strict";(self.webpackChunkreact_fabric=self.webpackChunkreact_fabric||[]).push([[5042],{"./packages/media/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y$:()=>AudioPlayer,a:()=>ImageViewer,Vz:()=>Thumbnail,L9:()=>VideoPlayer});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),esm=__webpack_require__("./packages/core/dist/esm/index.js"),dist_esm=__webpack_require__("./packages/utilities/dist/esm/index.js"),react=__webpack_require__("./node_modules/react/index.js");const Context_AudioContext=(0,react.createContext)({}),useAudioContext=()=>(0,react.useContext)(Context_AudioContext);var form_dist_esm=__webpack_require__("./packages/form/dist/esm/index.js");const EQ_FREQUENCY=[32,64,128,256,512,1e3,2e3,4e3,6e3,8e3,12e3,16e3],EqSlider=(0,react.memo)((({index,value,label,onChange,color="#0d9488",forChannel=!1})=>(0,jsx_runtime.jsx)("div",{style:{width:"2.5rem"},"data-negative":0===value?"zero":value<0,"data-for-channel":forChannel,dir:"left"===index?"rtl":"ltr",children:(0,jsx_runtime.jsx)(form_dist_esm.Ap,{vertical:!0,step:1,height:128,value,showLabels:!0,color:value<0?"#e11d48":color,"data-channel":forChannel,maxLabel:`${!forChannel&&value>0?"+":""}${~~value}`,minLabel:label,min:forChannel?0:-40,max:forChannel?100:40,onChange:e=>onChange(index,e)})})));EqSlider.displayName="Audio.EQSlider";const Equalizers=(0,react.memo)((()=>{const{wavesurfer,state}=useAudioContext(),contextRef=(0,react.useRef)(),mediaModelRef=(0,react.useRef)(),[filters,setFilters]=(0,react.useState)([]),[channelGains,setChannelGains]=(0,react.useState)(),createFilters=(0,react.useCallback)((()=>{if(wavesurfer){const EQ=[{f:EQ_FREQUENCY[0],name:"32",type:"lowshelf"},{f:EQ_FREQUENCY[1],name:"64",type:"peaking"},{f:EQ_FREQUENCY[2],name:"128",type:"peaking"},{f:EQ_FREQUENCY[3],name:"256",type:"peaking"},{f:EQ_FREQUENCY[4],name:"512",type:"peaking"},{f:EQ_FREQUENCY[5],name:"1k",type:"peaking"},{f:EQ_FREQUENCY[6],name:"2k",type:"peaking"},{f:EQ_FREQUENCY[7],name:"4k",type:"peaking"},{f:EQ_FREQUENCY[8],name:"6k",type:"peaking"},{f:EQ_FREQUENCY[9],name:"8k",type:"peaking"},{f:EQ_FREQUENCY[10],name:"12k",type:"highshelf"},{f:EQ_FREQUENCY[11],name:"16k",type:"highshelf"}];contextRef.current||(contextRef.current=new AudioContext,mediaModelRef.current=contextRef.current.createMediaElementSource(wavesurfer.instance.getMediaElement()));const context=contextRef.current,mediaModel=mediaModelRef.current;if(context&&mediaModel){const _filters=EQ.map((function(band){const filter=context.createBiquadFilter();return filter.type=band.type,filter.gain.value=0,filter.Q.value=1,filter.frequency.value=band.f,filter})),splitFilters=[],gainNodes=[],channels=wavesurfer.instance.decodedData.numberOfChannels;if(channels>1){const channelSplitterNode=context.createChannelSplitter(channels),channelMergerNode=context.createChannelMerger(channels);splitFilters.push(channelSplitterNode);for(let idx=0;idx<channels;idx++){const gainNode=context.createGain();channelSplitterNode.connect(gainNode,idx),gainNode.gain.value=1,gainNode.connect(channelMergerNode,0,idx),splitFilters.push(gainNode),gainNodes.push(gainNode)}setChannelGains(gainNodes),splitFilters.push(channelMergerNode)}[..._filters,...splitFilters].reduce(((prev,curr)=>(prev.connect(curr),curr)),mediaModel).connect(context.destination),setFilters(_filters)}}}),[wavesurfer]);(0,react.useEffect)((()=>{wavesurfer&&wavesurfer.instance.on("ready",createFilters)}),[wavesurfer,createFilters]),(0,react.useLayoutEffect)((()=>{document.addEventListener("mousedown",(()=>{contextRef.current?.resume()}),{capture:!0}),document.addEventListener("keydown",(()=>{contextRef.current?.resume()}),{capture:!0})}),[]);const updateFilters=(0,react.useCallback)(((index,value)=>{const f=[...filters];f[index].gain.value=~~value,setFilters([...f])}),[filters]),reset=(0,react.useCallback)((()=>{setFilters(filters.map((f=>(f.gain.value=0,f))))}),[filters]),resetFrequency=(0,react.useCallback)((fq=>{const isSpeech="speech"===fq;setFilters(filters.map((f=>(f.frequency.value===EQ_FREQUENCY[0]&&(f.gain.value=isSpeech?-40:0),f.frequency.value===EQ_FREQUENCY[1]&&(f.gain.value=isSpeech?-30:10),f.frequency.value===EQ_FREQUENCY[2]&&(f.gain.value=isSpeech?-20:30),f.frequency.value===EQ_FREQUENCY[3]&&(f.gain.value=isSpeech?0:10),f.frequency.value===EQ_FREQUENCY[4]&&(f.gain.value=isSpeech?20:-20),f.frequency.value===EQ_FREQUENCY[5]&&(f.gain.value=isSpeech?20:-40),f.frequency.value===EQ_FREQUENCY[6]&&(f.gain.value=isSpeech?20:-40),f.frequency.value===EQ_FREQUENCY[7]&&(f.gain.value=isSpeech?20:-20),f.frequency.value===EQ_FREQUENCY[8]&&(f.gain.value=isSpeech?0:10),f.frequency.value===EQ_FREQUENCY[9]&&(f.gain.value=isSpeech?-20:30),f.frequency.value===EQ_FREQUENCY[10]&&(f.gain.value=isSpeech?-30:10),f.frequency.value===EQ_FREQUENCY[11]&&(f.gain.value=isSpeech?-40:0),f))))}),[filters]),toggleChannel=(0,react.useCallback)(((channel,value)=>{if(null!=channelGains){channelGains[channel].gain.value=value/100,setChannelGains([...channelGains])}}),[channelGains]);return state.showEqs?(0,jsx_runtime.jsxs)("div",{className:"flex flex-row h-[192px] justify-center overflow-x-auto",children:[null!=channelGains&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[channelGains.map(((gainNode,idx)=>(0,jsx_runtime.jsx)(EqSlider,{forChannel:!0,index:idx,label:(0,jsx_runtime.jsx)(esm.In,{size:"1.25rem",onClick:()=>toggleChannel(idx,gainNode.gain.value>0?0:100),icon:esm.OO.mediaChannel,color:wavesurfer?.instance.options.splitChannels?.[idx]?.waveColor?.toString()}),value:100*gainNode.gain.value,onChange:toggleChannel,color:wavesurfer?.instance.options.splitChannels?.[idx]?.waveColor?.toString()},idx))),(0,jsx_runtime.jsx)(esm.cG,{vertical:!0})]}),filters.map(((filter,index)=>(0,jsx_runtime.jsx)(EqSlider,{index,label:filter.name,value:filter.gain.value,onChange:updateFilters},index))),(0,jsx_runtime.jsx)(esm.cG,{vertical:!0}),(0,jsx_runtime.jsxs)("div",{style:{width:196},className:"self-center",children:[(0,jsx_runtime.jsx)(esm.EY,{className:"text-muted text-sm text-center",children:"Presets"}),(0,jsx_runtime.jsx)(esm.$n,{fullWidth:!0,onClick:()=>resetFrequency("speech"),children:"Speech"}),(0,jsx_runtime.jsx)(esm.$n,{fullWidth:!0,onClick:()=>resetFrequency("back"),children:"Background Noise"}),(0,jsx_runtime.jsx)(esm.$n,{fullWidth:!0,onClick:reset,color:"danger",children:"Reset"})]})]}):null}));Equalizers.displayName="Audio.Equalizers";try{Equalizers.displayName="Audio.EQSlider",Equalizers.__docgenInfo={description:"",displayName:"Audio.EQSlider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/audio/Equalizers.tsx#Audio.EQSlider"]={docgenInfo:Audio.EQSlider.__docgenInfo,name:"Audio.EQSlider",path:"packages/media/src/audio/Equalizers.tsx#Audio.EQSlider"})}catch(__react_docgen_typescript_loader_error){}const Loading=()=>{const[progress,setProgress]=(0,react.useState)(0),{wavesurfer}=useAudioContext();return(0,react.useEffect)((()=>(wavesurfer?.instance.on("loading",setProgress),()=>{wavesurfer?.instance.un("loading",setProgress)})),[wavesurfer]),(0,jsx_runtime.jsx)("div",{className:"absolute inset-0 grid place-content-center",children:(0,jsx_runtime.jsx)(esm.a3,{value:progress})})};var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),TimeSlider_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./packages/media/src/sliders/TimeSlider.module.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(TimeSlider_module.A,options);const sliders_TimeSlider_module=TimeSlider_module.A&&TimeSlider_module.A.locals?TimeSlider_module.A.locals:void 0,MiniSlider=({max,min=0,icon,value,textIcon,disabled,onClick,onChange})=>{const inputRef=(0,react.useRef)(null),handleChange=delta=>{inputRef.current&&(inputRef.current.valueAsNumber=Math.max(min,Math.min(max,inputRef.current.valueAsNumber+(delta<0?-.01:.01))),onChange(inputRef.current.valueAsNumber))};return(0,jsx_runtime.jsxs)(esm.ms,{placement:"top",dropdownEvent:"hover",plainDropdown:!0,dropdownClassName:"bg-tint-50/50 backdrop-blur h-28 w-8 relative !rounded-none overflow-visible",children:[(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"slider",disabled,className:classnames_default()(textIcon&&sliders_TimeSlider_module.btnTextIcon),icon,onClick,onWheel:e=>(handleChange(e.deltaY),e.stopPropagation(),!1)}),(0,jsx_runtime.jsx)("input",{type:"range",dir:"ltr",min,max,step:.01,value,ref:inputRef,onChange:()=>onChange(inputRef.current?.valueAsNumber??0),onWheel:e=>(handleChange(e.deltaY),e.stopPropagation(),!1),className:classnames_default()(sliders_TimeSlider_module.slider,"w-24 absolute -bottom-2 left-4 origin-left -rotate-90")})]})};try{MiniSlider.displayName="MiniSlider",MiniSlider.__docgenInfo={description:"",displayName:"MiniSlider",props:{textIcon:{defaultValue:null,description:"",name:"textIcon",required:!1,type:{name:"boolean"}},min:{defaultValue:{value:"0"},description:"",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:null,description:"",name:"max",required:!0,type:{name:"number"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"number"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/sliders/MiniSlider.tsx#MiniSlider"]={docgenInfo:MiniSlider.__docgenInfo,name:"MiniSlider",path:"packages/media/src/sliders/MiniSlider.tsx#MiniSlider"})}catch(__react_docgen_typescript_loader_error){}const TimeSlider=({duration,time,onChange,children})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1 relative flex",children:[(0,jsx_runtime.jsx)("input",{type:"range",className:classnames_default()(sliders_TimeSlider_module.slider,sliders_TimeSlider_module.timeSlider),min:0,max:Math.max(duration,time),step:.01,value:time,onChange:e=>onChange(e.currentTarget.valueAsNumber??0)}),children]}),(0,jsx_runtime.jsx)("span",{className:"text-dimmed text-xs px-1",children:`${dist_esm.yL.duration(time,!0)}/${dist_esm.yL.duration(duration,!0)}`})]});try{TimeSlider.displayName="TimeSlider",TimeSlider.__docgenInfo={description:"",displayName:"TimeSlider",props:{duration:{defaultValue:null,description:"",name:"duration",required:!0,type:{name:"number"}},time:{defaultValue:null,description:"",name:"time",required:!0,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(time: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/sliders/TimeSlider.tsx#TimeSlider"]={docgenInfo:TimeSlider.__docgenInfo,name:"TimeSlider",path:"packages/media/src/sliders/TimeSlider.tsx#TimeSlider"})}catch(__react_docgen_typescript_loader_error){}const Tools=()=>{const{audioRef,state,toggleEqs}=useAudioContext(),volumeIcon=(0,react.useMemo)((()=>0===state.volume?esm.OO.mediaVolume0:state.volume<=.4?esm.OO.mediaVolume1:state.volume<=.7?esm.OO.mediaVolume2:esm.OO.mediaVolume3),[state.volume]),handlers=(0,react.useMemo)((()=>({togglePlay:async()=>audioRef.current?.paused?await(audioRef.current?.play()):audioRef.current?.pause(),mute:()=>audioRef.current&&(audioRef.current.volume=0===audioRef.current.volume?.5:0),volumeUp:()=>audioRef.current&&audioRef.current.volume<1&&(audioRef.current.volume=Math.min(1,audioRef.current.volume+.1)),volumeDown:()=>audioRef.current&&audioRef.current.volume>0&&(audioRef.current.volume=Math.max(0,audioRef.current.volume-.1)),jumpDown:()=>audioRef.current&&audioRef.current.currentTime>0&&(audioRef.current.currentTime-=1),jumpUp:()=>audioRef.current&&(audioRef.current.currentTime+=1),seekDown:()=>audioRef.current&&audioRef.current.currentTime>0&&(audioRef.current.currentTime-=.165),seekUp:()=>audioRef.current&&(audioRef.current.currentTime+=.165),speedDown:()=>audioRef.current&&audioRef.current.playbackRate>0&&(audioRef.current.playbackRate-=.5),speedUp:()=>audioRef.current&&audioRef.current.playbackRate<5&&(audioRef.current.playbackRate+=.5),toggleEqs:()=>toggleEqs()})),[]);return(0,jsx_runtime.jsxs)(esm.wi,{flex:!0,className:"select-none bg-tint-50",children:[state.isLoaded&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"space",handler:handlers.togglePlay}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"0",handler:handlers.mute}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"q",handler:handlers.toggleEqs}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:",",handler:handlers.jumpDown}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:".",handler:handlers.jumpUp}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"-",handler:handlers.volumeDown}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"=",handler:handlers.volumeUp}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"shift+{",handler:handlers.speedDown}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"shift+}",handler:handlers.speedUp}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"shift+<",handler:handlers.seekDown}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"shift+>",handler:handlers.seekUp})]}),(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"togglePlay",onClick:handlers.togglePlay,icon:state.isPlaying?esm.OO.mediaPause:esm.OO.mediaPlay}),(0,jsx_runtime.jsx)(MiniSlider,{icon:volumeIcon,value:state.volume,disabled:!state.isLoaded,max:1,onClick:()=>{const v=1===state.volume?0:state.volume>=.5?1:.5;audioRef.current&&(audioRef.current.volume=v)},onChange:v=>audioRef.current&&(audioRef.current.volume=v)}),(0,jsx_runtime.jsx)(MiniSlider,{icon:`${state.speed.toFixed(1)}x`,value:state.speed,disabled:!state.isLoaded,max:5,min:.1,textIcon:!0,onClick:()=>{const v=state.speed>=2?.5:state.speed>=1.5?2:state.speed>=1?1.5:state.volume>=.5?1:.5;audioRef.current&&(audioRef.current.playbackRate=v)},onChange:v=>audioRef.current&&(audioRef.current.playbackRate=v)}),(0,jsx_runtime.jsx)(TimeSlider,{time:state.time,duration:state.duration,onChange:time=>audioRef.current&&(audioRef.current.currentTime=time)}),(0,jsx_runtime.jsx)(esm.$n,{"aria-label":"eqs",variant:state.showEqs?"solid":"link",onClick:toggleEqs,disabled:!state.isLoaded,icon:esm.OO.mediaEqs})]})};var wavesurfer_esm=__webpack_require__("./node_modules/wavesurfer.js/dist/wavesurfer.esm.js"),hover=__webpack_require__("./node_modules/wavesurfer.js/dist/plugins/hover.js"),regions=__webpack_require__("./node_modules/wavesurfer.js/dist/plugins/regions.js"),timeline=__webpack_require__("./node_modules/wavesurfer.js/dist/plugins/timeline.js");const CHANNEL_COLORS=[["#75BBC1","#108188"],["#74a9cf","#0570b0"],["#8c96c6","#88419d"],["#df65b0","#ae017e"],["#fa9fb5","#ce1256"],["#fdbb84","#ef6548"],["#fec44f","#cc4c02"],["#bf812d","#543005"]],Wavesurfer=(container,media)=>{const logger=(0,dist_esm.Ul)("WaveSurfer");let activeRegion,userEnabled;const plugins={cursor:hover.A.create(),regions:regions.A.create(),timeline:timeline.A.create({style:{backgroundColor:"#18181b",position:"relative",color:"#fff",zIndex:"5"}})};logger.debug("create instance",{});const instance=wavesurfer_esm.A.create({container,media,cursorWidth:2,height:200,barWidth:2,barRadius:3,barGap:1,barHeight:.85,minPxPerSec:16,splitChannels:CHANNEL_COLORS.map(((c,i)=>({waveColor:c[0],progressColor:c[1]})),{}),plugins:Object.values(plugins).filter(Boolean)});instance.getMediaElement().crossOrigin="anonymous",instance.on("ready",(()=>{const count=instance.decodedData.numberOfChannels;logger.info("Found channels",{},count),instance.setOptions({height:200/count})})),instance.on("error",(err=>{logger.debug("error",{},err)})),plugins.regions.on("region-double-clicked",(region=>{const{id,start,end}=region;logger.debug("play region",{},{id,start,end}),setTimeout((()=>{instance.setTime(start)}),10),activeRegion=region,region.play()})),plugins.regions.on("region-out",(region=>{activeRegion&&(instance.pause(),activeRegion=void 0)}));const setRegions=regions=>{plugins.regions.clearRegions();const colors=instance.options.splitChannels;regions?.forEach((({channel=-1,...region})=>{plugins.regions.addRegion({...region,channelIdx:channel,color:`${colors?.[channel]?.waveColor?.toString()??"#a37f4f"}30`,drag:!1,resize:!1})}))};return{loadAudio:async src=>{const tmr=logger.timer("load audio");if(instance){try{instance.setVolume(.5)}catch(_){}try{instance.setPlaybackRate(1)}catch(_){}try{plugins.regions.clearRegions()}catch(_){}return await instance.load(src).then((()=>{tmr.end()}))}return await Promise.resolve()},destroy:()=>{try{instance?.destroy()}catch(_){}},setColors:(colors=[])=>{instance.setOptions({splitChannels:CHANNEL_COLORS.map((([wave,progress],idx)=>({waveColor:colors[idx]?.[0]??wave,progressColor:colors[idx]?.[1]??progress})))})},setRegions,enableUserRegions:()=>{userEnabled=plugins.regions.enableDragSelection({color:"#a37f4f30"}),plugins.regions.clearRegions()},disableUserRegions:regions=>{userEnabled?.(),setRegions(regions)},instance,regions:plugins.regions}},AudioPlayer=({ref,src,fallback,colors,regions,userDefinedRegions,onRegionChange,onLoad,onError,onChange,onPlay,onPause,onRegionStart,onRegionEnd})=>{const audioRef=(0,react.useRef)(null),containerRef=(0,react.useRef)(null),[wavesurfer,setWavesurfer]=(0,react.useState)(),[state,dispatch]=(0,react.useReducer)(((state,action)=>("loaded"===action.type&&(state.isLoading=!1,state.isLoaded=!0,onLoad?.()),"metadata"===action.type&&(state.duration=action.duration,state.volume=action.volume,state.speed=action.speed),"errored"===action.type&&(state.errorLevel++,1===state.errorLevel&&(fallback?state.src=fallback:state.errorLevel++),2===state.errorLevel&&(state.isLoading=!1,state.isLoaded=!0,onError?.())),"reset"===action.type?{...state,src:action.audio}:"toggleEqs"===action.type?{...state,showEqs:!state.showEqs}:"play"===action.type?(onPlay?.(),{...state,isPlaying:!0}):"pause"===action.type?(onPause?.(),{...state,isPlaying:!1}):"playing"===action.type?(onChange?.(action.time),{...state,time:action.time}):"volume"===action.type?{...state,volume:action.volume}:"speed"===action.type?{...state,speed:action.speed}:{...state})),{errorLevel:0,src:"",isLoading:!0,isLoaded:!1,isErrored:!1,isPlaying:!1,showEqs:!1,time:0,duration:0,volume:.5,speed:1});(0,react.useImperativeHandle)(ref,(()=>({play:()=>{audioRef.current?.play()},pause:()=>audioRef.current?.pause(),playRegion:start=>{audioRef.current&&(audioRef.current.currentTime=start),audioRef.current?.play()}})),[wavesurfer]),(0,react.useEffect)((()=>{const surfer=Wavesurfer(containerRef.current,audioRef.current);return setWavesurfer(surfer),()=>{surfer.destroy()}}),[]),(0,react.useEffect)((()=>{dispatch({type:"reset",audio:src})}),[src]);const handleLoad=(0,react.useCallback)((()=>{dispatch({type:"loaded"})}),[]),handleError=(0,react.useCallback)((()=>{dispatch({type:"errored"})}),[]),toggleEqs=(0,react.useCallback)((()=>{dispatch({type:"toggleEqs"})}),[]);return(0,react.useEffect)((()=>{wavesurfer?.loadAudio(state.src)}),[state.src]),(0,react.useEffect)((()=>{if(null!=wavesurfer){const handleIn=region=>{onRegionStart?.(region.id)},handleOut=region=>{onRegionEnd?.(region.id)};return wavesurfer.regions.on("region-in",handleIn),wavesurfer.regions.on("region-out",handleOut),()=>{wavesurfer.regions.un("region-in",handleIn),wavesurfer.regions.un("region-out",handleOut)}}}),[wavesurfer,onRegionStart,onRegionEnd]),(0,react.useLayoutEffect)((()=>{null!=wavesurfer&&wavesurfer.setColors(colors)}),[wavesurfer,colors]),(0,react.useLayoutEffect)((()=>{wavesurfer?.instance.on("ready",(()=>{wavesurfer.setRegions(regions)}))}),[wavesurfer,regions]),(0,react.useEffect)((()=>{if(wavesurfer){const handleChange=(0,dist_esm.sg)((()=>{onRegionChange?.(wavesurfer.regions.getRegions().map((region=>({start:region.start,end:region.end,remove:()=>region.remove()}))).sort((0,dist_esm.ck)("asc","start")))}));return userDefinedRegions?(wavesurfer.enableUserRegions(),wavesurfer.regions.on("region-created",handleChange),wavesurfer.regions.on("region-updated",handleChange),wavesurfer.regions.on("region-removed",handleChange)):wavesurfer.disableUserRegions(regions),()=>{wavesurfer.regions.un("region-created",handleChange),wavesurfer.regions.un("region-updated",handleChange),wavesurfer.regions.un("region-removed",handleChange)}}}),[wavesurfer,regions,userDefinedRegions,onRegionChange]),(0,jsx_runtime.jsx)(Context_AudioContext.Provider,{value:{audioRef,wavesurfer,state,toggleEqs,handleLoad,handleError},children:(0,jsx_runtime.jsxs)(esm.Y9,{className:"bg-base",dir:"ltr",children:[(0,jsx_runtime.jsx)("audio",{onLoadedData:handleLoad,onError:handleError,ref:audioRef,onPlay:()=>dispatch({type:"play"}),onPause:()=>dispatch({type:"pause"}),onRateChange:()=>dispatch({type:"speed",speed:audioRef.current?.playbackRate??0}),onVolumeChange:()=>dispatch({type:"volume",volume:audioRef.current?.volume??0}),onLoadedMetadata:()=>dispatch({type:"metadata",speed:audioRef.current?.playbackRate??0,volume:audioRef.current?.volume??0,duration:audioRef.current?.duration??0}),onSeeking:()=>dispatch({type:"playing",time:audioRef.current?.currentTime??0}),onTimeUpdate:()=>dispatch({type:"playing",time:audioRef.current?.currentTime??0}),children:(0,jsx_runtime.jsx)("track",{kind:"captions",default:!0})}),(0,jsx_runtime.jsxs)("div",{className:"overflow-hidden relative",children:[(0,jsx_runtime.jsx)("div",{ref:containerRef,className:"h-[200px]"}),state.isLoading&&(0,jsx_runtime.jsx)(Loading,{})]}),(0,jsx_runtime.jsx)(Tools,{}),(0,jsx_runtime.jsx)(Equalizers,{})]})})};try{AudioPlayer.displayName="AudioPlayer",AudioPlayer.__docgenInfo={description:"",displayName:"AudioPlayer",props:{src:{defaultValue:null,description:"audio source",name:"src",required:!0,type:{name:"string"}},fallback:{defaultValue:null,description:"fallback source",name:"fallback",required:!1,type:{name:"string"}},colors:{defaultValue:null,description:"channel colors",name:"colors",required:!1,type:{name:"[wave: string, progress: string][]"}},regions:{defaultValue:null,description:"scene list",name:"regions",required:!1,type:{name:"{ id: string; start: number; end: number; channel?: number; }[]"}},onChange:{defaultValue:null,description:"onChange playback time",name:"onChange",required:!1,type:{name:"((currentTime: number) => void)"}},onPlay:{defaultValue:null,description:"play handler",name:"onPlay",required:!1,type:{name:"(() => void)"}},onPause:{defaultValue:null,description:"pause handler",name:"onPause",required:!1,type:{name:"(() => void)"}},onRegionStart:{defaultValue:null,description:"on enter region handler",name:"onRegionStart",required:!1,type:{name:"((id: string) => void)"}},onRegionEnd:{defaultValue:null,description:"on region exit handler",name:"onRegionEnd",required:!1,type:{name:"((id: string) => void)"}},onLoad:{defaultValue:null,description:"source loaded",name:"onLoad",required:!1,type:{name:"(() => void)"}},onError:{defaultValue:null,description:"error loading audio",name:"onError",required:!1,type:{name:"(() => void)"}},userDefinedRegions:{defaultValue:null,description:"",name:"userDefinedRegions",required:!1,type:{name:"boolean"}},onRegionChange:{defaultValue:null,description:"",name:"onRegionChange",required:!1,type:{name:"((regions: { start: number; end: number; remove: () => void; }[]) => void)"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<AudioPlayerRef>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/audio/AudioPlayer.tsx#AudioPlayer"]={docgenInfo:AudioPlayer.__docgenInfo,name:"AudioPlayer",path:"packages/media/src/audio/AudioPlayer.tsx#AudioPlayer"})}catch(__react_docgen_typescript_loader_error){}var icons=__webpack_require__("./packages/core/src/types/icons.ts");const NsfwOverlay=({size})=>{const[hide,setHide]=(0,react.useState)(!1);return hide?null:(0,jsx_runtime.jsx)("div",{role:"none",className:"bg-base/80 backdrop-blur-xl absolute inset-0 grid place-content-center text-center shadow-base shadow-inset select-none",onClick:e=>[setHide(!0),e.stopPropagation(),e.preventDefault()],children:(0,jsx_runtime.jsxs)("div",{className:"sm"===size?"text-sm":"text-2xl",children:[(0,jsx_runtime.jsx)("div",{children:"Not Safe For Work"}),(0,jsx_runtime.jsx)(esm.In,{size:"sm"===size?32:64,color:"danger",icon:icons.O.mediaNsfw}),(0,jsx_runtime.jsx)("div",{children:"Click to view"})]})})};try{NsfwOverlay.displayName="NsfwOverlay",NsfwOverlay.__docgenInfo={description:"",displayName:"NsfwOverlay",props:{size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/nsfw/NsfwOverlay.tsx#NsfwOverlay"]={docgenInfo:NsfwOverlay.__docgenInfo,name:"NsfwOverlay",path:"packages/media/src/nsfw/NsfwOverlay.tsx#NsfwOverlay"})}catch(__react_docgen_typescript_loader_error){}const Context=(0,react.createContext)({}),CanvasProvider=({children,ref,mediaEl,width})=>{const canvasRef=(0,react.useRef)(null),[state,dispatch]=(0,react.useReducer)(((state,action)=>"clear"===action.type?[]:"unhilight"===action.type?[...state]:"drawBox"===action.type?[...state,action.payload]:state),[]);(0,react.useImperativeHandle)(ref,(()=>({clear:()=>{dispatch({type:"clear"})},unhilight:()=>{dispatch({type:"unhilight"})},drawBox:(box,options={})=>{dispatch({type:"drawBox",payload:{box,...options}})},drawPolygon:(polygon,options={})=>{dispatch({type:"drawBox",payload:{polygon,...options}})},hilightBox:box=>{dispatch({type:"hilight",payload:box})},hilightPolygon:polygon=>{dispatch({type:"hilightPolygon",payload:polygon})}})),[canvasRef,dispatch]);const getRatio=(0,react.useCallback)((()=>{const el=mediaEl.current;let ratio=1;return el instanceof HTMLImageElement&&(ratio=Math.min(el.offsetWidth/el.naturalWidth,el.offsetHeight/el.naturalHeight)),el instanceof HTMLVideoElement&&(ratio=Math.min(el.offsetWidth/el.videoWidth,el.offsetHeight/el.videoHeight)),ratio}),[]);return(0,react.useEffect)((()=>{const context=canvasRef.current?.getContext("2d");context?.clearRect(0,0,context.canvas.width,context.canvas.height);const ratio=getRatio();null!=context&&state.forEach((({box,polygon,...options})=>{if(box){let[x,y,w,h]=(0,dist_esm.YH)(box);if(x*=ratio,y*=ratio,w*=ratio,h*=ratio,context.lineWidth=2,context.strokeStyle=options?.stroke??"#fc0",context.strokeRect(x,y,w,h),options.labelTop){const labelX=x-1;let labelY=y-18;labelY<0&&(labelY+=18),context.fillStyle=options.colorTop??"rgb(0 0 0 / 0.5)",context.fillRect(labelX,labelY,w+2,18),context.fillStyle="#ffffff",context.font="13px sans-serif",context.globalCompositeOperation="screen",context.fillText(`${options.labelTop}`,labelX+2,labelY+15,w-4)}if(context.globalCompositeOperation="source-over",options.labelBottom){const labelX=x-1;let labelY=y+h;labelY>context.canvas.height&&(labelY-=18),context.fillStyle=options.colorBottom??"rgb(0 0 0 / 0.5)",context.fillRect(labelX,labelY,w+2,18),context.fillStyle="#ffffff",context.font="13px sans-serif",context.globalCompositeOperation="screen",context.fillText(`${options.labelBottom}`,labelX+2,labelY+15,w-4)}context.globalCompositeOperation="source-over"}null!=polygon&&(context.lineWidth=2,context.strokeStyle=options?.stroke??"#fc0",context.beginPath(),polygon.forEach(((box,i)=>{const[x,y]=(0,dist_esm.YH)(box);0===i&&context.moveTo(x*ratio,y*ratio),i>0&&context.lineTo(x*ratio,y*ratio)})),context.closePath(),context.stroke())}))}),[state,width]),(0,jsx_runtime.jsx)(Context.Provider,{value:{canvasRef},children})},useCanvasContext=()=>(0,react.useContext)(Context);try{CanvasProvider.displayName="CanvasProvider",CanvasProvider.__docgenInfo={description:"",displayName:"CanvasProvider",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<CanvasRef>"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},mediaEl:{defaultValue:null,description:"",name:"mediaEl",required:!0,type:{name:"RefObject<HTMLImageElement | HTMLVideoElement | null>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/canvas/Context.tsx#CanvasProvider"]={docgenInfo:CanvasProvider.__docgenInfo,name:"CanvasProvider",path:"packages/media/src/canvas/Context.tsx#CanvasProvider"})}catch(__react_docgen_typescript_loader_error){}const Context_Context=(0,react.createContext)({}),ImageProvider=({children,src,ref,fallback,overlay,onLoad,onError})=>{const imageRef=(0,react.useRef)(null),scrollerRef=(0,react.useRef)(null),[state,dispatch]=(0,react.useReducer)(((state,action)=>{if("loaded"===action.type&&(state.isLoading=!1,state.isLoaded=!0,onLoad?.()),"errored"===action.type&&(state.errorLevel++,1===state.errorLevel&&(fallback?(state.image=fallback,state.src=fallback):state.errorLevel++),2===state.errorLevel&&(state.isLoading=!1,state.isLoaded=!0,onError?.())),"resize"===action.type&&(state.ratio=action.ratio,state.containerWidth=action.containerWidth,state.containerHeight=action.containerHeight),"toggleFit"===action.type&&(state.zoom=0===state.zoom?1:0),"fitToView"===action.type&&(state.zoom=0),"fitToSize"===action.type&&(state.zoom=1),"image"===action.type&&(state.overlay=void 0,state.splitter=!1,state.isLoaded=!1,state.isErrored=!1,state.isLoading=!0,state.errorLevel=0,state.image=action.src,state.src=action.src),"overlay"===action.type&&(state.splitter=!!action.overlay,state.overlay=action.overlay,state.src=state.image),"toggleSplitter"===action.type&&(state.splitter=!state.splitter,state.src=state.src===state.image&&state.overlay?state.overlay:state.image),"toggleCropping"===action.type&&(state.cropping=!state.cropping),"startCropping"===action.type&&(state.cropping=!1),"cancelCropping"===action.type&&(state.cropping=!1),"zoom"===action.type&&(state.zoom+=action.zoom,action.reset&&state.zoom>5&&(state.zoom=.5),state.zoom=Math.min(5,Math.max(.1,state.zoom))),"zoomScale"===action.type&&(state.zoom=action.zoom),"rotate"===action.type&&(state.rotate+=action.rotate,state.rotate=state.rotate>270?0:state.rotate<0?270:state.rotate),0===state.zoom){const{containerWidth:cw,containerHeight:ch,ratio}=state;let[fitWidth,fitHeight]=cw>ch?[ch*ratio,ch]:[cw,cw*ratio];state.rotate%180!=0&&(cw>ch?(fitWidth=ch,fitHeight=ch/ratio):(fitWidth=cw/ratio,fitHeight=cw)),state.imageWidth=fitWidth-16,state.imageHeight=fitHeight-16}if(state.zoom>0&&imageRef.current){const{naturalWidth:w,naturalHeight:h}=imageRef.current,zoomLevel=state.splitter?1:state.zoom;state.imageWidth=w*zoomLevel,state.imageHeight=h*zoomLevel}return state.width=state.rotate%180==0?state.imageWidth:state.imageHeight,state.height=state.rotate%180==0?state.imageHeight:state.imageWidth,{...state}}),{imageWidth:0,imageHeight:0,containerWidth:0,containerHeight:0,ratio:0,width:0,height:0,rotate:0,zoom:0,errorLevel:0,src:"",isLoading:!0,isLoaded:!1,isErrored:!1,showSplitter:!0});(0,react.useEffect)((()=>{dispatch({type:"image",src})}),[src]),(0,react.useEffect)((()=>{dispatch({type:"overlay",overlay})}),[overlay]);const calculateSize=(0,react.useCallback)((()=>{if(imageRef.current&&scrollerRef.current){const{naturalWidth:w,naturalHeight:h}=imageRef.current,{offsetWidth:cw,offsetHeight:ch}=scrollerRef.current;if(w>0&&h>0){dispatch({type:"resize",ratio:w/h,containerWidth:cw,containerHeight:ch})}}}),[]);(0,react.useEffect)((()=>{if(null!=scrollerRef.current){const ob=new ResizeObserver(calculateSize);return ob.observe(scrollerRef.current),()=>{ob.disconnect()}}}),[calculateSize]);const handleLoad=(0,react.useCallback)((()=>{dispatch({type:"loaded"}),calculateSize()}),[]),handleError=(0,react.useCallback)((()=>{dispatch({type:"errored"})}),[]),changeZoom=(0,react.useCallback)(((zoom,reset=!1)=>{dispatch({type:"zoom",zoom,reset})}),[]),zoomScale=(0,react.useCallback)((zoom=>{dispatch({type:"zoomScale",zoom})}),[]),rotate=(0,react.useCallback)((rotation=>{dispatch({type:"rotate",rotate:rotation})}),[]),fitToSize=(0,react.useCallback)((()=>{dispatch({type:"fitToSize"})}),[]),fitToView=(0,react.useCallback)((()=>{dispatch({type:"fitToView"})}),[]),toggleFit=(0,react.useCallback)((()=>{dispatch({type:"toggleFit"})}),[]),toggleCropping=(0,react.useCallback)((()=>{dispatch({type:"toggleCropping"})}),[]),startCropping=(0,react.useCallback)((()=>{dispatch({type:"startCropping"})}),[]),cancelCropping=(0,react.useCallback)((()=>{dispatch({type:"cancelCropping"})}),[]),toggleSplitter=(0,react.useCallback)((()=>{dispatch({type:"toggleSplitter"})}),[]),reset=(0,react.useCallback)((()=>{dispatch({type:"zoomScale",zoom:0}),dispatch({type:"rotate",rotate:0})}),[]);return(0,jsx_runtime.jsx)(Context_Context.Provider,{value:{imageRef,scrollerRef,state,reset,rotate,handleLoad,handleError,zoomScale,fitToSize,fitToView,toggleFit,changeZoom,toggleSplitter,toggleCropping,cancelCropping,startCropping},children:(0,jsx_runtime.jsx)(CanvasProvider,{ref,mediaEl:imageRef,width:state.width,children})})},useImageContext=()=>(0,react.useContext)(Context_Context);try{ImageProvider.displayName="ImageProvider",ImageProvider.__docgenInfo={description:"",displayName:"ImageProvider",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<CanvasRef>"}},src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},fallback:{defaultValue:null,description:"",name:"fallback",required:!1,type:{name:"string"}},overlay:{defaultValue:null,description:"",name:"overlay",required:!1,type:{name:"string"}},onLoad:{defaultValue:null,description:"",name:"onLoad",required:!1,type:{name:"(() => void)"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/image/Context.tsx#ImageProvider"]={docgenInfo:ImageProvider.__docgenInfo,name:"ImageProvider",path:"packages/media/src/image/Context.tsx#ImageProvider"})}catch(__react_docgen_typescript_loader_error){}const Cropper=({onCrop})=>{const currentPos=(0,react.useRef)({x:0,y:0,top:0,left:0,width:0,height:0,dragging:!1}),refContainer=(0,react.useRef)(null),{state,imageRef,toggleCropping}=useImageContext(),[pos,setPos]=(0,react.useState)(),checkCrop=(0,react.useCallback)((([x,y,w,h])=>{if(imageRef.current){if(90===state.rotate){const xt=x,wt=w;x=y,y=state.width-(xt+w),w=h,h=wt}if(180===state.rotate&&(x=state.width-(x+w),y=state.height-(y+h)),270===state.rotate){const xt=x,wt=w;x=state.height-(y+h),y=xt,w=h,h=wt}let zoomLevel=state.zoom;0===zoomLevel&&(zoomLevel=state.imageWidth/imageRef.current.naturalWidth),x/=zoomLevel,y/=zoomLevel,w/=zoomLevel,h/=zoomLevel,toggleCropping(),onCrop?.([x,y,w,h])}}),[onCrop,state.zoom,state.rotate,state.width,state.height]),stopDrag=(0,react.useCallback)((()=>{if(setPos(void 0),refContainer.current){const{top,left,width,height}=currentPos.current;checkCrop([left,top,width,height])}currentPos.current={...currentPos.current,dragging:!1},document.removeEventListener("mouseup",stopDrag)}),[onCrop]),startDrag=(0,react.useCallback)((e=>{const x=e.clientX,y=e.clientY;if(refContainer.current){const{top:containerTop,left:containerLeft}=refContainer.current.getBoundingClientRect();currentPos.current={x,y,top:y+-1*containerTop,left:x+-1*containerLeft,width:0,height:0,dragging:!0},document.addEventListener("mouseup",stopDrag)}}),[stopDrag]),handleDrag=(0,react.useCallback)((e=>{if(currentPos.current.dragging){const{x,y}=currentPos.current;let width=Math.abs(e.clientX-x),height=Math.abs(e.clientY-y);if(refContainer.current){const{top:containerTop,left:containerLeft,height:containerHeight,width:containerWidth}=refContainer.current.getBoundingClientRect();let top=Math.min(e.clientY,y)+-1*containerTop,left=Math.min(e.clientX,x)+-1*containerLeft;top<0&&(height=Math.max(height+top,0),top=0),left<0&&(width=Math.max(width+left,0),left=0),top+height>containerHeight&&(height=containerHeight-top),left+width>containerWidth&&(width=containerWidth-left),currentPos.current={...currentPos.current,top,left,width,height},setPos(currentPos.current)}}}),[]);return(0,jsx_runtime.jsx)("div",{role:"none",className:"absolute inset-0 overflow-hidden cursor-crosshair pointer-events-auto grid place-items-center",onMouseDown:startDrag,onMouseMove:handleDrag,children:(0,jsx_runtime.jsx)("div",{ref:refContainer,className:"relative m-auto",style:{width:state.width,height:state.height},children:pos&&(0,jsx_runtime.jsx)("div",{style:pos,className:"absolute border-2 border-dashed border-primary pointer-events-none"})})})};try{Cropper.displayName="Cropper",Cropper.__docgenInfo={description:"",displayName:"Cropper",props:{onCrop:{defaultValue:null,description:"",name:"onCrop",required:!1,type:{name:"((box: number[]) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/image/Cropper.tsx#Cropper"]={docgenInfo:Cropper.__docgenInfo,name:"Cropper",path:"packages/media/src/image/Cropper.tsx#Cropper"})}catch(__react_docgen_typescript_loader_error){}const Overlay=({src})=>{const{state}=useImageContext(),overlayRef=(0,react.useRef)(null),[overlaySize,setOverlaySize]=(0,react.useState)(0),[orientVertical,setOrientVertical]=(0,react.useState)(!1),{ref,onMouseDown}=(0,esm.st)((({x,y})=>{null!=overlayRef.current&&setOverlaySize(orientVertical?overlayRef.current.offsetHeight+y:overlayRef.current.offsetWidth+x)}),{isVertical:orientVertical});return(0,react.useEffect)((()=>{setOverlaySize((orientVertical?state.containerHeight:state.containerWidth)/2)}),[state.containerHeight,state.containerWidth,orientVertical]),(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"absolute overflow-hidden pointer-events-none min-h-2 min-w-2",ref:overlayRef,style:orientVertical?{top:0,insetInline:0,height:overlaySize,maxHeight:state.containerHeight}:{insetInlineStart:0,insetBlock:0,width:overlaySize,maxWidth:state.containerWidth},children:[(0,jsx_runtime.jsx)("div",{className:"grid p-[8px]",style:{width:state.containerWidth,height:state.containerHeight},children:(0,jsx_runtime.jsx)("div",{className:"origin-center relative m-auto pointer-events-none",style:{width:state.imageWidth,height:state.imageHeight,transform:`rotate(${state.rotate}deg)`},children:(0,jsx_runtime.jsx)("img",{alt:src,src,loading:"lazy",crossOrigin:"anonymous",className:"object-contain size-full"})})}),(0,jsx_runtime.jsx)("div",{role:"none",ref,onMouseDown,className:classnames_default()("bg-white outline outline-2 outline-black -outline-offset-2 absolute pointer-events-auto",orientVertical&&"h-2 inset-x-0 bottom-0 cursor-ns-resize",!orientVertical&&"w-2 inset-y-0 end-0 cursor-ew-resize")})]}),(0,jsx_runtime.jsx)("div",{className:classnames_default()("absolute leading-none bg-accent-500 rounded-full p-1 ring-1 ring-white",orientVertical&&"left-1/2 -translate-x-1/2",!orientVertical&&"top-1/2 -translate-y-1/2"),style:orientVertical?{top:Math.min(Math.max(overlaySize,0),state.containerHeight)-16}:{insetInlineStart:Math.min(Math.max(overlaySize,0),state.containerWidth)-16},children:(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.mediaOrient,"data-orient":orientVertical?"vertical":"horizontal",onClick:()=>setOrientVertical(!orientVertical)})})]})};try{Overlay.displayName="Overlay",Overlay.__docgenInfo={description:"",displayName:"Overlay",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/image/Overlay.tsx#Overlay"]={docgenInfo:Overlay.__docgenInfo,name:"Overlay",path:"packages/media/src/image/Overlay.tsx#Overlay"})}catch(__react_docgen_typescript_loader_error){}const Image=({onCrop})=>{const{imageRef,scrollerRef,state,handleLoad,handleError}=useImageContext(),{canvasRef}=useCanvasContext();return(0,jsx_runtime.jsxs)("div",{ref:scrollerRef,className:"area-content overflow-auto relative scroll-hide grid bg-tint-50 select-none p-[8px]",children:[(0,jsx_runtime.jsxs)(esm.tH,{children:[(0,jsx_runtime.jsx)("div",{role:"none",className:"relative overflow-hidden m-auto grid place-content-center size-full cursor-grab active:cursor-grabbing",onMouseDown:e=>{let startX=e.clientX,startY=e.clientY;const doDrag=ev=>{scrollerRef.current&&(scrollerRef.current.scrollTop-=Math.floor(ev.clientY-startY),scrollerRef.current.scrollLeft-=Math.floor(ev.clientX-startX),startX=ev.clientX,startY=ev.clientY,ev.preventDefault(),ev.stopPropagation())};document.addEventListener("mousemove",doDrag),document.addEventListener("mouseup",(()=>{document.removeEventListener("mousemove",doDrag)}),{capture:!0,once:!0})},style:{width:state.width,height:state.height},children:(0,jsx_runtime.jsxs)("div",{className:"origin-center relative pointer-events-none",style:{width:state.imageWidth,height:state.imageHeight,transform:`rotate(${state.rotate}deg)`},children:[state.src&&(0,jsx_runtime.jsx)("img",{alt:state.src,src:state.src,onLoad:handleLoad,onError:handleError,ref:imageRef,loading:"lazy",crossOrigin:"anonymous",className:"object-contain size-full"}),(0,jsx_runtime.jsx)("canvas",{ref:canvasRef,width:state.imageWidth,height:state.imageHeight,className:"absolute inset-0"})]})}),state.isLoading&&(0,jsx_runtime.jsx)(esm.bm,{})]}),state.cropping&&(0,jsx_runtime.jsx)(Cropper,{onCrop}),state.overlay&&state.splitter&&(0,jsx_runtime.jsx)(Overlay,{src:state.overlay})]})};try{Image.displayName="Image",Image.__docgenInfo={description:"",displayName:"Image",props:{onCrop:{defaultValue:null,description:"",name:"onCrop",required:!1,type:{name:"((box: number[]) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/image/Image.tsx#Image"]={docgenInfo:Image.__docgenInfo,name:"Image",path:"packages/media/src/image/Image.tsx#Image"})}catch(__react_docgen_typescript_loader_error){}const ZoomMeter=({zoom=0})=>(0,jsx_runtime.jsx)("svg",{viewBox:"0 0 500 500",style:{transform:`rotate(${68-zoom/5*136}deg)`},children:(0,jsx_runtime.jsx)("g",{transform:"scale(1.000000,-1.000000) translate(0,-500)",children:(0,jsx_runtime.jsx)("path",{d:"M 6.555585 21.188976 L 6.206033 20.500752 L 5.931069 19.834808 L 5.658183 19.168236 L 5.483647 18.532660 L 5.310983 17.896956 L 5.236253 17.293136 L 5.163183 16.689588 L 5.163660 16.110546 L 5.204560 15.548065 L 5.380193 14.472769 L 5.680006 13.464121 L 6.102920 12.522391 L 6.360214 12.076632 L 6.643557 11.646527 L 6.958955 11.237889 L 7.274940 10.829952 L 7.633211 10.450260 L 7.991942 10.071186 L 8.392715 9.720167 L 8.793829 9.369659 L 9.226385 9.040140 L 9.672875 8.729473 L 10.119561 8.419139 L 10.728600 8.052173 L 11.337824 7.685547 L 11.947232 7.319261 L 12.414125 7.079228 L 12.881041 6.839244 L 13.351569 6.623566 L 13.822075 6.407840 L 14.481102 6.156440 L 15.139976 5.904688 L 15.798698 5.652584 L 16.316325 5.490216 L 16.833810 5.327490 L 17.357857 5.185334 L 17.878199 5.078665 L 18.398344 4.971415 L 18.913563 4.911351 L 19.428568 4.850547 L 19.938637 4.836624 L 20.448494 4.821812 L 20.954618 4.841725 L 21.456096 4.888389 L 22.438961 5.073664 L 23.395506 5.380906 L 24.326480 5.809479 L 24.782671 6.069101 L 25.228033 6.365643 L 25.650055 6.728418 L 26.072708 7.089754 L 26.464764 7.539958 L 26.857848 7.988786 L 27.221212 8.526661 L 27.586077 9.063272 L 27.929793 9.666561 L 28.248893 10.292745 L 28.499451 10.897620 L 28.751921 11.501923 L 28.911994 12.079034 L 29.073794 12.656040 L 29.142826 13.206701 L 29.213401 13.757626 L 29.214504 14.289353 L 29.178503 14.809326 L 29.021353 15.816494 L 28.749909 16.780372 L 28.363262 17.701238 L 28.126454 18.145561 L 27.864894 18.579316 L 27.572274 18.997106 L 27.280279 19.415558 L 26.946407 19.812367 L 26.613036 20.209761 L 26.237539 20.585334 L 25.862419 20.961392 L 25.455617 21.321038 L 25.034331 21.664433 L 24.613267 22.008145 L 24.035757 22.422734 L 23.458459 22.837647 L 22.881373 23.252883 L 22.436200 23.531134 L 21.991056 23.809431 L 21.540271 24.063807 L 21.089460 24.318138 L 20.453332 24.623024 L 19.817023 24.927572 L 19.180533 25.231781 L 18.676665 25.433822 L 18.172626 25.635518 L 17.659592 25.815748 L 17.146306 25.958175 L 16.632780 26.100036 L 16.118926 26.191356 L 15.604809 26.281952 L 15.090339 26.321697 L 14.575606 26.360566 L 14.060559 26.360857 L 13.546913 26.331059 L 12.529031 26.168953 L 11.524184 25.869482 L 10.533176 25.431927 L 10.043178 25.161173 L 9.561230 24.847002 L 9.097788 24.455393 L 8.635029 24.062253 L 8.197558 23.566372 L 7.761235 23.068989 L 7.351209 22.468977 L 6.942883 21.867552 L 6.555585 21.188976 Z M 8.128964 20.340798 L 8.430380 20.863901 L 9.078392 21.779198 L 9.784754 22.519466 L 10.547516 23.084373 L 10.949539 23.301036 L 11.359791 23.481624 L 12.188675 23.758070 L 13.028262 23.921958 L 13.878136 23.973851 L 14.306846 23.957997 L 14.736425 23.918975 L 15.593316 23.785485 L 16.447223 23.578549 L 17.298256 23.298767 L 17.722750 23.131751 L 18.546958 22.775853 L 19.299136 22.409082 L 20.051111 22.041931 L 20.731369 21.664541 L 21.408622 21.254662 L 22.104835 20.782926 L 22.801280 20.311557 L 23.517074 19.778914 L 23.871345 19.497867 L 24.538501 18.908235 L 25.150844 18.282282 L 25.708829 17.620423 L 25.967585 17.276140 L 26.207558 16.922638 L 26.615338 16.186975 L 26.927424 15.413195 L 27.144456 14.601258 L 27.217529 14.180921 L 27.258076 13.751582 L 27.214924 12.867330 L 27.006667 11.947860 L 26.633944 10.991450 L 26.386100 10.498736 L 26.110720 10.020865 L 25.516615 9.183798 L 24.862969 8.504428 L 24.147993 7.982343 L 23.767040 7.780227 L 23.375731 7.610230 L 22.578153 7.345249 L 21.760204 7.180648 L 20.921500 7.116940 L 20.494284 7.123106 L 20.064447 7.150031 L 19.204835 7.252370 L 18.345341 7.419855 L 17.486062 7.653095 L 17.056550 7.794569 L 16.218143 8.099766 L 15.441560 8.422477 L 14.664798 8.744793 L 13.950131 9.085270 L 13.260955 9.446116 L 12.540911 9.872500 L 11.821075 10.299264 L 11.070728 10.792177 L 10.697878 11.054994 L 9.996374 11.612154 L 9.354146 12.211755 L 8.771633 12.854219 L 8.502913 13.191636 L 8.254025 13.541062 L 7.830236 14.279563 L 7.505661 15.071027 L 7.280999 15.915419 L 7.206362 16.357401 L 7.166385 16.812337 L 7.219044 17.760047 L 7.449200 18.757028 L 7.857645 19.801470 L 8.128964 20.340798 Z M 30.877823 39.309891 L 30.652729 38.925903 L 30.428938 38.091225 L 30.430419 37.641253 L 30.505041 37.210712 L 30.864912 36.530358 L 31.149430 36.280217 L 31.496506 36.092890 L 32.274053 35.972158 L 32.704451 36.037968 L 33.126644 36.179810 L 33.839185 36.668958 L 34.130202 37.016630 L 34.351651 37.393978 L 34.574214 38.216586 L 34.575516 38.662551 L 34.505599 39.091448 L 34.156939 39.776412 L 33.877464 40.032160 L 33.534194 40.226389 L 32.757752 40.359696 L 32.324497 40.297990 L 31.897754 40.157639 L 31.174076 39.663410 L 30.877823 39.309891 Z M 44.425035 56.692265 L 44.164251 56.331562 L 43.861665 55.522112 L 43.820108 55.074060 L 43.853214 54.638356 L 44.146373 53.926706 L 44.405666 53.650502 L 44.733237 53.430843 L 45.495675 53.236306 L 45.930394 53.260655 L 46.364216 53.361473 L 47.120269 53.780237 L 47.443200 54.098486 L 47.699720 54.452927 L 47.999930 55.250481 L 48.043874 55.694278 L 48.015294 56.127895 L 47.733736 56.843063 L 47.479999 57.124365 L 47.156877 57.350531 L 46.396742 57.557479 L 45.959571 57.537488 L 45.521362 57.438591 L 44.753737 57.015833 L 44.425035 56.692265 Z M 59.572451 72.699440 L 59.278368 72.365329 L 58.899760 71.588525 L 58.815546 71.146501 L 58.806834 70.709628 L 59.030593 69.973204 L 59.262284 69.673470 L 59.567348 69.423491 L 60.307687 69.156933 L 60.742742 69.139598 L 61.184218 69.198467 L 61.976853 69.543010 L 62.328738 69.828918 L 62.617978 70.157204 L 62.993083 70.922393 L 63.079266 71.359953 L 63.092284 71.794317 L 62.880408 72.533132 L 62.654735 72.837410 L 62.354723 73.093440 L 61.617862 73.372132 L 61.180783 73.394040 L 60.735126 73.337502 L 59.930590 72.990090 L 59.572451 72.699440 Z M 70.866921 91.143049 L 71.342026 90.551374 L 71.817130 89.959699 L 72.653127 90.627866 L 73.492157 91.292219 L 74.334203 91.952746 L 75.179247 92.609432 L 76.027273 93.262264 L 76.878261 93.911229 L 77.732195 94.556313 L 78.317691 93.777581 L 78.903186 92.998848 L 79.488681 92.220116 L 80.074176 91.441383 L 80.659671 90.662651 L 81.245167 89.883918 L 81.830662 89.105186 L 82.416157 88.326453 L 83.001652 87.547721 L 83.587147 86.768988 L 84.172643 85.990256 L 84.758138 85.211523 L 85.343633 84.432791 L 85.929128 83.654058 L 86.514623 82.875326 L 87.100119 82.096593 L 87.685614 81.317861 L 88.271109 80.539128 L 88.900953 81.010900 L 89.532500 81.480390 L 90.165740 81.947593 L 89.583183 82.740182 L 89.000625 83.532771 L 88.418067 84.325360 L 87.835509 85.117949 L 87.252951 85.910538 L 86.670393 86.703127 L 86.087835 87.495716 L 85.505277 88.288305 L 84.922719 89.080894 L 84.340162 89.873483 L 83.757604 90.666072 L 83.175046 91.458661 L 82.592488 92.251250 L 82.009930 93.043839 L 81.427372 93.836428 L 80.844814 94.629017 L 80.262256 95.421606 L 79.679699 96.214195 L 79.097141 97.006785 L 78.514583 97.799374 L 77.932025 98.591963 L 77.349467 99.384552 L 76.766909 100.177141 L 76.184351 100.969730 L 75.332213 100.340516 L 74.482848 99.707565 L 74.805096 98.994254 L 74.987825 98.346036 L 75.171718 97.698384 L 75.216445 97.115722 L 75.182148 96.565238 L 74.916441 95.526621 L 74.685087 95.037994 L 74.391166 94.561166 L 74.007413 94.089343 L 73.625115 93.616777 L 73.153063 93.148412 L 72.633808 92.672752 L 72.061336 92.172457 L 71.490568 91.670405 L 70.866921 91.143049 Z M 103.498088 105.772623 L 103.133156 105.517789 L 102.581122 104.852939 L 102.394479 104.443498 L 102.282406 104.021155 L 102.325129 103.252674 L 102.479125 102.906543 L 102.716200 102.591347 L 103.372200 102.156813 L 103.790732 102.036794 L 104.233574 101.989283 L 105.085307 102.136013 L 105.494960 102.330310 L 105.853805 102.580633 L 106.399682 103.235031 L 106.587179 103.639669 L 106.702839 104.058552 L 106.672228 104.826538 L 106.525157 105.175656 L 106.294424 105.495533 L 105.644681 105.941030 L 105.225267 106.065971 L 104.778915 106.116739 L 103.914940 105.970044 L 103.498088 105.772623 Z M 123.068366 115.905641 L 122.680737 115.686875 L 122.067652 115.077863 L 121.842710 114.688147 L 121.690761 114.278457 L 121.659798 113.509413 L 121.779987 113.150142 L 121.985833 112.813718 L 122.597272 112.318442 L 123.002408 112.158949 L 123.438677 112.069306 L 124.300538 112.133912 L 124.726894 112.288143 L 125.108033 112.503002 L 125.713989 113.102198 L 125.939323 113.487050 L 126.094511 113.892953 L 126.137483 114.660347 L 126.024473 115.021930 L 125.825387 115.362405 L 125.221226 115.867996 L 124.815683 116.032473 L 124.376232 116.125694 L 123.502187 116.062294 L 123.068366 115.905641 Z M 143.517981 124.120694 L 143.111208 123.939999 L 142.442693 123.392409 L 142.181512 123.025991 L 141.991081 122.632710 L 141.886715 121.870151 L 141.971996 121.501033 L 142.144726 121.146465 L 142.705999 120.594987 L 143.094026 120.397481 L 143.519722 120.266528 L 144.383812 120.248417 L 144.822963 120.361168 L 145.222903 120.538594 L 145.883383 121.077096 L 146.144488 121.438635 L 146.337782 121.827837 L 146.453943 122.587604 L 146.376029 122.958337 L 146.210416 123.316291 L 145.657374 123.877341 L 145.269419 124.079847 L 144.840896 124.214666 L 143.964795 124.235142 L 143.517981 124.120694 Z M 180.770713 120.816177 L 180.598837 121.778987 L 180.426961 122.741797 L 179.393173 122.554697 L 178.360291 122.362650 L 177.328341 122.165662 L 176.297346 121.963737 L 175.267329 121.756879 L 174.238314 121.545093 L 173.210324 121.328385 L 172.183383 121.106759 L 171.157515 120.880220 L 170.132743 120.648774 L 169.109090 120.412425 L 168.086581 120.171179 L 167.065237 119.925042 L 166.045084 119.674019 L 166.057264 120.273200 L 166.203138 120.869438 L 166.350464 121.465655 L 166.632696 122.058540 L 166.981200 122.644918 L 167.391042 123.215620 L 167.803316 123.785594 L 168.277213 124.339414 L 168.781422 124.879161 L 169.312176 125.394042 L 169.845436 125.907661 L 170.405088 126.396151 L 170.935582 126.851534 L 171.468204 127.305657 L 171.923408 127.711417 L 172.380255 128.116254 L 172.962859 128.624524 L 173.518495 129.147829 L 174.076752 129.669769 L 174.608046 130.207024 L 175.113385 130.754630 L 175.565116 131.319247 L 176.019314 131.882986 L 176.419661 132.464180 L 176.776852 133.058732 L 177.056047 133.676533 L 177.337199 134.294032 L 177.539807 134.935180 L 177.678458 135.594345 L 177.702024 136.283956 L 177.726435 136.973627 L 177.634596 137.693809 L 177.552619 138.092411 L 177.333383 138.841153 L 177.039827 139.525086 L 176.671329 140.143915 L 176.458817 140.428804 L 175.986027 140.949852 L 175.427346 141.373996 L 174.866816 141.796844 L 174.220306 142.121950 L 173.523380 142.383342 L 172.763135 142.553300 L 172.001480 142.720819 L 171.177188 142.796080 L 170.320358 142.809246 L 169.429525 142.731545 L 168.538606 142.650484 L 167.614915 142.478043 L 167.047510 142.343704 L 165.981730 142.026294 L 165.008623 141.644933 L 164.128824 141.200767 L 163.724078 140.955463 L 163.342350 140.696894 L 162.646580 140.146551 L 162.041121 139.552600 L 161.525962 138.915752 L 161.302215 138.581437 L 161.100739 138.237643 L 160.763692 137.524919 L 160.514222 136.779006 L 160.351905 136.000215 L 160.303274 135.598561 L 160.275712 135.190802 L 160.281897 134.363131 L 160.369252 133.519263 L 160.537041 132.659132 L 160.650856 132.222923 L 161.467192 132.432524 L 162.284280 132.639171 L 163.102111 132.842861 L 162.950014 133.474014 L 162.873788 134.097850 L 162.797960 134.721758 L 162.798737 135.338434 L 162.855658 135.942726 L 163.003500 136.516943 L 163.152624 137.091131 L 163.393214 137.634981 L 163.699476 138.152786 L 164.109587 138.622948 L 164.521451 139.092412 L 165.037282 139.513476 L 165.627852 139.891738 L 166.336677 140.191104 L 167.046863 140.488319 L 167.874521 140.705200 L 168.515170 140.823745 L 169.142109 140.876144 L 169.768978 140.926866 L 170.381494 140.911597 L 170.974982 140.851102 L 172.076816 140.592820 L 172.584792 140.395438 L 173.058523 140.153898 L 173.886795 139.542466 L 174.241399 139.173004 L 174.547486 138.760657 L 174.768116 138.283514 L 174.988220 137.806200 L 175.123537 137.264427 L 175.215493 136.585660 L 175.186653 135.957867 L 175.158581 135.330128 L 175.010710 134.753278 L 174.787788 134.189485 L 174.458248 133.613990 L 174.130709 133.038061 L 173.697560 132.449811 L 173.211482 131.860266 L 172.669263 131.280179 L 172.129952 130.698828 L 171.534825 130.126384 L 170.919922 129.559334 L 170.308124 128.990632 L 169.692829 128.427462 L 169.080620 127.862629 L 168.473875 127.296693 L 167.887289 126.720120 L 167.303793 126.142034 L 166.740466 125.553525 L 166.205104 124.953373 L 165.730305 124.330239 L 165.258497 123.706138 L 164.847057 123.059596 L 164.487284 122.395334 L 164.219174 121.701021 L 163.953549 121.006482 L 163.778982 120.282382 L 163.718021 119.911700 L 163.662025 119.147981 L 163.693404 118.354531 L 163.811450 117.531350 L 163.902730 117.108580 L 164.947899 117.379450 L 165.994398 117.645130 L 167.042204 117.905612 L 168.091289 118.160890 L 169.141629 118.410958 L 170.193197 118.655810 L 171.245967 118.895440 L 172.299913 119.129842 L 173.355010 119.359010 L 174.411231 119.582938 L 175.468551 119.801621 L 176.526943 120.015054 L 177.586381 120.223231 L 178.646840 120.426147 L 179.708292 120.623797 L 180.770713 120.816177 Z M 197.243826 135.818155 L 196.805804 135.739086 L 196.026494 135.365665 L 195.685864 135.071643 L 195.407595 134.734745 L 195.125357 134.018693 L 195.120664 133.639880 L 195.204376 133.254464 L 195.618846 132.585607 L 195.948962 132.301710 L 196.331456 132.073534 L 197.166598 131.851011 L 197.619960 131.856396 L 198.050569 131.933909 L 198.819918 132.300406 L 199.159317 132.589707 L 199.439400 132.921963 L 199.732435 133.632505 L 199.744668 134.011139 L 199.668673 134.398158 L 199.264468 135.074362 L 198.935608 135.363099 L 198.551285 135.595700 L 197.705035 135.823370 L 197.243826 135.818155 Z M 219.257737 136.848474 L 218.814162 136.811656 L 218.002712 136.514472 L 217.635526 136.254373 L 217.326314 135.945630 L 216.976893 135.259851 L 216.935995 134.883223 L 216.982466 134.491568 L 217.331073 133.786140 L 217.632527 133.471975 L 217.991447 133.208267 L 218.801482 132.906898 L 219.253281 132.868902 L 219.689328 132.904881 L 220.490200 133.196125 L 220.855709 133.451643 L 221.166283 133.755591 L 221.525925 134.434853 L 221.574311 134.810583 L 221.535675 135.203095 L 221.197989 135.914854 L 220.898248 136.233717 L 220.537931 136.502005 L 219.717331 136.809560 L 219.257737 136.848474 Z M 241.269286 135.768859 L 240.824223 135.774630 L 239.988072 135.556408 L 239.597696 135.332615 L 239.260375 135.054857 L 238.846974 134.405637 L 238.770246 134.034646 L 238.779050 133.640342 L 239.058598 132.904809 L 239.328626 132.563256 L 239.660683 132.266432 L 240.438185 131.888980 L 240.884280 131.807952 L 241.321770 131.802067 L 242.146823 132.015388 L 242.535092 132.234781 L 242.873310 132.507636 L 243.296262 133.149392 L 243.380357 133.518772 L 243.379435 133.913180 L 243.111362 134.653970 L 242.843489 135.000036 L 242.510479 135.301552 L 241.723053 135.686172 L 241.269286 135.768859 Z M 260.457736 127.870986 L 259.657254 128.019511 L 258.856240 128.165140 L 258.054704 128.307870 L 257.946600 127.845885 L 257.810766 126.949493 L 257.781137 126.090003 L 257.856659 125.267441 L 257.933557 124.869974 L 258.033859 124.482671 L 258.296743 123.741397 L 258.642297 123.044288 L 259.070168 122.390928 L 259.314890 122.080498 L 259.578369 121.781134 L 260.156373 121.216309 L 260.802496 120.696202 L 261.516879 120.220174 L 261.899735 119.998470 L 262.297376 119.789070 L 263.130142 119.411539 L 264.013391 119.088519 L 264.947779 118.819356 L 265.434372 118.704756 L 266.307683 118.540781 L 267.172010 118.462673 L 268.036460 118.381040 L 268.893258 118.385416 L 269.316046 118.409644 L 270.134804 118.506152 L 270.918219 118.667090 L 271.666717 118.892872 L 272.027981 119.030203 L 272.379079 119.183741 L 273.046179 119.539211 L 273.666537 119.959600 L 274.240127 120.445351 L 274.509349 120.712869 L 274.763363 120.997782 L 275.215161 121.622752 L 275.591470 122.321668 L 275.891540 123.094969 L 276.012707 123.509629 L 276.135677 124.066569 L 276.183507 124.606458 L 276.230910 125.146422 L 276.177474 125.663679 L 276.123240 126.180991 L 275.810603 127.169892 L 275.576869 127.646943 L 275.293161 128.104629 L 274.581215 128.938445 L 274.129608 129.300615 L 273.676632 129.661880 L 273.128907 129.967893 L 272.579951 130.272565 L 271.959890 130.534762 L 271.975418 130.600400 L 272.539874 130.602656 L 273.594834 130.712296 L 274.552215 130.963286 L 275.412865 131.356932 L 275.807063 131.607624 L 276.173088 131.888391 L 276.808011 132.522682 L 277.312654 133.254917 L 277.685815 134.086024 L 277.822628 134.538882 L 277.908529 134.918622 L 278.001145 135.654435 L 277.987511 136.358757 L 277.866916 137.031537 L 277.766316 137.356043 L 277.501139 137.980064 L 277.125636 138.552804 L 276.747975 139.124988 L 276.259723 139.645137 L 275.706252 140.129708 L 275.070123 140.560754 L 274.431921 140.990082 L 273.711408 141.364974 L 272.952322 141.699589 L 272.161763 141.970425 L 271.369977 142.238601 L 270.547559 142.442581 L 270.033987 142.544841 L 269.032893 142.683798 L 268.067365 142.735716 L 267.138310 142.701041 L 266.687716 142.651369 L 266.248587 142.582219 L 265.411134 142.391790 L 264.628395 142.132332 L 263.900652 141.804394 L 263.557465 141.614906 L 263.228550 141.409205 L 262.614923 140.951554 L 262.060167 140.432622 L 261.564120 139.852831 L 261.338036 139.540234 L 261.128420 139.214092 L 260.764027 138.525954 L 260.472250 137.790294 L 260.252421 137.007394 L 260.169255 136.598299 L 261.000767 136.447865 L 261.831730 136.294425 L 262.662132 136.137979 L 262.789928 136.769156 L 262.992041 137.344333 L 263.194605 137.919387 L 263.472241 138.438164 L 263.798252 138.914211 L 264.193305 139.318657 L 264.589498 139.722466 L 265.054985 140.054191 L 265.563985 140.334680 L 266.132859 140.534537 L 266.702822 140.733024 L 267.332331 140.850286 L 267.999240 140.907623 L 268.717839 140.868205 L 269.436636 140.826584 L 270.206108 140.687572 L 270.836171 140.532628 L 271.421420 140.337335 L 272.006008 140.140578 L 272.545414 139.903923 L 273.048531 139.638550 L 273.928164 139.016892 L 274.304473 138.661091 L 274.632615 138.279144 L 275.127331 137.448298 L 275.294109 136.999759 L 275.398674 136.526027 L 275.397662 136.009700 L 275.396131 135.493437 L 275.289690 134.934611 L 275.129126 134.420606 L 274.645124 133.549808 L 274.322295 133.192640 L 273.959008 132.883035 L 273.150676 132.392974 L 272.705569 132.212203 L 272.238890 132.071587 L 271.257754 131.902946 L 270.742965 131.874699 L 270.227299 131.879068 L 269.239116 131.971988 L 268.766218 132.060725 L 267.736786 132.285555 L 266.706337 132.505683 L 266.521626 131.631261 L 266.336914 130.756839 L 267.359383 130.538416 L 268.380845 130.315327 L 269.039858 130.149361 L 269.653272 129.933320 L 270.265865 129.715596 L 270.832348 129.448301 L 271.360086 129.148382 L 271.818914 128.801582 L 272.276421 128.453851 L 272.664812 128.059819 L 273.000907 127.637429 L 273.499343 126.715994 L 273.661936 126.217362 L 273.759172 125.692356 L 273.747541 125.125979 L 273.735293 124.559685 L 273.614984 123.952037 L 273.432008 123.372089 L 273.156796 122.867417 L 272.882259 122.362480 L 272.516337 121.932319 L 272.102226 121.550693 L 271.633561 121.240609 L 271.166122 120.929550 L 270.644153 120.689529 L 270.093563 120.496576 L 269.510332 120.375195 L 268.928004 120.252241 L 268.312550 120.200481 L 267.684118 120.193302 L 267.049300 120.250628 L 266.414556 120.306069 L 265.772702 120.425931 L 265.024679 120.617340 L 264.352359 120.877209 L 263.678835 121.134967 L 263.080224 121.462144 L 262.535257 121.828106 L 262.078184 122.242516 L 261.619365 122.655972 L 261.248406 123.118641 L 260.935301 123.613197 L 260.709698 124.154631 L 260.482600 124.695868 L 260.343410 125.284368 L 260.267805 125.899236 L 260.296386 126.545870 L 260.324444 127.192563 L 260.457736 127.870986 Z M 294.968801 123.951115 L 294.537804 124.062273 L 293.673755 124.048579 L 293.241440 123.923753 L 292.847870 123.733920 L 292.292293 123.201264 L 292.129769 122.859055 L 292.044807 122.473912 L 292.141940 121.693066 L 292.323261 121.297217 L 292.575449 120.930110 L 293.241252 120.379033 L 293.655403 120.194521 L 294.079015 120.085047 L 294.931121 120.096611 L 295.360345 120.217662 L 295.753624 120.402520 L 296.316709 120.925659 L 296.486008 121.264556 L 296.578651 121.647931 L 296.493914 122.431163 L 296.315756 122.830885 L 296.063756 123.202776 L 295.390011 123.763170 L 294.968801 123.951115 Z M 315.399968 115.690288 L 314.981576 115.842153 L 314.120178 115.911152 L 313.677907 115.828241 L 313.267987 115.676915 L 312.664018 115.199831 L 312.469513 114.874732 L 312.348109 114.499480 L 312.370124 113.712923 L 312.512758 113.301549 L 312.728683 112.912008 L 313.338735 112.299785 L 313.733343 112.076512 L 314.144544 111.927030 L 314.993851 111.857053 L 315.432684 111.936502 L 315.841839 112.082903 L 316.452371 112.549796 L 316.653304 112.870950 L 316.782184 113.243708 L 316.772737 114.031454 L 316.633621 114.446381 L 316.418340 114.840667 L 315.801275 115.462924 L 315.399968 115.690288 Z M 334.947505 105.513469 L 334.545554 105.704649 L 333.694702 105.855709 L 333.246530 105.815472 L 332.824016 105.704041 L 332.177191 105.286902 L 331.952489 104.981894 L 331.795755 104.619971 L 331.742450 103.834914 L 331.845090 103.411785 L 332.022774 103.003380 L 332.571482 102.335623 L 332.942929 102.075637 L 333.337951 101.887516 L 334.176673 101.736640 L 334.621093 101.773758 L 335.042373 101.880361 L 335.694757 102.286728 L 335.925480 102.587195 L 336.089418 102.945919 L 336.155346 103.730959 L 336.056548 104.157288 L 335.879960 104.570354 L 335.325229 105.248769 L 334.947505 105.513469 Z M 357.164969 84.490946 L 356.257817 85.192075 L 355.347107 85.888577 L 354.432863 86.580432 L 353.515109 87.267624 L 352.593867 87.950135 L 351.669163 88.627946 L 350.741020 89.301041 L 349.809461 89.969402 L 348.874513 90.633011 L 349.861904 90.917873 L 350.851961 91.198603 L 351.844667 91.475188 L 352.840006 91.747616 L 353.837964 92.015873 L 354.838523 92.279947 L 355.841670 92.539826 L 356.847387 92.795496 L 357.855660 93.046946 L 358.866471 93.294162 L 359.879806 93.537134 L 360.895648 93.775847 L 361.913982 94.010290 L 362.934790 94.240450 L 363.958057 94.466316 L 364.983768 94.687876 L 365.048537 94.637570 L 364.442109 93.857060 L 363.835681 93.076551 L 363.229252 92.296041 L 362.622824 91.515532 L 362.016396 90.735022 L 361.409967 89.954513 L 360.803539 89.174003 L 360.197111 88.393494 L 359.590682 87.612984 L 358.984254 86.832475 L 358.377826 86.051965 L 357.771397 85.271456 L 357.164969 84.490946 Z M 347.215341 92.121276 L 346.825374 91.557208 L 346.435406 90.993139 L 346.045439 90.429071 L 346.973332 89.784099 L 347.897951 89.134442 L 348.819272 88.480116 L 349.737272 87.821139 L 350.651926 87.157526 L 351.563212 86.489295 L 352.471107 85.816463 L 353.375586 85.139048 L 354.276628 84.457066 L 355.174208 83.770536 L 356.068305 83.079474 L 355.468243 82.307158 L 354.868181 81.534843 L 354.268120 80.762528 L 353.668058 79.990213 L 353.067996 79.217898 L 352.467935 78.445583 L 353.324413 77.776692 L 354.177538 77.103531 L 354.785286 77.869813 L 355.393034 78.636094 L 356.000782 79.402376 L 356.608530 80.168657 L 357.216278 80.934938 L 357.824026 81.701220 L 358.614096 81.071689 L 359.401312 80.438593 L 360.185657 79.801943 L 360.967115 79.161753 L 361.535045 79.851817 L 362.102974 80.541881 L 361.315264 81.187193 L 360.524643 81.828936 L 359.731129 82.467098 L 358.934737 83.101665 L 359.554274 83.882810 L 360.173810 84.663954 L 360.793346 85.445099 L 361.412882 86.226244 L 362.032418 87.007388 L 362.651954 87.788533 L 363.271490 88.569678 L 363.891026 89.350822 L 364.510562 90.131967 L 365.130098 90.913112 L 365.749634 91.694256 L 366.369171 92.475401 L 366.988707 93.256546 L 367.608243 94.037690 L 368.227779 94.818835 L 368.847315 95.599980 L 367.917943 96.333368 L 366.984982 97.062184 L 365.973614 96.853973 L 364.964565 96.641605 L 363.957850 96.425091 L 362.953483 96.204442 L 361.951481 95.979671 L 360.951857 95.750788 L 359.954629 95.517805 L 358.959809 95.280733 L 357.967414 95.039585 L 356.977459 94.794372 L 355.989958 94.545106 L 355.004926 94.291798 L 354.022379 94.034461 L 353.042330 93.773106 L 352.064795 93.507745 L 351.089789 93.238390 L 350.117326 92.965054 L 349.147421 92.687748 L 348.180087 92.406484 L 347.215341 92.121276 Z M 378.798968 72.342002 L 378.453825 72.623056 L 377.663073 72.971595 L 377.218145 73.038796 L 376.781258 73.030748 L 376.053958 72.778912 L 375.763330 72.535896 L 375.525233 72.221470 L 375.287263 71.471453 L 375.286625 71.036053 L 375.362381 70.597160 L 375.737068 69.818321 L 376.036260 69.477660 L 376.375396 69.201222 L 377.154408 68.855737 L 377.594951 68.786398 L 378.029494 68.790047 L 378.759641 69.030100 L 379.055041 69.267276 L 379.299377 69.576886 L 379.549606 70.323893 L 379.554736 70.761490 L 379.481149 71.204652 L 379.103139 71.995273 L 378.798968 72.342002 Z M 393.910499 56.300946 L 393.593816 56.613718 L 392.840019 57.036280 L 392.403556 57.145722 L 391.967903 57.179491 L 391.219852 56.998362 L 390.907316 56.784253 L 390.640242 56.494037 L 390.331638 55.770215 L 390.289365 55.336872 L 390.322802 54.892746 L 390.621291 54.081645 L 390.886533 53.713932 L 391.197680 53.406329 L 391.940082 52.987930 L 392.371975 52.876779 L 392.804876 52.838856 L 393.554632 53.007984 L 393.871360 53.215823 L 394.144184 53.500649 L 394.464704 54.220302 L 394.511658 54.655403 L 394.480788 55.103571 L 394.180119 55.926718 L 393.910499 56.300946 Z M 407.418751 38.888279 L 407.133429 39.229902 L 406.423497 39.722614 L 405.999501 39.873293 L 405.569074 39.948569 L 404.807130 39.839807 L 404.475551 39.656568 L 404.181947 39.393223 L 403.805538 38.702230 L 403.722017 38.274915 L 403.712829 37.829627 L 403.932383 36.993699 L 404.161245 36.602306 L 404.441549 36.266357 L 405.140537 35.778880 L 405.559821 35.626935 L 405.987111 35.547788 L 406.749605 35.644440 L 407.084757 35.821038 L 407.383569 36.078468 L 407.771441 36.764171 L 407.859789 37.192788 L 407.871920 37.641854 L 407.651346 38.489981 L 407.418751 38.888279 Z M 413.299482 18.692391 L 412.892951 19.394533 L 412.483883 20.095200 L 412.072283 20.794382 L 411.724035 20.565425 L 411.085785 20.071049 L 410.524767 19.528590 L 410.040438 18.938573 L 409.826855 18.625863 L 409.632014 18.304380 L 409.297690 17.644084 L 409.036859 16.960694 L 408.849139 16.254140 L 408.782579 15.892129 L 408.702983 15.154078 L 408.730525 14.390501 L 408.755159 13.627797 L 408.886361 12.838665 L 408.977812 12.439537 L 409.211100 11.640451 L 409.511525 10.839670 L 409.879042 10.036436 L 410.087948 9.633646 L 410.315834 9.229133 L 410.808872 8.461570 L 411.352175 7.748767 L 411.946403 7.090131 L 412.262810 6.780951 L 412.588929 6.487387 L 413.260884 5.953857 L 413.959680 5.491740 L 414.685913 5.101032 L 415.059484 4.932470 L 415.438501 4.782634 L 416.208278 4.541830 L 416.994020 4.379811 L 417.796013 4.296983 L 418.203168 4.285406 L 418.611010 4.295448 L 419.418432 4.385714 L 420.214772 4.570296 L 420.999838 4.850100 L 421.388045 5.026000 L 421.781547 5.228377 L 422.517952 5.675721 L 423.186503 6.180463 L 423.786696 6.743249 L 424.060988 7.046580 L 424.316764 7.362303 L 424.768873 8.024136 L 425.141319 8.726605 L 425.433604 9.469755 L 425.549524 9.856567 L 425.644782 10.252603 L 425.771786 11.069476 L 425.813722 11.919103 L 425.770123 12.801003 L 425.716101 13.253873 L 425.639369 13.712218 L 425.414177 14.637819 L 425.093172 15.574479 L 424.676165 16.521115 L 424.431609 16.997806 L 424.224419 17.363841 L 423.764469 18.062443 L 423.244144 18.715903 L 422.663900 19.323615 L 422.351451 19.610131 L 422.029228 19.879205 L 421.370919 20.347617 L 420.694703 20.723145 L 420.001177 21.005964 L 419.648080 21.112679 L 419.667216 21.215239 L 420.627968 21.504790 L 421.589468 21.792587 L 422.551715 22.078627 L 423.514706 22.362910 L 424.478438 22.645435 L 425.442909 22.926201 L 426.408116 23.205206 L 427.374056 23.482449 L 427.931454 22.482583 L 428.484053 21.480058 L 429.031843 20.474896 L 429.574809 19.467121 L 430.112940 18.456755 L 430.646223 17.443822 L 431.174646 16.428346 L 431.698197 15.410349 L 432.216863 14.389855 L 432.730634 13.366887 L 433.239496 12.341468 L 434.116623 12.774126 L 434.993751 13.206783 L 434.455727 14.290649 L 433.912264 15.371798 L 433.363376 16.450203 L 432.809077 17.525837 L 432.249380 18.598672 L 431.684300 19.668682 L 431.113852 20.735839 L 430.538049 21.800116 L 429.956906 22.861487 L 429.370437 23.919925 L 428.778659 24.975403 L 428.181584 26.027894 L 427.256448 25.748872 L 426.331985 25.468280 L 425.408197 25.186119 L 424.485087 24.902390 L 423.562656 24.617094 L 422.640907 24.330232 L 421.719841 24.041805 L 420.799462 23.751814 L 419.879770 23.460260 L 418.960768 23.167144 L 418.042458 22.872468 L 417.124843 22.576231 L 416.207923 22.278435 L 416.743516 21.359963 L 417.274831 20.439009 L 417.690932 20.371589 L 418.500129 20.157053 L 419.278204 19.836042 L 420.024500 19.408389 L 420.385487 19.154546 L 420.734421 18.877601 L 421.384339 18.265338 L 421.969670 17.575742 L 422.489587 16.809470 L 422.724745 16.397805 L 423.059129 15.712132 L 423.291995 15.023571 L 423.522554 14.334615 L 423.651613 13.643938 L 423.714815 12.963793 L 423.684410 12.316481 L 423.652068 11.669947 L 423.526624 11.056793 L 423.342001 10.469419 L 423.074570 9.924804 L 422.805923 9.381306 L 422.455023 8.880531 L 422.050114 8.418505 L 421.566360 8.028782 L 421.082221 7.639655 L 420.519877 7.322066 L 419.940261 7.064992 L 419.341679 6.895322 L 418.743325 6.725060 L 418.126249 6.641316 L 417.506397 6.616593 L 416.896501 6.683694 L 416.286854 6.749184 L 415.686938 6.905906 L 415.101146 7.121221 L 414.547870 7.423225 L 413.994265 7.723174 L 413.472539 8.109754 L 412.979849 8.557835 L 412.543058 9.106023 L 412.104739 9.652472 L 411.721117 10.299601 L 411.425773 10.897861 L 411.209342 11.499075 L 410.991042 12.099907 L 410.851641 12.704558 L 410.764901 13.304423 L 410.759236 13.885877 L 410.751903 14.467880 L 410.825955 15.031983 L 410.952929 15.579939 L 411.158806 16.096409 L 411.363532 16.613795 L 411.647624 17.099734 L 411.983561 17.556093 L 412.396588 17.954125 L 412.809193 18.352715 L 413.299482 18.692391 Z",transform:"scale(1.000000,1.000000) translate(31.000000,334.000000)",fill:"#feffff",opacity:"1.000000"})})});try{ZoomMeter.displayName="ZoomMeter",ZoomMeter.__docgenInfo={description:"",displayName:"ZoomMeter",props:{zoom:{defaultValue:{value:"0"},description:"",name:"zoom",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/image/ZoomMeter.tsx#ZoomMeter"]={docgenInfo:ZoomMeter.__docgenInfo,name:"ZoomMeter",path:"packages/media/src/image/ZoomMeter.tsx#ZoomMeter"})}catch(__react_docgen_typescript_loader_error){}const Tools_Tools=()=>{const{state,reset,rotate,zoomScale,fitToSize,fitToView,toggleFit,changeZoom,toggleSplitter,toggleCropping,cancelCropping,startCropping}=useImageContext(),handlers=(0,react.useMemo)((()=>({rotateDown:()=>rotate(-90),rotateUp:()=>rotate(90),zoomDown:()=>changeZoom(-.5,!0),zoomUp:()=>changeZoom(.5,!0),toggleFit:()=>toggleFit(),startCropping:()=>startCropping(),cancelCropping:()=>cancelCropping(),reset:()=>reset()})),[]);return(0,jsx_runtime.jsxs)(esm.wi,{flex:!0,justify:"center",className:"select-none",children:[state.isLoaded&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[!state.splitter&&(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:",",handler:handlers.zoomDown}),!state.splitter&&(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:".",handler:handlers.zoomUp}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"[",handler:handlers.rotateDown}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"]",handler:handlers.rotateUp}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"f",handler:handlers.toggleFit}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"r",handler:handlers.reset}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"c",handler:handlers.startCropping}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"esc",handler:handlers.cancelCropping})]}),(0,jsx_runtime.jsxs)("label",{className:"text-xs basis-16 whitespace-nowrap",children:["Zoom: ",0===state.zoom?"FIT":state.zoom.toFixed(2)]}),(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"fit-to-view",onClick:fitToView,disabled:!state.isLoaded,icon:esm.OO.mediaFitToView}),!state.splitter&&(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"fit-to-size",onClick:fitToSize,disabled:!state.isLoaded,icon:esm.OO.mediaAspect}),!state.splitter&&(0,jsx_runtime.jsxs)(esm.ms,{placement:"top",dropdownEvent:"hover",dropdownClassName:"overflow-hidden bg-black/80 backdrop-blur-md w-[12rem] h-[6rem] rounded-t-full",children:[(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"zoom",icon:esm.OO.mediaZoomer,disabled:!state.isLoaded,onWheel:e=>{changeZoom(.05*e.deltaY),e.stopPropagation()},onClick:handlers.zoomUp}),(0,jsx_runtime.jsxs)("div",{role:"none",className:"select-none",onMouseDown:e=>{const target=e.currentTarget;let startX=e.clientX,zoomStart=state.zoom||1;const doDrag=ev=>{null!=target.parentElement&&(zoomStart+=.05*(startX-ev.clientX),zoomScale(Math.max(.1,Math.min(5,zoomStart))),startX=ev.clientX,ev.preventDefault(),ev.stopPropagation())};document.addEventListener("mousemove",doDrag),document.addEventListener("mouseup",(()=>{document.removeEventListener("mousemove",doDrag)}),{capture:!0,once:!0})},onWheel:e=>{changeZoom(.05*e.deltaY),e.stopPropagation()},children:[(0,jsx_runtime.jsx)(ZoomMeter,{zoom:state.zoom}),(0,jsx_runtime.jsx)("span",{className:"absolute top-0.5 left-1/2 -translate-x-1/2 bg-accent-300 outline -outline-offset-1 outline-accent-700 rounded-full text-white text-xs py-px px-1",children:state.zoom>0?state.zoom.toFixed(1):"FIT"})]})]}),(0,jsx_runtime.jsx)(esm.cG,{vertical:!0}),state.overlay&&(0,jsx_runtime.jsx)(esm.$n,{"aria-label":"splitter",disabled:!state.isLoaded,variant:state.splitter?"solid":"link",icon:esm.OO.mediaSplitter,onClick:toggleSplitter}),!state.splitter&&(0,jsx_runtime.jsx)(esm.$n,{"aria-label":"crop",disabled:!state.isLoaded,variant:state.cropping?"solid":"link",icon:esm.OO.mediaCrop,onClick:toggleCropping}),(0,jsx_runtime.jsx)(esm.cG,{vertical:!0}),(0,jsx_runtime.jsx)(esm.$n,{variant:"link",disabled:!state.isLoaded,"aria-label":"rotate-ccw",icon:esm.OO.mediaRotateCCW,onClick:handlers.rotateDown}),(0,jsx_runtime.jsx)(esm.$n,{variant:"link",disabled:!state.isLoaded,"aria-label":"rotate-cw",icon:esm.OO.mediaRotateCW,onClick:handlers.rotateUp}),(0,jsx_runtime.jsxs)("label",{className:"text-xs basis-16 whitespace-nowrap",children:["Rotate: ",state.rotate,""]})]})},ImageViewer=({nsfw,onCrop,...props})=>(0,jsx_runtime.jsx)(esm.NP,{colorScheme:"dark",children:(0,jsx_runtime.jsx)(ImageProvider,{...props,children:(0,jsx_runtime.jsxs)(esm.wn,{dir:"ltr",children:[(0,jsx_runtime.jsx)(Image,{onCrop}),(0,jsx_runtime.jsx)(Tools_Tools,{}),nsfw&&(0,jsx_runtime.jsx)(NsfwOverlay,{})]})})});try{ImageViewer.displayName="ImageViewer",ImageViewer.__docgenInfo={description:"",displayName:"ImageViewer",props:{src:{defaultValue:null,description:"image source",name:"src",required:!0,type:{name:"string"}},fallback:{defaultValue:null,description:"fallback alternate source",name:"fallback",required:!1,type:{name:"string"}},nsfw:{defaultValue:null,description:"NSFW overlay",name:"nsfw",required:!1,type:{name:"boolean"}},overlay:{defaultValue:null,description:"image overlay",name:"overlay",required:!1,type:{name:"string"}},onCrop:{defaultValue:null,description:"crop selection handler",name:"onCrop",required:!1,type:{name:"((box: number[]) => void)"}},onLoad:{defaultValue:null,description:"error handler",name:"onLoad",required:!1,type:{name:"(() => void)"}},onError:{defaultValue:null,description:"error handler",name:"onError",required:!1,type:{name:"(() => void)"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<CanvasRef>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/image/ImageViewer.tsx#ImageViewer"]={docgenInfo:ImageViewer.__docgenInfo,name:"ImageViewer",path:"packages/media/src/image/ImageViewer.tsx#ImageViewer"})}catch(__react_docgen_typescript_loader_error){}const video_Context_Context=(0,react.createContext)({}),VideoProvider=({children,src,ref,fallback,onLoad,onError,onChange,onPause,onPlay})=>{const canvasRef=(0,react.useRef)(),videoRef=(0,react.useRef)(null),scrollerRef=(0,react.useRef)(null),[state,dispatch]=(0,react.useReducer)(((state,action)=>{if("loaded"===action.type&&(state.isLoading=!1,state.isLoaded=!0,onLoad?.()),"errored"===action.type&&(state.errorLevel++,1===state.errorLevel&&(fallback?state.src=fallback:state.errorLevel++),2===state.errorLevel&&(state.isLoading=!1,state.isLoaded=!0,onError?.())),"metadata"===action.type&&(state.duration=action.duration,state.volume=action.volume,state.speed=action.speed),"play"===action.type)return onPlay?.(),{...state,isPlaying:!0};if("pause"===action.type)return onPause?.(),{...state,isPlaying:!1};if("playing"===action.type)return onChange?.(action.time),{...state,time:action.time};if("volume"===action.type)return{...state,volume:action.volume};if("speed"===action.type)return{...state,speed:action.speed};if("toggleVtt"===action.type)return{...state,showVtt:!state.showVtt};if("srcChange"===action.type&&(state.isLoaded=!1,state.isLoading=!0,state.src=action.src),"resize"===action.type&&(state.ratio=action.ratio,state.containerWidth=action.containerWidth,state.containerHeight=action.containerHeight),"toggleFit"===action.type&&(state.zoom=0===state.zoom?1:0),"fitToView"===action.type&&(state.zoom=0),"fitToSize"===action.type&&(state.zoom=1),"rotate"===action.type&&(state.rotate+=action.rotate,state.rotate=state.rotate>270?0:state.rotate<0?270:state.rotate),0===state.zoom){const{containerWidth:cw,containerHeight:ch,ratio}=state;let[fitWidth,fitHeight]=cw>ch?[ch*ratio,ch]:[cw,cw*ratio];state.rotate%180!=0&&(cw>ch?(fitWidth=ch,fitHeight=ch/ratio):(fitWidth=cw/ratio,fitHeight=cw)),state.videoWidth=fitWidth-8,state.videoHeight=fitHeight-8}if(state.zoom>0&&videoRef.current){const{videoWidth:w,videoHeight:h}=videoRef.current;state.videoWidth=Math.min(state.containerWidth,w),state.videoHeight=Math.min(state.containerHeight,h)}return state.width=state.rotate%180==0?state.videoWidth:state.videoHeight,state.height=state.rotate%180==0?state.videoHeight:state.videoWidth,{...state}}),{videoWidth:0,videoHeight:0,containerWidth:0,containerHeight:0,ratio:0,width:0,height:0,rotate:0,zoom:0,errorLevel:0,src:"",isLoading:!0,isLoaded:!1,isErrored:!1,isPlaying:!1,time:0,duration:0,volume:.5,speed:1,showVtt:!1});(0,react.useImperativeHandle)(ref,(()=>videoRef.current&&canvasRef.current?{seek:ts=>videoRef.current&&(videoRef.current.currentTime=ts),play:async()=>await(videoRef.current?.play()),playAt:async time=>await(videoRef.current&&(videoRef.current.currentTime=time,videoRef.current?.play())),pause:()=>videoRef.current?.pause(),currentTime:()=>videoRef.current?.currentTime??0,on:videoRef.current?.addEventListener.bind(videoRef.current),off:videoRef.current?.removeEventListener.bind(videoRef.current),...canvasRef.current}:null),[]),(0,react.useEffect)((()=>{dispatch({type:"srcChange",src})}),[src]);const calculateSize=(0,react.useCallback)((()=>{if(videoRef.current&&scrollerRef.current){const{videoWidth:w,videoHeight:h}=videoRef.current,{offsetWidth:cw,offsetHeight:ch}=scrollerRef.current;if(w>0&&h>0){dispatch({type:"resize",ratio:w/h,containerWidth:cw,containerHeight:ch})}}}),[]);(0,react.useEffect)((()=>{if(null!=scrollerRef.current){const ob=new ResizeObserver(calculateSize);return ob.observe(scrollerRef.current),()=>{ob.disconnect()}}}),[calculateSize]);const handleLoad=(0,react.useCallback)((()=>{dispatch({type:"loaded"}),calculateSize()}),[]),handleError=(0,react.useCallback)((()=>{dispatch({type:"errored"})}),[]),handleMetadata=(0,react.useCallback)((()=>{dispatch({type:"metadata",speed:videoRef.current?.playbackRate??0,volume:videoRef.current?.volume??0,duration:videoRef.current?.duration??0})}),[]),rotate=(0,react.useCallback)((rotation=>{dispatch({type:"rotate",rotate:rotation})}),[]),fitToSize=(0,react.useCallback)((()=>{dispatch({type:"fitToSize"})}),[]),fitToView=(0,react.useCallback)((()=>{dispatch({type:"fitToView"})}),[]),toggleFit=(0,react.useCallback)((()=>{dispatch({type:"toggleFit"})}),[]),reset=(0,react.useCallback)((()=>{dispatch({type:"rotate",rotate:0})}),[]),toggleVtt=(0,react.useCallback)((()=>{dispatch({type:"toggleVtt"})}),[]),handlePlay=(0,react.useCallback)((()=>dispatch({type:"play"})),[]),handlePause=(0,react.useCallback)((()=>dispatch({type:"pause"})),[]),handleRateChange=(0,react.useCallback)((()=>dispatch({type:"speed",speed:videoRef.current?.playbackRate??0})),[]),handleVolumeChange=(0,react.useCallback)((()=>dispatch({type:"volume",volume:videoRef.current?.volume??0})),[]),handleSeeking=(0,react.useCallback)((()=>dispatch({type:"playing",time:videoRef.current?.currentTime??0})),[]),handleTimeUpdate=(0,react.useCallback)((()=>dispatch({type:"playing",time:videoRef.current?.currentTime??0})),[]);return(0,jsx_runtime.jsx)(video_Context_Context.Provider,{value:{videoRef,scrollerRef,state,reset,rotate,handleLoad,handleError,fitToSize,fitToView,toggleFit,toggleVtt,handleMetadata,handlePlay,handlePause,handleRateChange,handleVolumeChange,handleSeeking,handleTimeUpdate},children:(0,jsx_runtime.jsx)(CanvasProvider,{ref,mediaEl:videoRef,width:state.width,children})})},useVideoContext=()=>(0,react.useContext)(video_Context_Context);try{VideoProvider.displayName="VideoProvider",VideoProvider.__docgenInfo={description:"",displayName:"VideoProvider",props:{src:{defaultValue:null,description:"video source",name:"src",required:!0,type:{name:"string"}},poster:{defaultValue:null,description:"video poster",name:"poster",required:!1,type:{name:"string"}},fallback:{defaultValue:null,description:"fallback alternate source",name:"fallback",required:!1,type:{name:"string"}},nsfw:{defaultValue:null,description:"NSFW overlay",name:"nsfw",required:!1,type:{name:"boolean"}},vttText:{defaultValue:null,description:"",name:"vttText",required:!1,type:{name:"string"}},markers:{defaultValue:null,description:"timeline markers",name:"markers",required:!1,type:{name:"[time: number, score: number][]"}},annotations:{defaultValue:null,description:"annotation list",name:"annotations",required:!1,type:{name:"[time: number, text: string][]"}},onAnnotationChange:{defaultValue:null,description:"",name:"onAnnotationChange",required:!1,type:{name:"((annotations: [time: number, text: string][]) => void)"}},onCut:{defaultValue:null,description:"",name:"onCut",required:!1,type:{name:"((start: number, end: number) => void)"}},onLoad:{defaultValue:null,description:"error handler",name:"onLoad",required:!1,type:{name:"(() => void)"}},onError:{defaultValue:null,description:"error handler",name:"onError",required:!1,type:{name:"(() => void)"}},onChange:{defaultValue:null,description:"onChange playback time",name:"onChange",required:!1,type:{name:"((currentTime: number) => void)"}},onPlay:{defaultValue:null,description:"play handler",name:"onPlay",required:!1,type:{name:"(() => void)"}},onPause:{defaultValue:null,description:"pause handler",name:"onPause",required:!1,type:{name:"(() => void)"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<VideoPlayerRef>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/video/Context.tsx#VideoProvider"]={docgenInfo:VideoProvider.__docgenInfo,name:"VideoProvider",path:"packages/media/src/video/Context.tsx#VideoProvider"})}catch(__react_docgen_typescript_loader_error){}const AnnotationTool=({onChange,onOpen})=>{const[value,setValue]=(0,react.useState)();return(0,jsx_runtime.jsxs)(esm.ms,{showArrow:!0,children:[(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"annotate",icon:esm.OO.mediaCommentAdd,onClick:onOpen}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"p-2 w-96 max-w-screen",children:(0,jsx_runtime.jsx)(form_dist_esm.TM,{rows:5,autoFocus:!0,value,onChange:setValue})}),(0,jsx_runtime.jsx)(esm.wi,{flex:!0,justify:"end",className:"p-1",children:(0,jsx_runtime.jsx)(esm.W2,{children:(0,jsx_runtime.jsx)(esm.$n,{size:"sm",variant:"solid",onClick:()=>[onChange?.(value),setValue("")],children:"Update"})})})]})]})},AnnotationTag=({time,duration,text,onChange,onDelete,onPlay})=>{const[value,setValue]=(0,react.useState)(text),resetValue=(0,react.useCallback)((id=>{"edit"===id&&setValue(text)}),[]);return(0,jsx_runtime.jsx)("div",{className:"absolute hover:text-primary -top-5",style:{insetInlineStart:time/duration*100+"%"},children:(0,jsx_runtime.jsxs)(esm.ms,{showArrow:!0,children:[(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.mediaComment,className:"hover:text-primary"}),(0,jsx_runtime.jsxs)(esm.n4,{onPanelChange:resetValue,children:[(0,jsx_runtime.jsxs)(esm.Zk,{width:360,height:192,className:"max-w-screen",children:[(0,jsx_runtime.jsx)(esm.UC,{children:text}),(0,jsx_runtime.jsxs)(esm.wi,{flex:!0,justify:"between",className:"p-1",children:[(0,jsx_runtime.jsx)(esm.$n,{size:"sm",variant:"outline",icon:esm.OO.edit,"data-panel":"edit",children:"Edit"}),(0,jsx_runtime.jsx)(esm.W2,{children:(0,jsx_runtime.jsx)(esm.$n,{size:"sm",variant:"solid",onClick:onPlay,children:"Play"})})]})]}),(0,jsx_runtime.jsxs)(esm.Zk,{panelId:"edit",width:360,className:"max-w-screen",children:[(0,jsx_runtime.jsx)(esm.UC,{className:"p-1",children:(0,jsx_runtime.jsx)(form_dist_esm.TM,{autoFocus:!0,rows:5,value,onChange:setValue})}),(0,jsx_runtime.jsxs)(esm.wi,{flex:!0,justify:"between",className:"p-1",children:[(0,jsx_runtime.jsx)(esm.W2,{children:(0,jsx_runtime.jsx)(esm.$n,{size:"sm",variant:"link",icon:esm.OO.trash,color:"danger",onClick:onDelete,children:"Delete"})}),(0,jsx_runtime.jsx)(esm.W2,{children:(0,jsx_runtime.jsx)(esm.$n,{size:"sm",variant:"solid",onClick:()=>onChange?.(value),children:"Update"})})]})]})]})]})},time)};try{AnnotationTool.displayName="AnnotationTool",AnnotationTool.__docgenInfo={description:"",displayName:"AnnotationTool",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/video/Annotations.tsx#AnnotationTool"]={docgenInfo:AnnotationTool.__docgenInfo,name:"AnnotationTool",path:"packages/media/src/video/Annotations.tsx#AnnotationTool"})}catch(__react_docgen_typescript_loader_error){}try{AnnotationTag.displayName="AnnotationTag",AnnotationTag.__docgenInfo={description:"",displayName:"AnnotationTag",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/video/Annotations.tsx#AnnotationTag"]={docgenInfo:AnnotationTag.__docgenInfo,name:"AnnotationTag",path:"packages/media/src/video/Annotations.tsx#AnnotationTag"})}catch(__react_docgen_typescript_loader_error){}const CutStrip=({onCut})=>{const{videoRef,state}=useVideoContext(),[start,setStart]=(0,react.useState)(state.time),[end,setEnd]=(0,react.useState)(state.duration),style=(0,react.useMemo)((()=>({insetInlineStart:start/Math.max(state.duration,1)*100+"%",insetInlineEnd:Math.max(0,state.duration-end)/Math.max(state.duration,1)*100+"%"})),[start,end,state.duration]),changePeriod=(0,react.useCallback)((evt=>{const x=evt.clientX,{left=0,width=0}=evt.currentTarget.closest(".slider-parent")?.getBoundingClientRect()??{};if(x-left>0){let newTime=(x-left)/width*state.duration;const midPoint=start+(end-start)/2;newTime=Math.trunc(1e3*newTime)/1e3,"dataTransfer"in evt&&"start"===evt.currentTarget.dataset?.pos?newTime<end&&setStart(Math.min(newTime,end-1)):"dataTransfer"in evt&&"end"===evt.currentTarget.dataset?.pos?newTime>start&&setEnd(Math.max(newTime,start+1)):newTime<midPoint||newTime<start?setStart(newTime):(newTime>midPoint||newTime>end)&&setEnd(newTime)}return evt.preventDefault(),!1}),[state.duration,start,end]);(0,react.useEffect)((()=>{const el=videoRef.current;if(el){const handler=()=>{Math.trunc(100*el.currentTime)<Math.trunc(100*start)&&(el.currentTime=start),Math.trunc(100*el.currentTime)>Math.trunc(100*end)&&(el.currentTime=start)};return el.addEventListener("timeupdate",handler),()=>{el.removeEventListener("timeupdate",handler)}}}),[start,end]),(0,react.useEffect)((()=>{videoRef.current&&(videoRef.current.currentTime=start)}),[start]),(0,react.useEffect)((()=>{videoRef.current&&(videoRef.current.currentTime=end)}),[end]);const dragRef=(0,react.useRef)(null);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:"text-dimmed text-xs px-1",children:`${dist_esm.yL.duration(start,!0)}`}),(0,jsx_runtime.jsx)("span",{ref:dragRef,className:"select-none absolute -left-[100vw]",children:"|"}),(0,jsx_runtime.jsxs)("div",{role:"none",className:"flex-1 relative h-6 ms-1 bg-tint-50 slider-parent",onClick:changePeriod,children:[(0,jsx_runtime.jsxs)("div",{className:"bg-primary-200 absolute h-6 flex justify-between",style:{insetInlineStart:style.insetInlineStart,insetInlineEnd:style.insetInlineEnd},children:[(0,jsx_runtime.jsx)("div",{className:"w-1 cursor-ew-resize bg-primary-500 h-6",draggable:!0,"data-pos":"start",onDrag:changePeriod,onDragStart:e=>dragRef.current&&(e.dataTransfer.setData("text","start"),e.dataTransfer.setDragImage(dragRef.current,0,0))}),(0,jsx_runtime.jsx)("div",{className:"w-1 cursor-ew-resize bg-primary-500 h-6",draggable:!0,"data-pos":"end",onDrag:changePeriod,onDragStart:e=>dragRef.current&&(e.dataTransfer.setData("text","end"),e.dataTransfer.setDragImage(dragRef.current,0,0))})]}),state.isPlaying&&(0,jsx_runtime.jsx)("div",{className:"w-0.5 cursor-ew-resize bg-white h-6 absolute",style:{insetInlineStart:state.time/state.duration*100+"%"}})]}),(0,jsx_runtime.jsx)("span",{className:"text-dimmed text-xs px-1",children:`${dist_esm.yL.duration(end,!0)}`}),(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"toggle-cut",onClick:()=>onCut(start,end),icon:esm.OO.tick})]})};try{CutStrip.displayName="CutStrip",CutStrip.__docgenInfo={description:"",displayName:"CutStrip",props:{onCut:{defaultValue:null,description:"",name:"onCut",required:!0,type:{name:"(start: number, end: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/video/CutStrip.tsx#CutStrip"]={docgenInfo:CutStrip.__docgenInfo,name:"CutStrip",path:"packages/media/src/video/CutStrip.tsx#CutStrip"})}catch(__react_docgen_typescript_loader_error){}const video_Tools_Tools=({hasVtt=!1,markers,annotations=[],onAnnotationChange,onCut})=>{const{videoRef,state,fitToSize,fitToView,toggleFit,toggleVtt}=useVideoContext(),canvasRef=(0,react.useRef)(null),[cut,setCut]=(0,react.useState)(!1),drawMarkers=(0,react.useCallback)((()=>{const context=canvasRef.current?.getContext("2d");null!=context&&state.duration>0&&markers?.forEach((marker=>{const[time,size]=marker,{width,height}=context?.canvas,left=time/state.duration*width,h=height*size;context&&(context.strokeStyle="#fc0000"),context?.strokeRect(left,height-h,1,h)}))}),[markers,state.duration]);(0,react.useEffect)((()=>{const resize=()=>{null!=canvasRef.current&&(canvasRef.current.width=canvasRef.current.offsetWidth,canvasRef.current.height=canvasRef.current.offsetHeight,drawMarkers())},ob=new ResizeObserver(resize);return null!=canvasRef.current&&ob.observe(canvasRef.current),resize(),()=>{ob.disconnect()}}),[drawMarkers]),(0,react.useEffect)((()=>{const context=canvasRef.current?.getContext("2d");return drawMarkers(),()=>{context?.clearRect(0,0,context.canvas.width,context.canvas.height)}}),[drawMarkers]);const volumeIcon=(0,react.useMemo)((()=>0===state.volume?esm.OO.mediaVolume0:state.volume<=.4?esm.OO.mediaVolume1:state.volume<=.7?esm.OO.mediaVolume2:esm.OO.mediaVolume3),[state.volume]),handlers=(0,react.useMemo)((()=>({toggleFit:()=>toggleFit(),toggleVtt:()=>toggleVtt(),pause:()=>videoRef.current?.pause(),togglePlay:async()=>videoRef.current?.paused?await(videoRef.current?.play()):videoRef.current?.pause(),mute:()=>videoRef.current&&(videoRef.current.volume=0===videoRef.current.volume?.5:0),volumeUp:()=>videoRef.current&&videoRef.current.volume<1&&(videoRef.current.volume=Math.min(1,videoRef.current.volume+.1)),volumeDown:()=>videoRef.current&&videoRef.current.volume>0&&(videoRef.current.volume=Math.max(0,videoRef.current.volume-.1)),jumpDown:()=>videoRef.current&&videoRef.current.currentTime>0&&(videoRef.current.currentTime-=1),jumpUp:()=>videoRef.current&&(videoRef.current.currentTime+=1),seekDown:()=>videoRef.current&&videoRef.current.currentTime>0&&(videoRef.current.currentTime-=.165),seekUp:()=>videoRef.current&&(videoRef.current.currentTime+=.165),speedDown:()=>videoRef.current&&videoRef.current.playbackRate>0&&(videoRef.current.playbackRate-=.5),speedUp:()=>videoRef.current&&videoRef.current.playbackRate<5&&(videoRef.current.playbackRate+=.5),cutStart:()=>setCut(!0),cutStop:()=>setCut(!1)})),[]),updateAnnotation=(0,react.useCallback)(((text,index=-1)=>{if(text)if(-1===index)onAnnotationChange?.([...annotations,[videoRef.current?.currentTime??0,text]]);else{const newAnnotations=[...annotations];"[DELETE]"===text?newAnnotations.splice(index,1):newAnnotations[index][1]=text,onAnnotationChange?.(newAnnotations)}}),[annotations]);return(0,jsx_runtime.jsxs)(esm.wi,{flex:!0,className:"gap-0 select-none",children:[state.isLoaded&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"space",handler:handlers.togglePlay}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"f",handler:handlers.toggleFit}),onCut&&(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"x",handler:handlers.cutStart}),onCut&&(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"escape",handler:handlers.cutStop}),hasVtt&&(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"c",handler:handlers.toggleVtt}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"0",handler:handlers.mute}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:",",handler:handlers.jumpDown}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:".",handler:handlers.jumpUp}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"-",handler:handlers.volumeDown}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"=",handler:handlers.volumeUp}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"shift+{",handler:handlers.speedDown}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"shift+}",handler:handlers.speedUp}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"shift+<",handler:handlers.seekDown}),(0,jsx_runtime.jsx)(esm.B9,{global:!0,keyCombo:"shift+>",handler:handlers.seekUp})]}),!cut&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"togglePlay",onClick:handlers.togglePlay,disabled:!state.isLoaded,icon:state.isPlaying?esm.OO.mediaPause:esm.OO.mediaPlay}),(0,jsx_runtime.jsx)(MiniSlider,{icon:volumeIcon,value:state.volume,disabled:!state.isLoaded,max:1,onClick:()=>{const v=1===state.volume?0:state.volume>=.5?1:.5;videoRef.current&&(videoRef.current.volume=v)},onChange:v=>videoRef.current&&(videoRef.current.volume=v)}),(0,jsx_runtime.jsx)(MiniSlider,{icon:`${state.speed.toFixed(1)}x`,value:state.speed,disabled:!state.isLoaded,max:5,min:.1,textIcon:!0,onClick:()=>{const v=state.speed>=2?.5:state.speed>=1.5?2:state.speed>=1?1.5:state.volume>=.5?1:.5;videoRef.current&&(videoRef.current.playbackRate=v)},onChange:v=>videoRef.current&&(videoRef.current.playbackRate=v)}),(0,jsx_runtime.jsx)(esm.cG,{vertical:!0}),(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"fit-to-view",onClick:fitToView,disabled:!state.isLoaded,icon:esm.OO.mediaFitToView}),(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"fit-to-size",onClick:fitToSize,disabled:!state.isLoaded,icon:esm.OO.mediaAspect}),(0,jsx_runtime.jsx)(esm.cG,{vertical:!0}),onAnnotationChange&&(0,jsx_runtime.jsx)(AnnotationTool,{onChange:updateAnnotation,onOpen:handlers.pause}),onCut&&(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"toggle-cut",onClick:()=>setCut(!0),disabled:!state.isLoaded,icon:esm.OO.cut}),hasVtt&&(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"toggle-vtt",onClick:toggleVtt,disabled:!state.isLoaded,icon:state.showVtt?esm.OO.mediaCaptionOn:esm.OO.mediaCaptionOff}),(0,jsx_runtime.jsxs)(TimeSlider,{time:state.time,duration:state.duration,onChange:time=>videoRef.current&&(videoRef.current.currentTime=time),children:[(0,jsx_runtime.jsx)("canvas",{ref:canvasRef,className:"pointer-events-none absolute inset-y-0 inset-x-px w-full h-full block mix-blend-color-dodge"}),annotations?.map((([time,text],idx)=>(0,jsx_runtime.jsx)(AnnotationTag,{time,text,duration:state.duration,onPlay:()=>[videoRef.current&&(videoRef.current.currentTime=time),videoRef.current?.play()],onDelete:()=>updateAnnotation("[DELETE]",idx),onChange:t=>updateAnnotation(t,idx)},idx)))]})]}),cut&&(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(CutStrip,{onCut:(start,end)=>[onCut?.(start,end),setCut(!1)]}),(0,jsx_runtime.jsx)(esm.$n,{variant:"link","aria-label":"toggle-cut",onClick:()=>setCut(!1),disabled:!state.isLoaded,icon:esm.OO.close})]})]})};try{video_Tools_Tools.displayName="Tools",video_Tools_Tools.__docgenInfo={description:"",displayName:"Tools",props:{hasVtt:{defaultValue:{value:"false"},description:"",name:"hasVtt",required:!1,type:{name:"boolean"}},onCut:{defaultValue:null,description:"",name:"onCut",required:!1,type:{name:"((start: number, end: number) => void)"}},markers:{defaultValue:null,description:"timeline markers",name:"markers",required:!1,type:{name:"[time: number, score: number][]"}},annotations:{defaultValue:{value:"[]"},description:"annotation list",name:"annotations",required:!1,type:{name:"[time: number, text: string][]"}},onAnnotationChange:{defaultValue:null,description:"",name:"onAnnotationChange",required:!1,type:{name:"((annotations: [time: number, text: string][]) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/video/Tools.tsx#Tools"]={docgenInfo:video_Tools_Tools.__docgenInfo,name:"Tools",path:"packages/media/src/video/Tools.tsx#Tools"})}catch(__react_docgen_typescript_loader_error){}const Video=({poster,vttText})=>{const{videoRef,scrollerRef,state,handleLoad,handleMetadata,handleError,handlePlay,handlePause,handleRateChange,handleVolumeChange,handleSeeking,handleTimeUpdate}=useVideoContext(),{canvasRef}=useCanvasContext(),togglePlay=(0,react.useCallback)((async()=>videoRef.current?.paused?await(videoRef.current?.play()):videoRef.current?.pause()),[]),[vttSrc,setVtt]=(0,react.useState)();return(0,react.useEffect)((()=>{if(vttText&&state.showVtt){const vtt=URL.createObjectURL(new Blob([vttText],{type:"text/vtt"}));return setVtt(vtt),()=>{setVtt(void 0),URL.revokeObjectURL(vtt)}}}),[vttText,state.showVtt]),(0,jsx_runtime.jsx)("div",{role:"none",ref:scrollerRef,onClick:togglePlay,className:"area-content overflow-hidden relative scroll-hide grid bg-tint-50 select-none p-[8px]",children:(0,jsx_runtime.jsxs)(esm.tH,{children:[(0,jsx_runtime.jsx)("div",{className:"relative overflow-hidden m-auto grid place-content-center size-full",style:{width:state.width,height:state.height},children:(0,jsx_runtime.jsxs)("div",{className:"origin-center relative pointer-events-none",style:{width:state.videoWidth,height:state.videoHeight,transform:`rotate(${state.rotate}deg)`},children:[state.src&&(0,jsx_runtime.jsxs)("video",{poster,onLoadedMetadata:handleMetadata,onLoadedData:handleLoad,onError:handleError,ref:videoRef,className:"object-contain size-full",onPlay:handlePlay,onPause:handlePause,onRateChange:handleRateChange,onVolumeChange:handleVolumeChange,onSeeking:handleSeeking,onTimeUpdate:handleTimeUpdate,children:[state.src&&(0,jsx_runtime.jsx)("source",{src:state.src}),(0,jsx_runtime.jsx)("track",{kind:"captions",src:vttSrc,default:!0})]}),(0,jsx_runtime.jsx)("canvas",{ref:canvasRef,width:state.videoWidth,height:state.videoHeight,className:"absolute inset-0"})]})}),state.isLoading&&(0,jsx_runtime.jsx)(esm.bm,{})]})})};try{Video.displayName="Video",Video.__docgenInfo={description:"",displayName:"Video",props:{poster:{defaultValue:null,description:"",name:"poster",required:!1,type:{name:"string"}},vttText:{defaultValue:null,description:"",name:"vttText",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/video/Video.tsx#Video"]={docgenInfo:Video.__docgenInfo,name:"Video",path:"packages/media/src/video/Video.tsx#Video"})}catch(__react_docgen_typescript_loader_error){}const VideoPlayer=({nsfw,poster,vttText,markers,annotations,onAnnotationChange,onCut,...props})=>(0,jsx_runtime.jsx)(esm.NP,{colorScheme:"dark",children:(0,jsx_runtime.jsx)(VideoProvider,{...props,children:(0,jsx_runtime.jsxs)(esm.wn,{dir:"ltr",children:[(0,jsx_runtime.jsx)(Video,{poster,vttText}),(0,jsx_runtime.jsx)(video_Tools_Tools,{hasVtt:!!vttText,markers,annotations,onAnnotationChange,onCut}),nsfw&&(0,jsx_runtime.jsx)(NsfwOverlay,{})]})})});try{VideoPlayer.displayName="VideoPlayer",VideoPlayer.__docgenInfo={description:"",displayName:"VideoPlayer",props:{src:{defaultValue:null,description:"video source",name:"src",required:!0,type:{name:"string"}},poster:{defaultValue:null,description:"video poster",name:"poster",required:!1,type:{name:"string"}},fallback:{defaultValue:null,description:"fallback alternate source",name:"fallback",required:!1,type:{name:"string"}},nsfw:{defaultValue:null,description:"NSFW overlay",name:"nsfw",required:!1,type:{name:"boolean"}},vttText:{defaultValue:null,description:"",name:"vttText",required:!1,type:{name:"string"}},markers:{defaultValue:null,description:"timeline markers",name:"markers",required:!1,type:{name:"[time: number, score: number][]"}},annotations:{defaultValue:null,description:"annotation list",name:"annotations",required:!1,type:{name:"[time: number, text: string][]"}},onAnnotationChange:{defaultValue:null,description:"",name:"onAnnotationChange",required:!1,type:{name:"((annotations: [time: number, text: string][]) => void)"}},onCut:{defaultValue:null,description:"",name:"onCut",required:!1,type:{name:"((start: number, end: number) => void)"}},onLoad:{defaultValue:null,description:"error handler",name:"onLoad",required:!1,type:{name:"(() => void)"}},onError:{defaultValue:null,description:"error handler",name:"onError",required:!1,type:{name:"(() => void)"}},onChange:{defaultValue:null,description:"onChange playback time",name:"onChange",required:!1,type:{name:"((currentTime: number) => void)"}},onPlay:{defaultValue:null,description:"play handler",name:"onPlay",required:!1,type:{name:"(() => void)"}},onPause:{defaultValue:null,description:"pause handler",name:"onPause",required:!1,type:{name:"(() => void)"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<VideoPlayerRef>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/video/VideoPlayer.tsx#VideoPlayer"]={docgenInfo:VideoPlayer.__docgenInfo,name:"VideoPlayer",path:"packages/media/src/video/VideoPlayer.tsx#VideoPlayer"})}catch(__react_docgen_typescript_loader_error){}var Thumbnail_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./packages/media/src/thumbnail/Thumbnail.module.css"),Thumbnail_module_options={};Thumbnail_module_options.styleTagTransform=styleTagTransform_default(),Thumbnail_module_options.setAttributes=setAttributesWithoutAttributes_default(),Thumbnail_module_options.insert=insertBySelector_default().bind(null,"head"),Thumbnail_module_options.domAPI=styleDomAPI_default(),Thumbnail_module_options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(Thumbnail_module.A,Thumbnail_module_options);const thumbnail_Thumbnail_module=Thumbnail_module.A&&Thumbnail_module.A.locals?Thumbnail_module.A.locals:void 0,Thumbnail=({src,nsfw,fallback,videoReel,height,className,width="8rem"})=>{const[state,dispatch]=(0,react.useReducer)(((state,action)=>"reset"===action.type?{src,errorLevel:0,colorScheme:"light",loading:!0,transparent:!1}:"loaded"===action.type?{...state,colorScheme:action.colorScheme,transparent:action.colorScheme.includes("transparent"),loading:!1}:"colorScheme"===action.type?{...state,colorScheme:"light_transparent"===state.colorScheme?"dark_transparent":"light_transparent"}:"errored"===action.type?(state.errorLevel++,1===state.errorLevel&&(fallback||state.errorLevel++,state.src=fallback),2===state.errorLevel&&(state.loading=!1),{...state}):{...state}),{src,loading:!0,errorLevel:0,transparent:!1,colorScheme:"light"});return(0,jsx_runtime.jsxs)("div",{className:classnames_default()(thumbnail_Thumbnail_module.thumbnail,className,videoReel&&thumbnail_Thumbnail_module.reel,"overflow-hidden relative grid place-content-center shadow-base p-1 shadow-inset","light_transparent"===state.colorScheme&&"bg-dark","dark_transparent"===state.colorScheme&&"bg-light"),style:{width,height:height??((0,dist_esm.Et)(width)?1.325*width:`calc(${width} * 1.325)`)},children:[2!==state.errorLevel&&(0,jsx_runtime.jsx)("img",{className:"max-w-full max-h-full object-contain text-transparent overflow-hidden",alt:src,loading:"lazy",src:state.src,crossOrigin:"anonymous",onLoad:e=>{dispatch({type:"loaded",colorScheme:(0,dist_esm.TP)(e.currentTarget)})},width:2===state.errorLevel?48:void 0,onError:()=>dispatch({type:"errored"})}),2===state.errorLevel&&(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.mediaImageBroken,color:"muted",size:"3rem"}),state.transparent&&(0,jsx_runtime.jsx)(esm.In,{icon:esm.OO.mediaContrast,className:classnames_default()(thumbnail_Thumbnail_module.contrastAction,"absolute bottom-2 end-2"),onClick:()=>dispatch({type:"colorScheme"})}),nsfw&&(0,jsx_runtime.jsx)(NsfwOverlay,{size:"sm"}),state.loading&&(0,jsx_runtime.jsx)(esm.Cv,{size:"1.5rem"})]})};try{Thumbnail.displayName="Thumbnail",Thumbnail.__docgenInfo={description:"media thumbnail with fallback source",displayName:"Thumbnail",props:{src:{defaultValue:null,description:"original source",name:"src",required:!0,type:{name:"string"}},fallback:{defaultValue:null,description:"fallback alternate source",name:"fallback",required:!1,type:{name:"string"}},nsfw:{defaultValue:null,description:"NSFW overlay",name:"nsfw",required:!1,type:{name:"boolean"}},videoReel:{defaultValue:null,description:"decorate like video reel",name:"videoReel",required:!1,type:{name:"boolean"}},width:{defaultValue:{value:"8rem"},description:"width",name:"width",required:!1,type:{name:"string | number"}},height:{defaultValue:null,description:"height, defaults to 1.325 * width",name:"height",required:!1,type:{name:"string | number"}},className:{defaultValue:null,description:"css classname(s)",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/media/src/thumbnail/Thumbnail.tsx#Thumbnail"]={docgenInfo:Thumbnail.__docgenInfo,name:"Thumbnail",path:"packages/media/src/thumbnail/Thumbnail.tsx#Thumbnail"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./packages/media/src/sliders/TimeSlider.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,'/*\n * React Fabric\n * @version: 1.0.0\n *\n *\n * The MIT License (MIT)\n * Copyright (c) 2024 Adarsh Pastakia\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software\n * and associated documentation files (the "Software"), to deal in the Software without restriction,\n * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial\n * portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\n * TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n@layer comp {\n  .UJv3lY5Y1IdEdqEs8eVK {\n    position: relative;\n\n    overflow: hidden;\n    flex: 1 1 1em;\n\n    color: color(from var(--primary) srgb r g b / 1);\n\n    -webkit-appearance: none;\n\n       -moz-appearance: none;\n\n            appearance: none;\n    border-radius: 999px;\n  }\n\n    .UJv3lY5Y1IdEdqEs8eVK::-webkit-slider-thumb {\n      cursor: pointer;\n\n      position: relative;\n\n      width: 1rem;\n      height: 1rem;\n\n      -webkit-appearance: none;\n\n              appearance: none;\n      opacity: 0.7;\n      background: color(from var(--primary) srgb r g b / 1);\n      clip-path: polygon(\n        100% -1px,\n        0.125rem -1px,\n        0 0.375rem,\n        -100vmax 0.375rem,\n        -100vmax 0.625rem,\n        0 0.625rem,\n        0.125rem 100%,\n        calc(100% + 1px) calc(100% + 1px)\n      );\n      filter: brightness(100%);\n      border: 1px solid color-mix(in lab, color(from var(--tint) srgb r g b / 1) 10%,  color(from var(--fabric-bg) srgb r g b / 1));\n      border-radius: 0.5rem;\n      box-shadow: calc(-100vmax - 1rem) 0 0 100vmax currentColor;\n    }\n\n      .UJv3lY5Y1IdEdqEs8eVK::-webkit-slider-thumb:hover {\n        background: color-mix(in lab, color(from var(--primary) srgb r g b / 1) 80%,  color(from var(--fabric-text) srgb r g b / 1));\n      }\n\n    .UJv3lY5Y1IdEdqEs8eVK::-webkit-slider-runnable-track {\n      height: 1rem;\n      background: linear-gradient(color-mix(in lab, color(from var(--tint) srgb r g b / 1) 27%,  color(from var(--fabric-bg) srgb r g b / 1)) 0 0) scroll no-repeat\n        center / 100% 0.25rem;\n      border-radius: 99px;\n    }\n\n  .BPVkjUzo2jaZzKpheKT1 {\n    height: 1.5rem;\n    color: color(from var(--primary) srgb r g b / 70%);\n    border-radius: 2px;\n  }\n\n    .BPVkjUzo2jaZzKpheKT1::-webkit-slider-thumb {\n      cursor: ew-resize;\n\n      width: 0.375rem;\n      height: 2rem;\n\n      opacity: 1;\n      background: color-mix(in lab, color(from var(--tint) srgb r g b / 70%) 62%,  color(from var(--fabric-bg) srgb r g b / 70%));\n      clip-path: unset;\n      border-radius: 0;\n      box-shadow: calc(-100vmax - 0.25rem) 0 0 100vmax currentColor;\n    }\n\n      .BPVkjUzo2jaZzKpheKT1::-webkit-slider-thumb:hover {\n        background: color-mix(in lab, color(from var(--tint) srgb r g b / 1) 62%,  color(from var(--fabric-bg) srgb r g b / 1));\n      }\n\n    .BPVkjUzo2jaZzKpheKT1::-webkit-slider-runnable-track {\n      height: 2rem;\n      background: linear-gradient(color-mix(in lab, color(from var(--tint) srgb r g b / 1) 27%,  color(from var(--fabric-bg) srgb r g b / 1)) 0 0) scroll no-repeat\n        center / 100% 2rem;\n      border-radius: 2px;\n    }\n}\n\n@layer var {\n    .ccJNTxgFCjBd_bea1zUS > button {\n      justify-content: center;\n      width: 2rem;\n      height: 2rem;\n    }\n\n    .ccJNTxgFCjBd_bea1zUS dfn {\n      margin-inline-start: -0.25rem;\n      padding: 0;\n      font-size: 2.5rem;\n    }\n}\n',"",{version:3,sources:["webpack://./packages/media/src/sliders/TimeSlider.module.css"],names:[],mappings:"AAAA;;;;;;;;;;;;;;;;;;;;;EAqBE;;AAEF;EACE;IACE,kBAAkB;;IAElB,gBAAgB;IAChB,aAAa;;IAEb,gDAAgC;;IAEhC,wBAAgB;;OAAhB,qBAAgB;;YAAhB,gBAAgB;IAChB,oBAAoB;EAuCtB;;IArCE;MACE,eAAe;;MAEf,kBAAkB;;MAElB,WAAW;MACX,YAAY;;MAEZ,wBAAgB;;cAAhB,gBAAgB;MAChB,YAAY;MACZ,qDAAqC;MACrC;;;;;;;;;OASC;MACD,wBAAwB;MACxB,6HAAuC;MACvC,qBAAqB;MACrB,0DAA0D;IAK5D;;MAHE;QACE,4HAAqC;MACvC;;IAGF;MACE,YAAY;MACZ;6BACuB;MACvB,mBAAmB;IACrB;;EAGF;IACE,cAAc;IACd,kDAAoC;IACpC,kBAAkB;EAyBpB;;IAvBE;MACE,iBAAiB;;MAEjB,eAAe;MACf,YAAY;;MAEZ,UAAU;MACV,2HAAsC;MACtC,gBAAgB;MAChB,gBAAgB;MAChB,6DAA6D;IAK/D;;MAHE;QACE,uHAAkC;MACpC;;IAGF;MACE,YAAY;MACZ;0BACoB;MACpB,kBAAkB;IACpB;AAEJ;;AAEA;IAEI;MACE,uBAAuB;MACvB,WAAW;MACX,YAAY;IACd;;IAEA;MACE,6BAA6B;MAC7B,UAAU;MACV,iBAAiB;IACnB;AAEJ",sourcesContent:['/*\n * React Fabric\n * @version: 1.0.0\n *\n *\n * The MIT License (MIT)\n * Copyright (c) 2024 Adarsh Pastakia\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software\n * and associated documentation files (the "Software"), to deal in the Software without restriction,\n * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial\n * portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\n * TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n@layer comp {\n  .slider {\n    position: relative;\n\n    overflow: hidden;\n    flex: 1 1 1em;\n\n    color: theme(colors.primary.500);\n\n    appearance: none;\n    border-radius: 999px;\n\n    &::-webkit-slider-thumb {\n      cursor: pointer;\n\n      position: relative;\n\n      width: 1rem;\n      height: 1rem;\n\n      appearance: none;\n      opacity: 0.7;\n      background: theme(colors.primary.500);\n      clip-path: polygon(\n        100% -1px,\n        0.125rem -1px,\n        0 0.375rem,\n        -100vmax 0.375rem,\n        -100vmax 0.625rem,\n        0 0.625rem,\n        0.125rem 100%,\n        calc(100% + 1px) calc(100% + 1px)\n      );\n      filter: brightness(100%);\n      border: 1px solid theme(colors.tint.50);\n      border-radius: 0.5rem;\n      box-shadow: calc(-100vmax - 1rem) 0 0 100vmax currentColor;\n\n      &:hover {\n        background: theme(colors.primary.600);\n      }\n    }\n\n    &::-webkit-slider-runnable-track {\n      height: 1rem;\n      background: linear-gradient(theme(colors.tint.100) 0 0) scroll no-repeat\n        center / 100% 0.25rem;\n      border-radius: 99px;\n    }\n  }\n\n  .timeSlider {\n    height: 1.5rem;\n    color: theme(colors.primary.500/70%);\n    border-radius: 2px;\n\n    &::-webkit-slider-thumb {\n      cursor: ew-resize;\n\n      width: 0.375rem;\n      height: 2rem;\n\n      opacity: 1;\n      background: theme(colors.tint.300/70%);\n      clip-path: unset;\n      border-radius: 0;\n      box-shadow: calc(-100vmax - 0.25rem) 0 0 100vmax currentColor;\n\n      &:hover {\n        background: theme(colors.tint.300);\n      }\n    }\n\n    &::-webkit-slider-runnable-track {\n      height: 2rem;\n      background: linear-gradient(theme(colors.tint.100) 0 0) scroll no-repeat\n        center / 100% 2rem;\n      border-radius: 2px;\n    }\n  }\n}\n\n@layer var {\n  .btnTextIcon {\n    & > button {\n      justify-content: center;\n      width: 2rem;\n      height: 2rem;\n    }\n\n    dfn {\n      margin-inline-start: -0.25rem;\n      padding: 0;\n      font-size: 2.5rem;\n    }\n  }\n}\n'],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={slider:"UJv3lY5Y1IdEdqEs8eVK",timeSlider:"BPVkjUzo2jaZzKpheKT1",btnTextIcon:"ccJNTxgFCjBd_bea1zUS"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./packages/media/src/thumbnail/Thumbnail.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,'/*\n * React Fabric\n * @version: 1.0.0\n *\n *\n * The MIT License (MIT)\n * Copyright (c) 2024 Adarsh Pastakia\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software\n * and associated documentation files (the "Software"), to deal in the Software without restriction,\n * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial\n * portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\n * TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n@layer comp {\n  .UM4979_J9ZcWFVxfrDyR {\n    background-color: color-mix(in lab, color(from var(--tint) srgb r g b / 1) 10%,  color(from var(--fabric-bg) srgb r g b / 1));\n  }\n      .UM4979_J9ZcWFVxfrDyR.bg-dark .geFzdLv3ohVa8_i2oOZQ {\n        color: white;\n      }\n      .UM4979_J9ZcWFVxfrDyR.bg-light .geFzdLv3ohVa8_i2oOZQ {\n        color: black;\n      }\n      .UM4979_J9ZcWFVxfrDyR.Y6laB60v9PuCgf9WWJUA::after,\n      .UM4979_J9ZcWFVxfrDyR.Y6laB60v9PuCgf9WWJUA::before {\n        content: "";\n\n        position: absolute;\n        z-index: 2;\n        inset-inline: 0;\n\n        height: 0.5rem;\n\n        background-image: linear-gradient(\n          to right,\n          #53473ccc 0,\n          #53473ccc 0.375rem,\n          #fffc 0.375rem,\n          #fffc 0.75rem\n        );\n        background-repeat: repeat-x;\n        background-position: center center;\n        background-size: 0.75rem;\n        border: 0.125rem solid #53473ccc;\n      }\n\n      .UM4979_J9ZcWFVxfrDyR.Y6laB60v9PuCgf9WWJUA::before {\n        top: 0;\n        border-top-color: #080808cc;\n      }\n\n      .UM4979_J9ZcWFVxfrDyR.Y6laB60v9PuCgf9WWJUA::after {\n        bottom: 0;\n        border-bottom-color: #080808cc;\n      }\n}\n',"",{version:3,sources:["webpack://./packages/media/src/thumbnail/Thumbnail.module.css"],names:[],mappings:"AAAA;;;;;;;;;;;;;;;;;;;;;EAqBE;;AAEF;EACE;IACE,6HAAuC;EAgDzC;MA7CI;QACE,YAAY;MACd;MAIA;QACE,YAAY;MACd;MAIA;;QAEE,WAAW;;QAEX,kBAAkB;QAClB,UAAU;QACV,eAAe;;QAEf,cAAc;;QAEd;;;;;;SAMC;QACD,2BAA2B;QAC3B,kCAAkC;QAClC,wBAAwB;QACxB,gCAAgC;MAClC;;MAEA;QACE,MAAM;QACN,2BAA2B;MAC7B;;MAEA;QACE,SAAS;QACT,8BAA8B;MAChC;AAGN",sourcesContent:['/*\n * React Fabric\n * @version: 1.0.0\n *\n *\n * The MIT License (MIT)\n * Copyright (c) 2024 Adarsh Pastakia\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software\n * and associated documentation files (the "Software"), to deal in the Software without restriction,\n * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial\n * portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED\n * TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n@layer comp {\n  .thumbnail {\n    background-color: theme(colors.tint.50);\n\n    &:global(.bg-dark) {\n      .contrastAction {\n        color: white;\n      }\n    }\n\n    &:global(.bg-light) {\n      .contrastAction {\n        color: black;\n      }\n    }\n\n    &.reel {\n      &::after,\n      &::before {\n        content: "";\n\n        position: absolute;\n        z-index: 2;\n        inset-inline: 0;\n\n        height: 0.5rem;\n\n        background-image: linear-gradient(\n          to right,\n          #53473ccc 0,\n          #53473ccc 0.375rem,\n          #fffc 0.375rem,\n          #fffc 0.75rem\n        );\n        background-repeat: repeat-x;\n        background-position: center center;\n        background-size: 0.75rem;\n        border: 0.125rem solid #53473ccc;\n      }\n\n      &::before {\n        top: 0;\n        border-top-color: #080808cc;\n      }\n\n      &::after {\n        bottom: 0;\n        border-bottom-color: #080808cc;\n      }\n    }\n  }\n}\n'],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={thumbnail:"UM4979_J9ZcWFVxfrDyR",contrastAction:"geFzdLv3ohVa8_i2oOZQ",reel:"Y6laB60v9PuCgf9WWJUA"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);